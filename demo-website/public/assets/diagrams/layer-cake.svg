<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 420" width="600" height="420">
  <defs>
    <marker id="arrow-down" markerWidth="10" markerHeight="7" refX="5" refY="0" orient="auto">
      <polygon points="0 0, 10 0, 5 7" fill="#2F4F4F"/>
    </marker>
    <linearGradient id="grad-high" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#50C878;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3da85f;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-core" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90A4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3a7589;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-interp" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#7B68EE;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6352d0;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="120%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="600" height="420" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="300" y="30" text-anchor="middle" fill="#2F4F4F" font-family="system-ui, sans-serif" font-size="18" font-weight="600">PSD3 Architecture</text>

  <!-- HIGH-LEVEL APIs LAYER -->
  <g transform="translate(30, 50)">
    <!-- Layer background -->
    <rect x="0" y="0" width="540" height="100" rx="12" fill="url(#grad-high)" filter="url(#shadow)"/>

    <!-- Layer label -->
    <text x="20" y="25" fill="white" font-family="system-ui, sans-serif" font-size="12" font-weight="600" opacity="0.9">HIGH-LEVEL APIs</text>

    <!-- API boxes -->
    <g transform="translate(40, 40)">
      <rect x="0" y="0" width="130" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="65" y="28" text-anchor="middle" fill="#3da85f" font-family="monospace" font-size="14" font-weight="600">Tree API</text>
    </g>

    <g transform="translate(200, 40)">
      <rect x="0" y="0" width="130" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="65" y="28" text-anchor="middle" fill="#3da85f" font-family="monospace" font-size="14" font-weight="600">Scene API</text>
    </g>

    <g transform="translate(360, 40)">
      <rect x="0" y="0" width="150" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="75" y="28" text-anchor="middle" fill="#3da85f" font-family="monospace" font-size="14" font-weight="600">Simulation API</text>
    </g>
  </g>

  <!-- Arrows from high to core -->
  <path d="M 135 150 L 135 165 L 200 175" stroke="#2F4F4F" stroke-width="1.5" fill="none"/>
  <path d="M 295 150 L 295 175" stroke="#2F4F4F" stroke-width="1.5" fill="none"/>
  <path d="M 465 150 L 465 165 L 400 175" stroke="#2F4F4F" stroke-width="1.5" fill="none"/>

  <!-- CORE LAYER -->
  <g transform="translate(30, 180)">
    <rect x="0" y="0" width="540" height="90" rx="12" fill="url(#grad-core)" filter="url(#shadow)"/>

    <text x="20" y="25" fill="white" font-family="system-ui, sans-serif" font-size="12" font-weight="600" opacity="0.9">CORE ABSTRACTIONS</text>

    <g transform="translate(170, 35)">
      <rect x="0" y="0" width="200" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="100" y="28" text-anchor="middle" fill="#3a7589" font-family="monospace" font-size="14" font-weight="600">SelectionM</text>
    </g>
  </g>

  <!-- Arrow from core to interpreters -->
  <path d="M 300 270 L 300 290" stroke="#2F4F4F" stroke-width="1.5" fill="none"/>
  <circle cx="300" cy="295" r="4" fill="#2F4F4F"/>

  <!-- Fork lines to interpreters -->
  <path d="M 300 295 L 100 295 L 100 310" stroke="#2F4F4F" stroke-width="1.5" fill="none" marker-end="url(#arrow-down)"/>
  <path d="M 300 295 L 300 310" stroke="#2F4F4F" stroke-width="1.5" fill="none" marker-end="url(#arrow-down)"/>
  <path d="M 300 295 L 500 295 L 500 310" stroke="#2F4F4F" stroke-width="1.5" fill="none" marker-end="url(#arrow-down)"/>

  <!-- INTERPRETERS LAYER -->
  <g transform="translate(30, 315)">
    <rect x="0" y="0" width="540" height="90" rx="12" fill="url(#grad-interp)" filter="url(#shadow)"/>

    <text x="20" y="25" fill="white" font-family="system-ui, sans-serif" font-size="12" font-weight="600" opacity="0.9">INTERPRETERS</text>

    <g transform="translate(30, 35)">
      <rect x="0" y="0" width="100" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="50" y="28" text-anchor="middle" fill="#6352d0" font-family="monospace" font-size="13" font-weight="600">D3v2</text>
    </g>

    <g transform="translate(160, 35)">
      <rect x="0" y="0" width="100" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="50" y="28" text-anchor="middle" fill="#6352d0" font-family="monospace" font-size="13" font-weight="600">String</text>
    </g>

    <g transform="translate(290, 35)">
      <rect x="0" y="0" width="100" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="50" y="28" text-anchor="middle" fill="#6352d0" font-family="monospace" font-size="13" font-weight="600">Validate</text>
    </g>

    <g transform="translate(420, 35)">
      <rect x="0" y="0" width="100" height="45" rx="6" fill="white" opacity="0.95"/>
      <text x="50" y="28" text-anchor="middle" fill="#6352d0" font-family="monospace" font-size="11" font-weight="600">Custom...</text>
    </g>
  </g>

  <!-- Legend / key insight -->
  <text x="300" y="415" text-anchor="middle" fill="#708090" font-family="system-ui, sans-serif" font-size="11" font-style="italic">Write once at high level, run with any interpreter</text>
</svg>