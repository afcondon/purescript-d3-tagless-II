# Code Explorer V3 - Session Context

## Project Vision
"Shock and awe" demo of PSD3 library capabilities. Use-case: at-a-glance understanding and exploration of large codebases.

## Architecture
- **CodeExplorerV3.purs** - Main Halogen component with scene buttons
- **SimulationManager.purs/.js** - Own force loop using D3 forces (not D3's simulation)
- **OrchestrationV2.purs/.js** - Scene transitions, SVG/DOM management, hover highlighting
- **SceneConfigs.purs** - Scene definitions (Orbit, Tree, ForceGraph, BubblePack)
- **Spago/Model.purs** - Rich data model with positioning functions

## Scene Roadmap

### Scene 1: Orbit (WORKING)
- Packages on orbital ring, modules clustered around them

### Scene 2: Radial Tree ‚Üí Force Tree
- ‚úÖ Doubly-staggered formation transition
- ‚úÖ Swoopy ‚Üí straight link replacement
- ‚úÖ Force layout engagement
- ‚úÖ Hover highlighting (just added - upstream=blue, downstream=green, tree-child=orange)
- üîß Force layout tuning needed
- ‚ùå Click to filter + focus on upstream/downstream only

### Scene 3: BubblePack Internals (FUTURE)
- Each node becomes bubblepack showing internals (types, classes, functions)
- Hover internal circle ‚Üí cross-module dependency highlighting

## Key Files Modified This Session
- `demo-website/src/Component/CodeExplorerV2/OrchestrationV2.js` - Added hover handlers + highlight functions
- `demo-website/public/styles/spago.css` - Added highlight CSS classes

## Bundle Location
- Bundle to: `demo-website/public/bundle.js` (NOT docs/)
- Command: `spago bundle -p demo-website --module PSD3.Main --outfile demo-website/docs/bundle.js` then copy to `demo-website/public/bundle.js`
- Serve from: http://localhost:8089 (demo-website/public on port 8089)

## Data Flow
1. Load JSON from `./data/spago-data/` (modules.json, packages.json, lsdeps.jsonlines, LOC.json)
2. Build SpagoModel with graph infrastructure
3. Compute tree reduction from "PSD3.Main"
4. Initialize with Orbit scene
5. Transition between scenes via OrchestrationV2

## Current Todo
- [ ] Test hover highlighting
- [ ] Tune force layout settings for tree scene
- [ ] Add click-to-filter for focusing on upstream/downstream deps
