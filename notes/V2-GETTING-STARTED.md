# Getting Started with V2 Redesign

## What We've Accomplished

### 1. Project Structure âœ“
- Renamed `docs/` to `v1/` (preserves existing application)
- Created `v2/` directory with proper structure
- Set up symlinks for shared assets (data, d3 libraries, code examples)
- Both versions can coexist and be developed independently

### 2. Build Configuration âœ“
Updated `package.json` with dual-build support:

```bash
# Build only V1
npm run dev-v1

# Build only V2
npm run dev-v2

# Build both versions
npm run build && npm run bundle && npm run build-css
```

### 3. Documentation âœ“
Created comprehensive planning documents:
- **PageStructureProposal.md**: Complete redesign specification
- **SyntaxImprovements.md**: Analysis of chart API improvements
- **v2/README.md**: V2 architecture and development guide

### 4. Design System âœ“
Established visual identity in `v2/styles/main.css`:
- Color palette (D3 blue, PureScript green)
- Typography system (Inter, Fira Code)
- Responsive breakpoints
- CSS custom properties for theming
- Accessibility considerations

## What's Next: Phase 1 Implementation

### Week 1 Goals

#### 1. Basic Halogen Application
```purescript
-- Create: src/V2/Main.purs
-- Entry point for new application
-- Basic routing setup
```

#### 2. Gallery Component
```purescript
-- Create: src/V2/Components/Gallery.purs
-- Grid layout of example cards
-- Responsive design (mobile-first)
```

#### 3. Example Card Component
```purescript
-- Create: src/V2/Components/ExampleCard.purs
-- Thumbnail preview
-- Title, description, tags
-- Click handler for navigation
```

#### 4. Router Setup
```purescript
-- Create: src/V2/Router.purs
-- Routes: Home, Gallery, Example Detail
-- URL management
```

### Development Workflow

**Terminal 1: Watch PureScript**
```bash
spago build --watch
```

**Terminal 2: Watch CSS**
```bash
cd src/DemoApp/css
postcss src/index.css -o ../../../v2/bundle.css --watch
```

**Terminal 3: Local Server**
```bash
npx http-server . -p 8080
```

**Then visit:**
- V1: http://localhost:8080/v1/
- V2: http://localhost:8080/v2/

### Priority Tasks

1. **Create minimal Halogen app in V2**
   - Just render "Hello V2" to verify build pipeline works
   - Wire up to v2/index.html

2. **Implement basic routing**
   - Home route (/)
   - Gallery route (/gallery)
   - Example route (/example/:id)

3. **Build Gallery component**
   - Hardcode example metadata for now
   - Grid layout with CSS Grid
   - Placeholder thumbnails

4. **Create Example Card**
   - Display example info
   - Link to detail view
   - Hover effects

## File Structure Reference

```
v2/
â”œâ”€â”€ index.html                 # Entry point (already created)
â”œâ”€â”€ bundle.js                  # Compiled PS (generated by build)
â”œâ”€â”€ bundle.css                 # Compiled CSS (generated by build)
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ main.css              # Design system (already created)
â”œâ”€â”€ src/                      # PureScript source (TO CREATE)
â”‚   â”œâ”€â”€ Main.purs            # App entry point
â”‚   â”œâ”€â”€ Router.purs          # Routing logic
â”‚   â”œâ”€â”€ Types.purs           # Shared types
â”‚   â”œâ”€â”€ Components/
â”‚   â”‚   â”œâ”€â”€ Gallery.purs     # Gallery view
â”‚   â”‚   â”œâ”€â”€ ExampleCard.purs # Card component
â”‚   â”‚   â”œâ”€â”€ ExampleView.purs # Detail view (later)
â”‚   â”‚   â””â”€â”€ Navigation.purs  # Nav bar (later)
â”‚   â””â”€â”€ Data/
â”‚       â””â”€â”€ Examples.purs    # Example metadata
â”œâ”€â”€ assets/                   # Static assets
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ thumbnails/
â””â”€â”€ README.md                 # Architecture docs (already created)
```

## Example Metadata Structure

To start, create a simple registry of examples:

```purescript
-- src/V2/Data/Examples.purs
module V2.Data.Examples where

import Prelude

type ExampleId = String

type ExampleMetadata = {
  id :: ExampleId
, title :: String
, description :: String
, difficulty :: Difficulty
, category :: Category
, thumbnail :: String
}

data Difficulty = Beginner | Intermediate | Advanced
data Category = BasicChart | AdvancedLayout | Interactive | Interpreter | Application

allExamples :: Array ExampleMetadata
allExamples = [
  { id: "line-chart"
  , title: "Line Chart"
  , description: "Basic line chart with linear scales and axes"
  , difficulty: Beginner
  , category: BasicChart
  , thumbnail: "assets/thumbnails/line-chart.svg"
  }
  -- ... add more examples
]
```

## Testing the Setup

After creating the minimal V2 app:

1. **Build PureScript:**
   ```bash
   npm run build
   ```

2. **Bundle for V2:**
   ```bash
   npm run bundle-v2
   ```

3. **Build CSS:**
   ```bash
   npm run build-css-v2
   ```

4. **Serve and test:**
   ```bash
   npx http-server . -p 8080
   # Visit http://localhost:8080/v2/
   ```

5. **Verify:**
   - Page loads without errors
   - Halogen app mounts to #app element
   - Routing works
   - CSS loads correctly

## Key Principles

1. **Mobile-First**: Design for mobile, enhance for desktop
2. **Progressive Enhancement**: Basic functionality works everywhere
3. **Component Isolation**: Each component is self-contained
4. **Shared Code**: Reuse existing visualization code from v1
5. **Parallel Development**: V1 remains functional while building V2

## Resources

- [PageStructureProposal.md](./PageStructureProposal.md) - Full redesign plan
- [SyntaxImprovements.md](./SyntaxImprovements.md) - API improvements
- [v2/README.md](./v2/README.md) - V2 architecture details
- [Halogen Docs](https://purescript-halogen.github.io/purescript-halogen/)

## Questions to Consider

As you start implementation:

1. **Routing**: Use halogen-routing or a simpler approach?
2. **State Management**: Local component state or global app state?
3. **Example Rendering**: Reuse existing viz components or refactor?
4. **Thumbnail Generation**: Static images or dynamic SVG snapshots?
5. **Code Highlighting**: Prism.js (like v1) or try Highlight.js?

## Success Metrics

Phase 1 is complete when:
- [x] Project structure established
- [ ] Halogen app renders in V2
- [ ] Gallery view displays example cards
- [ ] Clicking a card navigates to (placeholder) detail view
- [ ] Responsive layout works on mobile, tablet, desktop
- [ ] Build pipeline works reliably

---

**Current Branch**: `feature/v2-redesign`

**Last Updated**: 2025-10-17

Ready to start coding! ðŸš€
