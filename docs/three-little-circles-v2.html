<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three Little Circles V2 - PSD3v2</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-top: 0;
        }
        .description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        svg {
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            background: white;
        }
        .tech-notes {
            margin-top: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #4CAF50;
            border-radius: 4px;
        }
        .tech-notes h3 {
            margin-top: 0;
            color: #4CAF50;
        }
        .tech-notes ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .tech-notes li {
            margin: 8px 0;
            color: #555;
        }
        code {
            background: #e8e8e8;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
    </style>
    <!-- D3.js -->
    <script src="./d3/d3.js"></script>
</head>
<body>
    <div class="container">
        <h1>Three Little Circles V2</h1>

        <div class="description">
            <p>This is the classic "Three Little Circles" example, reimplemented using <strong>PSD3v2</strong> -
            our new type-safe, phantom-typed selection API.</p>
            <p>Three circles with data values [32, 57, 293] are rendered. The radius of each circle
            is proportional to its data value.</p>
        </div>

        <!-- SVG container -->
        <svg id="viz" width="400" height="150"></svg>

        <div class="tech-notes">
            <h3>âœ¨ What's New in PSD3v2</h3>
            <ul>
                <li><strong>Phantom Type States:</strong> <code>SEmpty</code>, <code>SBound</code>, <code>SPending</code>, <code>SExiting</code> prevent invalid operations at compile time</li>
                <li><strong>Polymorphic Attributes:</strong> Smart constructors work with static values, datum functions, or indexed functions</li>
                <li><strong>Tagless Final:</strong> Write once, run with different interpreters (D3v2, String, Meta, etc.)</li>
                <li><strong>Type Inference:</strong> Datum types flow naturally - no manual coercion needed</li>
                <li><strong>renderData API:</strong> High-level enter/update/exit handling - no manual join management</li>
            </ul>
        </div>
    </div>

    <!-- PureScript bundle -->
    <script src="bundle.js"></script>
    <script>
        // Run the ThreeLittleCirclesV2 example
        window.addEventListener('DOMContentLoaded', function() {
            console.log('Running ThreeLittleCirclesV2...');
            try {
                // Call through the D3v2 interpreter
                var runD3v2M = PS["PSD3v2.Interpreter.D3v2"].runD3v2M;
                var drawThreeCircles = PS["D3.Viz.ThreeLittleCirclesV2"].drawThreeCircles;
                runD3v2M(drawThreeCircles("#viz"))();
                console.log('ThreeLittleCirclesV2 rendered successfully!');
            } catch (error) {
                console.error('Error rendering ThreeLittleCirclesV2:', error);
            }
        });
    </script>
</body>
</html>
