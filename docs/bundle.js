/* Generated by Spago v0.93.44 */
(() => {
  // output/Control.Apply/foreign.js
  var arrayApply = function(fs) {
    return function(xs) {
      var l = fs.length;
      var k = xs.length;
      var result = new Array(l * k);
      var n = 0;
      for (var i2 = 0; i2 < l; i2++) {
        var f = fs[i2];
        for (var j = 0; j < k; j++) {
          result[n++] = f(xs[j]);
        }
      }
      return result;
    };
  };

  // output/Control.Semigroupoid/index.js
  var semigroupoidFn = {
    compose: function(f) {
      return function(g) {
        return function(x46) {
          return f(g(x46));
        };
      };
    }
  };

  // output/Control.Category/index.js
  var identity = function(dict) {
    return dict.identity;
  };
  var categoryFn = {
    identity: function(x46) {
      return x46;
    },
    Semigroupoid0: function() {
      return semigroupoidFn;
    }
  };

  // output/Data.Boolean/index.js
  var otherwise = true;

  // output/Data.Function/index.js
  var on = function(f) {
    return function(g) {
      return function(x46) {
        return function(y46) {
          return f(g(x46))(g(y46));
        };
      };
    };
  };
  var flip = function(f) {
    return function(b2) {
      return function(a2) {
        return f(a2)(b2);
      };
    };
  };
  var $$const = function(a2) {
    return function(v) {
      return a2;
    };
  };

  // output/Data.Functor/foreign.js
  var arrayMap = function(f) {
    return function(arr) {
      var l = arr.length;
      var result = new Array(l);
      for (var i2 = 0; i2 < l; i2++) {
        result[i2] = f(arr[i2]);
      }
      return result;
    };
  };

  // output/Data.Unit/foreign.js
  var unit = void 0;

  // output/Type.Proxy/index.js
  var $$Proxy = /* @__PURE__ */ (function() {
    function $$Proxy2() {
    }
    ;
    $$Proxy2.value = new $$Proxy2();
    return $$Proxy2;
  })();

  // output/Data.Functor/index.js
  var map = function(dict) {
    return dict.map;
  };
  var mapFlipped = function(dictFunctor) {
    var map130 = map(dictFunctor);
    return function(fa) {
      return function(f) {
        return map130(f)(fa);
      };
    };
  };
  var $$void = function(dictFunctor) {
    return map(dictFunctor)($$const(unit));
  };
  var voidLeft = function(dictFunctor) {
    var map130 = map(dictFunctor);
    return function(f) {
      return function(x46) {
        return map130($$const(x46))(f);
      };
    };
  };
  var voidRight = function(dictFunctor) {
    var map130 = map(dictFunctor);
    return function(x46) {
      return map130($$const(x46));
    };
  };
  var functorArray = {
    map: arrayMap
  };
  var flap = function(dictFunctor) {
    var map130 = map(dictFunctor);
    return function(ff2) {
      return function(x46) {
        return map130(function(f) {
          return f(x46);
        })(ff2);
      };
    };
  };

  // output/Control.Apply/index.js
  var identity2 = /* @__PURE__ */ identity(categoryFn);
  var applyArray = {
    apply: arrayApply,
    Functor0: function() {
      return functorArray;
    }
  };
  var apply = function(dict) {
    return dict.apply;
  };
  var applyFirst = function(dictApply) {
    var apply1 = apply(dictApply);
    var map97 = map(dictApply.Functor0());
    return function(a2) {
      return function(b2) {
        return apply1(map97($$const)(a2))(b2);
      };
    };
  };
  var applySecond = function(dictApply) {
    var apply1 = apply(dictApply);
    var map97 = map(dictApply.Functor0());
    return function(a2) {
      return function(b2) {
        return apply1(map97($$const(identity2))(a2))(b2);
      };
    };
  };
  var lift2 = function(dictApply) {
    var apply1 = apply(dictApply);
    var map97 = map(dictApply.Functor0());
    return function(f) {
      return function(a2) {
        return function(b2) {
          return apply1(map97(f)(a2))(b2);
        };
      };
    };
  };

  // output/Control.Applicative/index.js
  var pure = function(dict) {
    return dict.pure;
  };
  var unless = function(dictApplicative) {
    var pure121 = pure(dictApplicative);
    return function(v) {
      return function(v1) {
        if (!v) {
          return v1;
        }
        ;
        if (v) {
          return pure121(unit);
        }
        ;
        throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): " + [v.constructor.name, v1.constructor.name]);
      };
    };
  };
  var when = function(dictApplicative) {
    var pure121 = pure(dictApplicative);
    return function(v) {
      return function(v1) {
        if (v) {
          return v1;
        }
        ;
        if (!v) {
          return pure121(unit);
        }
        ;
        throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): " + [v.constructor.name, v1.constructor.name]);
      };
    };
  };
  var liftA1 = function(dictApplicative) {
    var apply7 = apply(dictApplicative.Apply0());
    var pure121 = pure(dictApplicative);
    return function(f) {
      return function(a2) {
        return apply7(pure121(f))(a2);
      };
    };
  };
  var applicativeArray = {
    pure: function(x46) {
      return [x46];
    },
    Apply0: function() {
      return applyArray;
    }
  };

  // output/Control.Bind/foreign.js
  var arrayBind = typeof Array.prototype.flatMap === "function" ? function(arr) {
    return function(f) {
      return arr.flatMap(f);
    };
  } : function(arr) {
    return function(f) {
      var result = [];
      var l = arr.length;
      for (var i2 = 0; i2 < l; i2++) {
        var xs = f(arr[i2]);
        var k = xs.length;
        for (var j = 0; j < k; j++) {
          result.push(xs[j]);
        }
      }
      return result;
    };
  };

  // output/Control.Bind/index.js
  var identity3 = /* @__PURE__ */ identity(categoryFn);
  var discard = function(dict) {
    return dict.discard;
  };
  var bindArray = {
    bind: arrayBind,
    Apply0: function() {
      return applyArray;
    }
  };
  var bind = function(dict) {
    return dict.bind;
  };
  var bindFlipped = function(dictBind) {
    return flip(bind(dictBind));
  };
  var composeKleisliFlipped = function(dictBind) {
    var bindFlipped12 = bindFlipped(dictBind);
    return function(f) {
      return function(g) {
        return function(a2) {
          return bindFlipped12(f)(g(a2));
        };
      };
    };
  };
  var composeKleisli = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(f) {
      return function(g) {
        return function(a2) {
          return bind121(f(a2))(g);
        };
      };
    };
  };
  var discardUnit = {
    discard: function(dictBind) {
      return bind(dictBind);
    }
  };
  var join = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(m) {
      return bind121(m)(identity3);
    };
  };

  // output/Data.Bounded/foreign.js
  var topInt = 2147483647;
  var bottomInt = -2147483648;
  var topChar = String.fromCharCode(65535);
  var bottomChar = String.fromCharCode(0);
  var topNumber = Number.POSITIVE_INFINITY;
  var bottomNumber = Number.NEGATIVE_INFINITY;

  // output/Data.Ord/foreign.js
  var unsafeCompareImpl = function(lt) {
    return function(eq25) {
      return function(gt) {
        return function(x46) {
          return function(y46) {
            return x46 < y46 ? lt : x46 === y46 ? eq25 : gt;
          };
        };
      };
    };
  };
  var ordIntImpl = unsafeCompareImpl;
  var ordNumberImpl = unsafeCompareImpl;
  var ordStringImpl = unsafeCompareImpl;
  var ordCharImpl = unsafeCompareImpl;

  // output/Data.Eq/foreign.js
  var refEq = function(r1) {
    return function(r2) {
      return r1 === r2;
    };
  };
  var eqBooleanImpl = refEq;
  var eqIntImpl = refEq;
  var eqNumberImpl = refEq;
  var eqCharImpl = refEq;
  var eqStringImpl = refEq;
  var eqArrayImpl = function(f) {
    return function(xs) {
      return function(ys) {
        if (xs.length !== ys.length) return false;
        for (var i2 = 0; i2 < xs.length; i2++) {
          if (!f(xs[i2])(ys[i2])) return false;
        }
        return true;
      };
    };
  };

  // output/Data.Symbol/index.js
  var reflectSymbol = function(dict) {
    return dict.reflectSymbol;
  };

  // output/Record.Unsafe/foreign.js
  var unsafeGet = function(label5) {
    return function(rec) {
      return rec[label5];
    };
  };
  var unsafeSet = function(label5) {
    return function(value18) {
      return function(rec) {
        var copy3 = {};
        for (var key in rec) {
          if ({}.hasOwnProperty.call(rec, key)) {
            copy3[key] = rec[key];
          }
        }
        copy3[label5] = value18;
        return copy3;
      };
    };
  };

  // output/Data.Eq/index.js
  var eqUnit = {
    eq: function(v) {
      return function(v1) {
        return true;
      };
    }
  };
  var eqString = {
    eq: eqStringImpl
  };
  var eqNumber = {
    eq: eqNumberImpl
  };
  var eqInt = {
    eq: eqIntImpl
  };
  var eqChar = {
    eq: eqCharImpl
  };
  var eqBoolean = {
    eq: eqBooleanImpl
  };
  var eq = function(dict) {
    return dict.eq;
  };
  var eq2 = /* @__PURE__ */ eq(eqBoolean);
  var eqArray = function(dictEq) {
    return {
      eq: eqArrayImpl(eq(dictEq))
    };
  };
  var notEq = function(dictEq) {
    var eq34 = eq(dictEq);
    return function(x46) {
      return function(y46) {
        return eq2(eq34(x46)(y46))(false);
      };
    };
  };

  // output/Data.Ordering/index.js
  var LT = /* @__PURE__ */ (function() {
    function LT2() {
    }
    ;
    LT2.value = new LT2();
    return LT2;
  })();
  var GT = /* @__PURE__ */ (function() {
    function GT2() {
    }
    ;
    GT2.value = new GT2();
    return GT2;
  })();
  var EQ = /* @__PURE__ */ (function() {
    function EQ2() {
    }
    ;
    EQ2.value = new EQ2();
    return EQ2;
  })();
  var eqOrdering = {
    eq: function(v) {
      return function(v1) {
        if (v instanceof LT && v1 instanceof LT) {
          return true;
        }
        ;
        if (v instanceof GT && v1 instanceof GT) {
          return true;
        }
        ;
        if (v instanceof EQ && v1 instanceof EQ) {
          return true;
        }
        ;
        return false;
      };
    }
  };

  // output/Data.Ring/foreign.js
  var intSub = function(x46) {
    return function(y46) {
      return x46 - y46 | 0;
    };
  };
  var numSub = function(n1) {
    return function(n2) {
      return n1 - n2;
    };
  };

  // output/Data.Semiring/foreign.js
  var intAdd = function(x46) {
    return function(y46) {
      return x46 + y46 | 0;
    };
  };
  var intMul = function(x46) {
    return function(y46) {
      return x46 * y46 | 0;
    };
  };
  var numAdd = function(n1) {
    return function(n2) {
      return n1 + n2;
    };
  };
  var numMul = function(n1) {
    return function(n2) {
      return n1 * n2;
    };
  };

  // output/Data.Semiring/index.js
  var zero = function(dict) {
    return dict.zero;
  };
  var semiringNumber = {
    add: numAdd,
    zero: 0,
    mul: numMul,
    one: 1
  };
  var semiringInt = {
    add: intAdd,
    zero: 0,
    mul: intMul,
    one: 1
  };
  var one = function(dict) {
    return dict.one;
  };
  var mul = function(dict) {
    return dict.mul;
  };
  var add = function(dict) {
    return dict.add;
  };

  // output/Data.Ring/index.js
  var sub = function(dict) {
    return dict.sub;
  };
  var ringNumber = {
    sub: numSub,
    Semiring0: function() {
      return semiringNumber;
    }
  };
  var ringInt = {
    sub: intSub,
    Semiring0: function() {
      return semiringInt;
    }
  };
  var negate = function(dictRing) {
    var sub1 = sub(dictRing);
    var zero4 = zero(dictRing.Semiring0());
    return function(a2) {
      return sub1(zero4)(a2);
    };
  };

  // output/Data.Ord/index.js
  var ordUnit = {
    compare: function(v) {
      return function(v1) {
        return EQ.value;
      };
    },
    Eq0: function() {
      return eqUnit;
    }
  };
  var ordString = /* @__PURE__ */ (function() {
    return {
      compare: ordStringImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqString;
      }
    };
  })();
  var ordNumber = /* @__PURE__ */ (function() {
    return {
      compare: ordNumberImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqNumber;
      }
    };
  })();
  var ordInt = /* @__PURE__ */ (function() {
    return {
      compare: ordIntImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqInt;
      }
    };
  })();
  var ordChar = /* @__PURE__ */ (function() {
    return {
      compare: ordCharImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqChar;
      }
    };
  })();
  var compare = function(dict) {
    return dict.compare;
  };
  var comparing = function(dictOrd) {
    var compare32 = compare(dictOrd);
    return function(f) {
      return function(x46) {
        return function(y46) {
          return compare32(f(x46))(f(y46));
        };
      };
    };
  };
  var greaterThanOrEq = function(dictOrd) {
    var compare32 = compare(dictOrd);
    return function(a1) {
      return function(a2) {
        var v = compare32(a1)(a2);
        if (v instanceof LT) {
          return false;
        }
        ;
        return true;
      };
    };
  };
  var max = function(dictOrd) {
    var compare32 = compare(dictOrd);
    return function(x46) {
      return function(y46) {
        var v = compare32(x46)(y46);
        if (v instanceof LT) {
          return y46;
        }
        ;
        if (v instanceof EQ) {
          return x46;
        }
        ;
        if (v instanceof GT) {
          return x46;
        }
        ;
        throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): " + [v.constructor.name]);
      };
    };
  };
  var min = function(dictOrd) {
    var compare32 = compare(dictOrd);
    return function(x46) {
      return function(y46) {
        var v = compare32(x46)(y46);
        if (v instanceof LT) {
          return x46;
        }
        ;
        if (v instanceof EQ) {
          return x46;
        }
        ;
        if (v instanceof GT) {
          return y46;
        }
        ;
        throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): " + [v.constructor.name]);
      };
    };
  };
  var abs = function(dictOrd) {
    var greaterThanOrEq1 = greaterThanOrEq(dictOrd);
    return function(dictRing) {
      var zero4 = zero(dictRing.Semiring0());
      var negate1 = negate(dictRing);
      return function(x46) {
        var $99 = greaterThanOrEq1(x46)(zero4);
        if ($99) {
          return x46;
        }
        ;
        return negate1(x46);
      };
    };
  };

  // output/Data.Bounded/index.js
  var top = function(dict) {
    return dict.top;
  };
  var boundedInt = {
    top: topInt,
    bottom: bottomInt,
    Ord0: function() {
      return ordInt;
    }
  };
  var boundedChar = {
    top: topChar,
    bottom: bottomChar,
    Ord0: function() {
      return ordChar;
    }
  };
  var bottom = function(dict) {
    return dict.bottom;
  };

  // output/Data.Show/foreign.js
  var showIntImpl = function(n) {
    return n.toString();
  };
  var showNumberImpl = function(n) {
    var str2 = n.toString();
    return isNaN(str2 + ".0") ? str2 : str2 + ".0";
  };
  var showStringImpl = function(s) {
    var l = s.length;
    return '"' + s.replace(
      /[\0-\x1F\x7F"\\]/g,
      // eslint-disable-line no-control-regex
      function(c, i2) {
        switch (c) {
          case '"':
          case "\\":
            return "\\" + c;
          case "\x07":
            return "\\a";
          case "\b":
            return "\\b";
          case "\f":
            return "\\f";
          case "\n":
            return "\\n";
          case "\r":
            return "\\r";
          case "	":
            return "\\t";
          case "\v":
            return "\\v";
        }
        var k = i2 + 1;
        var empty9 = k < l && s[k] >= "0" && s[k] <= "9" ? "\\&" : "";
        return "\\" + c.charCodeAt(0).toString(10) + empty9;
      }
    ) + '"';
  };
  var showArrayImpl = function(f) {
    return function(xs) {
      var ss = [];
      for (var i2 = 0, l = xs.length; i2 < l; i2++) {
        ss[i2] = f(xs[i2]);
      }
      return "[" + ss.join(",") + "]";
    };
  };

  // output/Data.Void/index.js
  var absurd = function(a2) {
    var spin = function($copy_v) {
      var $tco_result;
      function $tco_loop(v) {
        $copy_v = v;
        return;
      }
      ;
      while (true) {
        $tco_result = $tco_loop($copy_v);
      }
      ;
      return $tco_result;
    };
    return spin(a2);
  };

  // output/Data.Show/index.js
  var showString = {
    show: showStringImpl
  };
  var showNumber = {
    show: showNumberImpl
  };
  var showInt = {
    show: showIntImpl
  };
  var showBoolean = {
    show: function(v) {
      if (v) {
        return "true";
      }
      ;
      if (!v) {
        return "false";
      }
      ;
      throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): " + [v.constructor.name]);
    }
  };
  var show = function(dict) {
    return dict.show;
  };
  var showArray = function(dictShow) {
    return {
      show: showArrayImpl(show(dictShow))
    };
  };

  // output/Data.HeytingAlgebra/foreign.js
  var boolConj = function(b1) {
    return function(b2) {
      return b1 && b2;
    };
  };
  var boolDisj = function(b1) {
    return function(b2) {
      return b1 || b2;
    };
  };
  var boolNot = function(b2) {
    return !b2;
  };

  // output/Data.HeytingAlgebra/index.js
  var tt = function(dict) {
    return dict.tt;
  };
  var not = function(dict) {
    return dict.not;
  };
  var implies = function(dict) {
    return dict.implies;
  };
  var ff = function(dict) {
    return dict.ff;
  };
  var disj = function(dict) {
    return dict.disj;
  };
  var heytingAlgebraBoolean = {
    ff: false,
    tt: true,
    implies: function(a2) {
      return function(b2) {
        return disj(heytingAlgebraBoolean)(not(heytingAlgebraBoolean)(a2))(b2);
      };
    },
    conj: boolConj,
    disj: boolDisj,
    not: boolNot
  };
  var conj = function(dict) {
    return dict.conj;
  };
  var heytingAlgebraFunction = function(dictHeytingAlgebra) {
    var ff1 = ff(dictHeytingAlgebra);
    var tt1 = tt(dictHeytingAlgebra);
    var implies1 = implies(dictHeytingAlgebra);
    var conj1 = conj(dictHeytingAlgebra);
    var disj1 = disj(dictHeytingAlgebra);
    var not1 = not(dictHeytingAlgebra);
    return {
      ff: function(v) {
        return ff1;
      },
      tt: function(v) {
        return tt1;
      },
      implies: function(f) {
        return function(g) {
          return function(a2) {
            return implies1(f(a2))(g(a2));
          };
        };
      },
      conj: function(f) {
        return function(g) {
          return function(a2) {
            return conj1(f(a2))(g(a2));
          };
        };
      },
      disj: function(f) {
        return function(g) {
          return function(a2) {
            return disj1(f(a2))(g(a2));
          };
        };
      },
      not: function(f) {
        return function(a2) {
          return not1(f(a2));
        };
      }
    };
  };

  // output/Data.EuclideanRing/foreign.js
  var intDegree = function(x46) {
    return Math.min(Math.abs(x46), 2147483647);
  };
  var intDiv = function(x46) {
    return function(y46) {
      if (y46 === 0) return 0;
      return y46 > 0 ? Math.floor(x46 / y46) : -Math.floor(x46 / -y46);
    };
  };
  var intMod = function(x46) {
    return function(y46) {
      if (y46 === 0) return 0;
      var yy = Math.abs(y46);
      return (x46 % yy + yy) % yy;
    };
  };

  // output/Data.CommutativeRing/index.js
  var commutativeRingInt = {
    Ring0: function() {
      return ringInt;
    }
  };

  // output/Data.EuclideanRing/index.js
  var mod = function(dict) {
    return dict.mod;
  };
  var euclideanRingInt = {
    degree: intDegree,
    div: intDiv,
    mod: intMod,
    CommutativeRing0: function() {
      return commutativeRingInt;
    }
  };
  var div = function(dict) {
    return dict.div;
  };

  // output/Data.Semigroup/foreign.js
  var concatString = function(s1) {
    return function(s2) {
      return s1 + s2;
    };
  };
  var concatArray = function(xs) {
    return function(ys) {
      if (xs.length === 0) return ys;
      if (ys.length === 0) return xs;
      return xs.concat(ys);
    };
  };

  // output/Data.Semigroup/index.js
  var semigroupString = {
    append: concatString
  };
  var semigroupArray = {
    append: concatArray
  };
  var append = function(dict) {
    return dict.append;
  };

  // output/Data.Monoid/index.js
  var monoidString = {
    mempty: "",
    Semigroup0: function() {
      return semigroupString;
    }
  };
  var mempty = function(dict) {
    return dict.mempty;
  };

  // output/Data.Tuple/index.js
  var Tuple = /* @__PURE__ */ (function() {
    function Tuple2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Tuple2.create = function(value0) {
      return function(value1) {
        return new Tuple2(value0, value1);
      };
    };
    return Tuple2;
  })();
  var snd = function(v) {
    return v.value1;
  };
  var functorTuple = {
    map: function(f) {
      return function(m) {
        return new Tuple(m.value0, f(m.value1));
      };
    }
  };
  var fst = function(v) {
    return v.value0;
  };
  var eqTuple = function(dictEq) {
    var eq25 = eq(dictEq);
    return function(dictEq1) {
      var eq110 = eq(dictEq1);
      return {
        eq: function(x46) {
          return function(y46) {
            return eq25(x46.value0)(y46.value0) && eq110(x46.value1)(y46.value1);
          };
        }
      };
    };
  };
  var ordTuple = function(dictOrd) {
    var compare20 = compare(dictOrd);
    var eqTuple1 = eqTuple(dictOrd.Eq0());
    return function(dictOrd1) {
      var compare110 = compare(dictOrd1);
      var eqTuple2 = eqTuple1(dictOrd1.Eq0());
      return {
        compare: function(x46) {
          return function(y46) {
            var v = compare20(x46.value0)(y46.value0);
            if (v instanceof LT) {
              return LT.value;
            }
            ;
            if (v instanceof GT) {
              return GT.value;
            }
            ;
            return compare110(x46.value1)(y46.value1);
          };
        },
        Eq0: function() {
          return eqTuple2;
        }
      };
    };
  };

  // output/Control.Monad.State.Class/index.js
  var state = function(dict) {
    return dict.state;
  };
  var modify_ = function(dictMonadState) {
    var state1 = state(dictMonadState);
    return function(f) {
      return state1(function(s) {
        return new Tuple(unit, f(s));
      });
    };
  };
  var modify = function(dictMonadState) {
    var state1 = state(dictMonadState);
    return function(f) {
      return state1(function(s) {
        var s$prime = f(s);
        return new Tuple(s$prime, s$prime);
      });
    };
  };
  var gets = function(dictMonadState) {
    var state1 = state(dictMonadState);
    return function(f) {
      return state1(function(s) {
        return new Tuple(f(s), s);
      });
    };
  };
  var get = function(dictMonadState) {
    return state(dictMonadState)(function(s) {
      return new Tuple(s, s);
    });
  };

  // output/Control.Alt/index.js
  var altArray = {
    alt: /* @__PURE__ */ append(semigroupArray),
    Functor0: function() {
      return functorArray;
    }
  };
  var alt = function(dict) {
    return dict.alt;
  };

  // output/Data.Maybe/index.js
  var identity4 = /* @__PURE__ */ identity(categoryFn);
  var Nothing = /* @__PURE__ */ (function() {
    function Nothing2() {
    }
    ;
    Nothing2.value = new Nothing2();
    return Nothing2;
  })();
  var Just = /* @__PURE__ */ (function() {
    function Just2(value0) {
      this.value0 = value0;
    }
    ;
    Just2.create = function(value0) {
      return new Just2(value0);
    };
    return Just2;
  })();
  var maybe = function(v) {
    return function(v1) {
      return function(v2) {
        if (v2 instanceof Nothing) {
          return v;
        }
        ;
        if (v2 instanceof Just) {
          return v1(v2.value0);
        }
        ;
        throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
      };
    };
  };
  var isNothing = /* @__PURE__ */ maybe(true)(/* @__PURE__ */ $$const(false));
  var isJust = /* @__PURE__ */ maybe(false)(/* @__PURE__ */ $$const(true));
  var functorMaybe = {
    map: function(v) {
      return function(v1) {
        if (v1 instanceof Just) {
          return new Just(v(v1.value0));
        }
        ;
        return Nothing.value;
      };
    }
  };
  var map2 = /* @__PURE__ */ map(functorMaybe);
  var fromMaybe = function(a2) {
    return maybe(a2)(identity4);
  };
  var fromJust = function() {
    return function(v) {
      if (v instanceof Just) {
        return v.value0;
      }
      ;
      throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): " + [v.constructor.name]);
    };
  };
  var eqMaybe = function(dictEq) {
    var eq25 = eq(dictEq);
    return {
      eq: function(x46) {
        return function(y46) {
          if (x46 instanceof Nothing && y46 instanceof Nothing) {
            return true;
          }
          ;
          if (x46 instanceof Just && y46 instanceof Just) {
            return eq25(x46.value0)(y46.value0);
          }
          ;
          return false;
        };
      }
    };
  };
  var applyMaybe = {
    apply: function(v) {
      return function(v1) {
        if (v instanceof Just) {
          return map2(v.value0)(v1);
        }
        ;
        if (v instanceof Nothing) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    Functor0: function() {
      return functorMaybe;
    }
  };
  var bindMaybe = {
    bind: function(v) {
      return function(v1) {
        if (v instanceof Just) {
          return v1(v.value0);
        }
        ;
        if (v instanceof Nothing) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    Apply0: function() {
      return applyMaybe;
    }
  };
  var applicativeMaybe = /* @__PURE__ */ (function() {
    return {
      pure: Just.create,
      Apply0: function() {
        return applyMaybe;
      }
    };
  })();
  var altMaybe = {
    alt: function(v) {
      return function(v1) {
        if (v instanceof Nothing) {
          return v1;
        }
        ;
        return v;
      };
    },
    Functor0: function() {
      return functorMaybe;
    }
  };
  var plusMaybe = /* @__PURE__ */ (function() {
    return {
      empty: Nothing.value,
      Alt0: function() {
        return altMaybe;
      }
    };
  })();
  var alternativeMaybe = {
    Applicative0: function() {
      return applicativeMaybe;
    },
    Plus1: function() {
      return plusMaybe;
    }
  };

  // output/Debug/foreign.js
  var req = typeof module === "undefined" ? void 0 : module.require;
  var util = (function() {
    try {
      return req === void 0 ? void 0 : req("util");
    } catch (e) {
      return void 0;
    }
  })();
  function _trace(x46, k) {
    if (util !== void 0) {
      console.log(util.inspect(x46, { depth: null, colors: true }));
    } else {
      console.log(x46);
    }
    return k({});
  }
  function _spy(tag, x46) {
    if (util !== void 0) {
      console.log(tag + ":", util.inspect(x46, { depth: null, colors: true }));
    } else {
      console.log(tag + ":", x46);
    }
    return x46;
  }
  var now = (function() {
    var perf;
    if (typeof performance !== "undefined") {
      perf = performance;
    } else if (req) {
      try {
        perf = req("perf_hooks").performance;
      } catch (e) {
      }
    }
    return (function() {
      return (perf || Date).now();
    });
  })();

  // output/Data.Function.Uncurried/foreign.js
  var mkFn2 = function(fn) {
    return function(a2, b2) {
      return fn(a2)(b2);
    };
  };
  var runFn2 = function(fn) {
    return function(a2) {
      return function(b2) {
        return fn(a2, b2);
      };
    };
  };
  var runFn3 = function(fn) {
    return function(a2) {
      return function(b2) {
        return function(c) {
          return fn(a2, b2, c);
        };
      };
    };
  };
  var runFn4 = function(fn) {
    return function(a2) {
      return function(b2) {
        return function(c) {
          return function(d23) {
            return fn(a2, b2, c, d23);
          };
        };
      };
    };
  };
  var runFn5 = function(fn) {
    return function(a2) {
      return function(b2) {
        return function(c) {
          return function(d23) {
            return function(e) {
              return fn(a2, b2, c, d23, e);
            };
          };
        };
      };
    };
  };

  // output/Debug/index.js
  var trace = function() {
    return function(a2) {
      return function(k) {
        return _trace(a2, k);
      };
    };
  };
  var spy = function() {
    return function(tag) {
      return function(a2) {
        return _spy(tag, a2);
      };
    };
  };

  // output/Effect.Aff/foreign.js
  var Aff = (function() {
    var EMPTY = {};
    var PURE = "Pure";
    var THROW = "Throw";
    var CATCH = "Catch";
    var SYNC = "Sync";
    var ASYNC = "Async";
    var BIND = "Bind";
    var BRACKET = "Bracket";
    var FORK = "Fork";
    var SEQ = "Sequential";
    var MAP = "Map";
    var APPLY = "Apply";
    var ALT = "Alt";
    var CONS = "Cons";
    var RESUME = "Resume";
    var RELEASE = "Release";
    var FINALIZER = "Finalizer";
    var FINALIZED = "Finalized";
    var FORKED = "Forked";
    var FIBER = "Fiber";
    var THUNK = "Thunk";
    function Aff2(tag, _1, _2, _3) {
      this.tag = tag;
      this._1 = _1;
      this._2 = _2;
      this._3 = _3;
    }
    function AffCtr(tag) {
      var fn = function(_1, _2, _3) {
        return new Aff2(tag, _1, _2, _3);
      };
      fn.tag = tag;
      return fn;
    }
    function nonCanceler2(error4) {
      return new Aff2(PURE, void 0);
    }
    function runEff(eff) {
      try {
        eff();
      } catch (error4) {
        setTimeout(function() {
          throw error4;
        }, 0);
      }
    }
    function runSync(left4, right4, eff) {
      try {
        return right4(eff());
      } catch (error4) {
        return left4(error4);
      }
    }
    function runAsync(left4, eff, k) {
      try {
        return eff(k)();
      } catch (error4) {
        k(left4(error4))();
        return nonCanceler2;
      }
    }
    var Scheduler = (function() {
      var limit = 1024;
      var size6 = 0;
      var ix2 = 0;
      var queue = new Array(limit);
      var draining = false;
      function drain() {
        var thunk;
        draining = true;
        while (size6 !== 0) {
          size6--;
          thunk = queue[ix2];
          queue[ix2] = void 0;
          ix2 = (ix2 + 1) % limit;
          thunk();
        }
        draining = false;
      }
      return {
        isDraining: function() {
          return draining;
        },
        enqueue: function(cb) {
          var i2, tmp;
          if (size6 === limit) {
            tmp = draining;
            drain();
            draining = tmp;
          }
          queue[(ix2 + size6) % limit] = cb;
          size6++;
          if (!draining) {
            drain();
          }
        }
      };
    })();
    function Supervisor(util2) {
      var fibers = {};
      var fiberId = 0;
      var count = 0;
      return {
        register: function(fiber) {
          var fid = fiberId++;
          fiber.onComplete({
            rethrow: true,
            handler: function(result) {
              return function() {
                count--;
                delete fibers[fid];
              };
            }
          })();
          fibers[fid] = fiber;
          count++;
        },
        isEmpty: function() {
          return count === 0;
        },
        killAll: function(killError, cb) {
          return function() {
            if (count === 0) {
              return cb();
            }
            var killCount = 0;
            var kills = {};
            function kill2(fid) {
              kills[fid] = fibers[fid].kill(killError, function(result) {
                return function() {
                  delete kills[fid];
                  killCount--;
                  if (util2.isLeft(result) && util2.fromLeft(result)) {
                    setTimeout(function() {
                      throw util2.fromLeft(result);
                    }, 0);
                  }
                  if (killCount === 0) {
                    cb();
                  }
                };
              })();
            }
            for (var k in fibers) {
              if (fibers.hasOwnProperty(k)) {
                killCount++;
                kill2(k);
              }
            }
            fibers = {};
            fiberId = 0;
            count = 0;
            return function(error4) {
              return new Aff2(SYNC, function() {
                for (var k2 in kills) {
                  if (kills.hasOwnProperty(k2)) {
                    kills[k2]();
                  }
                }
              });
            };
          };
        }
      };
    }
    var SUSPENDED = 0;
    var CONTINUE = 1;
    var STEP_BIND = 2;
    var STEP_RESULT = 3;
    var PENDING = 4;
    var RETURN = 5;
    var COMPLETED = 6;
    function Fiber(util2, supervisor, aff) {
      var runTick = 0;
      var status = SUSPENDED;
      var step4 = aff;
      var fail3 = null;
      var interrupt = null;
      var bhead = null;
      var btail = null;
      var attempts = null;
      var bracketCount = 0;
      var joinId = 0;
      var joins = null;
      var rethrow = true;
      function run3(localRunTick) {
        var tmp, result, attempt;
        while (true) {
          tmp = null;
          result = null;
          attempt = null;
          switch (status) {
            case STEP_BIND:
              status = CONTINUE;
              try {
                step4 = bhead(step4);
                if (btail === null) {
                  bhead = null;
                } else {
                  bhead = btail._1;
                  btail = btail._2;
                }
              } catch (e) {
                status = RETURN;
                fail3 = util2.left(e);
                step4 = null;
              }
              break;
            case STEP_RESULT:
              if (util2.isLeft(step4)) {
                status = RETURN;
                fail3 = step4;
                step4 = null;
              } else if (bhead === null) {
                status = RETURN;
              } else {
                status = STEP_BIND;
                step4 = util2.fromRight(step4);
              }
              break;
            case CONTINUE:
              switch (step4.tag) {
                case BIND:
                  if (bhead) {
                    btail = new Aff2(CONS, bhead, btail);
                  }
                  bhead = step4._2;
                  status = CONTINUE;
                  step4 = step4._1;
                  break;
                case PURE:
                  if (bhead === null) {
                    status = RETURN;
                    step4 = util2.right(step4._1);
                  } else {
                    status = STEP_BIND;
                    step4 = step4._1;
                  }
                  break;
                case SYNC:
                  status = STEP_RESULT;
                  step4 = runSync(util2.left, util2.right, step4._1);
                  break;
                case ASYNC:
                  status = PENDING;
                  step4 = runAsync(util2.left, step4._1, function(result2) {
                    return function() {
                      if (runTick !== localRunTick) {
                        return;
                      }
                      runTick++;
                      Scheduler.enqueue(function() {
                        if (runTick !== localRunTick + 1) {
                          return;
                        }
                        status = STEP_RESULT;
                        step4 = result2;
                        run3(runTick);
                      });
                    };
                  });
                  return;
                case THROW:
                  status = RETURN;
                  fail3 = util2.left(step4._1);
                  step4 = null;
                  break;
                // Enqueue the Catch so that we can call the error handler later on
                // in case of an exception.
                case CATCH:
                  if (bhead === null) {
                    attempts = new Aff2(CONS, step4, attempts, interrupt);
                  } else {
                    attempts = new Aff2(CONS, step4, new Aff2(CONS, new Aff2(RESUME, bhead, btail), attempts, interrupt), interrupt);
                  }
                  bhead = null;
                  btail = null;
                  status = CONTINUE;
                  step4 = step4._1;
                  break;
                // Enqueue the Bracket so that we can call the appropriate handlers
                // after resource acquisition.
                case BRACKET:
                  bracketCount++;
                  if (bhead === null) {
                    attempts = new Aff2(CONS, step4, attempts, interrupt);
                  } else {
                    attempts = new Aff2(CONS, step4, new Aff2(CONS, new Aff2(RESUME, bhead, btail), attempts, interrupt), interrupt);
                  }
                  bhead = null;
                  btail = null;
                  status = CONTINUE;
                  step4 = step4._1;
                  break;
                case FORK:
                  status = STEP_RESULT;
                  tmp = Fiber(util2, supervisor, step4._2);
                  if (supervisor) {
                    supervisor.register(tmp);
                  }
                  if (step4._1) {
                    tmp.run();
                  }
                  step4 = util2.right(tmp);
                  break;
                case SEQ:
                  status = CONTINUE;
                  step4 = sequential3(util2, supervisor, step4._1);
                  break;
              }
              break;
            case RETURN:
              bhead = null;
              btail = null;
              if (attempts === null) {
                status = COMPLETED;
                step4 = interrupt || fail3 || step4;
              } else {
                tmp = attempts._3;
                attempt = attempts._1;
                attempts = attempts._2;
                switch (attempt.tag) {
                  // We cannot recover from an unmasked interrupt. Otherwise we should
                  // continue stepping, or run the exception handler if an exception
                  // was raised.
                  case CATCH:
                    if (interrupt && interrupt !== tmp && bracketCount === 0) {
                      status = RETURN;
                    } else if (fail3) {
                      status = CONTINUE;
                      step4 = attempt._2(util2.fromLeft(fail3));
                      fail3 = null;
                    }
                    break;
                  // We cannot resume from an unmasked interrupt or exception.
                  case RESUME:
                    if (interrupt && interrupt !== tmp && bracketCount === 0 || fail3) {
                      status = RETURN;
                    } else {
                      bhead = attempt._1;
                      btail = attempt._2;
                      status = STEP_BIND;
                      step4 = util2.fromRight(step4);
                    }
                    break;
                  // If we have a bracket, we should enqueue the handlers,
                  // and continue with the success branch only if the fiber has
                  // not been interrupted. If the bracket acquisition failed, we
                  // should not run either.
                  case BRACKET:
                    bracketCount--;
                    if (fail3 === null) {
                      result = util2.fromRight(step4);
                      attempts = new Aff2(CONS, new Aff2(RELEASE, attempt._2, result), attempts, tmp);
                      if (interrupt === tmp || bracketCount > 0) {
                        status = CONTINUE;
                        step4 = attempt._3(result);
                      }
                    }
                    break;
                  // Enqueue the appropriate handler. We increase the bracket count
                  // because it should not be cancelled.
                  case RELEASE:
                    attempts = new Aff2(CONS, new Aff2(FINALIZED, step4, fail3), attempts, interrupt);
                    status = CONTINUE;
                    if (interrupt && interrupt !== tmp && bracketCount === 0) {
                      step4 = attempt._1.killed(util2.fromLeft(interrupt))(attempt._2);
                    } else if (fail3) {
                      step4 = attempt._1.failed(util2.fromLeft(fail3))(attempt._2);
                    } else {
                      step4 = attempt._1.completed(util2.fromRight(step4))(attempt._2);
                    }
                    fail3 = null;
                    bracketCount++;
                    break;
                  case FINALIZER:
                    bracketCount++;
                    attempts = new Aff2(CONS, new Aff2(FINALIZED, step4, fail3), attempts, interrupt);
                    status = CONTINUE;
                    step4 = attempt._1;
                    break;
                  case FINALIZED:
                    bracketCount--;
                    status = RETURN;
                    step4 = attempt._1;
                    fail3 = attempt._2;
                    break;
                }
              }
              break;
            case COMPLETED:
              for (var k in joins) {
                if (joins.hasOwnProperty(k)) {
                  rethrow = rethrow && joins[k].rethrow;
                  runEff(joins[k].handler(step4));
                }
              }
              joins = null;
              if (interrupt && fail3) {
                setTimeout(function() {
                  throw util2.fromLeft(fail3);
                }, 0);
              } else if (util2.isLeft(step4) && rethrow) {
                setTimeout(function() {
                  if (rethrow) {
                    throw util2.fromLeft(step4);
                  }
                }, 0);
              }
              return;
            case SUSPENDED:
              status = CONTINUE;
              break;
            case PENDING:
              return;
          }
        }
      }
      function onComplete(join6) {
        return function() {
          if (status === COMPLETED) {
            rethrow = rethrow && join6.rethrow;
            join6.handler(step4)();
            return function() {
            };
          }
          var jid = joinId++;
          joins = joins || {};
          joins[jid] = join6;
          return function() {
            if (joins !== null) {
              delete joins[jid];
            }
          };
        };
      }
      function kill2(error4, cb) {
        return function() {
          if (status === COMPLETED) {
            cb(util2.right(void 0))();
            return function() {
            };
          }
          var canceler = onComplete({
            rethrow: false,
            handler: function() {
              return cb(util2.right(void 0));
            }
          })();
          switch (status) {
            case SUSPENDED:
              interrupt = util2.left(error4);
              status = COMPLETED;
              step4 = interrupt;
              run3(runTick);
              break;
            case PENDING:
              if (interrupt === null) {
                interrupt = util2.left(error4);
              }
              if (bracketCount === 0) {
                if (status === PENDING) {
                  attempts = new Aff2(CONS, new Aff2(FINALIZER, step4(error4)), attempts, interrupt);
                }
                status = RETURN;
                step4 = null;
                fail3 = null;
                run3(++runTick);
              }
              break;
            default:
              if (interrupt === null) {
                interrupt = util2.left(error4);
              }
              if (bracketCount === 0) {
                status = RETURN;
                step4 = null;
                fail3 = null;
              }
          }
          return canceler;
        };
      }
      function join5(cb) {
        return function() {
          var canceler = onComplete({
            rethrow: false,
            handler: cb
          })();
          if (status === SUSPENDED) {
            run3(runTick);
          }
          return canceler;
        };
      }
      return {
        kill: kill2,
        join: join5,
        onComplete,
        isSuspended: function() {
          return status === SUSPENDED;
        },
        run: function() {
          if (status === SUSPENDED) {
            if (!Scheduler.isDraining()) {
              Scheduler.enqueue(function() {
                run3(runTick);
              });
            } else {
              run3(runTick);
            }
          }
        }
      };
    }
    function runPar(util2, supervisor, par, cb) {
      var fiberId = 0;
      var fibers = {};
      var killId = 0;
      var kills = {};
      var early = new Error("[ParAff] Early exit");
      var interrupt = null;
      var root3 = EMPTY;
      function kill2(error4, par2, cb2) {
        var step4 = par2;
        var head6 = null;
        var tail2 = null;
        var count = 0;
        var kills2 = {};
        var tmp, kid;
        loop: while (true) {
          tmp = null;
          switch (step4.tag) {
            case FORKED:
              if (step4._3 === EMPTY) {
                tmp = fibers[step4._1];
                kills2[count++] = tmp.kill(error4, function(result) {
                  return function() {
                    count--;
                    if (count === 0) {
                      cb2(result)();
                    }
                  };
                });
              }
              if (head6 === null) {
                break loop;
              }
              step4 = head6._2;
              if (tail2 === null) {
                head6 = null;
              } else {
                head6 = tail2._1;
                tail2 = tail2._2;
              }
              break;
            case MAP:
              step4 = step4._2;
              break;
            case APPLY:
            case ALT:
              if (head6) {
                tail2 = new Aff2(CONS, head6, tail2);
              }
              head6 = step4;
              step4 = step4._1;
              break;
          }
        }
        if (count === 0) {
          cb2(util2.right(void 0))();
        } else {
          kid = 0;
          tmp = count;
          for (; kid < tmp; kid++) {
            kills2[kid] = kills2[kid]();
          }
        }
        return kills2;
      }
      function join5(result, head6, tail2) {
        var fail3, step4, lhs, rhs, tmp, kid;
        if (util2.isLeft(result)) {
          fail3 = result;
          step4 = null;
        } else {
          step4 = result;
          fail3 = null;
        }
        loop: while (true) {
          lhs = null;
          rhs = null;
          tmp = null;
          kid = null;
          if (interrupt !== null) {
            return;
          }
          if (head6 === null) {
            cb(fail3 || step4)();
            return;
          }
          if (head6._3 !== EMPTY) {
            return;
          }
          switch (head6.tag) {
            case MAP:
              if (fail3 === null) {
                head6._3 = util2.right(head6._1(util2.fromRight(step4)));
                step4 = head6._3;
              } else {
                head6._3 = fail3;
              }
              break;
            case APPLY:
              lhs = head6._1._3;
              rhs = head6._2._3;
              if (fail3) {
                head6._3 = fail3;
                tmp = true;
                kid = killId++;
                kills[kid] = kill2(early, fail3 === lhs ? head6._2 : head6._1, function() {
                  return function() {
                    delete kills[kid];
                    if (tmp) {
                      tmp = false;
                    } else if (tail2 === null) {
                      join5(fail3, null, null);
                    } else {
                      join5(fail3, tail2._1, tail2._2);
                    }
                  };
                });
                if (tmp) {
                  tmp = false;
                  return;
                }
              } else if (lhs === EMPTY || rhs === EMPTY) {
                return;
              } else {
                step4 = util2.right(util2.fromRight(lhs)(util2.fromRight(rhs)));
                head6._3 = step4;
              }
              break;
            case ALT:
              lhs = head6._1._3;
              rhs = head6._2._3;
              if (lhs === EMPTY && util2.isLeft(rhs) || rhs === EMPTY && util2.isLeft(lhs)) {
                return;
              }
              if (lhs !== EMPTY && util2.isLeft(lhs) && rhs !== EMPTY && util2.isLeft(rhs)) {
                fail3 = step4 === lhs ? rhs : lhs;
                step4 = null;
                head6._3 = fail3;
              } else {
                head6._3 = step4;
                tmp = true;
                kid = killId++;
                kills[kid] = kill2(early, step4 === lhs ? head6._2 : head6._1, function() {
                  return function() {
                    delete kills[kid];
                    if (tmp) {
                      tmp = false;
                    } else if (tail2 === null) {
                      join5(step4, null, null);
                    } else {
                      join5(step4, tail2._1, tail2._2);
                    }
                  };
                });
                if (tmp) {
                  tmp = false;
                  return;
                }
              }
              break;
          }
          if (tail2 === null) {
            head6 = null;
          } else {
            head6 = tail2._1;
            tail2 = tail2._2;
          }
        }
      }
      function resolve(fiber) {
        return function(result) {
          return function() {
            delete fibers[fiber._1];
            fiber._3 = result;
            join5(result, fiber._2._1, fiber._2._2);
          };
        };
      }
      function run3() {
        var status = CONTINUE;
        var step4 = par;
        var head6 = null;
        var tail2 = null;
        var tmp, fid;
        loop: while (true) {
          tmp = null;
          fid = null;
          switch (status) {
            case CONTINUE:
              switch (step4.tag) {
                case MAP:
                  if (head6) {
                    tail2 = new Aff2(CONS, head6, tail2);
                  }
                  head6 = new Aff2(MAP, step4._1, EMPTY, EMPTY);
                  step4 = step4._2;
                  break;
                case APPLY:
                  if (head6) {
                    tail2 = new Aff2(CONS, head6, tail2);
                  }
                  head6 = new Aff2(APPLY, EMPTY, step4._2, EMPTY);
                  step4 = step4._1;
                  break;
                case ALT:
                  if (head6) {
                    tail2 = new Aff2(CONS, head6, tail2);
                  }
                  head6 = new Aff2(ALT, EMPTY, step4._2, EMPTY);
                  step4 = step4._1;
                  break;
                default:
                  fid = fiberId++;
                  status = RETURN;
                  tmp = step4;
                  step4 = new Aff2(FORKED, fid, new Aff2(CONS, head6, tail2), EMPTY);
                  tmp = Fiber(util2, supervisor, tmp);
                  tmp.onComplete({
                    rethrow: false,
                    handler: resolve(step4)
                  })();
                  fibers[fid] = tmp;
                  if (supervisor) {
                    supervisor.register(tmp);
                  }
              }
              break;
            case RETURN:
              if (head6 === null) {
                break loop;
              }
              if (head6._1 === EMPTY) {
                head6._1 = step4;
                status = CONTINUE;
                step4 = head6._2;
                head6._2 = EMPTY;
              } else {
                head6._2 = step4;
                step4 = head6;
                if (tail2 === null) {
                  head6 = null;
                } else {
                  head6 = tail2._1;
                  tail2 = tail2._2;
                }
              }
          }
        }
        root3 = step4;
        for (fid = 0; fid < fiberId; fid++) {
          fibers[fid].run();
        }
      }
      function cancel(error4, cb2) {
        interrupt = util2.left(error4);
        var innerKills;
        for (var kid in kills) {
          if (kills.hasOwnProperty(kid)) {
            innerKills = kills[kid];
            for (kid in innerKills) {
              if (innerKills.hasOwnProperty(kid)) {
                innerKills[kid]();
              }
            }
          }
        }
        kills = null;
        var newKills = kill2(error4, root3, cb2);
        return function(killError) {
          return new Aff2(ASYNC, function(killCb) {
            return function() {
              for (var kid2 in newKills) {
                if (newKills.hasOwnProperty(kid2)) {
                  newKills[kid2]();
                }
              }
              return nonCanceler2;
            };
          });
        };
      }
      run3();
      return function(killError) {
        return new Aff2(ASYNC, function(killCb) {
          return function() {
            return cancel(killError, killCb);
          };
        });
      };
    }
    function sequential3(util2, supervisor, par) {
      return new Aff2(ASYNC, function(cb) {
        return function() {
          return runPar(util2, supervisor, par, cb);
        };
      });
    }
    Aff2.EMPTY = EMPTY;
    Aff2.Pure = AffCtr(PURE);
    Aff2.Throw = AffCtr(THROW);
    Aff2.Catch = AffCtr(CATCH);
    Aff2.Sync = AffCtr(SYNC);
    Aff2.Async = AffCtr(ASYNC);
    Aff2.Bind = AffCtr(BIND);
    Aff2.Bracket = AffCtr(BRACKET);
    Aff2.Fork = AffCtr(FORK);
    Aff2.Seq = AffCtr(SEQ);
    Aff2.ParMap = AffCtr(MAP);
    Aff2.ParApply = AffCtr(APPLY);
    Aff2.ParAlt = AffCtr(ALT);
    Aff2.Fiber = Fiber;
    Aff2.Supervisor = Supervisor;
    Aff2.Scheduler = Scheduler;
    Aff2.nonCanceler = nonCanceler2;
    return Aff2;
  })();
  var _pure = Aff.Pure;
  var _throwError = Aff.Throw;
  function _catchError(aff) {
    return function(k) {
      return Aff.Catch(aff, k);
    };
  }
  function _map(f) {
    return function(aff) {
      if (aff.tag === Aff.Pure.tag) {
        return Aff.Pure(f(aff._1));
      } else {
        return Aff.Bind(aff, function(value18) {
          return Aff.Pure(f(value18));
        });
      }
    };
  }
  function _bind(aff) {
    return function(k) {
      return Aff.Bind(aff, k);
    };
  }
  function _fork(immediate) {
    return function(aff) {
      return Aff.Fork(immediate, aff);
    };
  }
  var _liftEffect = Aff.Sync;
  function _parAffMap(f) {
    return function(aff) {
      return Aff.ParMap(f, aff);
    };
  }
  function _parAffApply(aff1) {
    return function(aff2) {
      return Aff.ParApply(aff1, aff2);
    };
  }
  var makeAff = Aff.Async;
  function generalBracket(acquire) {
    return function(options2) {
      return function(k) {
        return Aff.Bracket(acquire, options2, k);
      };
    };
  }
  function _makeFiber(util2, aff) {
    return function() {
      return Aff.Fiber(util2, null, aff);
    };
  }
  var _delay = /* @__PURE__ */ (function() {
    function setDelay(n, k) {
      if (n === 0 && typeof setImmediate !== "undefined") {
        return setImmediate(k);
      } else {
        return setTimeout(k, n);
      }
    }
    function clearDelay(n, t) {
      if (n === 0 && typeof clearImmediate !== "undefined") {
        return clearImmediate(t);
      } else {
        return clearTimeout(t);
      }
    }
    return function(right4, ms) {
      return Aff.Async(function(cb) {
        return function() {
          var timer2 = setDelay(ms, cb(right4()));
          return function() {
            return Aff.Sync(function() {
              return right4(clearDelay(ms, timer2));
            });
          };
        };
      });
    };
  })();
  var _sequential = Aff.Seq;

  // output/Control.Monad/index.js
  var unlessM = function(dictMonad) {
    var bind92 = bind(dictMonad.Bind1());
    var unless2 = unless(dictMonad.Applicative0());
    return function(mb) {
      return function(m) {
        return bind92(mb)(function(b2) {
          return unless2(b2)(m);
        });
      };
    };
  };
  var ap = function(dictMonad) {
    var bind92 = bind(dictMonad.Bind1());
    var pure56 = pure(dictMonad.Applicative0());
    return function(f) {
      return function(a2) {
        return bind92(f)(function(f$prime) {
          return bind92(a2)(function(a$prime) {
            return pure56(f$prime(a$prime));
          });
        });
      };
    };
  };

  // output/Data.Either/index.js
  var Left = /* @__PURE__ */ (function() {
    function Left3(value0) {
      this.value0 = value0;
    }
    ;
    Left3.create = function(value0) {
      return new Left3(value0);
    };
    return Left3;
  })();
  var Right = /* @__PURE__ */ (function() {
    function Right3(value0) {
      this.value0 = value0;
    }
    ;
    Right3.create = function(value0) {
      return new Right3(value0);
    };
    return Right3;
  })();
  var note = function(a2) {
    return maybe(new Left(a2))(Right.create);
  };
  var functorEither = {
    map: function(f) {
      return function(m) {
        if (m instanceof Left) {
          return new Left(m.value0);
        }
        ;
        if (m instanceof Right) {
          return new Right(f(m.value0));
        }
        ;
        throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): " + [m.constructor.name]);
      };
    }
  };
  var map3 = /* @__PURE__ */ map(functorEither);
  var either = function(v) {
    return function(v1) {
      return function(v2) {
        if (v2 instanceof Left) {
          return v(v2.value0);
        }
        ;
        if (v2 instanceof Right) {
          return v1(v2.value0);
        }
        ;
        throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
      };
    };
  };
  var hush = /* @__PURE__ */ (function() {
    return either($$const(Nothing.value))(Just.create);
  })();
  var applyEither = {
    apply: function(v) {
      return function(v1) {
        if (v instanceof Left) {
          return new Left(v.value0);
        }
        ;
        if (v instanceof Right) {
          return map3(v.value0)(v1);
        }
        ;
        throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    Functor0: function() {
      return functorEither;
    }
  };

  // output/Effect/foreign.js
  var pureE = function(a2) {
    return function() {
      return a2;
    };
  };
  var bindE = function(a2) {
    return function(f) {
      return function() {
        return f(a2())();
      };
    };
  };

  // output/Effect/index.js
  var $runtime_lazy = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var monadEffect = {
    Applicative0: function() {
      return applicativeEffect;
    },
    Bind1: function() {
      return bindEffect;
    }
  };
  var bindEffect = {
    bind: bindE,
    Apply0: function() {
      return $lazy_applyEffect(0);
    }
  };
  var applicativeEffect = {
    pure: pureE,
    Apply0: function() {
      return $lazy_applyEffect(0);
    }
  };
  var $lazy_functorEffect = /* @__PURE__ */ $runtime_lazy("functorEffect", "Effect", function() {
    return {
      map: liftA1(applicativeEffect)
    };
  });
  var $lazy_applyEffect = /* @__PURE__ */ $runtime_lazy("applyEffect", "Effect", function() {
    return {
      apply: ap(monadEffect),
      Functor0: function() {
        return $lazy_functorEffect(0);
      }
    };
  });
  var functorEffect = /* @__PURE__ */ $lazy_functorEffect(20);
  var applyEffect = /* @__PURE__ */ $lazy_applyEffect(23);

  // output/Effect.Exception/foreign.js
  function error(msg) {
    return new Error(msg);
  }
  function message(e) {
    return e.message;
  }
  function throwException(e) {
    return function() {
      throw e;
    };
  }

  // output/Effect.Exception/index.js
  var $$throw = function($4) {
    return throwException(error($4));
  };

  // output/Control.Monad.Error.Class/index.js
  var throwError = function(dict) {
    return dict.throwError;
  };
  var catchError = function(dict) {
    return dict.catchError;
  };
  var $$try = function(dictMonadError) {
    var catchError1 = catchError(dictMonadError);
    var Monad0 = dictMonadError.MonadThrow0().Monad0();
    var map97 = map(Monad0.Bind1().Apply0().Functor0());
    var pure56 = pure(Monad0.Applicative0());
    return function(a2) {
      return catchError1(map97(Right.create)(a2))(function($52) {
        return pure56(Left.create($52));
      });
    };
  };

  // output/Data.Identity/index.js
  var Identity = function(x46) {
    return x46;
  };
  var functorIdentity = {
    map: function(f) {
      return function(m) {
        return f(m);
      };
    }
  };
  var applyIdentity = {
    apply: function(v) {
      return function(v1) {
        return v(v1);
      };
    },
    Functor0: function() {
      return functorIdentity;
    }
  };
  var bindIdentity = {
    bind: function(v) {
      return function(f) {
        return f(v);
      };
    },
    Apply0: function() {
      return applyIdentity;
    }
  };
  var applicativeIdentity = {
    pure: Identity,
    Apply0: function() {
      return applyIdentity;
    }
  };
  var monadIdentity = {
    Applicative0: function() {
      return applicativeIdentity;
    },
    Bind1: function() {
      return bindIdentity;
    }
  };

  // output/Effect.Ref/foreign.js
  var _new = function(val) {
    return function() {
      return { value: val };
    };
  };
  var read = function(ref2) {
    return function() {
      return ref2.value;
    };
  };
  var modifyImpl = function(f) {
    return function(ref2) {
      return function() {
        var t = f(ref2.value);
        ref2.value = t.state;
        return t.value;
      };
    };
  };
  var write = function(val) {
    return function(ref2) {
      return function() {
        ref2.value = val;
      };
    };
  };

  // output/Effect.Ref/index.js
  var $$void2 = /* @__PURE__ */ $$void(functorEffect);
  var $$new = _new;
  var modify$prime = modifyImpl;
  var modify2 = function(f) {
    return modify$prime(function(s) {
      var s$prime = f(s);
      return {
        state: s$prime,
        value: s$prime
      };
    });
  };
  var modify_2 = function(f) {
    return function(s) {
      return $$void2(modify2(f)(s));
    };
  };

  // output/Control.Monad.Rec.Class/index.js
  var bindFlipped2 = /* @__PURE__ */ bindFlipped(bindEffect);
  var map4 = /* @__PURE__ */ map(functorEffect);
  var Loop = /* @__PURE__ */ (function() {
    function Loop2(value0) {
      this.value0 = value0;
    }
    ;
    Loop2.create = function(value0) {
      return new Loop2(value0);
    };
    return Loop2;
  })();
  var Done = /* @__PURE__ */ (function() {
    function Done2(value0) {
      this.value0 = value0;
    }
    ;
    Done2.create = function(value0) {
      return new Done2(value0);
    };
    return Done2;
  })();
  var tailRecM = function(dict) {
    return dict.tailRecM;
  };
  var monadRecEffect = {
    tailRecM: function(f) {
      return function(a2) {
        var fromDone = function(v) {
          if (v instanceof Done) {
            return v.value0;
          }
          ;
          throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): " + [v.constructor.name]);
        };
        return function __do5() {
          var r = bindFlipped2($$new)(f(a2))();
          (function() {
            while (!(function __do6() {
              var v = read(r)();
              if (v instanceof Loop) {
                var e = f(v.value0)();
                write(e)(r)();
                return false;
              }
              ;
              if (v instanceof Done) {
                return true;
              }
              ;
              throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): " + [v.constructor.name]);
            })()) {
            }
            ;
            return {};
          })();
          return map4(fromDone)(read(r))();
        };
      };
    },
    Monad0: function() {
      return monadEffect;
    }
  };
  var forever = function(dictMonadRec) {
    var tailRecM1 = tailRecM(dictMonadRec);
    var voidRight4 = voidRight(dictMonadRec.Monad0().Bind1().Apply0().Functor0());
    return function(ma) {
      return tailRecM1(function(u2) {
        return voidRight4(new Loop(u2))(ma);
      })(unit);
    };
  };

  // output/Unsafe.Coerce/foreign.js
  var unsafeCoerce2 = function(x46) {
    return x46;
  };

  // output/Control.Monad.ST.Internal/foreign.js
  var map_ = function(f) {
    return function(a2) {
      return function() {
        return f(a2());
      };
    };
  };
  var pure_ = function(a2) {
    return function() {
      return a2;
    };
  };
  var bind_ = function(a2) {
    return function(f) {
      return function() {
        return f(a2())();
      };
    };
  };
  var foreach = function(as) {
    return function(f) {
      return function() {
        for (var i2 = 0, l = as.length; i2 < l; i2++) {
          f(as[i2])();
        }
      };
    };
  };
  function newSTRef(val) {
    return function() {
      return { value: val };
    };
  }
  var read2 = function(ref2) {
    return function() {
      return ref2.value;
    };
  };
  var modifyImpl2 = function(f) {
    return function(ref2) {
      return function() {
        var t = f(ref2.value);
        ref2.value = t.state;
        return t.value;
      };
    };
  };
  var write2 = function(a2) {
    return function(ref2) {
      return function() {
        return ref2.value = a2;
      };
    };
  };

  // output/Control.Monad.ST.Internal/index.js
  var $runtime_lazy2 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var modify$prime2 = modifyImpl2;
  var modify3 = function(f) {
    return modify$prime2(function(s) {
      var s$prime = f(s);
      return {
        state: s$prime,
        value: s$prime
      };
    });
  };
  var functorST = {
    map: map_
  };
  var monadST = {
    Applicative0: function() {
      return applicativeST;
    },
    Bind1: function() {
      return bindST;
    }
  };
  var bindST = {
    bind: bind_,
    Apply0: function() {
      return $lazy_applyST(0);
    }
  };
  var applicativeST = {
    pure: pure_,
    Apply0: function() {
      return $lazy_applyST(0);
    }
  };
  var $lazy_applyST = /* @__PURE__ */ $runtime_lazy2("applyST", "Control.Monad.ST.Internal", function() {
    return {
      apply: ap(monadST),
      Functor0: function() {
        return functorST;
      }
    };
  });

  // output/Control.Monad.Trans.Class/index.js
  var lift = function(dict) {
    return dict.lift;
  };

  // output/Effect.Class/index.js
  var monadEffectEffect = {
    liftEffect: /* @__PURE__ */ identity(categoryFn),
    Monad0: function() {
      return monadEffect;
    }
  };
  var liftEffect = function(dict) {
    return dict.liftEffect;
  };

  // output/Control.Monad.Except.Trans/index.js
  var map5 = /* @__PURE__ */ map(functorEither);
  var ExceptT = function(x46) {
    return x46;
  };
  var runExceptT = function(v) {
    return v;
  };
  var mapExceptT = function(f) {
    return function(v) {
      return f(v);
    };
  };
  var functorExceptT = function(dictFunctor) {
    var map130 = map(dictFunctor);
    return {
      map: function(f) {
        return mapExceptT(map130(map5(f)));
      }
    };
  };
  var monadExceptT = function(dictMonad) {
    return {
      Applicative0: function() {
        return applicativeExceptT(dictMonad);
      },
      Bind1: function() {
        return bindExceptT(dictMonad);
      }
    };
  };
  var bindExceptT = function(dictMonad) {
    var bind92 = bind(dictMonad.Bind1());
    var pure56 = pure(dictMonad.Applicative0());
    return {
      bind: function(v) {
        return function(k) {
          return bind92(v)(either(function($193) {
            return pure56(Left.create($193));
          })(function(a2) {
            var v1 = k(a2);
            return v1;
          }));
        };
      },
      Apply0: function() {
        return applyExceptT(dictMonad);
      }
    };
  };
  var applyExceptT = function(dictMonad) {
    var functorExceptT1 = functorExceptT(dictMonad.Bind1().Apply0().Functor0());
    return {
      apply: ap(monadExceptT(dictMonad)),
      Functor0: function() {
        return functorExceptT1;
      }
    };
  };
  var applicativeExceptT = function(dictMonad) {
    return {
      pure: (function() {
        var $194 = pure(dictMonad.Applicative0());
        return function($195) {
          return ExceptT($194(Right.create($195)));
        };
      })(),
      Apply0: function() {
        return applyExceptT(dictMonad);
      }
    };
  };
  var monadThrowExceptT = function(dictMonad) {
    var monadExceptT1 = monadExceptT(dictMonad);
    return {
      throwError: (function() {
        var $204 = pure(dictMonad.Applicative0());
        return function($205) {
          return ExceptT($204(Left.create($205)));
        };
      })(),
      Monad0: function() {
        return monadExceptT1;
      }
    };
  };
  var altExceptT = function(dictSemigroup) {
    var append37 = append(dictSemigroup);
    return function(dictMonad) {
      var Bind1 = dictMonad.Bind1();
      var bind92 = bind(Bind1);
      var pure56 = pure(dictMonad.Applicative0());
      var functorExceptT1 = functorExceptT(Bind1.Apply0().Functor0());
      return {
        alt: function(v) {
          return function(v1) {
            return bind92(v)(function(rm) {
              if (rm instanceof Right) {
                return pure56(new Right(rm.value0));
              }
              ;
              if (rm instanceof Left) {
                return bind92(v1)(function(rn) {
                  if (rn instanceof Right) {
                    return pure56(new Right(rn.value0));
                  }
                  ;
                  if (rn instanceof Left) {
                    return pure56(new Left(append37(rm.value0)(rn.value0)));
                  }
                  ;
                  throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 87, column 9 - line 89, column 49): " + [rn.constructor.name]);
                });
              }
              ;
              throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 83, column 5 - line 89, column 49): " + [rm.constructor.name]);
            });
          };
        },
        Functor0: function() {
          return functorExceptT1;
        }
      };
    };
  };

  // output/Control.Plus/index.js
  var plusArray = {
    empty: [],
    Alt0: function() {
      return altArray;
    }
  };
  var empty = function(dict) {
    return dict.empty;
  };

  // output/Safe.Coerce/index.js
  var coerce = function() {
    return unsafeCoerce2;
  };

  // output/Data.Newtype/index.js
  var coerce2 = /* @__PURE__ */ coerce();
  var unwrap = function() {
    return coerce2;
  };
  var alaF = function() {
    return function() {
      return function() {
        return function() {
          return function(v) {
            return coerce2;
          };
        };
      };
    };
  };

  // output/Data.Profunctor/index.js
  var profunctorFn = {
    dimap: function(a2b) {
      return function(c2d) {
        return function(b2c) {
          return function($18) {
            return c2d(b2c(a2b($18)));
          };
        };
      };
    }
  };
  var dimap = function(dict) {
    return dict.dimap;
  };

  // output/Control.Parallel.Class/index.js
  var sequential = function(dict) {
    return dict.sequential;
  };
  var parallel = function(dict) {
    return dict.parallel;
  };

  // output/Data.Foldable/foreign.js
  var foldrArray = function(f) {
    return function(init5) {
      return function(xs) {
        var acc = init5;
        var len = xs.length;
        for (var i2 = len - 1; i2 >= 0; i2--) {
          acc = f(xs[i2])(acc);
        }
        return acc;
      };
    };
  };
  var foldlArray = function(f) {
    return function(init5) {
      return function(xs) {
        var acc = init5;
        var len = xs.length;
        for (var i2 = 0; i2 < len; i2++) {
          acc = f(acc)(xs[i2]);
        }
        return acc;
      };
    };
  };

  // output/Data.Bifunctor/index.js
  var identity5 = /* @__PURE__ */ identity(categoryFn);
  var bimap = function(dict) {
    return dict.bimap;
  };
  var lmap = function(dictBifunctor) {
    var bimap1 = bimap(dictBifunctor);
    return function(f) {
      return bimap1(f)(identity5);
    };
  };
  var rmap = function(dictBifunctor) {
    return bimap(dictBifunctor)(identity5);
  };
  var bifunctorTuple = {
    bimap: function(f) {
      return function(g) {
        return function(v) {
          return new Tuple(f(v.value0), g(v.value1));
        };
      };
    }
  };
  var bifunctorEither = {
    bimap: function(v) {
      return function(v1) {
        return function(v2) {
          if (v2 instanceof Left) {
            return new Left(v(v2.value0));
          }
          ;
          if (v2 instanceof Right) {
            return new Right(v1(v2.value0));
          }
          ;
          throw new Error("Failed pattern match at Data.Bifunctor (line 38, column 1 - line 40, column 36): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
        };
      };
    }
  };

  // output/Data.Monoid.Disj/index.js
  var Disj = function(x46) {
    return x46;
  };
  var semigroupDisj = function(dictHeytingAlgebra) {
    var disj2 = disj(dictHeytingAlgebra);
    return {
      append: function(v) {
        return function(v1) {
          return disj2(v)(v1);
        };
      }
    };
  };
  var monoidDisj = function(dictHeytingAlgebra) {
    var semigroupDisj1 = semigroupDisj(dictHeytingAlgebra);
    return {
      mempty: ff(dictHeytingAlgebra),
      Semigroup0: function() {
        return semigroupDisj1;
      }
    };
  };

  // output/Data.Foldable/index.js
  var eq12 = /* @__PURE__ */ eq(eqOrdering);
  var alaF2 = /* @__PURE__ */ alaF()()()();
  var foldr = function(dict) {
    return dict.foldr;
  };
  var traverse_ = function(dictApplicative) {
    var applySecond4 = applySecond(dictApplicative.Apply0());
    var pure56 = pure(dictApplicative);
    return function(dictFoldable) {
      var foldr22 = foldr(dictFoldable);
      return function(f) {
        return foldr22(function($454) {
          return applySecond4(f($454));
        })(pure56(unit));
      };
    };
  };
  var for_ = function(dictApplicative) {
    var traverse_16 = traverse_(dictApplicative);
    return function(dictFoldable) {
      return flip(traverse_16(dictFoldable));
    };
  };
  var foldl = function(dict) {
    return dict.foldl;
  };
  var indexl = function(dictFoldable) {
    var foldl23 = foldl(dictFoldable);
    return function(idx) {
      var go2 = function(cursor3) {
        return function(a2) {
          if (cursor3.elem instanceof Just) {
            return cursor3;
          }
          ;
          var $296 = cursor3.pos === idx;
          if ($296) {
            return {
              elem: new Just(a2),
              pos: cursor3.pos
            };
          }
          ;
          return {
            pos: cursor3.pos + 1 | 0,
            elem: cursor3.elem
          };
        };
      };
      var $455 = foldl23(go2)({
        elem: Nothing.value,
        pos: 0
      });
      return function($456) {
        return (function(v) {
          return v.elem;
        })($455($456));
      };
    };
  };
  var intercalate = function(dictFoldable) {
    var foldl23 = foldl(dictFoldable);
    return function(dictMonoid) {
      var append37 = append(dictMonoid.Semigroup0());
      var mempty3 = mempty(dictMonoid);
      return function(sep) {
        return function(xs) {
          var go2 = function(v) {
            return function(v1) {
              if (v.init) {
                return {
                  init: false,
                  acc: v1
                };
              }
              ;
              return {
                init: false,
                acc: append37(v.acc)(append37(sep)(v1))
              };
            };
          };
          return foldl23(go2)({
            init: true,
            acc: mempty3
          })(xs).acc;
        };
      };
    };
  };
  var maximumBy = function(dictFoldable) {
    var foldl23 = foldl(dictFoldable);
    return function(cmp) {
      var max$prime = function(v) {
        return function(v1) {
          if (v instanceof Nothing) {
            return new Just(v1);
          }
          ;
          if (v instanceof Just) {
            return new Just((function() {
              var $303 = eq12(cmp(v.value0)(v1))(GT.value);
              if ($303) {
                return v.value0;
              }
              ;
              return v1;
            })());
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): " + [v.constructor.name, v1.constructor.name]);
        };
      };
      return foldl23(max$prime)(Nothing.value);
    };
  };
  var maximum = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(dictFoldable) {
      return maximumBy(dictFoldable)(compare20);
    };
  };
  var minimumBy = function(dictFoldable) {
    var foldl23 = foldl(dictFoldable);
    return function(cmp) {
      var min$prime = function(v) {
        return function(v1) {
          if (v instanceof Nothing) {
            return new Just(v1);
          }
          ;
          if (v instanceof Just) {
            return new Just((function() {
              var $307 = eq12(cmp(v.value0)(v1))(LT.value);
              if ($307) {
                return v.value0;
              }
              ;
              return v1;
            })());
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 454, column 3 - line 454, column 27): " + [v.constructor.name, v1.constructor.name]);
        };
      };
      return foldl23(min$prime)(Nothing.value);
    };
  };
  var minimum = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(dictFoldable) {
      return minimumBy(dictFoldable)(compare20);
    };
  };
  var sum = function(dictFoldable) {
    var foldl23 = foldl(dictFoldable);
    return function(dictSemiring) {
      return foldl23(add(dictSemiring))(zero(dictSemiring));
    };
  };
  var foldableMaybe = {
    foldr: function(v) {
      return function(v1) {
        return function(v2) {
          if (v2 instanceof Nothing) {
            return v1;
          }
          ;
          if (v2 instanceof Just) {
            return v(v2.value0)(v1);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
        };
      };
    },
    foldl: function(v) {
      return function(v1) {
        return function(v2) {
          if (v2 instanceof Nothing) {
            return v1;
          }
          ;
          if (v2 instanceof Just) {
            return v(v1)(v2.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
        };
      };
    },
    foldMap: function(dictMonoid) {
      var mempty3 = mempty(dictMonoid);
      return function(v) {
        return function(v1) {
          if (v1 instanceof Nothing) {
            return mempty3;
          }
          ;
          if (v1 instanceof Just) {
            return v(v1.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): " + [v.constructor.name, v1.constructor.name]);
        };
      };
    }
  };
  var foldableEither = {
    foldr: function(v) {
      return function(v1) {
        return function(v2) {
          if (v2 instanceof Left) {
            return v1;
          }
          ;
          if (v2 instanceof Right) {
            return v(v2.value0)(v1);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
        };
      };
    },
    foldl: function(v) {
      return function(v1) {
        return function(v2) {
          if (v2 instanceof Left) {
            return v1;
          }
          ;
          if (v2 instanceof Right) {
            return v(v1)(v2.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
        };
      };
    },
    foldMap: function(dictMonoid) {
      var mempty3 = mempty(dictMonoid);
      return function(v) {
        return function(v1) {
          if (v1 instanceof Left) {
            return mempty3;
          }
          ;
          if (v1 instanceof Right) {
            return v(v1.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): " + [v.constructor.name, v1.constructor.name]);
        };
      };
    }
  };
  var foldMapDefaultR = function(dictFoldable) {
    var foldr22 = foldr(dictFoldable);
    return function(dictMonoid) {
      var append37 = append(dictMonoid.Semigroup0());
      var mempty3 = mempty(dictMonoid);
      return function(f) {
        return foldr22(function(x46) {
          return function(acc) {
            return append37(f(x46))(acc);
          };
        })(mempty3);
      };
    };
  };
  var foldableArray = {
    foldr: foldrArray,
    foldl: foldlArray,
    foldMap: function(dictMonoid) {
      return foldMapDefaultR(foldableArray)(dictMonoid);
    }
  };
  var foldMap = function(dict) {
    return dict.foldMap;
  };
  var any = function(dictFoldable) {
    var foldMap22 = foldMap(dictFoldable);
    return function(dictHeytingAlgebra) {
      return alaF2(Disj)(foldMap22(monoidDisj(dictHeytingAlgebra)));
    };
  };

  // output/Data.Traversable/foreign.js
  var traverseArrayImpl = /* @__PURE__ */ (function() {
    function array1(a2) {
      return [a2];
    }
    function array2(a2) {
      return function(b2) {
        return [a2, b2];
      };
    }
    function array3(a2) {
      return function(b2) {
        return function(c) {
          return [a2, b2, c];
        };
      };
    }
    function concat2(xs) {
      return function(ys) {
        return xs.concat(ys);
      };
    }
    return function(apply7) {
      return function(map97) {
        return function(pure56) {
          return function(f) {
            return function(array4) {
              function go2(bot, top4) {
                switch (top4 - bot) {
                  case 0:
                    return pure56([]);
                  case 1:
                    return map97(array1)(f(array4[bot]));
                  case 2:
                    return apply7(map97(array2)(f(array4[bot])))(f(array4[bot + 1]));
                  case 3:
                    return apply7(apply7(map97(array3)(f(array4[bot])))(f(array4[bot + 1])))(f(array4[bot + 2]));
                  default:
                    var pivot = bot + Math.floor((top4 - bot) / 4) * 2;
                    return apply7(map97(concat2)(go2(bot, pivot)))(go2(pivot, top4));
                }
              }
              return go2(0, array4.length);
            };
          };
        };
      };
    };
  })();

  // output/Data.Traversable.Accum.Internal/index.js
  var stateL = function(v) {
    return v;
  };
  var functorStateL = {
    map: function(f) {
      return function(k) {
        return function(s) {
          var v = stateL(k)(s);
          return {
            accum: v.accum,
            value: f(v.value)
          };
        };
      };
    }
  };
  var applyStateL = {
    apply: function(f) {
      return function(x46) {
        return function(s) {
          var v = stateL(f)(s);
          var v1 = stateL(x46)(v.accum);
          return {
            accum: v1.accum,
            value: v.value(v1.value)
          };
        };
      };
    },
    Functor0: function() {
      return functorStateL;
    }
  };
  var applicativeStateL = {
    pure: function(a2) {
      return function(s) {
        return {
          accum: s,
          value: a2
        };
      };
    },
    Apply0: function() {
      return applyStateL;
    }
  };

  // output/Data.Traversable/index.js
  var identity6 = /* @__PURE__ */ identity(categoryFn);
  var traverse = function(dict) {
    return dict.traverse;
  };
  var sequenceDefault = function(dictTraversable) {
    var traverse22 = traverse(dictTraversable);
    return function(dictApplicative) {
      return traverse22(dictApplicative)(identity6);
    };
  };
  var traversableArray = {
    traverse: function(dictApplicative) {
      var Apply0 = dictApplicative.Apply0();
      return traverseArrayImpl(apply(Apply0))(map(Apply0.Functor0()))(pure(dictApplicative));
    },
    sequence: function(dictApplicative) {
      return sequenceDefault(traversableArray)(dictApplicative);
    },
    Functor0: function() {
      return functorArray;
    },
    Foldable1: function() {
      return foldableArray;
    }
  };
  var sequence = function(dict) {
    return dict.sequence;
  };
  var mapAccumL = function(dictTraversable) {
    var traverse22 = traverse(dictTraversable)(applicativeStateL);
    return function(f) {
      return function(s0) {
        return function(xs) {
          return stateL(traverse22(function(a2) {
            return function(s) {
              return f(s)(a2);
            };
          })(xs))(s0);
        };
      };
    };
  };
  var scanl = function(dictTraversable) {
    var mapAccumL1 = mapAccumL(dictTraversable);
    return function(f) {
      return function(b0) {
        return function(xs) {
          return mapAccumL1(function(b2) {
            return function(a2) {
              var b$prime = f(b2)(a2);
              return {
                accum: b$prime,
                value: b$prime
              };
            };
          })(b0)(xs).value;
        };
      };
    };
  };

  // output/Control.Parallel/index.js
  var identity7 = /* @__PURE__ */ identity(categoryFn);
  var parTraverse_ = function(dictParallel) {
    var sequential3 = sequential(dictParallel);
    var parallel4 = parallel(dictParallel);
    return function(dictApplicative) {
      var traverse_16 = traverse_(dictApplicative);
      return function(dictFoldable) {
        var traverse_17 = traverse_16(dictFoldable);
        return function(f) {
          var $51 = traverse_17(function($53) {
            return parallel4(f($53));
          });
          return function($52) {
            return sequential3($51($52));
          };
        };
      };
    };
  };
  var parSequence_ = function(dictParallel) {
    var parTraverse_1 = parTraverse_(dictParallel);
    return function(dictApplicative) {
      var parTraverse_2 = parTraverse_1(dictApplicative);
      return function(dictFoldable) {
        return parTraverse_2(dictFoldable)(identity7);
      };
    };
  };

  // output/Effect.Unsafe/foreign.js
  var unsafePerformEffect = function(f) {
    return f();
  };

  // output/Partial.Unsafe/foreign.js
  var _unsafePartial = function(f) {
    return f();
  };

  // output/Partial/foreign.js
  var _crashWith = function(msg) {
    throw new Error(msg);
  };

  // output/Partial/index.js
  var crashWith = function() {
    return _crashWith;
  };

  // output/Partial.Unsafe/index.js
  var crashWith2 = /* @__PURE__ */ crashWith();
  var unsafePartial = _unsafePartial;
  var unsafeCrashWith = function(msg) {
    return unsafePartial(function() {
      return crashWith2(msg);
    });
  };

  // output/Effect.Aff/index.js
  var $runtime_lazy3 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var pure2 = /* @__PURE__ */ pure(applicativeEffect);
  var $$void3 = /* @__PURE__ */ $$void(functorEffect);
  var map6 = /* @__PURE__ */ map(functorEffect);
  var Canceler = function(x46) {
    return x46;
  };
  var suspendAff = /* @__PURE__ */ _fork(false);
  var functorParAff = {
    map: _parAffMap
  };
  var functorAff = {
    map: _map
  };
  var map1 = /* @__PURE__ */ map(functorAff);
  var forkAff = /* @__PURE__ */ _fork(true);
  var ffiUtil = /* @__PURE__ */ (function() {
    var unsafeFromRight = function(v) {
      if (v instanceof Right) {
        return v.value0;
      }
      ;
      if (v instanceof Left) {
        return unsafeCrashWith("unsafeFromRight: Left");
      }
      ;
      throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): " + [v.constructor.name]);
    };
    var unsafeFromLeft = function(v) {
      if (v instanceof Left) {
        return v.value0;
      }
      ;
      if (v instanceof Right) {
        return unsafeCrashWith("unsafeFromLeft: Right");
      }
      ;
      throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): " + [v.constructor.name]);
    };
    var isLeft = function(v) {
      if (v instanceof Left) {
        return true;
      }
      ;
      if (v instanceof Right) {
        return false;
      }
      ;
      throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): " + [v.constructor.name]);
    };
    return {
      isLeft,
      fromLeft: unsafeFromLeft,
      fromRight: unsafeFromRight,
      left: Left.create,
      right: Right.create
    };
  })();
  var makeFiber = function(aff) {
    return _makeFiber(ffiUtil, aff);
  };
  var launchAff = function(aff) {
    return function __do5() {
      var fiber = makeFiber(aff)();
      fiber.run();
      return fiber;
    };
  };
  var delay = function(v) {
    return _delay(Right.create, v);
  };
  var bracket = function(acquire) {
    return function(completed) {
      return generalBracket(acquire)({
        killed: $$const(completed),
        failed: $$const(completed),
        completed: $$const(completed)
      });
    };
  };
  var applyParAff = {
    apply: _parAffApply,
    Functor0: function() {
      return functorParAff;
    }
  };
  var monadAff = {
    Applicative0: function() {
      return applicativeAff;
    },
    Bind1: function() {
      return bindAff;
    }
  };
  var bindAff = {
    bind: _bind,
    Apply0: function() {
      return $lazy_applyAff(0);
    }
  };
  var applicativeAff = {
    pure: _pure,
    Apply0: function() {
      return $lazy_applyAff(0);
    }
  };
  var $lazy_applyAff = /* @__PURE__ */ $runtime_lazy3("applyAff", "Effect.Aff", function() {
    return {
      apply: ap(monadAff),
      Functor0: function() {
        return functorAff;
      }
    };
  });
  var applyAff = /* @__PURE__ */ $lazy_applyAff(73);
  var pure22 = /* @__PURE__ */ pure(applicativeAff);
  var bind1 = /* @__PURE__ */ bind(bindAff);
  var bindFlipped3 = /* @__PURE__ */ bindFlipped(bindAff);
  var $$finally = function(fin) {
    return function(a2) {
      return bracket(pure22(unit))($$const(fin))($$const(a2));
    };
  };
  var parallelAff = {
    parallel: unsafeCoerce2,
    sequential: _sequential,
    Apply0: function() {
      return applyAff;
    },
    Apply1: function() {
      return applyParAff;
    }
  };
  var parallel2 = /* @__PURE__ */ parallel(parallelAff);
  var applicativeParAff = {
    pure: function($76) {
      return parallel2(pure22($76));
    },
    Apply0: function() {
      return applyParAff;
    }
  };
  var monadEffectAff = {
    liftEffect: _liftEffect,
    Monad0: function() {
      return monadAff;
    }
  };
  var liftEffect2 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var effectCanceler = function($77) {
    return Canceler($$const(liftEffect2($77)));
  };
  var joinFiber = function(v) {
    return makeAff(function(k) {
      return map6(effectCanceler)(v.join(k));
    });
  };
  var functorFiber = {
    map: function(f) {
      return function(t) {
        return unsafePerformEffect(makeFiber(map1(f)(joinFiber(t))));
      };
    }
  };
  var killFiber = function(e) {
    return function(v) {
      return bind1(liftEffect2(v.isSuspended))(function(suspended) {
        if (suspended) {
          return liftEffect2($$void3(v.kill(e, $$const(pure2(unit)))));
        }
        ;
        return makeAff(function(k) {
          return map6(effectCanceler)(v.kill(e, k));
        });
      });
    };
  };
  var monadThrowAff = {
    throwError: _throwError,
    Monad0: function() {
      return monadAff;
    }
  };
  var monadErrorAff = {
    catchError: _catchError,
    MonadThrow0: function() {
      return monadThrowAff;
    }
  };
  var $$try2 = /* @__PURE__ */ $$try(monadErrorAff);
  var runAff = function(k) {
    return function(aff) {
      return launchAff(bindFlipped3(function($83) {
        return liftEffect2(k($83));
      })($$try2(aff)));
    };
  };
  var runAff_ = function(k) {
    return function(aff) {
      return $$void3(runAff(k)(aff));
    };
  };
  var monadRecAff = {
    tailRecM: function(k) {
      var go2 = function(a2) {
        return bind1(k(a2))(function(res) {
          if (res instanceof Done) {
            return pure22(res.value0);
          }
          ;
          if (res instanceof Loop) {
            return go2(res.value0);
          }
          ;
          throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): " + [res.constructor.name]);
        });
      };
      return go2;
    },
    Monad0: function() {
      return monadAff;
    }
  };
  var nonCanceler = /* @__PURE__ */ $$const(/* @__PURE__ */ pure22(unit));

  // output/Control.Monad.State.Trans/index.js
  var runStateT = function(v) {
    return v;
  };
  var monadTransStateT = {
    lift: function(dictMonad) {
      var bind92 = bind(dictMonad.Bind1());
      var pure56 = pure(dictMonad.Applicative0());
      return function(m) {
        return function(s) {
          return bind92(m)(function(x46) {
            return pure56(new Tuple(x46, s));
          });
        };
      };
    }
  };
  var lift3 = /* @__PURE__ */ lift(monadTransStateT);
  var functorStateT = function(dictFunctor) {
    var map97 = map(dictFunctor);
    return {
      map: function(f) {
        return function(v) {
          return function(s) {
            return map97(function(v1) {
              return new Tuple(f(v1.value0), v1.value1);
            })(v(s));
          };
        };
      }
    };
  };
  var monadStateT = function(dictMonad) {
    return {
      Applicative0: function() {
        return applicativeStateT(dictMonad);
      },
      Bind1: function() {
        return bindStateT(dictMonad);
      }
    };
  };
  var bindStateT = function(dictMonad) {
    var bind92 = bind(dictMonad.Bind1());
    return {
      bind: function(v) {
        return function(f) {
          return function(s) {
            return bind92(v(s))(function(v1) {
              var v3 = f(v1.value0);
              return v3(v1.value1);
            });
          };
        };
      },
      Apply0: function() {
        return applyStateT(dictMonad);
      }
    };
  };
  var applyStateT = function(dictMonad) {
    var functorStateT1 = functorStateT(dictMonad.Bind1().Apply0().Functor0());
    return {
      apply: ap(monadStateT(dictMonad)),
      Functor0: function() {
        return functorStateT1;
      }
    };
  };
  var applicativeStateT = function(dictMonad) {
    var pure56 = pure(dictMonad.Applicative0());
    return {
      pure: function(a2) {
        return function(s) {
          return pure56(new Tuple(a2, s));
        };
      },
      Apply0: function() {
        return applyStateT(dictMonad);
      }
    };
  };
  var monadEffectState = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var monadStateT1 = monadStateT(Monad0);
    return {
      liftEffect: (function() {
        var $203 = lift3(Monad0);
        var $204 = liftEffect(dictMonadEffect);
        return function($205) {
          return $203($204($205));
        };
      })(),
      Monad0: function() {
        return monadStateT1;
      }
    };
  };
  var monadStateStateT = function(dictMonad) {
    var pure56 = pure(dictMonad.Applicative0());
    var monadStateT1 = monadStateT(dictMonad);
    return {
      state: function(f) {
        return function($206) {
          return pure56(f($206));
        };
      },
      Monad0: function() {
        return monadStateT1;
      }
    };
  };

  // output/Effect.Aff.Class/index.js
  var lift5 = /* @__PURE__ */ lift(monadTransStateT);
  var monadAffAff = {
    liftAff: /* @__PURE__ */ identity(categoryFn),
    MonadEffect0: function() {
      return monadEffectAff;
    }
  };
  var liftAff = function(dict) {
    return dict.liftAff;
  };
  var monadAffState = function(dictMonadAff) {
    var MonadEffect0 = dictMonadAff.MonadEffect0();
    var monadEffectState3 = monadEffectState(MonadEffect0);
    return {
      liftAff: (function() {
        var $82 = lift5(MonadEffect0.Monad0());
        var $83 = liftAff(dictMonadAff);
        return function($84) {
          return $82($83($84));
        };
      })(),
      MonadEffect0: function() {
        return monadEffectState3;
      }
    };
  };

  // output/Web.DOM.ParentNode/foreign.js
  var getEffProp = function(name16) {
    return function(node) {
      return function() {
        return node[name16];
      };
    };
  };
  var children = getEffProp("children");
  var _firstElementChild = getEffProp("firstElementChild");
  var _lastElementChild = getEffProp("lastElementChild");
  var childElementCount = getEffProp("childElementCount");
  function _querySelector(selector) {
    return function(node) {
      return function() {
        return node.querySelector(selector);
      };
    };
  }

  // output/Data.Nullable/foreign.js
  var nullImpl = null;
  function nullable(a2, r, f) {
    return a2 == null ? r : f(a2);
  }
  function notNull(x46) {
    return x46;
  }

  // output/Data.Nullable/index.js
  var toNullable = /* @__PURE__ */ maybe(nullImpl)(notNull);
  var toMaybe = function(n) {
    return nullable(n, Nothing.value, Just.create);
  };

  // output/Web.DOM.ParentNode/index.js
  var map7 = /* @__PURE__ */ map(functorEffect);
  var querySelector = function(qs) {
    var $2 = map7(toMaybe);
    var $3 = _querySelector(qs);
    return function($4) {
      return $2($3($4));
    };
  };

  // output/Web.Event.EventTarget/foreign.js
  function eventListener(fn) {
    return function() {
      return function(event) {
        return fn(event)();
      };
    };
  }
  function addEventListener(type2) {
    return function(listener) {
      return function(useCapture) {
        return function(target7) {
          return function() {
            return target7.addEventListener(type2, listener, useCapture);
          };
        };
      };
    };
  }
  function removeEventListener(type2) {
    return function(listener) {
      return function(useCapture) {
        return function(target7) {
          return function() {
            return target7.removeEventListener(type2, listener, useCapture);
          };
        };
      };
    };
  }

  // output/Web.HTML/foreign.js
  var windowImpl = function() {
    return window;
  };

  // output/Web.HTML.Common/index.js
  var ClassName = function(x46) {
    return x46;
  };

  // output/Web.HTML.HTMLDocument/foreign.js
  function _readyState(doc) {
    return doc.readyState;
  }

  // output/Web.HTML.HTMLDocument.ReadyState/index.js
  var Loading = /* @__PURE__ */ (function() {
    function Loading2() {
    }
    ;
    Loading2.value = new Loading2();
    return Loading2;
  })();
  var Interactive = /* @__PURE__ */ (function() {
    function Interactive3() {
    }
    ;
    Interactive3.value = new Interactive3();
    return Interactive3;
  })();
  var Complete = /* @__PURE__ */ (function() {
    function Complete2() {
    }
    ;
    Complete2.value = new Complete2();
    return Complete2;
  })();
  var parse = function(v) {
    if (v === "loading") {
      return new Just(Loading.value);
    }
    ;
    if (v === "interactive") {
      return new Just(Interactive.value);
    }
    ;
    if (v === "complete") {
      return new Just(Complete.value);
    }
    ;
    return Nothing.value;
  };

  // output/Web.HTML.HTMLDocument/index.js
  var map8 = /* @__PURE__ */ map(functorEffect);
  var toParentNode = unsafeCoerce2;
  var toDocument = unsafeCoerce2;
  var readyState = function(doc) {
    return map8((function() {
      var $4 = fromMaybe(Loading.value);
      return function($5) {
        return $4(parse($5));
      };
    })())(function() {
      return _readyState(doc);
    });
  };

  // output/Web.HTML.HTMLElement/foreign.js
  function _read(nothing, just, value18) {
    var tag = Object.prototype.toString.call(value18);
    if (tag.indexOf("[object HTML") === 0 && tag.indexOf("Element]") === tag.length - 8) {
      return just(value18);
    } else {
      return nothing;
    }
  }

  // output/Web.HTML.HTMLElement/index.js
  var toNode = unsafeCoerce2;
  var fromElement = function(x46) {
    return _read(Nothing.value, Just.create, x46);
  };

  // output/Effect.Uncurried/foreign.js
  var mkEffectFn3 = function mkEffectFn32(fn) {
    return function(a2, b2, c) {
      return fn(a2)(b2)(c)();
    };
  };

  // output/Data.Enum/foreign.js
  function toCharCode(c) {
    return c.charCodeAt(0);
  }
  function fromCharCode(c) {
    return String.fromCharCode(c);
  }

  // output/Control.Alternative/index.js
  var guard = function(dictAlternative) {
    var pure56 = pure(dictAlternative.Applicative0());
    var empty9 = empty(dictAlternative.Plus1());
    return function(v) {
      if (v) {
        return pure56(unit);
      }
      ;
      if (!v) {
        return empty9;
      }
      ;
      throw new Error("Failed pattern match at Control.Alternative (line 48, column 1 - line 48, column 54): " + [v.constructor.name]);
    };
  };
  var alternativeArray = {
    Applicative0: function() {
      return applicativeArray;
    },
    Plus1: function() {
      return plusArray;
    }
  };

  // output/Data.Unfoldable/foreign.js
  var unfoldrArrayImpl = function(isNothing2) {
    return function(fromJust7) {
      return function(fst2) {
        return function(snd2) {
          return function(f) {
            return function(b2) {
              var result = [];
              var value18 = b2;
              while (true) {
                var maybe2 = f(value18);
                if (isNothing2(maybe2)) return result;
                var tuple = fromJust7(maybe2);
                result.push(fst2(tuple));
                value18 = snd2(tuple);
              }
            };
          };
        };
      };
    };
  };

  // output/Data.Unfoldable1/foreign.js
  var unfoldr1ArrayImpl = function(isNothing2) {
    return function(fromJust7) {
      return function(fst2) {
        return function(snd2) {
          return function(f) {
            return function(b2) {
              var result = [];
              var value18 = b2;
              while (true) {
                var tuple = f(value18);
                result.push(fst2(tuple));
                var maybe2 = snd2(tuple);
                if (isNothing2(maybe2)) return result;
                value18 = fromJust7(maybe2);
              }
            };
          };
        };
      };
    };
  };

  // output/Data.Unfoldable1/index.js
  var fromJust2 = /* @__PURE__ */ fromJust();
  var unfoldable1Array = {
    unfoldr1: /* @__PURE__ */ unfoldr1ArrayImpl(isNothing)(fromJust2)(fst)(snd)
  };

  // output/Data.Unfoldable/index.js
  var fromJust3 = /* @__PURE__ */ fromJust();
  var unfoldr = function(dict) {
    return dict.unfoldr;
  };
  var unfoldableArray = {
    unfoldr: /* @__PURE__ */ unfoldrArrayImpl(isNothing)(fromJust3)(fst)(snd),
    Unfoldable10: function() {
      return unfoldable1Array;
    }
  };

  // output/Data.Enum/index.js
  var bottom1 = /* @__PURE__ */ bottom(boundedChar);
  var top1 = /* @__PURE__ */ top(boundedChar);
  var toEnum = function(dict) {
    return dict.toEnum;
  };
  var fromEnum = function(dict) {
    return dict.fromEnum;
  };
  var toEnumWithDefaults = function(dictBoundedEnum) {
    var toEnum1 = toEnum(dictBoundedEnum);
    var fromEnum1 = fromEnum(dictBoundedEnum);
    var bottom22 = bottom(dictBoundedEnum.Bounded0());
    return function(low2) {
      return function(high2) {
        return function(x46) {
          var v = toEnum1(x46);
          if (v instanceof Just) {
            return v.value0;
          }
          ;
          if (v instanceof Nothing) {
            var $140 = x46 < fromEnum1(bottom22);
            if ($140) {
              return low2;
            }
            ;
            return high2;
          }
          ;
          throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): " + [v.constructor.name]);
        };
      };
    };
  };
  var defaultSucc = function(toEnum$prime) {
    return function(fromEnum$prime) {
      return function(a2) {
        return toEnum$prime(fromEnum$prime(a2) + 1 | 0);
      };
    };
  };
  var defaultPred = function(toEnum$prime) {
    return function(fromEnum$prime) {
      return function(a2) {
        return toEnum$prime(fromEnum$prime(a2) - 1 | 0);
      };
    };
  };
  var charToEnum = function(v) {
    if (v >= toCharCode(bottom1) && v <= toCharCode(top1)) {
      return new Just(fromCharCode(v));
    }
    ;
    return Nothing.value;
  };
  var enumChar = {
    succ: /* @__PURE__ */ defaultSucc(charToEnum)(toCharCode),
    pred: /* @__PURE__ */ defaultPred(charToEnum)(toCharCode),
    Ord0: function() {
      return ordChar;
    }
  };
  var boundedEnumChar = /* @__PURE__ */ (function() {
    return {
      cardinality: toCharCode(top1) - toCharCode(bottom1) | 0,
      toEnum: charToEnum,
      fromEnum: toCharCode,
      Bounded0: function() {
        return boundedChar;
      },
      Enum1: function() {
        return enumChar;
      }
    };
  })();

  // output/Web.HTML.History/foreign.js
  function back(history2) {
    return function() {
      return history2.back();
    };
  }

  // output/Web.HTML.Location/foreign.js
  function hash(location2) {
    return function() {
      return location2.hash;
    };
  }
  function setHash(hash2) {
    return function(location2) {
      return function() {
        location2.hash = hash2;
      };
    };
  }

  // output/Web.HTML.Window/foreign.js
  function document2(window2) {
    return function() {
      return window2.document;
    };
  }
  function location(window2) {
    return function() {
      return window2.location;
    };
  }
  function history(window2) {
    return function() {
      return window2.history;
    };
  }
  function innerWidth(window2) {
    return function() {
      return window2.innerWidth;
    };
  }
  function innerHeight(window2) {
    return function() {
      return window2.innerHeight;
    };
  }

  // output/Web.HTML.Window/index.js
  var toEventTarget = unsafeCoerce2;

  // output/Web.HTML.Event.EventTypes/index.js
  var input = "input";
  var domcontentloaded = "DOMContentLoaded";
  var change = "change";

  // output/Halogen.Aff.Util/index.js
  var bind2 = /* @__PURE__ */ bind(bindAff);
  var liftEffect3 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var bindFlipped4 = /* @__PURE__ */ bindFlipped(bindEffect);
  var composeKleisliFlipped2 = /* @__PURE__ */ composeKleisliFlipped(bindEffect);
  var pure3 = /* @__PURE__ */ pure(applicativeAff);
  var bindFlipped1 = /* @__PURE__ */ bindFlipped(bindMaybe);
  var pure1 = /* @__PURE__ */ pure(applicativeEffect);
  var map9 = /* @__PURE__ */ map(functorEffect);
  var discard2 = /* @__PURE__ */ discard(discardUnit);
  var throwError2 = /* @__PURE__ */ throwError(monadThrowAff);
  var selectElement = function(query2) {
    return bind2(liftEffect3(bindFlipped4(composeKleisliFlipped2((function() {
      var $16 = querySelector(query2);
      return function($17) {
        return $16(toParentNode($17));
      };
    })())(document2))(windowImpl)))(function(mel) {
      return pure3(bindFlipped1(fromElement)(mel));
    });
  };
  var runHalogenAff = /* @__PURE__ */ runAff_(/* @__PURE__ */ either(throwException)(/* @__PURE__ */ $$const(/* @__PURE__ */ pure1(unit))));
  var awaitLoad = /* @__PURE__ */ makeAff(function(callback) {
    return function __do5() {
      var rs = bindFlipped4(readyState)(bindFlipped4(document2)(windowImpl))();
      if (rs instanceof Loading) {
        var et = map9(toEventTarget)(windowImpl)();
        var listener = eventListener(function(v) {
          return callback(new Right(unit));
        })();
        addEventListener(domcontentloaded)(listener)(false)(et)();
        return effectCanceler(removeEventListener(domcontentloaded)(listener)(false)(et));
      }
      ;
      callback(new Right(unit))();
      return nonCanceler;
    };
  });
  var awaitBody = /* @__PURE__ */ discard2(bindAff)(awaitLoad)(function() {
    return bind2(selectElement("body"))(function(body2) {
      return maybe(throwError2(error("Could not find body")))(pure3)(body2);
    });
  });

  // output/Data.Exists/index.js
  var runExists = unsafeCoerce2;
  var mkExists = unsafeCoerce2;

  // output/Data.Coyoneda/index.js
  var CoyonedaF = /* @__PURE__ */ (function() {
    function CoyonedaF2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    CoyonedaF2.create = function(value0) {
      return function(value1) {
        return new CoyonedaF2(value0, value1);
      };
    };
    return CoyonedaF2;
  })();
  var unCoyoneda = function(f) {
    return function(v) {
      return runExists(function(v1) {
        return f(v1.value0)(v1.value1);
      })(v);
    };
  };
  var coyoneda = function(k) {
    return function(fi) {
      return mkExists(new CoyonedaF(k, fi));
    };
  };
  var functorCoyoneda = {
    map: function(f) {
      return function(v) {
        return runExists(function(v1) {
          return coyoneda(function($180) {
            return f(v1.value0($180));
          })(v1.value1);
        })(v);
      };
    }
  };
  var liftCoyoneda = /* @__PURE__ */ coyoneda(/* @__PURE__ */ identity(categoryFn));

  // output/Data.FunctorWithIndex/foreign.js
  var mapWithIndexArray = function(f) {
    return function(xs) {
      var l = xs.length;
      var result = Array(l);
      for (var i2 = 0; i2 < l; i2++) {
        result[i2] = f(i2)(xs[i2]);
      }
      return result;
    };
  };

  // output/Data.FunctorWithIndex/index.js
  var mapWithIndex = function(dict) {
    return dict.mapWithIndex;
  };
  var functorWithIndexArray = {
    mapWithIndex: mapWithIndexArray,
    Functor0: function() {
      return functorArray;
    }
  };

  // output/Data.FoldableWithIndex/index.js
  var foldr8 = /* @__PURE__ */ foldr(foldableArray);
  var mapWithIndex2 = /* @__PURE__ */ mapWithIndex(functorWithIndexArray);
  var foldl8 = /* @__PURE__ */ foldl(foldableArray);
  var foldrWithIndex = function(dict) {
    return dict.foldrWithIndex;
  };
  var traverseWithIndex_ = function(dictApplicative) {
    var applySecond4 = applySecond(dictApplicative.Apply0());
    var pure56 = pure(dictApplicative);
    return function(dictFoldableWithIndex) {
      var foldrWithIndex1 = foldrWithIndex(dictFoldableWithIndex);
      return function(f) {
        return foldrWithIndex1(function(i2) {
          var $289 = f(i2);
          return function($290) {
            return applySecond4($289($290));
          };
        })(pure56(unit));
      };
    };
  };
  var foldlWithIndex = function(dict) {
    return dict.foldlWithIndex;
  };
  var foldMapWithIndexDefaultR = function(dictFoldableWithIndex) {
    var foldrWithIndex1 = foldrWithIndex(dictFoldableWithIndex);
    return function(dictMonoid) {
      var append37 = append(dictMonoid.Semigroup0());
      var mempty3 = mempty(dictMonoid);
      return function(f) {
        return foldrWithIndex1(function(i2) {
          return function(x46) {
            return function(acc) {
              return append37(f(i2)(x46))(acc);
            };
          };
        })(mempty3);
      };
    };
  };
  var foldableWithIndexArray = {
    foldrWithIndex: function(f) {
      return function(z) {
        var $291 = foldr8(function(v) {
          return function(y46) {
            return f(v.value0)(v.value1)(y46);
          };
        })(z);
        var $292 = mapWithIndex2(Tuple.create);
        return function($293) {
          return $291($292($293));
        };
      };
    },
    foldlWithIndex: function(f) {
      return function(z) {
        var $294 = foldl8(function(y46) {
          return function(v) {
            return f(v.value0)(y46)(v.value1);
          };
        })(z);
        var $295 = mapWithIndex2(Tuple.create);
        return function($296) {
          return $294($295($296));
        };
      };
    },
    foldMapWithIndex: function(dictMonoid) {
      return foldMapWithIndexDefaultR(foldableWithIndexArray)(dictMonoid);
    },
    Foldable0: function() {
      return foldableArray;
    }
  };

  // output/Data.TraversableWithIndex/index.js
  var traverseWithIndexDefault = function(dictTraversableWithIndex) {
    var sequence4 = sequence(dictTraversableWithIndex.Traversable2());
    var mapWithIndex4 = mapWithIndex(dictTraversableWithIndex.FunctorWithIndex0());
    return function(dictApplicative) {
      var sequence12 = sequence4(dictApplicative);
      return function(f) {
        var $174 = mapWithIndex4(f);
        return function($175) {
          return sequence12($174($175));
        };
      };
    };
  };
  var traverseWithIndex = function(dict) {
    return dict.traverseWithIndex;
  };
  var traversableWithIndexArray = {
    traverseWithIndex: function(dictApplicative) {
      return traverseWithIndexDefault(traversableWithIndexArray)(dictApplicative);
    },
    FunctorWithIndex0: function() {
      return functorWithIndexArray;
    },
    FoldableWithIndex1: function() {
      return foldableWithIndexArray;
    },
    Traversable2: function() {
      return traversableArray;
    }
  };

  // output/Data.NonEmpty/index.js
  var NonEmpty = /* @__PURE__ */ (function() {
    function NonEmpty2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    NonEmpty2.create = function(value0) {
      return function(value1) {
        return new NonEmpty2(value0, value1);
      };
    };
    return NonEmpty2;
  })();
  var singleton2 = function(dictPlus) {
    var empty9 = empty(dictPlus);
    return function(a2) {
      return new NonEmpty(a2, empty9);
    };
  };

  // output/Data.List.Types/index.js
  var identity8 = /* @__PURE__ */ identity(categoryFn);
  var Nil = /* @__PURE__ */ (function() {
    function Nil2() {
    }
    ;
    Nil2.value = new Nil2();
    return Nil2;
  })();
  var Cons = /* @__PURE__ */ (function() {
    function Cons2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Cons2.create = function(value0) {
      return function(value1) {
        return new Cons2(value0, value1);
      };
    };
    return Cons2;
  })();
  var NonEmptyList = function(x46) {
    return x46;
  };
  var toList = function(v) {
    return new Cons(v.value0, v.value1);
  };
  var listMap = function(f) {
    var chunkedRevMap = function($copy_v) {
      return function($copy_v1) {
        var $tco_var_v = $copy_v;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v, v1) {
          if (v1 instanceof Cons && (v1.value1 instanceof Cons && v1.value1.value1 instanceof Cons)) {
            $tco_var_v = new Cons(v1, v);
            $copy_v1 = v1.value1.value1.value1;
            return;
          }
          ;
          var unrolledMap = function(v2) {
            if (v2 instanceof Cons && (v2.value1 instanceof Cons && v2.value1.value1 instanceof Nil)) {
              return new Cons(f(v2.value0), new Cons(f(v2.value1.value0), Nil.value));
            }
            ;
            if (v2 instanceof Cons && v2.value1 instanceof Nil) {
              return new Cons(f(v2.value0), Nil.value);
            }
            ;
            return Nil.value;
          };
          var reverseUnrolledMap = function($copy_v2) {
            return function($copy_v3) {
              var $tco_var_v2 = $copy_v2;
              var $tco_done1 = false;
              var $tco_result2;
              function $tco_loop2(v2, v3) {
                if (v2 instanceof Cons && (v2.value0 instanceof Cons && (v2.value0.value1 instanceof Cons && v2.value0.value1.value1 instanceof Cons))) {
                  $tco_var_v2 = v2.value1;
                  $copy_v3 = new Cons(f(v2.value0.value0), new Cons(f(v2.value0.value1.value0), new Cons(f(v2.value0.value1.value1.value0), v3)));
                  return;
                }
                ;
                $tco_done1 = true;
                return v3;
              }
              ;
              while (!$tco_done1) {
                $tco_result2 = $tco_loop2($tco_var_v2, $copy_v3);
              }
              ;
              return $tco_result2;
            };
          };
          $tco_done = true;
          return reverseUnrolledMap(v)(unrolledMap(v1));
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_v, $copy_v1);
        }
        ;
        return $tco_result;
      };
    };
    return chunkedRevMap(Nil.value);
  };
  var functorList = {
    map: listMap
  };
  var map10 = /* @__PURE__ */ map(functorList);
  var foldableList = {
    foldr: function(f) {
      return function(b2) {
        var rev3 = (function() {
          var go2 = function($copy_v) {
            return function($copy_v1) {
              var $tco_var_v = $copy_v;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(v, v1) {
                if (v1 instanceof Nil) {
                  $tco_done = true;
                  return v;
                }
                ;
                if (v1 instanceof Cons) {
                  $tco_var_v = new Cons(v1.value0, v);
                  $copy_v1 = v1.value1;
                  return;
                }
                ;
                throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): " + [v.constructor.name, v1.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_v, $copy_v1);
              }
              ;
              return $tco_result;
            };
          };
          return go2(Nil.value);
        })();
        var $284 = foldl(foldableList)(flip(f))(b2);
        return function($285) {
          return $284(rev3($285));
        };
      };
    },
    foldl: function(f) {
      var go2 = function($copy_b) {
        return function($copy_v) {
          var $tco_var_b = $copy_b;
          var $tco_done1 = false;
          var $tco_result;
          function $tco_loop(b2, v) {
            if (v instanceof Nil) {
              $tco_done1 = true;
              return b2;
            }
            ;
            if (v instanceof Cons) {
              $tco_var_b = f(b2)(v.value0);
              $copy_v = v.value1;
              return;
            }
            ;
            throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): " + [v.constructor.name]);
          }
          ;
          while (!$tco_done1) {
            $tco_result = $tco_loop($tco_var_b, $copy_v);
          }
          ;
          return $tco_result;
        };
      };
      return go2;
    },
    foldMap: function(dictMonoid) {
      var append210 = append(dictMonoid.Semigroup0());
      var mempty3 = mempty(dictMonoid);
      return function(f) {
        return foldl(foldableList)(function(acc) {
          var $286 = append210(acc);
          return function($287) {
            return $286(f($287));
          };
        })(mempty3);
      };
    }
  };
  var foldl2 = /* @__PURE__ */ foldl(foldableList);
  var foldr2 = /* @__PURE__ */ foldr(foldableList);
  var semigroupList = {
    append: function(xs) {
      return function(ys) {
        return foldr2(Cons.create)(ys)(xs);
      };
    }
  };
  var append1 = /* @__PURE__ */ append(semigroupList);
  var monoidList = /* @__PURE__ */ (function() {
    return {
      mempty: Nil.value,
      Semigroup0: function() {
        return semigroupList;
      }
    };
  })();
  var semigroupNonEmptyList = {
    append: function(v) {
      return function(as$prime) {
        return new NonEmpty(v.value0, append1(v.value1)(toList(as$prime)));
      };
    }
  };
  var traversableList = {
    traverse: function(dictApplicative) {
      var Apply0 = dictApplicative.Apply0();
      var map130 = map(Apply0.Functor0());
      var lift22 = lift2(Apply0);
      var pure121 = pure(dictApplicative);
      return function(f) {
        var $301 = map130(foldl2(flip(Cons.create))(Nil.value));
        var $302 = foldl2(function(acc) {
          var $304 = lift22(flip(Cons.create))(acc);
          return function($305) {
            return $304(f($305));
          };
        })(pure121(Nil.value));
        return function($303) {
          return $301($302($303));
        };
      };
    },
    sequence: function(dictApplicative) {
      return traverse(traversableList)(dictApplicative)(identity8);
    },
    Functor0: function() {
      return functorList;
    },
    Foldable1: function() {
      return foldableList;
    }
  };
  var applyList = {
    apply: function(v) {
      return function(v1) {
        if (v instanceof Nil) {
          return Nil.value;
        }
        ;
        if (v instanceof Cons) {
          return append1(map10(v.value0)(v1))(apply(applyList)(v.value1)(v1));
        }
        ;
        throw new Error("Failed pattern match at Data.List.Types (line 157, column 1 - line 159, column 48): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    Functor0: function() {
      return functorList;
    }
  };
  var bindList = {
    bind: function(v) {
      return function(v1) {
        if (v instanceof Nil) {
          return Nil.value;
        }
        ;
        if (v instanceof Cons) {
          return append1(v1(v.value0))(bind(bindList)(v.value1)(v1));
        }
        ;
        throw new Error("Failed pattern match at Data.List.Types (line 164, column 1 - line 166, column 37): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    Apply0: function() {
      return applyList;
    }
  };
  var applicativeList = {
    pure: function(a2) {
      return new Cons(a2, Nil.value);
    },
    Apply0: function() {
      return applyList;
    }
  };
  var altList = {
    alt: append1,
    Functor0: function() {
      return functorList;
    }
  };
  var plusList = /* @__PURE__ */ (function() {
    return {
      empty: Nil.value,
      Alt0: function() {
        return altList;
      }
    };
  })();

  // output/Data.Map.Internal/index.js
  var $runtime_lazy4 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var map11 = /* @__PURE__ */ map(functorMaybe);
  var Leaf = /* @__PURE__ */ (function() {
    function Leaf2() {
    }
    ;
    Leaf2.value = new Leaf2();
    return Leaf2;
  })();
  var Node = /* @__PURE__ */ (function() {
    function Node3(value0, value1, value22, value32, value42, value52) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
      this.value4 = value42;
      this.value5 = value52;
    }
    ;
    Node3.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return function(value42) {
              return function(value52) {
                return new Node3(value0, value1, value22, value32, value42, value52);
              };
            };
          };
        };
      };
    };
    return Node3;
  })();
  var IterLeaf = /* @__PURE__ */ (function() {
    function IterLeaf2() {
    }
    ;
    IterLeaf2.value = new IterLeaf2();
    return IterLeaf2;
  })();
  var IterEmit = /* @__PURE__ */ (function() {
    function IterEmit2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    IterEmit2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new IterEmit2(value0, value1, value22);
        };
      };
    };
    return IterEmit2;
  })();
  var IterNode = /* @__PURE__ */ (function() {
    function IterNode2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    IterNode2.create = function(value0) {
      return function(value1) {
        return new IterNode2(value0, value1);
      };
    };
    return IterNode2;
  })();
  var Split = /* @__PURE__ */ (function() {
    function Split2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    Split2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new Split2(value0, value1, value22);
        };
      };
    };
    return Split2;
  })();
  var SplitLast = /* @__PURE__ */ (function() {
    function SplitLast2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    SplitLast2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new SplitLast2(value0, value1, value22);
        };
      };
    };
    return SplitLast2;
  })();
  var unsafeNode = function(k, v, l, r) {
    if (l instanceof Leaf) {
      if (r instanceof Leaf) {
        return new Node(1, 1, k, v, l, r);
      }
      ;
      if (r instanceof Node) {
        return new Node(1 + r.value0 | 0, 1 + r.value1 | 0, k, v, l, r);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 702, column 5 - line 706, column 39): " + [r.constructor.name]);
    }
    ;
    if (l instanceof Node) {
      if (r instanceof Leaf) {
        return new Node(1 + l.value0 | 0, 1 + l.value1 | 0, k, v, l, r);
      }
      ;
      if (r instanceof Node) {
        return new Node(1 + (function() {
          var $280 = l.value0 > r.value0;
          if ($280) {
            return l.value0;
          }
          ;
          return r.value0;
        })() | 0, (1 + l.value1 | 0) + r.value1 | 0, k, v, l, r);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 708, column 5 - line 712, column 68): " + [r.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at Data.Map.Internal (line 700, column 32 - line 712, column 68): " + [l.constructor.name]);
  };
  var toMapIter = /* @__PURE__ */ (function() {
    return flip(IterNode.create)(IterLeaf.value);
  })();
  var stepWith = function(f) {
    return function(next2) {
      return function(done) {
        var go2 = function($copy_v) {
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(v) {
            if (v instanceof IterLeaf) {
              $tco_done = true;
              return done(unit);
            }
            ;
            if (v instanceof IterEmit) {
              $tco_done = true;
              return next2(v.value0, v.value1, v.value2);
            }
            ;
            if (v instanceof IterNode) {
              $copy_v = f(v.value1)(v.value0);
              return;
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 940, column 8 - line 946, column 20): " + [v.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($copy_v);
          }
          ;
          return $tco_result;
        };
        return go2;
      };
    };
  };
  var size3 = function(v) {
    if (v instanceof Leaf) {
      return 0;
    }
    ;
    if (v instanceof Node) {
      return v.value1;
    }
    ;
    throw new Error("Failed pattern match at Data.Map.Internal (line 618, column 8 - line 620, column 24): " + [v.constructor.name]);
  };
  var singleton3 = function(k) {
    return function(v) {
      return new Node(1, 1, k, v, Leaf.value, Leaf.value);
    };
  };
  var unsafeBalancedNode = /* @__PURE__ */ (function() {
    var height25 = function(v) {
      if (v instanceof Leaf) {
        return 0;
      }
      ;
      if (v instanceof Node) {
        return v.value0;
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 757, column 12 - line 759, column 26): " + [v.constructor.name]);
    };
    var rotateLeft = function(k, v, l, rk, rv, rl, rr) {
      if (rl instanceof Node && rl.value0 > height25(rr)) {
        return unsafeNode(rl.value2, rl.value3, unsafeNode(k, v, l, rl.value4), unsafeNode(rk, rv, rl.value5, rr));
      }
      ;
      return unsafeNode(rk, rv, unsafeNode(k, v, l, rl), rr);
    };
    var rotateRight = function(k, v, lk, lv, ll, lr, r) {
      if (lr instanceof Node && height25(ll) <= lr.value0) {
        return unsafeNode(lr.value2, lr.value3, unsafeNode(lk, lv, ll, lr.value4), unsafeNode(k, v, lr.value5, r));
      }
      ;
      return unsafeNode(lk, lv, ll, unsafeNode(k, v, lr, r));
    };
    return function(k, v, l, r) {
      if (l instanceof Leaf) {
        if (r instanceof Leaf) {
          return singleton3(k)(v);
        }
        ;
        if (r instanceof Node && r.value0 > 1) {
          return rotateLeft(k, v, l, r.value2, r.value3, r.value4, r.value5);
        }
        ;
        return unsafeNode(k, v, l, r);
      }
      ;
      if (l instanceof Node) {
        if (r instanceof Node) {
          if (r.value0 > (l.value0 + 1 | 0)) {
            return rotateLeft(k, v, l, r.value2, r.value3, r.value4, r.value5);
          }
          ;
          if (l.value0 > (r.value0 + 1 | 0)) {
            return rotateRight(k, v, l.value2, l.value3, l.value4, l.value5, r);
          }
          ;
        }
        ;
        if (r instanceof Leaf && l.value0 > 1) {
          return rotateRight(k, v, l.value2, l.value3, l.value4, l.value5, r);
        }
        ;
        return unsafeNode(k, v, l, r);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 717, column 40 - line 738, column 34): " + [l.constructor.name]);
    };
  })();
  var $lazy_unsafeSplit = /* @__PURE__ */ $runtime_lazy4("unsafeSplit", "Data.Map.Internal", function() {
    return function(comp, k, m) {
      if (m instanceof Leaf) {
        return new Split(Nothing.value, Leaf.value, Leaf.value);
      }
      ;
      if (m instanceof Node) {
        var v = comp(k)(m.value2);
        if (v instanceof LT) {
          var v1 = $lazy_unsafeSplit(793)(comp, k, m.value4);
          return new Split(v1.value0, v1.value1, unsafeBalancedNode(m.value2, m.value3, v1.value2, m.value5));
        }
        ;
        if (v instanceof GT) {
          var v1 = $lazy_unsafeSplit(796)(comp, k, m.value5);
          return new Split(v1.value0, unsafeBalancedNode(m.value2, m.value3, m.value4, v1.value1), v1.value2);
        }
        ;
        if (v instanceof EQ) {
          return new Split(new Just(m.value3), m.value4, m.value5);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 791, column 5 - line 799, column 30): " + [v.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 787, column 34 - line 799, column 30): " + [m.constructor.name]);
    };
  });
  var unsafeSplit = /* @__PURE__ */ $lazy_unsafeSplit(786);
  var $lazy_unsafeSplitLast = /* @__PURE__ */ $runtime_lazy4("unsafeSplitLast", "Data.Map.Internal", function() {
    return function(k, v, l, r) {
      if (r instanceof Leaf) {
        return new SplitLast(k, v, l);
      }
      ;
      if (r instanceof Node) {
        var v1 = $lazy_unsafeSplitLast(779)(r.value2, r.value3, r.value4, r.value5);
        return new SplitLast(v1.value0, v1.value1, unsafeBalancedNode(k, v, l, v1.value2));
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 776, column 37 - line 780, column 57): " + [r.constructor.name]);
    };
  });
  var unsafeSplitLast = /* @__PURE__ */ $lazy_unsafeSplitLast(775);
  var unsafeJoinNodes = function(v, v1) {
    if (v instanceof Leaf) {
      return v1;
    }
    ;
    if (v instanceof Node) {
      var v2 = unsafeSplitLast(v.value2, v.value3, v.value4, v.value5);
      return unsafeBalancedNode(v2.value0, v2.value1, v2.value2, v1);
    }
    ;
    throw new Error("Failed pattern match at Data.Map.Internal (line 764, column 25 - line 768, column 38): " + [v.constructor.name, v1.constructor.name]);
  };
  var $lazy_unsafeDifference = /* @__PURE__ */ $runtime_lazy4("unsafeDifference", "Data.Map.Internal", function() {
    return function(comp, l, r) {
      if (l instanceof Leaf) {
        return Leaf.value;
      }
      ;
      if (r instanceof Leaf) {
        return l;
      }
      ;
      if (r instanceof Node) {
        var v = unsafeSplit(comp, r.value2, l);
        var l$prime = $lazy_unsafeDifference(841)(comp, v.value1, r.value4);
        var r$prime = $lazy_unsafeDifference(842)(comp, v.value2, r.value5);
        return unsafeJoinNodes(l$prime, r$prime);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 836, column 39 - line 843, column 33): " + [l.constructor.name, r.constructor.name]);
    };
  });
  var unsafeDifference = /* @__PURE__ */ $lazy_unsafeDifference(835);
  var $lazy_unsafeIntersectionWith = /* @__PURE__ */ $runtime_lazy4("unsafeIntersectionWith", "Data.Map.Internal", function() {
    return function(comp, app, l, r) {
      if (l instanceof Leaf) {
        return Leaf.value;
      }
      ;
      if (r instanceof Leaf) {
        return Leaf.value;
      }
      ;
      if (r instanceof Node) {
        var v = unsafeSplit(comp, r.value2, l);
        var l$prime = $lazy_unsafeIntersectionWith(825)(comp, app, v.value1, r.value4);
        var r$prime = $lazy_unsafeIntersectionWith(826)(comp, app, v.value2, r.value5);
        if (v.value0 instanceof Just) {
          return unsafeBalancedNode(r.value2, app(v.value0.value0)(r.value3), l$prime, r$prime);
        }
        ;
        if (v.value0 instanceof Nothing) {
          return unsafeJoinNodes(l$prime, r$prime);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 827, column 5 - line 831, column 37): " + [v.value0.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 820, column 49 - line 831, column 37): " + [l.constructor.name, r.constructor.name]);
    };
  });
  var unsafeIntersectionWith = /* @__PURE__ */ $lazy_unsafeIntersectionWith(819);
  var $lazy_unsafeUnionWith = /* @__PURE__ */ $runtime_lazy4("unsafeUnionWith", "Data.Map.Internal", function() {
    return function(comp, app, l, r) {
      if (l instanceof Leaf) {
        return r;
      }
      ;
      if (r instanceof Leaf) {
        return l;
      }
      ;
      if (r instanceof Node) {
        var v = unsafeSplit(comp, r.value2, l);
        var l$prime = $lazy_unsafeUnionWith(809)(comp, app, v.value1, r.value4);
        var r$prime = $lazy_unsafeUnionWith(810)(comp, app, v.value2, r.value5);
        if (v.value0 instanceof Just) {
          return unsafeBalancedNode(r.value2, app(v.value0.value0)(r.value3), l$prime, r$prime);
        }
        ;
        if (v.value0 instanceof Nothing) {
          return unsafeBalancedNode(r.value2, r.value3, l$prime, r$prime);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 811, column 5 - line 815, column 46): " + [v.value0.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 804, column 42 - line 815, column 46): " + [l.constructor.name, r.constructor.name]);
    };
  });
  var unsafeUnionWith = /* @__PURE__ */ $lazy_unsafeUnionWith(803);
  var unionWith = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(app) {
      return function(m1) {
        return function(m2) {
          return unsafeUnionWith(compare20, app, m1, m2);
        };
      };
    };
  };
  var union = function(dictOrd) {
    return unionWith(dictOrd)($$const);
  };
  var pop = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(k) {
      return function(m) {
        var v = unsafeSplit(compare20, k, m);
        return map11(function(a2) {
          return new Tuple(a2, unsafeJoinNodes(v.value1, v.value2));
        })(v.value0);
      };
    };
  };
  var member = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(k) {
      var go2 = function($copy_v) {
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v) {
          if (v instanceof Leaf) {
            $tco_done = true;
            return false;
          }
          ;
          if (v instanceof Node) {
            var v1 = compare20(k)(v.value2);
            if (v1 instanceof LT) {
              $copy_v = v.value4;
              return;
            }
            ;
            if (v1 instanceof GT) {
              $copy_v = v.value5;
              return;
            }
            ;
            if (v1 instanceof EQ) {
              $tco_done = true;
              return true;
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 7 - line 462, column 19): " + [v1.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 456, column 8 - line 462, column 19): " + [v.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($copy_v);
        }
        ;
        return $tco_result;
      };
      return go2;
    };
  };
  var lookup = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(k) {
      var go2 = function($copy_v) {
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v) {
          if (v instanceof Leaf) {
            $tco_done = true;
            return Nothing.value;
          }
          ;
          if (v instanceof Node) {
            var v1 = compare20(k)(v.value2);
            if (v1 instanceof LT) {
              $copy_v = v.value4;
              return;
            }
            ;
            if (v1 instanceof GT) {
              $copy_v = v.value5;
              return;
            }
            ;
            if (v1 instanceof EQ) {
              $tco_done = true;
              return new Just(v.value3);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 283, column 7 - line 286, column 22): " + [v1.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 280, column 8 - line 286, column 22): " + [v.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($copy_v);
        }
        ;
        return $tco_result;
      };
      return go2;
    };
  };
  var iterMapL = /* @__PURE__ */ (function() {
    var go2 = function($copy_iter) {
      return function($copy_v) {
        var $tco_var_iter = $copy_iter;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(iter, v) {
          if (v instanceof Leaf) {
            $tco_done = true;
            return iter;
          }
          ;
          if (v instanceof Node) {
            if (v.value5 instanceof Leaf) {
              $tco_var_iter = new IterEmit(v.value2, v.value3, iter);
              $copy_v = v.value4;
              return;
            }
            ;
            $tco_var_iter = new IterEmit(v.value2, v.value3, new IterNode(v.value5, iter));
            $copy_v = v.value4;
            return;
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 951, column 13 - line 958, column 48): " + [v.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_iter, $copy_v);
        }
        ;
        return $tco_result;
      };
    };
    return go2;
  })();
  var stepAscCps = /* @__PURE__ */ stepWith(iterMapL);
  var stepUnfoldr = /* @__PURE__ */ (function() {
    var step4 = function(k, v, next2) {
      return new Just(new Tuple(new Tuple(k, v), next2));
    };
    return stepAscCps(step4)(function(v) {
      return Nothing.value;
    });
  })();
  var toUnfoldable = function(dictUnfoldable) {
    var $784 = unfoldr(dictUnfoldable)(stepUnfoldr);
    return function($785) {
      return $784(toMapIter($785));
    };
  };
  var isEmpty = function(v) {
    if (v instanceof Leaf) {
      return true;
    }
    ;
    return false;
  };
  var intersectionWith = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(app) {
      return function(m1) {
        return function(m2) {
          return unsafeIntersectionWith(compare20, app, m1, m2);
        };
      };
    };
  };
  var intersection = function(dictOrd) {
    return intersectionWith(dictOrd)($$const);
  };
  var insertWith = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(app) {
      return function(k) {
        return function(v) {
          var go2 = function(v1) {
            if (v1 instanceof Leaf) {
              return singleton3(k)(v);
            }
            ;
            if (v1 instanceof Node) {
              var v2 = compare20(k)(v1.value2);
              if (v2 instanceof LT) {
                return unsafeBalancedNode(v1.value2, v1.value3, go2(v1.value4), v1.value5);
              }
              ;
              if (v2 instanceof GT) {
                return unsafeBalancedNode(v1.value2, v1.value3, v1.value4, go2(v1.value5));
              }
              ;
              if (v2 instanceof EQ) {
                return new Node(v1.value0, v1.value1, k, app(v1.value3)(v), v1.value4, v1.value5);
              }
              ;
              throw new Error("Failed pattern match at Data.Map.Internal (line 486, column 7 - line 489, column 44): " + [v2.constructor.name]);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 483, column 8 - line 489, column 44): " + [v1.constructor.name]);
          };
          return go2;
        };
      };
    };
  };
  var insert = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(k) {
      return function(v) {
        var go2 = function(v1) {
          if (v1 instanceof Leaf) {
            return singleton3(k)(v);
          }
          ;
          if (v1 instanceof Node) {
            var v2 = compare20(k)(v1.value2);
            if (v2 instanceof LT) {
              return unsafeBalancedNode(v1.value2, v1.value3, go2(v1.value4), v1.value5);
            }
            ;
            if (v2 instanceof GT) {
              return unsafeBalancedNode(v1.value2, v1.value3, v1.value4, go2(v1.value5));
            }
            ;
            if (v2 instanceof EQ) {
              return new Node(v1.value0, v1.value1, k, v, v1.value4, v1.value5);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 471, column 7 - line 474, column 35): " + [v2.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 468, column 8 - line 474, column 35): " + [v1.constructor.name]);
        };
        return go2;
      };
    };
  };
  var functorMap = {
    map: function(f) {
      var go2 = function(v) {
        if (v instanceof Leaf) {
          return Leaf.value;
        }
        ;
        if (v instanceof Node) {
          return new Node(v.value0, v.value1, v.value2, f(v.value3), go2(v.value4), go2(v.value5));
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 10 - line 150, column 39): " + [v.constructor.name]);
      };
      return go2;
    }
  };
  var foldableMap = {
    foldr: function(f) {
      return function(z) {
        var $lazy_go = $runtime_lazy4("go", "Data.Map.Internal", function() {
          return function(m$prime, z$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(172)(m$prime.value4, f(m$prime.value3)($lazy_go(172)(m$prime.value5, z$prime)));
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 169, column 26 - line 172, column 43): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(169);
        return function(m) {
          return go2(m, z);
        };
      };
    },
    foldl: function(f) {
      return function(z) {
        var $lazy_go = $runtime_lazy4("go", "Data.Map.Internal", function() {
          return function(z$prime, m$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(178)(f($lazy_go(178)(z$prime, m$prime.value4))(m$prime.value3), m$prime.value5);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 175, column 26 - line 178, column 43): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(175);
        return function(m) {
          return go2(z, m);
        };
      };
    },
    foldMap: function(dictMonoid) {
      var mempty3 = mempty(dictMonoid);
      var append123 = append(dictMonoid.Semigroup0());
      return function(f) {
        var go2 = function(v) {
          if (v instanceof Leaf) {
            return mempty3;
          }
          ;
          if (v instanceof Node) {
            return append123(go2(v.value4))(append123(f(v.value3))(go2(v.value5)));
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 181, column 10 - line 184, column 28): " + [v.constructor.name]);
        };
        return go2;
      };
    }
  };
  var foldableWithIndexMap = {
    foldrWithIndex: function(f) {
      return function(z) {
        var $lazy_go = $runtime_lazy4("go", "Data.Map.Internal", function() {
          return function(m$prime, z$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(192)(m$prime.value4, f(m$prime.value2)(m$prime.value3)($lazy_go(192)(m$prime.value5, z$prime)));
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 189, column 26 - line 192, column 45): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(189);
        return function(m) {
          return go2(m, z);
        };
      };
    },
    foldlWithIndex: function(f) {
      return function(z) {
        var $lazy_go = $runtime_lazy4("go", "Data.Map.Internal", function() {
          return function(z$prime, m$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(198)(f(m$prime.value2)($lazy_go(198)(z$prime, m$prime.value4))(m$prime.value3), m$prime.value5);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 195, column 26 - line 198, column 45): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(195);
        return function(m) {
          return go2(z, m);
        };
      };
    },
    foldMapWithIndex: function(dictMonoid) {
      var mempty3 = mempty(dictMonoid);
      var append123 = append(dictMonoid.Semigroup0());
      return function(f) {
        var go2 = function(v) {
          if (v instanceof Leaf) {
            return mempty3;
          }
          ;
          if (v instanceof Node) {
            return append123(go2(v.value4))(append123(f(v.value2)(v.value3))(go2(v.value5)));
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 201, column 10 - line 204, column 30): " + [v.constructor.name]);
        };
        return go2;
      };
    },
    Foldable0: function() {
      return foldableMap;
    }
  };
  var keys = /* @__PURE__ */ (function() {
    return foldrWithIndex(foldableWithIndexMap)(function(k) {
      return function(v) {
        return function(acc) {
          return new Cons(k, acc);
        };
      };
    })(Nil.value);
  })();
  var values = /* @__PURE__ */ (function() {
    return foldr(foldableMap)(Cons.create)(Nil.value);
  })();
  var findMin = function($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v) {
      if (v instanceof Leaf) {
        $tco_done = true;
        return Nothing.value;
      }
      ;
      if (v instanceof Node) {
        if (v.value4 instanceof Leaf) {
          $tco_done = true;
          return new Just({
            key: v.value2,
            value: v.value3
          });
        }
        ;
        $copy_v = v.value4;
        return;
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 361, column 11 - line 366, column 21): " + [v.constructor.name]);
    }
    ;
    while (!$tco_done) {
      $tco_result = $tco_loop($copy_v);
    }
    ;
    return $tco_result;
  };
  var empty2 = /* @__PURE__ */ (function() {
    return Leaf.value;
  })();
  var fromFoldable = function(dictOrd) {
    var insert110 = insert(dictOrd);
    return function(dictFoldable) {
      return foldl(dictFoldable)(function(m) {
        return function(v) {
          return insert110(v.value0)(v.value1)(m);
        };
      })(empty2);
    };
  };
  var fromFoldableWith = function(dictOrd) {
    var insertWith1 = insertWith(dictOrd);
    return function(dictFoldable) {
      var foldl23 = foldl(dictFoldable);
      return function(f) {
        var f$prime = insertWith1(flip(f));
        return foldl23(function(m) {
          return function(v) {
            return f$prime(v.value0)(v.value1)(m);
          };
        })(empty2);
      };
    };
  };
  var difference = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(m1) {
      return function(m2) {
        return unsafeDifference(compare20, m1, m2);
      };
    };
  };
  var $$delete = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(k) {
      var go2 = function(v) {
        if (v instanceof Leaf) {
          return Leaf.value;
        }
        ;
        if (v instanceof Node) {
          var v1 = compare20(k)(v.value2);
          if (v1 instanceof LT) {
            return unsafeBalancedNode(v.value2, v.value3, go2(v.value4), v.value5);
          }
          ;
          if (v1 instanceof GT) {
            return unsafeBalancedNode(v.value2, v.value3, v.value4, go2(v.value5));
          }
          ;
          if (v1 instanceof EQ) {
            return unsafeJoinNodes(v.value4, v.value5);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 7 - line 501, column 43): " + [v1.constructor.name]);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 8 - line 501, column 43): " + [v.constructor.name]);
      };
      return go2;
    };
  };
  var alter = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(f) {
      return function(k) {
        return function(m) {
          var v = unsafeSplit(compare20, k, m);
          var v2 = f(v.value0);
          if (v2 instanceof Nothing) {
            return unsafeJoinNodes(v.value1, v.value2);
          }
          ;
          if (v2 instanceof Just) {
            return unsafeBalancedNode(k, v2.value0, v.value1, v.value2);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 514, column 3 - line 518, column 41): " + [v2.constructor.name]);
        };
      };
    };
  };

  // output/Halogen.Data.OrdBox/index.js
  var OrdBox = /* @__PURE__ */ (function() {
    function OrdBox2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    OrdBox2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new OrdBox2(value0, value1, value22);
        };
      };
    };
    return OrdBox2;
  })();
  var mkOrdBox = function(dictOrd) {
    return OrdBox.create(eq(dictOrd.Eq0()))(compare(dictOrd));
  };
  var eqOrdBox = {
    eq: function(v) {
      return function(v1) {
        return v.value0(v.value2)(v1.value2);
      };
    }
  };
  var ordOrdBox = {
    compare: function(v) {
      return function(v1) {
        return v.value1(v.value2)(v1.value2);
      };
    },
    Eq0: function() {
      return eqOrdBox;
    }
  };

  // output/Halogen.Data.Slot/index.js
  var ordTuple2 = /* @__PURE__ */ ordTuple(ordString)(ordOrdBox);
  var pop1 = /* @__PURE__ */ pop(ordTuple2);
  var lookup1 = /* @__PURE__ */ lookup(ordTuple2);
  var insert1 = /* @__PURE__ */ insert(ordTuple2);
  var pop2 = function() {
    return function(dictIsSymbol) {
      var reflectSymbol2 = reflectSymbol(dictIsSymbol);
      return function(dictOrd) {
        var mkOrdBox2 = mkOrdBox(dictOrd);
        return function(sym) {
          return function(key) {
            return function(v) {
              return pop1(new Tuple(reflectSymbol2(sym), mkOrdBox2(key)))(v);
            };
          };
        };
      };
    };
  };
  var lookup2 = function() {
    return function(dictIsSymbol) {
      var reflectSymbol2 = reflectSymbol(dictIsSymbol);
      return function(dictOrd) {
        var mkOrdBox2 = mkOrdBox(dictOrd);
        return function(sym) {
          return function(key) {
            return function(v) {
              return lookup1(new Tuple(reflectSymbol2(sym), mkOrdBox2(key)))(v);
            };
          };
        };
      };
    };
  };
  var insert2 = function() {
    return function(dictIsSymbol) {
      var reflectSymbol2 = reflectSymbol(dictIsSymbol);
      return function(dictOrd) {
        var mkOrdBox2 = mkOrdBox(dictOrd);
        return function(sym) {
          return function(key) {
            return function(val) {
              return function(v) {
                return insert1(new Tuple(reflectSymbol2(sym), mkOrdBox2(key)))(val)(v);
              };
            };
          };
        };
      };
    };
  };
  var foreachSlot = function(dictApplicative) {
    var traverse_16 = traverse_(dictApplicative)(foldableMap);
    return function(v) {
      return function(k) {
        return traverse_16(function($54) {
          return k($54);
        })(v);
      };
    };
  };
  var empty3 = empty2;

  // output/DOM.HTML.Indexed.ButtonType/index.js
  var ButtonButton = /* @__PURE__ */ (function() {
    function ButtonButton2() {
    }
    ;
    ButtonButton2.value = new ButtonButton2();
    return ButtonButton2;
  })();
  var ButtonSubmit = /* @__PURE__ */ (function() {
    function ButtonSubmit2() {
    }
    ;
    ButtonSubmit2.value = new ButtonSubmit2();
    return ButtonSubmit2;
  })();
  var ButtonReset = /* @__PURE__ */ (function() {
    function ButtonReset2() {
    }
    ;
    ButtonReset2.value = new ButtonReset2();
    return ButtonReset2;
  })();
  var renderButtonType = function(v) {
    if (v instanceof ButtonButton) {
      return "button";
    }
    ;
    if (v instanceof ButtonSubmit) {
      return "submit";
    }
    ;
    if (v instanceof ButtonReset) {
      return "reset";
    }
    ;
    throw new Error("Failed pattern match at DOM.HTML.Indexed.ButtonType (line 14, column 20 - line 17, column 25): " + [v.constructor.name]);
  };

  // output/Data.String.Common/foreign.js
  var replaceAll = function(s1) {
    return function(s2) {
      return function(s3) {
        return s3.replace(new RegExp(s1.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"), "g"), s2);
      };
    };
  };
  var split = function(sep) {
    return function(s) {
      return s.split(sep);
    };
  };
  var toLower = function(s) {
    return s.toLowerCase();
  };
  var trim = function(s) {
    return s.trim();
  };
  var joinWith = function(s) {
    return function(xs) {
      return xs.join(s);
    };
  };

  // output/Data.String.Common/index.js
  var $$null = function(s) {
    return s === "";
  };

  // output/DOM.HTML.Indexed.InputType/index.js
  var InputButton = /* @__PURE__ */ (function() {
    function InputButton2() {
    }
    ;
    InputButton2.value = new InputButton2();
    return InputButton2;
  })();
  var InputCheckbox = /* @__PURE__ */ (function() {
    function InputCheckbox2() {
    }
    ;
    InputCheckbox2.value = new InputCheckbox2();
    return InputCheckbox2;
  })();
  var InputColor = /* @__PURE__ */ (function() {
    function InputColor2() {
    }
    ;
    InputColor2.value = new InputColor2();
    return InputColor2;
  })();
  var InputDate = /* @__PURE__ */ (function() {
    function InputDate2() {
    }
    ;
    InputDate2.value = new InputDate2();
    return InputDate2;
  })();
  var InputDatetimeLocal = /* @__PURE__ */ (function() {
    function InputDatetimeLocal2() {
    }
    ;
    InputDatetimeLocal2.value = new InputDatetimeLocal2();
    return InputDatetimeLocal2;
  })();
  var InputEmail = /* @__PURE__ */ (function() {
    function InputEmail2() {
    }
    ;
    InputEmail2.value = new InputEmail2();
    return InputEmail2;
  })();
  var InputFile = /* @__PURE__ */ (function() {
    function InputFile2() {
    }
    ;
    InputFile2.value = new InputFile2();
    return InputFile2;
  })();
  var InputHidden = /* @__PURE__ */ (function() {
    function InputHidden2() {
    }
    ;
    InputHidden2.value = new InputHidden2();
    return InputHidden2;
  })();
  var InputImage = /* @__PURE__ */ (function() {
    function InputImage2() {
    }
    ;
    InputImage2.value = new InputImage2();
    return InputImage2;
  })();
  var InputMonth = /* @__PURE__ */ (function() {
    function InputMonth2() {
    }
    ;
    InputMonth2.value = new InputMonth2();
    return InputMonth2;
  })();
  var InputNumber = /* @__PURE__ */ (function() {
    function InputNumber2() {
    }
    ;
    InputNumber2.value = new InputNumber2();
    return InputNumber2;
  })();
  var InputPassword = /* @__PURE__ */ (function() {
    function InputPassword2() {
    }
    ;
    InputPassword2.value = new InputPassword2();
    return InputPassword2;
  })();
  var InputRadio = /* @__PURE__ */ (function() {
    function InputRadio2() {
    }
    ;
    InputRadio2.value = new InputRadio2();
    return InputRadio2;
  })();
  var InputRange = /* @__PURE__ */ (function() {
    function InputRange2() {
    }
    ;
    InputRange2.value = new InputRange2();
    return InputRange2;
  })();
  var InputReset = /* @__PURE__ */ (function() {
    function InputReset2() {
    }
    ;
    InputReset2.value = new InputReset2();
    return InputReset2;
  })();
  var InputSearch = /* @__PURE__ */ (function() {
    function InputSearch2() {
    }
    ;
    InputSearch2.value = new InputSearch2();
    return InputSearch2;
  })();
  var InputSubmit = /* @__PURE__ */ (function() {
    function InputSubmit2() {
    }
    ;
    InputSubmit2.value = new InputSubmit2();
    return InputSubmit2;
  })();
  var InputTel = /* @__PURE__ */ (function() {
    function InputTel2() {
    }
    ;
    InputTel2.value = new InputTel2();
    return InputTel2;
  })();
  var InputText = /* @__PURE__ */ (function() {
    function InputText2() {
    }
    ;
    InputText2.value = new InputText2();
    return InputText2;
  })();
  var InputTime = /* @__PURE__ */ (function() {
    function InputTime2() {
    }
    ;
    InputTime2.value = new InputTime2();
    return InputTime2;
  })();
  var InputUrl = /* @__PURE__ */ (function() {
    function InputUrl2() {
    }
    ;
    InputUrl2.value = new InputUrl2();
    return InputUrl2;
  })();
  var InputWeek = /* @__PURE__ */ (function() {
    function InputWeek2() {
    }
    ;
    InputWeek2.value = new InputWeek2();
    return InputWeek2;
  })();
  var renderInputType = function(v) {
    if (v instanceof InputButton) {
      return "button";
    }
    ;
    if (v instanceof InputCheckbox) {
      return "checkbox";
    }
    ;
    if (v instanceof InputColor) {
      return "color";
    }
    ;
    if (v instanceof InputDate) {
      return "date";
    }
    ;
    if (v instanceof InputDatetimeLocal) {
      return "datetime-local";
    }
    ;
    if (v instanceof InputEmail) {
      return "email";
    }
    ;
    if (v instanceof InputFile) {
      return "file";
    }
    ;
    if (v instanceof InputHidden) {
      return "hidden";
    }
    ;
    if (v instanceof InputImage) {
      return "image";
    }
    ;
    if (v instanceof InputMonth) {
      return "month";
    }
    ;
    if (v instanceof InputNumber) {
      return "number";
    }
    ;
    if (v instanceof InputPassword) {
      return "password";
    }
    ;
    if (v instanceof InputRadio) {
      return "radio";
    }
    ;
    if (v instanceof InputRange) {
      return "range";
    }
    ;
    if (v instanceof InputReset) {
      return "reset";
    }
    ;
    if (v instanceof InputSearch) {
      return "search";
    }
    ;
    if (v instanceof InputSubmit) {
      return "submit";
    }
    ;
    if (v instanceof InputTel) {
      return "tel";
    }
    ;
    if (v instanceof InputText) {
      return "text";
    }
    ;
    if (v instanceof InputTime) {
      return "time";
    }
    ;
    if (v instanceof InputUrl) {
      return "url";
    }
    ;
    if (v instanceof InputWeek) {
      return "week";
    }
    ;
    throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): " + [v.constructor.name]);
  };

  // output/DOM.HTML.Indexed.StepValue/index.js
  var show2 = /* @__PURE__ */ show(showNumber);
  var Any = /* @__PURE__ */ (function() {
    function Any2() {
    }
    ;
    Any2.value = new Any2();
    return Any2;
  })();
  var Step = /* @__PURE__ */ (function() {
    function Step4(value0) {
      this.value0 = value0;
    }
    ;
    Step4.create = function(value0) {
      return new Step4(value0);
    };
    return Step4;
  })();
  var renderStepValue = function(v) {
    if (v instanceof Any) {
      return "any";
    }
    ;
    if (v instanceof Step) {
      return show2(v.value0);
    }
    ;
    throw new Error("Failed pattern match at DOM.HTML.Indexed.StepValue (line 13, column 19 - line 15, column 19): " + [v.constructor.name]);
  };

  // output/Halogen.Query.Input/index.js
  var RefUpdate = /* @__PURE__ */ (function() {
    function RefUpdate2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    RefUpdate2.create = function(value0) {
      return function(value1) {
        return new RefUpdate2(value0, value1);
      };
    };
    return RefUpdate2;
  })();
  var Action = /* @__PURE__ */ (function() {
    function Action3(value0) {
      this.value0 = value0;
    }
    ;
    Action3.create = function(value0) {
      return new Action3(value0);
    };
    return Action3;
  })();

  // output/Data.Array/foreign.js
  var rangeImpl = function(start7, end2) {
    var step4 = start7 > end2 ? -1 : 1;
    var result = new Array(step4 * (end2 - start7) + 1);
    var i2 = start7, n = 0;
    while (i2 !== end2) {
      result[n++] = i2;
      i2 += step4;
    }
    result[n] = i2;
    return result;
  };
  var replicateFill = function(count, value18) {
    if (count < 1) {
      return [];
    }
    var result = new Array(count);
    return result.fill(value18);
  };
  var replicatePolyfill = function(count, value18) {
    var result = [];
    var n = 0;
    for (var i2 = 0; i2 < count; i2++) {
      result[n++] = value18;
    }
    return result;
  };
  var replicateImpl = typeof Array.prototype.fill === "function" ? replicateFill : replicatePolyfill;
  var fromFoldableImpl = /* @__PURE__ */ (function() {
    function Cons2(head6, tail2) {
      this.head = head6;
      this.tail = tail2;
    }
    var emptyList = {};
    function curryCons(head6) {
      return function(tail2) {
        return new Cons2(head6, tail2);
      };
    }
    function listToArray(list) {
      var result = [];
      var count = 0;
      var xs = list;
      while (xs !== emptyList) {
        result[count++] = xs.head;
        xs = xs.tail;
      }
      return result;
    }
    return function(foldr7, xs) {
      return listToArray(foldr7(curryCons)(emptyList)(xs));
    };
  })();
  var length3 = function(xs) {
    return xs.length;
  };
  var unconsImpl = function(empty9, next2, xs) {
    return xs.length === 0 ? empty9({}) : next2(xs[0])(xs.slice(1));
  };
  var indexImpl = function(just, nothing, xs, i2) {
    return i2 < 0 || i2 >= xs.length ? nothing : just(xs[i2]);
  };
  var findMapImpl = function(nothing, isJust2, f, xs) {
    for (var i2 = 0; i2 < xs.length; i2++) {
      var result = f(xs[i2]);
      if (isJust2(result)) return result;
    }
    return nothing;
  };
  var findIndexImpl = function(just, nothing, f, xs) {
    for (var i2 = 0, l = xs.length; i2 < l; i2++) {
      if (f(xs[i2])) return just(i2);
    }
    return nothing;
  };
  var _insertAt = function(just, nothing, i2, a2, l) {
    if (i2 < 0 || i2 > l.length) return nothing;
    var l1 = l.slice();
    l1.splice(i2, 0, a2);
    return just(l1);
  };
  var _deleteAt = function(just, nothing, i2, l) {
    if (i2 < 0 || i2 >= l.length) return nothing;
    var l1 = l.slice();
    l1.splice(i2, 1);
    return just(l1);
  };
  var reverse = function(l) {
    return l.slice().reverse();
  };
  var concat = function(xss) {
    if (xss.length <= 1e4) {
      return Array.prototype.concat.apply([], xss);
    }
    var result = [];
    for (var i2 = 0, l = xss.length; i2 < l; i2++) {
      var xs = xss[i2];
      for (var j = 0, m = xs.length; j < m; j++) {
        result.push(xs[j]);
      }
    }
    return result;
  };
  var filterImpl = function(f, xs) {
    return xs.filter(f);
  };
  var partitionImpl = function(f, xs) {
    var yes = [];
    var no = [];
    for (var i2 = 0; i2 < xs.length; i2++) {
      var x46 = xs[i2];
      if (f(x46))
        yes.push(x46);
      else
        no.push(x46);
    }
    return { yes, no };
  };
  var sortByImpl = /* @__PURE__ */ (function() {
    function mergeFromTo(compare20, fromOrdering, xs1, xs2, from3, to2) {
      var mid;
      var i2;
      var j;
      var k;
      var x46;
      var y46;
      var c;
      mid = from3 + (to2 - from3 >> 1);
      if (mid - from3 > 1) mergeFromTo(compare20, fromOrdering, xs2, xs1, from3, mid);
      if (to2 - mid > 1) mergeFromTo(compare20, fromOrdering, xs2, xs1, mid, to2);
      i2 = from3;
      j = mid;
      k = from3;
      while (i2 < mid && j < to2) {
        x46 = xs2[i2];
        y46 = xs2[j];
        c = fromOrdering(compare20(x46)(y46));
        if (c > 0) {
          xs1[k++] = y46;
          ++j;
        } else {
          xs1[k++] = x46;
          ++i2;
        }
      }
      while (i2 < mid) {
        xs1[k++] = xs2[i2++];
      }
      while (j < to2) {
        xs1[k++] = xs2[j++];
      }
    }
    return function(compare20, fromOrdering, xs) {
      var out;
      if (xs.length < 2) return xs;
      out = xs.slice(0);
      mergeFromTo(compare20, fromOrdering, out, xs.slice(0), 0, xs.length);
      return out;
    };
  })();
  var sliceImpl = function(s, e, l) {
    return l.slice(s, e);
  };
  var zipWithImpl = function(f, xs, ys) {
    var l = xs.length < ys.length ? xs.length : ys.length;
    var result = new Array(l);
    for (var i2 = 0; i2 < l; i2++) {
      result[i2] = f(xs[i2])(ys[i2]);
    }
    return result;
  };
  var anyImpl = function(p2, xs) {
    var len = xs.length;
    for (var i2 = 0; i2 < len; i2++) {
      if (p2(xs[i2])) return true;
    }
    return false;
  };
  var allImpl = function(p2, xs) {
    var len = xs.length;
    for (var i2 = 0; i2 < len; i2++) {
      if (!p2(xs[i2])) return false;
    }
    return true;
  };
  var unsafeIndexImpl = function(xs, n) {
    return xs[n];
  };

  // output/Data.Array.ST/foreign.js
  function newSTArray() {
    return [];
  }
  function unsafeFreezeThawImpl(xs) {
    return xs;
  }
  var unsafeFreezeImpl = unsafeFreezeThawImpl;
  var unsafeThawImpl = unsafeFreezeThawImpl;
  function copyImpl(xs) {
    return xs.slice();
  }
  var thawImpl = copyImpl;
  var pushImpl = function(a2, xs) {
    return xs.push(a2);
  };

  // output/Control.Monad.ST.Uncurried/foreign.js
  var runSTFn1 = function runSTFn12(fn) {
    return function(a2) {
      return function() {
        return fn(a2);
      };
    };
  };
  var runSTFn2 = function runSTFn22(fn) {
    return function(a2) {
      return function(b2) {
        return function() {
          return fn(a2, b2);
        };
      };
    };
  };

  // output/Data.Array.ST/index.js
  var unsafeThaw = /* @__PURE__ */ runSTFn1(unsafeThawImpl);
  var unsafeFreeze = /* @__PURE__ */ runSTFn1(unsafeFreezeImpl);
  var thaw = /* @__PURE__ */ runSTFn1(thawImpl);
  var withArray = function(f) {
    return function(xs) {
      return function __do5() {
        var result = thaw(xs)();
        f(result)();
        return unsafeFreeze(result)();
      };
    };
  };
  var push = /* @__PURE__ */ runSTFn2(pushImpl);

  // output/Data.Array.ST.Iterator/index.js
  var map12 = /* @__PURE__ */ map(functorST);
  var not2 = /* @__PURE__ */ not(heytingAlgebraBoolean);
  var $$void4 = /* @__PURE__ */ $$void(functorST);
  var Iterator = /* @__PURE__ */ (function() {
    function Iterator2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Iterator2.create = function(value0) {
      return function(value1) {
        return new Iterator2(value0, value1);
      };
    };
    return Iterator2;
  })();
  var peek = function(v) {
    return function __do5() {
      var i2 = read2(v.value1)();
      return v.value0(i2);
    };
  };
  var next = function(v) {
    return function __do5() {
      var i2 = read2(v.value1)();
      modify3(function(v1) {
        return v1 + 1 | 0;
      })(v.value1)();
      return v.value0(i2);
    };
  };
  var pushWhile = function(p2) {
    return function(iter) {
      return function(array2) {
        return function __do5() {
          var $$break = newSTRef(false)();
          while (map12(not2)(read2($$break))()) {
            (function __do6() {
              var mx = peek(iter)();
              if (mx instanceof Just && p2(mx.value0)) {
                push(mx.value0)(array2)();
                return $$void4(next(iter))();
              }
              ;
              return $$void4(write2(true)($$break))();
            })();
          }
          ;
          return {};
        };
      };
    };
  };
  var iterator = function(f) {
    return map12(Iterator.create(f))(newSTRef(0));
  };
  var iterate = function(iter) {
    return function(f) {
      return function __do5() {
        var $$break = newSTRef(false)();
        while (map12(not2)(read2($$break))()) {
          (function __do6() {
            var mx = next(iter)();
            if (mx instanceof Just) {
              return f(mx.value0)();
            }
            ;
            if (mx instanceof Nothing) {
              return $$void4(write2(true)($$break))();
            }
            ;
            throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): " + [mx.constructor.name]);
          })();
        }
        ;
        return {};
      };
    };
  };

  // output/Data.Array/index.js
  var $$void5 = /* @__PURE__ */ $$void(functorST);
  var intercalate1 = /* @__PURE__ */ intercalate(foldableArray);
  var map13 = /* @__PURE__ */ map(functorMaybe);
  var map14 = /* @__PURE__ */ map(functorArray);
  var map22 = /* @__PURE__ */ map(functorST);
  var fromJust4 = /* @__PURE__ */ fromJust();
  var when2 = /* @__PURE__ */ when(applicativeST);
  var notEq2 = /* @__PURE__ */ notEq(eqOrdering);
  var append2 = /* @__PURE__ */ append(semigroupArray);
  var zipWith = /* @__PURE__ */ runFn3(zipWithImpl);
  var zip = /* @__PURE__ */ (function() {
    return zipWith(Tuple.create);
  })();
  var unsafeIndex = function() {
    return runFn2(unsafeIndexImpl);
  };
  var unsafeIndex1 = /* @__PURE__ */ unsafeIndex();
  var uncons = /* @__PURE__ */ (function() {
    return runFn3(unconsImpl)($$const(Nothing.value))(function(x46) {
      return function(xs) {
        return new Just({
          head: x46,
          tail: xs
        });
      };
    });
  })();
  var sortBy = function(comp) {
    return runFn3(sortByImpl)(comp)(function(v) {
      if (v instanceof GT) {
        return 1;
      }
      ;
      if (v instanceof EQ) {
        return 0;
      }
      ;
      if (v instanceof LT) {
        return -1 | 0;
      }
      ;
      throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): " + [v.constructor.name]);
    });
  };
  var sortWith = function(dictOrd) {
    var comparing4 = comparing(dictOrd);
    return function(f) {
      return sortBy(comparing4(f));
    };
  };
  var sortWith1 = /* @__PURE__ */ sortWith(ordInt);
  var snoc = function(xs) {
    return function(x46) {
      return withArray(push(x46))(xs)();
    };
  };
  var slice = /* @__PURE__ */ runFn3(sliceImpl);
  var take = function(n) {
    return function(xs) {
      var $152 = n < 1;
      if ($152) {
        return [];
      }
      ;
      return slice(0)(n)(xs);
    };
  };
  var singleton4 = function(a2) {
    return [a2];
  };
  var range2 = /* @__PURE__ */ runFn2(rangeImpl);
  var partition = /* @__PURE__ */ runFn2(partitionImpl);
  var $$null2 = function(xs) {
    return length3(xs) === 0;
  };
  var mapWithIndex3 = /* @__PURE__ */ mapWithIndex(functorWithIndexArray);
  var intercalate2 = function(dictMonoid) {
    return intercalate1(dictMonoid);
  };
  var insertAt = /* @__PURE__ */ (function() {
    return runFn5(_insertAt)(Just.create)(Nothing.value);
  })();
  var index2 = /* @__PURE__ */ (function() {
    return runFn4(indexImpl)(Just.create)(Nothing.value);
  })();
  var last = function(xs) {
    return index2(xs)(length3(xs) - 1 | 0);
  };
  var head = function(xs) {
    return index2(xs)(0);
  };
  var nubBy = function(comp) {
    return function(xs) {
      var indexedAndSorted = sortBy(function(x46) {
        return function(y46) {
          return comp(snd(x46))(snd(y46));
        };
      })(mapWithIndex3(Tuple.create)(xs));
      var v = head(indexedAndSorted);
      if (v instanceof Nothing) {
        return [];
      }
      ;
      if (v instanceof Just) {
        return map14(snd)(sortWith1(fst)((function __do5() {
          var result = unsafeThaw(singleton4(v.value0))();
          foreach(indexedAndSorted)(function(v1) {
            return function __do6() {
              var lst = map22(/* @__PURE__ */ (function() {
                var $183 = function($185) {
                  return fromJust4(last($185));
                };
                return function($184) {
                  return snd($183($184));
                };
              })())(unsafeFreeze(result))();
              return when2(notEq2(comp(lst)(v1.value1))(EQ.value))($$void5(push(v1)(result)))();
            };
          })();
          return unsafeFreeze(result)();
        })()));
      }
      ;
      throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): " + [v.constructor.name]);
    };
  };
  var nub = function(dictOrd) {
    return nubBy(compare(dictOrd));
  };
  var groupBy = function(op) {
    return function(xs) {
      return (function __do5() {
        var result = newSTArray();
        var iter = iterator(function(v) {
          return index2(xs)(v);
        })();
        iterate(iter)(function(x46) {
          return $$void5(function __do6() {
            var sub1 = newSTArray();
            push(x46)(sub1)();
            pushWhile(op(x46))(iter)(sub1)();
            var grp = unsafeFreeze(sub1)();
            return push(grp)(result)();
          });
        })();
        return unsafeFreeze(result)();
      })();
    };
  };
  var fromFoldable2 = function(dictFoldable) {
    return runFn2(fromFoldableImpl)(foldr(dictFoldable));
  };
  var foldr3 = /* @__PURE__ */ foldr(foldableArray);
  var foldl3 = /* @__PURE__ */ foldl(foldableArray);
  var findMap = /* @__PURE__ */ (function() {
    return runFn4(findMapImpl)(Nothing.value)(isJust);
  })();
  var findIndex = /* @__PURE__ */ (function() {
    return runFn4(findIndexImpl)(Just.create)(Nothing.value);
  })();
  var find2 = function(f) {
    return function(xs) {
      return map13(unsafeIndex1(xs))(findIndex(f)(xs));
    };
  };
  var filter = /* @__PURE__ */ runFn2(filterImpl);
  var elemIndex = function(dictEq) {
    var eq25 = eq(dictEq);
    return function(x46) {
      return findIndex(function(v) {
        return eq25(v)(x46);
      });
    };
  };
  var elem2 = function(dictEq) {
    var elemIndex1 = elemIndex(dictEq);
    return function(a2) {
      return function(arr) {
        return isJust(elemIndex1(a2)(arr));
      };
    };
  };
  var drop = function(n) {
    return function(xs) {
      var $173 = n < 1;
      if ($173) {
        return xs;
      }
      ;
      return slice(n)(length3(xs))(xs);
    };
  };
  var deleteAt = /* @__PURE__ */ (function() {
    return runFn4(_deleteAt)(Just.create)(Nothing.value);
  })();
  var deleteBy = function(v) {
    return function(v1) {
      return function(v2) {
        if (v2.length === 0) {
          return [];
        }
        ;
        return maybe(v2)(function(i2) {
          return fromJust4(deleteAt(i2)(v2));
        })(findIndex(v(v1))(v2));
      };
    };
  };
  var cons = function(x46) {
    return function(xs) {
      return append2([x46])(xs);
    };
  };
  var concatMap = /* @__PURE__ */ flip(/* @__PURE__ */ bind(bindArray));
  var mapMaybe = function(f) {
    return concatMap((function() {
      var $189 = maybe([])(singleton4);
      return function($190) {
        return $189(f($190));
      };
    })());
  };
  var catMaybes = /* @__PURE__ */ mapMaybe(/* @__PURE__ */ identity(categoryFn));
  var any2 = /* @__PURE__ */ runFn2(anyImpl);
  var nubByEq = function(eq25) {
    return function(xs) {
      return (function __do5() {
        var arr = newSTArray();
        foreach(xs)(function(x46) {
          return function __do6() {
            var e = map22((function() {
              var $194 = any2(function(v) {
                return eq25(v)(x46);
              });
              return function($195) {
                return !$194($195);
              };
            })())(unsafeFreeze(arr))();
            return when2(e)($$void5(push(x46)(arr)))();
          };
        })();
        return unsafeFreeze(arr)();
      })();
    };
  };
  var all2 = /* @__PURE__ */ runFn2(allImpl);

  // output/Halogen.VDom.Machine/index.js
  var Step2 = /* @__PURE__ */ (function() {
    function Step4(value0, value1, value22, value32) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
    }
    ;
    Step4.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return new Step4(value0, value1, value22, value32);
          };
        };
      };
    };
    return Step4;
  })();
  var unStep = unsafeCoerce2;
  var step2 = function(v, a2) {
    return v.value2(v.value1, a2);
  };
  var mkStep = unsafeCoerce2;
  var halt = function(v) {
    return v.value3(v.value1);
  };
  var extract2 = /* @__PURE__ */ unStep(function(v) {
    return v.value0;
  });

  // output/Halogen.VDom.Types/index.js
  var map15 = /* @__PURE__ */ map(functorArray);
  var map16 = /* @__PURE__ */ map(functorTuple);
  var Text = /* @__PURE__ */ (function() {
    function Text4(value0) {
      this.value0 = value0;
    }
    ;
    Text4.create = function(value0) {
      return new Text4(value0);
    };
    return Text4;
  })();
  var Elem = /* @__PURE__ */ (function() {
    function Elem2(value0, value1, value22, value32) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
    }
    ;
    Elem2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return new Elem2(value0, value1, value22, value32);
          };
        };
      };
    };
    return Elem2;
  })();
  var Keyed = /* @__PURE__ */ (function() {
    function Keyed2(value0, value1, value22, value32) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
    }
    ;
    Keyed2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return new Keyed2(value0, value1, value22, value32);
          };
        };
      };
    };
    return Keyed2;
  })();
  var Widget = /* @__PURE__ */ (function() {
    function Widget2(value0) {
      this.value0 = value0;
    }
    ;
    Widget2.create = function(value0) {
      return new Widget2(value0);
    };
    return Widget2;
  })();
  var Grafted = /* @__PURE__ */ (function() {
    function Grafted2(value0) {
      this.value0 = value0;
    }
    ;
    Grafted2.create = function(value0) {
      return new Grafted2(value0);
    };
    return Grafted2;
  })();
  var Graft = /* @__PURE__ */ (function() {
    function Graft2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    Graft2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new Graft2(value0, value1, value22);
        };
      };
    };
    return Graft2;
  })();
  var unGraft = function(f) {
    return function($61) {
      return f($61);
    };
  };
  var graft = unsafeCoerce2;
  var bifunctorGraft = {
    bimap: function(f) {
      return function(g) {
        return unGraft(function(v) {
          return graft(new Graft(function($63) {
            return f(v.value0($63));
          }, function($64) {
            return g(v.value1($64));
          }, v.value2));
        });
      };
    }
  };
  var bimap2 = /* @__PURE__ */ bimap(bifunctorGraft);
  var runGraft = /* @__PURE__ */ unGraft(function(v) {
    var go2 = function(v2) {
      if (v2 instanceof Text) {
        return new Text(v2.value0);
      }
      ;
      if (v2 instanceof Elem) {
        return new Elem(v2.value0, v2.value1, v.value0(v2.value2), map15(go2)(v2.value3));
      }
      ;
      if (v2 instanceof Keyed) {
        return new Keyed(v2.value0, v2.value1, v.value0(v2.value2), map15(map16(go2))(v2.value3));
      }
      ;
      if (v2 instanceof Widget) {
        return new Widget(v.value1(v2.value0));
      }
      ;
      if (v2 instanceof Grafted) {
        return new Grafted(bimap2(v.value0)(v.value1)(v2.value0));
      }
      ;
      throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): " + [v2.constructor.name]);
    };
    return go2(v.value2);
  });

  // output/Halogen.VDom.Util/foreign.js
  function unsafeGetAny(key, obj) {
    return obj[key];
  }
  function unsafeHasAny(key, obj) {
    return obj.hasOwnProperty(key);
  }
  function unsafeSetAny(key, val, obj) {
    obj[key] = val;
  }
  function forE2(a2, f) {
    var b2 = [];
    for (var i2 = 0; i2 < a2.length; i2++) {
      b2.push(f(i2, a2[i2]));
    }
    return b2;
  }
  function forEachE(a2, f) {
    for (var i2 = 0; i2 < a2.length; i2++) {
      f(a2[i2]);
    }
  }
  function forInE(o, f) {
    var ks = Object.keys(o);
    for (var i2 = 0; i2 < ks.length; i2++) {
      var k = ks[i2];
      f(k, o[k]);
    }
  }
  function diffWithIxE(a1, a2, f1, f2, f3) {
    var a3 = [];
    var l1 = a1.length;
    var l2 = a2.length;
    var i2 = 0;
    while (1) {
      if (i2 < l1) {
        if (i2 < l2) {
          a3.push(f1(i2, a1[i2], a2[i2]));
        } else {
          f2(i2, a1[i2]);
        }
      } else if (i2 < l2) {
        a3.push(f3(i2, a2[i2]));
      } else {
        break;
      }
      i2++;
    }
    return a3;
  }
  function strMapWithIxE(as, fk, f) {
    var o = {};
    for (var i2 = 0; i2 < as.length; i2++) {
      var a2 = as[i2];
      var k = fk(a2);
      o[k] = f(k, i2, a2);
    }
    return o;
  }
  function diffWithKeyAndIxE(o1, as, fk, f1, f2, f3) {
    var o2 = {};
    for (var i2 = 0; i2 < as.length; i2++) {
      var a2 = as[i2];
      var k = fk(a2);
      if (o1.hasOwnProperty(k)) {
        o2[k] = f1(k, i2, o1[k], a2);
      } else {
        o2[k] = f3(k, i2, a2);
      }
    }
    for (var k in o1) {
      if (k in o2) {
        continue;
      }
      f2(k, o1[k]);
    }
    return o2;
  }
  function refEq2(a2, b2) {
    return a2 === b2;
  }
  function createTextNode(s, doc) {
    return doc.createTextNode(s);
  }
  function setTextContent(s, n) {
    n.textContent = s;
  }
  function createElement(ns, name16, doc) {
    if (ns != null) {
      return doc.createElementNS(ns, name16);
    } else {
      return doc.createElement(name16);
    }
  }
  function insertChildIx(i2, a2, b2) {
    var n = b2.childNodes.item(i2) || null;
    if (n !== a2) {
      b2.insertBefore(a2, n);
    }
  }
  function removeChild(a2, b2) {
    if (b2 && a2.parentNode === b2) {
      b2.removeChild(a2);
    }
  }
  function parentNode(a2) {
    return a2.parentNode;
  }
  function setAttribute(ns, attr3, val, el) {
    if (ns != null) {
      el.setAttributeNS(ns, attr3, val);
    } else {
      el.setAttribute(attr3, val);
    }
  }
  function removeAttribute(ns, attr3, el) {
    if (ns != null) {
      el.removeAttributeNS(ns, attr3);
    } else {
      el.removeAttribute(attr3);
    }
  }
  function hasAttribute(ns, attr3, el) {
    if (ns != null) {
      return el.hasAttributeNS(ns, attr3);
    } else {
      return el.hasAttribute(attr3);
    }
  }
  function addEventListener2(ev, listener, el) {
    el.addEventListener(ev, listener, false);
  }
  function removeEventListener2(ev, listener, el) {
    el.removeEventListener(ev, listener, false);
  }
  var jsUndefined = void 0;

  // output/Foreign.Object.ST/foreign.js
  var newImpl = function() {
    return {};
  };

  // output/Halogen.VDom.Util/index.js
  var unsafeLookup = unsafeGetAny;
  var unsafeFreeze2 = unsafeCoerce2;
  var pokeMutMap = unsafeSetAny;
  var newMutMap = newImpl;

  // output/Web.DOM.Element/foreign.js
  var getProp = function(name16) {
    return function(doctype) {
      return doctype[name16];
    };
  };
  var _namespaceURI = getProp("namespaceURI");
  var _prefix = getProp("prefix");
  var localName = getProp("localName");
  var tagName = getProp("tagName");

  // output/Web.DOM.Element/index.js
  var toNode2 = unsafeCoerce2;

  // output/Halogen.VDom.DOM/index.js
  var $runtime_lazy5 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var haltWidget = function(v) {
    return halt(v.widget);
  };
  var $lazy_patchWidget = /* @__PURE__ */ $runtime_lazy5("patchWidget", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchWidget(291)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Widget) {
        var res = step2(state3.widget, vdom.value0);
        var res$prime = unStep(function(v) {
          return mkStep(new Step2(v.value0, {
            build: state3.build,
            widget: res
          }, $lazy_patchWidget(296), haltWidget));
        })(res);
        return res$prime;
      }
      ;
      haltWidget(state3);
      return state3.build(vdom);
    };
  });
  var patchWidget = /* @__PURE__ */ $lazy_patchWidget(286);
  var haltText = function(v) {
    var parent2 = parentNode(v.node);
    return removeChild(v.node, parent2);
  };
  var $lazy_patchText = /* @__PURE__ */ $runtime_lazy5("patchText", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchText(82)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Text) {
        if (state3.value === vdom.value0) {
          return mkStep(new Step2(state3.node, state3, $lazy_patchText(85), haltText));
        }
        ;
        if (otherwise) {
          var nextState = {
            build: state3.build,
            node: state3.node,
            value: vdom.value0
          };
          setTextContent(vdom.value0, state3.node);
          return mkStep(new Step2(state3.node, nextState, $lazy_patchText(89), haltText));
        }
        ;
      }
      ;
      haltText(state3);
      return state3.build(vdom);
    };
  });
  var patchText = /* @__PURE__ */ $lazy_patchText(77);
  var haltKeyed = function(v) {
    var parent2 = parentNode(v.node);
    removeChild(v.node, parent2);
    forInE(v.children, function(v1, s) {
      return halt(s);
    });
    return halt(v.attrs);
  };
  var haltElem = function(v) {
    var parent2 = parentNode(v.node);
    removeChild(v.node, parent2);
    forEachE(v.children, halt);
    return halt(v.attrs);
  };
  var eqElemSpec = function(ns1, v, ns2, v1) {
    var $63 = v === v1;
    if ($63) {
      if (ns1 instanceof Just && (ns2 instanceof Just && ns1.value0 === ns2.value0)) {
        return true;
      }
      ;
      if (ns1 instanceof Nothing && ns2 instanceof Nothing) {
        return true;
      }
      ;
      return false;
    }
    ;
    return false;
  };
  var $lazy_patchElem = /* @__PURE__ */ $runtime_lazy5("patchElem", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchElem(135)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Elem && eqElemSpec(state3.ns, state3.name, vdom.value0, vdom.value1)) {
        var v = length3(vdom.value3);
        var v1 = length3(state3.children);
        if (v1 === 0 && v === 0) {
          var attrs2 = step2(state3.attrs, vdom.value2);
          var nextState = {
            build: state3.build,
            node: state3.node,
            attrs: attrs2,
            ns: vdom.value0,
            name: vdom.value1,
            children: state3.children
          };
          return mkStep(new Step2(state3.node, nextState, $lazy_patchElem(149), haltElem));
        }
        ;
        var onThis = function(v2, s) {
          return halt(s);
        };
        var onThese = function(ix2, s, v2) {
          var res = step2(s, v2);
          insertChildIx(ix2, extract2(res), state3.node);
          return res;
        };
        var onThat = function(ix2, v2) {
          var res = state3.build(v2);
          insertChildIx(ix2, extract2(res), state3.node);
          return res;
        };
        var children22 = diffWithIxE(state3.children, vdom.value3, onThese, onThis, onThat);
        var attrs2 = step2(state3.attrs, vdom.value2);
        var nextState = {
          build: state3.build,
          node: state3.node,
          attrs: attrs2,
          ns: vdom.value0,
          name: vdom.value1,
          children: children22
        };
        return mkStep(new Step2(state3.node, nextState, $lazy_patchElem(172), haltElem));
      }
      ;
      haltElem(state3);
      return state3.build(vdom);
    };
  });
  var patchElem = /* @__PURE__ */ $lazy_patchElem(130);
  var $lazy_patchKeyed = /* @__PURE__ */ $runtime_lazy5("patchKeyed", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchKeyed(222)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Keyed && eqElemSpec(state3.ns, state3.name, vdom.value0, vdom.value1)) {
        var v = length3(vdom.value3);
        if (state3.length === 0 && v === 0) {
          var attrs2 = step2(state3.attrs, vdom.value2);
          var nextState = {
            build: state3.build,
            node: state3.node,
            attrs: attrs2,
            ns: vdom.value0,
            name: vdom.value1,
            children: state3.children,
            length: 0
          };
          return mkStep(new Step2(state3.node, nextState, $lazy_patchKeyed(237), haltKeyed));
        }
        ;
        var onThis = function(v2, s) {
          return halt(s);
        };
        var onThese = function(v2, ix$prime, s, v3) {
          var res = step2(s, v3.value1);
          insertChildIx(ix$prime, extract2(res), state3.node);
          return res;
        };
        var onThat = function(v2, ix2, v3) {
          var res = state3.build(v3.value1);
          insertChildIx(ix2, extract2(res), state3.node);
          return res;
        };
        var children22 = diffWithKeyAndIxE(state3.children, vdom.value3, fst, onThese, onThis, onThat);
        var attrs2 = step2(state3.attrs, vdom.value2);
        var nextState = {
          build: state3.build,
          node: state3.node,
          attrs: attrs2,
          ns: vdom.value0,
          name: vdom.value1,
          children: children22,
          length: v
        };
        return mkStep(new Step2(state3.node, nextState, $lazy_patchKeyed(261), haltKeyed));
      }
      ;
      haltKeyed(state3);
      return state3.build(vdom);
    };
  });
  var patchKeyed = /* @__PURE__ */ $lazy_patchKeyed(217);
  var buildWidget = function(v, build, w) {
    var res = v.buildWidget(v)(w);
    var res$prime = unStep(function(v1) {
      return mkStep(new Step2(v1.value0, {
        build,
        widget: res
      }, patchWidget, haltWidget));
    })(res);
    return res$prime;
  };
  var buildText = function(v, build, s) {
    var node = createTextNode(s, v.document);
    var state3 = {
      build,
      node,
      value: s
    };
    return mkStep(new Step2(node, state3, patchText, haltText));
  };
  var buildKeyed = function(v, build, ns1, name1, as1, ch1) {
    var el = createElement(toNullable(ns1), name1, v.document);
    var node = toNode2(el);
    var onChild = function(v1, ix2, v2) {
      var res = build(v2.value1);
      insertChildIx(ix2, extract2(res), node);
      return res;
    };
    var children3 = strMapWithIxE(ch1, fst, onChild);
    var attrs = v.buildAttributes(el)(as1);
    var state3 = {
      build,
      node,
      attrs,
      ns: ns1,
      name: name1,
      children: children3,
      length: length3(ch1)
    };
    return mkStep(new Step2(node, state3, patchKeyed, haltKeyed));
  };
  var buildElem = function(v, build, ns1, name1, as1, ch1) {
    var el = createElement(toNullable(ns1), name1, v.document);
    var node = toNode2(el);
    var onChild = function(ix2, child) {
      var res = build(child);
      insertChildIx(ix2, extract2(res), node);
      return res;
    };
    var children3 = forE2(ch1, onChild);
    var attrs = v.buildAttributes(el)(as1);
    var state3 = {
      build,
      node,
      attrs,
      ns: ns1,
      name: name1,
      children: children3
    };
    return mkStep(new Step2(node, state3, patchElem, haltElem));
  };
  var buildVDom = function(spec) {
    var $lazy_build = $runtime_lazy5("build", "Halogen.VDom.DOM", function() {
      return function(v) {
        if (v instanceof Text) {
          return buildText(spec, $lazy_build(59), v.value0);
        }
        ;
        if (v instanceof Elem) {
          return buildElem(spec, $lazy_build(60), v.value0, v.value1, v.value2, v.value3);
        }
        ;
        if (v instanceof Keyed) {
          return buildKeyed(spec, $lazy_build(61), v.value0, v.value1, v.value2, v.value3);
        }
        ;
        if (v instanceof Widget) {
          return buildWidget(spec, $lazy_build(62), v.value0);
        }
        ;
        if (v instanceof Grafted) {
          return $lazy_build(63)(runGraft(v.value0));
        }
        ;
        throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): " + [v.constructor.name]);
      };
    });
    var build = $lazy_build(58);
    return build;
  };

  // output/Foreign/foreign.js
  function typeOf(value18) {
    return typeof value18;
  }
  function tagOf(value18) {
    return Object.prototype.toString.call(value18).slice(8, -1);
  }
  var isArray = Array.isArray || function(value18) {
    return Object.prototype.toString.call(value18) === "[object Array]";
  };

  // output/Data.Int/foreign.js
  var fromNumberImpl = function(just) {
    return function(nothing) {
      return function(n) {
        return (n | 0) === n ? just(n) : nothing;
      };
    };
  };
  var toNumber = function(n) {
    return n;
  };
  var fromStringAsImpl = function(just) {
    return function(nothing) {
      return function(radix) {
        var digits;
        if (radix < 11) {
          digits = "[0-" + (radix - 1).toString() + "]";
        } else if (radix === 11) {
          digits = "[0-9a]";
        } else {
          digits = "[0-9a-" + String.fromCharCode(86 + radix) + "]";
        }
        var pattern2 = new RegExp("^[\\+\\-]?" + digits + "+$", "i");
        return function(s) {
          if (pattern2.test(s)) {
            var i2 = parseInt(s, radix);
            return (i2 | 0) === i2 ? just(i2) : nothing;
          } else {
            return nothing;
          }
        };
      };
    };
  };

  // output/Data.Number/foreign.js
  var infinity = Infinity;
  var isFiniteImpl = isFinite;
  function fromStringImpl(str2, isFinite2, just, nothing) {
    var num = parseFloat(str2);
    if (isFinite2(num)) {
      return just(num);
    } else {
      return nothing;
    }
  }
  var abs2 = Math.abs;
  var atan2 = function(y46) {
    return function(x46) {
      return Math.atan2(y46, x46);
    };
  };
  var ceil = Math.ceil;
  var cos = Math.cos;
  var floor = Math.floor;
  var log = Math.log;
  var remainder = function(n) {
    return function(m) {
      return n % m;
    };
  };
  var sin = Math.sin;
  var sqrt = Math.sqrt;

  // output/Data.Number/index.js
  var pi = 3.141592653589793;
  var fromString = function(str2) {
    return fromStringImpl(str2, isFiniteImpl, Just.create, Nothing.value);
  };

  // output/Data.Int/index.js
  var top2 = /* @__PURE__ */ top(boundedInt);
  var bottom2 = /* @__PURE__ */ bottom(boundedInt);
  var fromStringAs = /* @__PURE__ */ (function() {
    return fromStringAsImpl(Just.create)(Nothing.value);
  })();
  var fromString2 = /* @__PURE__ */ fromStringAs(10);
  var fromNumber = /* @__PURE__ */ (function() {
    return fromNumberImpl(Just.create)(Nothing.value);
  })();
  var unsafeClamp = function(x46) {
    if (!isFiniteImpl(x46)) {
      return 0;
    }
    ;
    if (x46 >= toNumber(top2)) {
      return top2;
    }
    ;
    if (x46 <= toNumber(bottom2)) {
      return bottom2;
    }
    ;
    if (otherwise) {
      return fromMaybe(0)(fromNumber(x46));
    }
    ;
    throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): " + [x46.constructor.name]);
  };
  var floor2 = function($39) {
    return unsafeClamp(floor($39));
  };

  // output/Data.List/index.js
  var map17 = /* @__PURE__ */ map(functorMaybe);
  var foldl4 = /* @__PURE__ */ foldl(foldableList);
  var uncons2 = function(v) {
    if (v instanceof Nil) {
      return Nothing.value;
    }
    ;
    if (v instanceof Cons) {
      return new Just({
        head: v.value0,
        tail: v.value1
      });
    }
    ;
    throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): " + [v.constructor.name]);
  };
  var toUnfoldable2 = function(dictUnfoldable) {
    return unfoldr(dictUnfoldable)(function(xs) {
      return map17(function(rec) {
        return new Tuple(rec.head, rec.tail);
      })(uncons2(xs));
    });
  };
  var singleton5 = function(a2) {
    return new Cons(a2, Nil.value);
  };
  var reverse2 = /* @__PURE__ */ (function() {
    var go2 = function($copy_v) {
      return function($copy_v1) {
        var $tco_var_v = $copy_v;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v, v1) {
          if (v1 instanceof Nil) {
            $tco_done = true;
            return v;
          }
          ;
          if (v1 instanceof Cons) {
            $tco_var_v = new Cons(v1.value0, v);
            $copy_v1 = v1.value1;
            return;
          }
          ;
          throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): " + [v.constructor.name, v1.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_v, $copy_v1);
        }
        ;
        return $tco_result;
      };
    };
    return go2(Nil.value);
  })();
  var unsnoc = function(lst) {
    var go2 = function($copy_v) {
      return function($copy_v1) {
        var $tco_var_v = $copy_v;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v, v1) {
          if (v instanceof Nil) {
            $tco_done = true;
            return Nothing.value;
          }
          ;
          if (v instanceof Cons && v.value1 instanceof Nil) {
            $tco_done = true;
            return new Just({
              revInit: v1,
              last: v.value0
            });
          }
          ;
          if (v instanceof Cons) {
            $tco_var_v = v.value1;
            $copy_v1 = new Cons(v.value0, v1);
            return;
          }
          ;
          throw new Error("Failed pattern match at Data.List (line 270, column 3 - line 270, column 21): " + [v.constructor.name, v1.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_v, $copy_v1);
        }
        ;
        return $tco_result;
      };
    };
    return map17(function(h) {
      return {
        init: reverse2(h.revInit),
        last: h.last
      };
    })(go2(lst)(Nil.value));
  };
  var zipWith2 = function(f) {
    return function(xs) {
      return function(ys) {
        var go2 = function($copy_v) {
          return function($copy_v1) {
            return function($copy_v2) {
              var $tco_var_v = $copy_v;
              var $tco_var_v1 = $copy_v1;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(v, v1, v2) {
                if (v instanceof Nil) {
                  $tco_done = true;
                  return v2;
                }
                ;
                if (v1 instanceof Nil) {
                  $tco_done = true;
                  return v2;
                }
                ;
                if (v instanceof Cons && v1 instanceof Cons) {
                  $tco_var_v = v.value1;
                  $tco_var_v1 = v1.value1;
                  $copy_v2 = new Cons(f(v.value0)(v1.value0), v2);
                  return;
                }
                ;
                throw new Error("Failed pattern match at Data.List (line 779, column 3 - line 779, column 21): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_v, $tco_var_v1, $copy_v2);
              }
              ;
              return $tco_result;
            };
          };
        };
        return reverse2(go2(xs)(ys)(Nil.value));
      };
    };
  };
  var $$null3 = function(v) {
    if (v instanceof Nil) {
      return true;
    }
    ;
    return false;
  };
  var length4 = /* @__PURE__ */ foldl4(function(acc) {
    return function(v) {
      return acc + 1 | 0;
    };
  })(0);
  var fromFoldable3 = function(dictFoldable) {
    return foldr(dictFoldable)(Cons.create)(Nil.value);
  };

  // output/Data.List.NonEmpty/index.js
  var singleton6 = /* @__PURE__ */ (function() {
    var $200 = singleton2(plusList);
    return function($201) {
      return NonEmptyList($200($201));
    };
  })();
  var head2 = function(v) {
    return v.value0;
  };
  var cons2 = function(y46) {
    return function(v) {
      return new NonEmpty(y46, new Cons(v.value0, v.value1));
    };
  };

  // output/Data.String.CodeUnits/foreign.js
  var fromCharArray = function(a2) {
    return a2.join("");
  };
  var toCharArray = function(s) {
    return s.split("");
  };
  var singleton7 = function(c) {
    return c;
  };
  var length5 = function(s) {
    return s.length;
  };
  var _indexOf = function(just) {
    return function(nothing) {
      return function(x46) {
        return function(s) {
          var i2 = s.indexOf(x46);
          return i2 === -1 ? nothing : just(i2);
        };
      };
    };
  };
  var take3 = function(n) {
    return function(s) {
      return s.substr(0, n);
    };
  };
  var drop3 = function(n) {
    return function(s) {
      return s.substring(n);
    };
  };
  var splitAt = function(i2) {
    return function(s) {
      return { before: s.substring(0, i2), after: s.substring(i2) };
    };
  };

  // output/Data.String.Unsafe/foreign.js
  var charAt = function(i2) {
    return function(s) {
      if (i2 >= 0 && i2 < s.length) return s.charAt(i2);
      throw new Error("Data.String.Unsafe.charAt: Invalid index.");
    };
  };

  // output/Data.String.CodeUnits/index.js
  var stripPrefix = function(v) {
    return function(str2) {
      var v1 = splitAt(length5(v))(str2);
      var $20 = v1.before === v;
      if ($20) {
        return new Just(v1.after);
      }
      ;
      return Nothing.value;
    };
  };
  var indexOf = /* @__PURE__ */ (function() {
    return _indexOf(Just.create)(Nothing.value);
  })();
  var contains = function(pat) {
    var $23 = indexOf(pat);
    return function($24) {
      return isJust($23($24));
    };
  };

  // output/Foreign/index.js
  var show3 = /* @__PURE__ */ show(showString);
  var show1 = /* @__PURE__ */ show(showInt);
  var ForeignError = /* @__PURE__ */ (function() {
    function ForeignError2(value0) {
      this.value0 = value0;
    }
    ;
    ForeignError2.create = function(value0) {
      return new ForeignError2(value0);
    };
    return ForeignError2;
  })();
  var TypeMismatch = /* @__PURE__ */ (function() {
    function TypeMismatch2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    TypeMismatch2.create = function(value0) {
      return function(value1) {
        return new TypeMismatch2(value0, value1);
      };
    };
    return TypeMismatch2;
  })();
  var ErrorAtIndex = /* @__PURE__ */ (function() {
    function ErrorAtIndex2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ErrorAtIndex2.create = function(value0) {
      return function(value1) {
        return new ErrorAtIndex2(value0, value1);
      };
    };
    return ErrorAtIndex2;
  })();
  var ErrorAtProperty = /* @__PURE__ */ (function() {
    function ErrorAtProperty2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ErrorAtProperty2.create = function(value0) {
      return function(value1) {
        return new ErrorAtProperty2(value0, value1);
      };
    };
    return ErrorAtProperty2;
  })();
  var unsafeToForeign = unsafeCoerce2;
  var unsafeFromForeign = unsafeCoerce2;
  var renderForeignError = function(v) {
    if (v instanceof ForeignError) {
      return v.value0;
    }
    ;
    if (v instanceof ErrorAtIndex) {
      return "Error at array index " + (show1(v.value0) + (": " + renderForeignError(v.value1)));
    }
    ;
    if (v instanceof ErrorAtProperty) {
      return "Error at property " + (show3(v.value0) + (": " + renderForeignError(v.value1)));
    }
    ;
    if (v instanceof TypeMismatch) {
      return "Type mismatch: expected " + (v.value0 + (", found " + v.value1));
    }
    ;
    throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): " + [v.constructor.name]);
  };
  var fail = function(dictMonad) {
    var $153 = throwError(monadThrowExceptT(dictMonad));
    return function($154) {
      return $153(singleton6($154));
    };
  };
  var unsafeReadTagged = function(dictMonad) {
    var pure121 = pure(applicativeExceptT(dictMonad));
    var fail1 = fail(dictMonad);
    return function(tag) {
      return function(value18) {
        if (tagOf(value18) === tag) {
          return pure121(unsafeFromForeign(value18));
        }
        ;
        if (otherwise) {
          return fail1(new TypeMismatch(tag, tagOf(value18)));
        }
        ;
        throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): " + [tag.constructor.name, value18.constructor.name]);
      };
    };
  };
  var readBoolean = function(dictMonad) {
    return unsafeReadTagged(dictMonad)("Boolean");
  };
  var readNumber = function(dictMonad) {
    return unsafeReadTagged(dictMonad)("Number");
  };
  var readString = function(dictMonad) {
    return unsafeReadTagged(dictMonad)("String");
  };

  // output/Foreign.Object/foreign.js
  var empty4 = {};
  function _lookup(no, yes, k, m) {
    return k in m ? yes(m[k]) : no;
  }
  function toArrayWithKey(f) {
    return function(m) {
      var r = [];
      for (var k in m) {
        if (hasOwnProperty.call(m, k)) {
          r.push(f(k)(m[k]));
        }
      }
      return r;
    };
  }
  var keys2 = Object.keys || toArrayWithKey(function(k) {
    return function() {
      return k;
    };
  });

  // output/Foreign.Object/index.js
  var lookup3 = /* @__PURE__ */ (function() {
    return runFn4(_lookup)(Nothing.value)(Just.create);
  })();

  // output/Halogen.VDom.DOM.Prop/index.js
  var $runtime_lazy6 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var Created = /* @__PURE__ */ (function() {
    function Created2(value0) {
      this.value0 = value0;
    }
    ;
    Created2.create = function(value0) {
      return new Created2(value0);
    };
    return Created2;
  })();
  var Removed = /* @__PURE__ */ (function() {
    function Removed2(value0) {
      this.value0 = value0;
    }
    ;
    Removed2.create = function(value0) {
      return new Removed2(value0);
    };
    return Removed2;
  })();
  var Attribute = /* @__PURE__ */ (function() {
    function Attribute2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    Attribute2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new Attribute2(value0, value1, value22);
        };
      };
    };
    return Attribute2;
  })();
  var Property = /* @__PURE__ */ (function() {
    function Property2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Property2.create = function(value0) {
      return function(value1) {
        return new Property2(value0, value1);
      };
    };
    return Property2;
  })();
  var Handler = /* @__PURE__ */ (function() {
    function Handler2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Handler2.create = function(value0) {
      return function(value1) {
        return new Handler2(value0, value1);
      };
    };
    return Handler2;
  })();
  var Ref = /* @__PURE__ */ (function() {
    function Ref2(value0) {
      this.value0 = value0;
    }
    ;
    Ref2.create = function(value0) {
      return new Ref2(value0);
    };
    return Ref2;
  })();
  var unsafeGetProperty = unsafeGetAny;
  var setProperty = unsafeSetAny;
  var removeProperty = function(key, el) {
    var v = hasAttribute(nullImpl, key, el);
    if (v) {
      return removeAttribute(nullImpl, key, el);
    }
    ;
    var v1 = typeOf(unsafeGetAny(key, el));
    if (v1 === "string") {
      return unsafeSetAny(key, "", el);
    }
    ;
    if (key === "rowSpan") {
      return unsafeSetAny(key, 1, el);
    }
    ;
    if (key === "colSpan") {
      return unsafeSetAny(key, 1, el);
    }
    ;
    return unsafeSetAny(key, jsUndefined, el);
  };
  var propToStrKey = function(v) {
    if (v instanceof Attribute && v.value0 instanceof Just) {
      return "attr/" + (v.value0.value0 + (":" + v.value1));
    }
    ;
    if (v instanceof Attribute) {
      return "attr/:" + v.value1;
    }
    ;
    if (v instanceof Property) {
      return "prop/" + v.value0;
    }
    ;
    if (v instanceof Handler) {
      return "handler/" + v.value0;
    }
    ;
    if (v instanceof Ref) {
      return "ref";
    }
    ;
    throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): " + [v.constructor.name]);
  };
  var propFromString = unsafeCoerce2;
  var propFromNumber = unsafeCoerce2;
  var propFromBoolean = unsafeCoerce2;
  var buildProp = function(emit) {
    return function(el) {
      var removeProp = function(prevEvents) {
        return function(v, v1) {
          if (v1 instanceof Attribute) {
            return removeAttribute(toNullable(v1.value0), v1.value1, el);
          }
          ;
          if (v1 instanceof Property) {
            return removeProperty(v1.value0, el);
          }
          ;
          if (v1 instanceof Handler) {
            var handler3 = unsafeLookup(v1.value0, prevEvents);
            return removeEventListener2(v1.value0, fst(handler3), el);
          }
          ;
          if (v1 instanceof Ref) {
            return unit;
          }
          ;
          throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): " + [v1.constructor.name]);
        };
      };
      var mbEmit = function(v) {
        if (v instanceof Just) {
          return emit(v.value0)();
        }
        ;
        return unit;
      };
      var haltProp = function(state3) {
        var v = lookup3("ref")(state3.props);
        if (v instanceof Just && v.value0 instanceof Ref) {
          return mbEmit(v.value0.value0(new Removed(el)));
        }
        ;
        return unit;
      };
      var diffProp = function(prevEvents, events) {
        return function(v, v1, v11, v2) {
          if (v11 instanceof Attribute && v2 instanceof Attribute) {
            var $66 = v11.value2 === v2.value2;
            if ($66) {
              return v2;
            }
            ;
            setAttribute(toNullable(v2.value0), v2.value1, v2.value2, el);
            return v2;
          }
          ;
          if (v11 instanceof Property && v2 instanceof Property) {
            var v4 = refEq2(v11.value1, v2.value1);
            if (v4) {
              return v2;
            }
            ;
            if (v2.value0 === "value") {
              var elVal = unsafeGetProperty("value", el);
              var $75 = refEq2(elVal, v2.value1);
              if ($75) {
                return v2;
              }
              ;
              setProperty(v2.value0, v2.value1, el);
              return v2;
            }
            ;
            setProperty(v2.value0, v2.value1, el);
            return v2;
          }
          ;
          if (v11 instanceof Handler && v2 instanceof Handler) {
            var handler3 = unsafeLookup(v2.value0, prevEvents);
            write(v2.value1)(snd(handler3))();
            pokeMutMap(v2.value0, handler3, events);
            return v2;
          }
          ;
          return v2;
        };
      };
      var applyProp = function(events) {
        return function(v, v1, v2) {
          if (v2 instanceof Attribute) {
            setAttribute(toNullable(v2.value0), v2.value1, v2.value2, el);
            return v2;
          }
          ;
          if (v2 instanceof Property) {
            setProperty(v2.value0, v2.value1, el);
            return v2;
          }
          ;
          if (v2 instanceof Handler) {
            var v3 = unsafeGetAny(v2.value0, events);
            if (unsafeHasAny(v2.value0, events)) {
              write(v2.value1)(snd(v3))();
              return v2;
            }
            ;
            var ref2 = $$new(v2.value1)();
            var listener = eventListener(function(ev) {
              return function __do5() {
                var f$prime = read(ref2)();
                return mbEmit(f$prime(ev));
              };
            })();
            pokeMutMap(v2.value0, new Tuple(listener, ref2), events);
            addEventListener2(v2.value0, listener, el);
            return v2;
          }
          ;
          if (v2 instanceof Ref) {
            mbEmit(v2.value0(new Created(el)));
            return v2;
          }
          ;
          throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): " + [v2.constructor.name]);
        };
      };
      var $lazy_patchProp = $runtime_lazy6("patchProp", "Halogen.VDom.DOM.Prop", function() {
        return function(state3, ps2) {
          var events = newMutMap();
          var onThis = removeProp(state3.events);
          var onThese = diffProp(state3.events, events);
          var onThat = applyProp(events);
          var props = diffWithKeyAndIxE(state3.props, ps2, propToStrKey, onThese, onThis, onThat);
          var nextState = {
            events: unsafeFreeze2(events),
            props
          };
          return mkStep(new Step2(unit, nextState, $lazy_patchProp(100), haltProp));
        };
      });
      var patchProp = $lazy_patchProp(87);
      var renderProp = function(ps1) {
        var events = newMutMap();
        var ps1$prime = strMapWithIxE(ps1, propToStrKey, applyProp(events));
        var state3 = {
          events: unsafeFreeze2(events),
          props: ps1$prime
        };
        return mkStep(new Step2(unit, state3, patchProp, haltProp));
      };
      return renderProp;
    };
  };

  // output/Halogen.HTML.Core/index.js
  var HTML = function(x46) {
    return x46;
  };
  var widget = function($28) {
    return HTML(Widget.create($28));
  };
  var toPropValue = function(dict) {
    return dict.toPropValue;
  };
  var text5 = function($29) {
    return HTML(Text.create($29));
  };
  var prop = function(dictIsProp) {
    var toPropValue1 = toPropValue(dictIsProp);
    return function(v) {
      var $31 = Property.create(v);
      return function($32) {
        return $31(toPropValue1($32));
      };
    };
  };
  var isPropString = {
    toPropValue: propFromString
  };
  var isPropStepValue = {
    toPropValue: function($36) {
      return propFromString(renderStepValue($36));
    }
  };
  var isPropNumber = {
    toPropValue: propFromNumber
  };
  var isPropInputType = {
    toPropValue: function($45) {
      return propFromString(renderInputType($45));
    }
  };
  var isPropButtonType = {
    toPropValue: function($50) {
      return propFromString(renderButtonType($50));
    }
  };
  var isPropBoolean = {
    toPropValue: propFromBoolean
  };
  var handler = /* @__PURE__ */ (function() {
    return Handler.create;
  })();
  var element = function(ns) {
    return function(name16) {
      return function(props) {
        return function(children3) {
          return new Elem(ns, name16, props, children3);
        };
      };
    };
  };
  var attr = function(ns) {
    return function(v) {
      return Attribute.create(ns)(v);
    };
  };

  // output/Control.Applicative.Free/index.js
  var identity9 = /* @__PURE__ */ identity(categoryFn);
  var Pure = /* @__PURE__ */ (function() {
    function Pure2(value0) {
      this.value0 = value0;
    }
    ;
    Pure2.create = function(value0) {
      return new Pure2(value0);
    };
    return Pure2;
  })();
  var Lift = /* @__PURE__ */ (function() {
    function Lift3(value0) {
      this.value0 = value0;
    }
    ;
    Lift3.create = function(value0) {
      return new Lift3(value0);
    };
    return Lift3;
  })();
  var Ap = /* @__PURE__ */ (function() {
    function Ap2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Ap2.create = function(value0) {
      return function(value1) {
        return new Ap2(value0, value1);
      };
    };
    return Ap2;
  })();
  var mkAp = function(fba) {
    return function(fb) {
      return new Ap(fba, fb);
    };
  };
  var liftFreeAp = /* @__PURE__ */ (function() {
    return Lift.create;
  })();
  var goLeft = function(dictApplicative) {
    var pure56 = pure(dictApplicative);
    return function(fStack) {
      return function(valStack) {
        return function(nat) {
          return function(func) {
            return function(count) {
              if (func instanceof Pure) {
                return new Tuple(new Cons({
                  func: pure56(func.value0),
                  count
                }, fStack), valStack);
              }
              ;
              if (func instanceof Lift) {
                return new Tuple(new Cons({
                  func: nat(func.value0),
                  count
                }, fStack), valStack);
              }
              ;
              if (func instanceof Ap) {
                return goLeft(dictApplicative)(fStack)(cons2(func.value1)(valStack))(nat)(func.value0)(count + 1 | 0);
              }
              ;
              throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): " + [func.constructor.name]);
            };
          };
        };
      };
    };
  };
  var goApply = function(dictApplicative) {
    var apply7 = apply(dictApplicative.Apply0());
    return function(fStack) {
      return function(vals) {
        return function(gVal) {
          if (fStack instanceof Nil) {
            return new Left(gVal);
          }
          ;
          if (fStack instanceof Cons) {
            var gRes = apply7(fStack.value0.func)(gVal);
            var $31 = fStack.value0.count === 1;
            if ($31) {
              if (fStack.value1 instanceof Nil) {
                return new Left(gRes);
              }
              ;
              return goApply(dictApplicative)(fStack.value1)(vals)(gRes);
            }
            ;
            if (vals instanceof Nil) {
              return new Left(gRes);
            }
            ;
            if (vals instanceof Cons) {
              return new Right(new Tuple(new Cons({
                func: gRes,
                count: fStack.value0.count - 1 | 0
              }, fStack.value1), new NonEmpty(vals.value0, vals.value1)));
            }
            ;
            throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): " + [vals.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): " + [fStack.constructor.name]);
        };
      };
    };
  };
  var functorFreeAp = {
    map: function(f) {
      return function(x46) {
        return mkAp(new Pure(f))(x46);
      };
    }
  };
  var foldFreeAp = function(dictApplicative) {
    var goApply1 = goApply(dictApplicative);
    var pure56 = pure(dictApplicative);
    var goLeft1 = goLeft(dictApplicative);
    return function(nat) {
      return function(z) {
        var go2 = function($copy_v) {
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(v) {
            if (v.value1.value0 instanceof Pure) {
              var v1 = goApply1(v.value0)(v.value1.value1)(pure56(v.value1.value0.value0));
              if (v1 instanceof Left) {
                $tco_done = true;
                return v1.value0;
              }
              ;
              if (v1 instanceof Right) {
                $copy_v = v1.value0;
                return;
              }
              ;
              throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): " + [v1.constructor.name]);
            }
            ;
            if (v.value1.value0 instanceof Lift) {
              var v1 = goApply1(v.value0)(v.value1.value1)(nat(v.value1.value0.value0));
              if (v1 instanceof Left) {
                $tco_done = true;
                return v1.value0;
              }
              ;
              if (v1 instanceof Right) {
                $copy_v = v1.value0;
                return;
              }
              ;
              throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): " + [v1.constructor.name]);
            }
            ;
            if (v.value1.value0 instanceof Ap) {
              var nextVals = new NonEmpty(v.value1.value0.value1, v.value1.value1);
              $copy_v = goLeft1(v.value0)(nextVals)(nat)(v.value1.value0.value0)(1);
              return;
            }
            ;
            throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): " + [v.value1.value0.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($copy_v);
          }
          ;
          return $tco_result;
        };
        return go2(new Tuple(Nil.value, singleton6(z)));
      };
    };
  };
  var retractFreeAp = function(dictApplicative) {
    return foldFreeAp(dictApplicative)(identity9);
  };
  var applyFreeAp = {
    apply: function(fba) {
      return function(fb) {
        return mkAp(fba)(fb);
      };
    },
    Functor0: function() {
      return functorFreeAp;
    }
  };
  var applicativeFreeAp = /* @__PURE__ */ (function() {
    return {
      pure: Pure.create,
      Apply0: function() {
        return applyFreeAp;
      }
    };
  })();
  var foldFreeAp1 = /* @__PURE__ */ foldFreeAp(applicativeFreeAp);
  var hoistFreeAp = function(f) {
    return foldFreeAp1(function($54) {
      return liftFreeAp(f($54));
    });
  };

  // output/Data.CatQueue/index.js
  var CatQueue = /* @__PURE__ */ (function() {
    function CatQueue2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    CatQueue2.create = function(value0) {
      return function(value1) {
        return new CatQueue2(value0, value1);
      };
    };
    return CatQueue2;
  })();
  var uncons3 = function($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v) {
      if (v.value0 instanceof Nil && v.value1 instanceof Nil) {
        $tco_done = true;
        return Nothing.value;
      }
      ;
      if (v.value0 instanceof Nil) {
        $copy_v = new CatQueue(reverse2(v.value1), Nil.value);
        return;
      }
      ;
      if (v.value0 instanceof Cons) {
        $tco_done = true;
        return new Just(new Tuple(v.value0.value0, new CatQueue(v.value0.value1, v.value1)));
      }
      ;
      throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): " + [v.constructor.name]);
    }
    ;
    while (!$tco_done) {
      $tco_result = $tco_loop($copy_v);
    }
    ;
    return $tco_result;
  };
  var snoc3 = function(v) {
    return function(a2) {
      return new CatQueue(v.value0, new Cons(a2, v.value1));
    };
  };
  var $$null4 = function(v) {
    if (v.value0 instanceof Nil && v.value1 instanceof Nil) {
      return true;
    }
    ;
    return false;
  };
  var empty5 = /* @__PURE__ */ (function() {
    return new CatQueue(Nil.value, Nil.value);
  })();

  // output/Data.CatList/index.js
  var CatNil = /* @__PURE__ */ (function() {
    function CatNil2() {
    }
    ;
    CatNil2.value = new CatNil2();
    return CatNil2;
  })();
  var CatCons = /* @__PURE__ */ (function() {
    function CatCons2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    CatCons2.create = function(value0) {
      return function(value1) {
        return new CatCons2(value0, value1);
      };
    };
    return CatCons2;
  })();
  var link = function(v) {
    return function(v1) {
      if (v instanceof CatNil) {
        return v1;
      }
      ;
      if (v1 instanceof CatNil) {
        return v;
      }
      ;
      if (v instanceof CatCons) {
        return new CatCons(v.value0, snoc3(v.value1)(v1));
      }
      ;
      throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): " + [v.constructor.name, v1.constructor.name]);
    };
  };
  var foldr4 = function(k) {
    return function(b2) {
      return function(q2) {
        var foldl23 = function($copy_v) {
          return function($copy_v1) {
            return function($copy_v2) {
              var $tco_var_v = $copy_v;
              var $tco_var_v1 = $copy_v1;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(v, v1, v2) {
                if (v2 instanceof Nil) {
                  $tco_done = true;
                  return v1;
                }
                ;
                if (v2 instanceof Cons) {
                  $tco_var_v = v;
                  $tco_var_v1 = v(v1)(v2.value0);
                  $copy_v2 = v2.value1;
                  return;
                }
                ;
                throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_v, $tco_var_v1, $copy_v2);
              }
              ;
              return $tco_result;
            };
          };
        };
        var go2 = function($copy_xs) {
          return function($copy_ys) {
            var $tco_var_xs = $copy_xs;
            var $tco_done1 = false;
            var $tco_result;
            function $tco_loop(xs, ys) {
              var v = uncons3(xs);
              if (v instanceof Nothing) {
                $tco_done1 = true;
                return foldl23(function(x46) {
                  return function(i2) {
                    return i2(x46);
                  };
                })(b2)(ys);
              }
              ;
              if (v instanceof Just) {
                $tco_var_xs = v.value0.value1;
                $copy_ys = new Cons(k(v.value0.value0), ys);
                return;
              }
              ;
              throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): " + [v.constructor.name]);
            }
            ;
            while (!$tco_done1) {
              $tco_result = $tco_loop($tco_var_xs, $copy_ys);
            }
            ;
            return $tco_result;
          };
        };
        return go2(q2)(Nil.value);
      };
    };
  };
  var uncons4 = function(v) {
    if (v instanceof CatNil) {
      return Nothing.value;
    }
    ;
    if (v instanceof CatCons) {
      return new Just(new Tuple(v.value0, (function() {
        var $66 = $$null4(v.value1);
        if ($66) {
          return CatNil.value;
        }
        ;
        return foldr4(link)(CatNil.value)(v.value1);
      })()));
    }
    ;
    throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): " + [v.constructor.name]);
  };
  var empty6 = /* @__PURE__ */ (function() {
    return CatNil.value;
  })();
  var append3 = link;
  var cons3 = function(a2) {
    return function(cat) {
      return append3(new CatCons(a2, empty5))(cat);
    };
  };
  var singleton8 = function(a2) {
    return cons3(a2)(CatNil.value);
  };
  var semigroupCatList = {
    append: append3
  };
  var monoidCatList = /* @__PURE__ */ (function() {
    return {
      mempty: CatNil.value,
      Semigroup0: function() {
        return semigroupCatList;
      }
    };
  })();
  var fromFoldable4 = function(dictFoldable) {
    var foldMap12 = foldMap(dictFoldable)(monoidCatList);
    return function(f) {
      return foldMap12(singleton8)(f);
    };
  };
  var snoc4 = function(cat) {
    return function(a2) {
      return append3(cat)(new CatCons(a2, empty5));
    };
  };

  // output/Control.Monad.Free/index.js
  var $runtime_lazy7 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var append4 = /* @__PURE__ */ append(semigroupCatList);
  var Free = /* @__PURE__ */ (function() {
    function Free2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Free2.create = function(value0) {
      return function(value1) {
        return new Free2(value0, value1);
      };
    };
    return Free2;
  })();
  var Return = /* @__PURE__ */ (function() {
    function Return2(value0) {
      this.value0 = value0;
    }
    ;
    Return2.create = function(value0) {
      return new Return2(value0);
    };
    return Return2;
  })();
  var Bind = /* @__PURE__ */ (function() {
    function Bind2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Bind2.create = function(value0) {
      return function(value1) {
        return new Bind2(value0, value1);
      };
    };
    return Bind2;
  })();
  var toView = function($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v) {
      var runExpF = function(v22) {
        return v22;
      };
      var concatF = function(v22) {
        return function(r) {
          return new Free(v22.value0, append4(v22.value1)(r));
        };
      };
      if (v.value0 instanceof Return) {
        var v2 = uncons4(v.value1);
        if (v2 instanceof Nothing) {
          $tco_done = true;
          return new Return(v.value0.value0);
        }
        ;
        if (v2 instanceof Just) {
          $copy_v = concatF(runExpF(v2.value0.value0)(v.value0.value0))(v2.value0.value1);
          return;
        }
        ;
        throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): " + [v2.constructor.name]);
      }
      ;
      if (v.value0 instanceof Bind) {
        $tco_done = true;
        return new Bind(v.value0.value0, function(a2) {
          return concatF(v.value0.value1(a2))(v.value1);
        });
      }
      ;
      throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): " + [v.value0.constructor.name]);
    }
    ;
    while (!$tco_done) {
      $tco_result = $tco_loop($copy_v);
    }
    ;
    return $tco_result;
  };
  var fromView = function(f) {
    return new Free(f, empty6);
  };
  var freeMonad = {
    Applicative0: function() {
      return freeApplicative;
    },
    Bind1: function() {
      return freeBind;
    }
  };
  var freeFunctor = {
    map: function(k) {
      return function(f) {
        return bindFlipped(freeBind)((function() {
          var $189 = pure(freeApplicative);
          return function($190) {
            return $189(k($190));
          };
        })())(f);
      };
    }
  };
  var freeBind = {
    bind: function(v) {
      return function(k) {
        return new Free(v.value0, snoc4(v.value1)(k));
      };
    },
    Apply0: function() {
      return $lazy_freeApply(0);
    }
  };
  var freeApplicative = {
    pure: function($191) {
      return fromView(Return.create($191));
    },
    Apply0: function() {
      return $lazy_freeApply(0);
    }
  };
  var $lazy_freeApply = /* @__PURE__ */ $runtime_lazy7("freeApply", "Control.Monad.Free", function() {
    return {
      apply: ap(freeMonad),
      Functor0: function() {
        return freeFunctor;
      }
    };
  });
  var pure4 = /* @__PURE__ */ pure(freeApplicative);
  var liftF = function(f) {
    return fromView(new Bind(f, function($192) {
      return pure4($192);
    }));
  };
  var foldFree = function(dictMonadRec) {
    var Monad0 = dictMonadRec.Monad0();
    var map130 = map(Monad0.Bind1().Apply0().Functor0());
    var pure121 = pure(Monad0.Applicative0());
    var tailRecM4 = tailRecM(dictMonadRec);
    return function(k) {
      var go2 = function(f) {
        var v = toView(f);
        if (v instanceof Return) {
          return map130(Done.create)(pure121(v.value0));
        }
        ;
        if (v instanceof Bind) {
          return map130(function($199) {
            return Loop.create(v.value1($199));
          })(k(v.value0));
        }
        ;
        throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): " + [v.constructor.name]);
      };
      return tailRecM4(go2);
    };
  };

  // output/Halogen.Query.ChildQuery/index.js
  var unChildQueryBox = unsafeCoerce2;

  // output/Unsafe.Reference/foreign.js
  function reallyUnsafeRefEq(a2) {
    return function(b2) {
      return a2 === b2;
    };
  }

  // output/Unsafe.Reference/index.js
  var unsafeRefEq = reallyUnsafeRefEq;

  // output/Halogen.Subscription/index.js
  var $$void6 = /* @__PURE__ */ $$void(functorEffect);
  var coerce3 = /* @__PURE__ */ coerce();
  var bind3 = /* @__PURE__ */ bind(bindEffect);
  var append5 = /* @__PURE__ */ append(semigroupArray);
  var traverse_2 = /* @__PURE__ */ traverse_(applicativeEffect);
  var traverse_1 = /* @__PURE__ */ traverse_2(foldableArray);
  var unsubscribe = function(v) {
    return v;
  };
  var subscribe = function(v) {
    return function(k) {
      return v(function($76) {
        return $$void6(k($76));
      });
    };
  };
  var notify = function(v) {
    return function(a2) {
      return v(a2);
    };
  };
  var makeEmitter = coerce3;
  var create3 = function __do() {
    var subscribers = $$new([])();
    return {
      emitter: function(k) {
        return function __do5() {
          modify_2(function(v) {
            return append5(v)([k]);
          })(subscribers)();
          return modify_2(deleteBy(unsafeRefEq)(k))(subscribers);
        };
      },
      listener: function(a2) {
        return bind3(read(subscribers))(traverse_1(function(k) {
          return k(a2);
        }));
      }
    };
  };

  // output/Halogen.Query.HalogenM/index.js
  var identity10 = /* @__PURE__ */ identity(categoryFn);
  var SubscriptionId = function(x46) {
    return x46;
  };
  var ForkId = function(x46) {
    return x46;
  };
  var State = /* @__PURE__ */ (function() {
    function State2(value0) {
      this.value0 = value0;
    }
    ;
    State2.create = function(value0) {
      return new State2(value0);
    };
    return State2;
  })();
  var Subscribe = /* @__PURE__ */ (function() {
    function Subscribe2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Subscribe2.create = function(value0) {
      return function(value1) {
        return new Subscribe2(value0, value1);
      };
    };
    return Subscribe2;
  })();
  var Unsubscribe = /* @__PURE__ */ (function() {
    function Unsubscribe2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Unsubscribe2.create = function(value0) {
      return function(value1) {
        return new Unsubscribe2(value0, value1);
      };
    };
    return Unsubscribe2;
  })();
  var Lift2 = /* @__PURE__ */ (function() {
    function Lift3(value0) {
      this.value0 = value0;
    }
    ;
    Lift3.create = function(value0) {
      return new Lift3(value0);
    };
    return Lift3;
  })();
  var ChildQuery2 = /* @__PURE__ */ (function() {
    function ChildQuery3(value0) {
      this.value0 = value0;
    }
    ;
    ChildQuery3.create = function(value0) {
      return new ChildQuery3(value0);
    };
    return ChildQuery3;
  })();
  var Raise = /* @__PURE__ */ (function() {
    function Raise3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Raise3.create = function(value0) {
      return function(value1) {
        return new Raise3(value0, value1);
      };
    };
    return Raise3;
  })();
  var Par = /* @__PURE__ */ (function() {
    function Par2(value0) {
      this.value0 = value0;
    }
    ;
    Par2.create = function(value0) {
      return new Par2(value0);
    };
    return Par2;
  })();
  var Fork = /* @__PURE__ */ (function() {
    function Fork2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Fork2.create = function(value0) {
      return function(value1) {
        return new Fork2(value0, value1);
      };
    };
    return Fork2;
  })();
  var Join = /* @__PURE__ */ (function() {
    function Join2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Join2.create = function(value0) {
      return function(value1) {
        return new Join2(value0, value1);
      };
    };
    return Join2;
  })();
  var Kill = /* @__PURE__ */ (function() {
    function Kill2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Kill2.create = function(value0) {
      return function(value1) {
        return new Kill2(value0, value1);
      };
    };
    return Kill2;
  })();
  var GetRef = /* @__PURE__ */ (function() {
    function GetRef2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    GetRef2.create = function(value0) {
      return function(value1) {
        return new GetRef2(value0, value1);
      };
    };
    return GetRef2;
  })();
  var HalogenM = function(x46) {
    return x46;
  };
  var unsubscribe2 = function(sid) {
    return liftF(new Unsubscribe(sid, unit));
  };
  var subscribe2 = function(es) {
    return liftF(new Subscribe(function(v) {
      return es;
    }, identity10));
  };
  var ordSubscriptionId = ordInt;
  var ordForkId = ordInt;
  var monadHalogenM = freeMonad;
  var monadStateHalogenM = {
    state: function($181) {
      return HalogenM(liftF(State.create($181)));
    },
    Monad0: function() {
      return monadHalogenM;
    }
  };
  var monadEffectHalogenM = function(dictMonadEffect) {
    return {
      liftEffect: (function() {
        var $186 = liftEffect(dictMonadEffect);
        return function($187) {
          return HalogenM(liftF(Lift2.create($186($187))));
        };
      })(),
      Monad0: function() {
        return monadHalogenM;
      }
    };
  };
  var monadAffHalogenM = function(dictMonadAff) {
    var monadEffectHalogenM1 = monadEffectHalogenM(dictMonadAff.MonadEffect0());
    return {
      liftAff: (function() {
        var $188 = liftAff(dictMonadAff);
        return function($189) {
          return HalogenM(liftF(Lift2.create($188($189))));
        };
      })(),
      MonadEffect0: function() {
        return monadEffectHalogenM1;
      }
    };
  };
  var functorHalogenM = freeFunctor;
  var bindHalogenM = freeBind;
  var applicativeHalogenM = freeApplicative;

  // output/Halogen.Query.HalogenQ/index.js
  var Initialize = /* @__PURE__ */ (function() {
    function Initialize63(value0) {
      this.value0 = value0;
    }
    ;
    Initialize63.create = function(value0) {
      return new Initialize63(value0);
    };
    return Initialize63;
  })();
  var Finalize = /* @__PURE__ */ (function() {
    function Finalize6(value0) {
      this.value0 = value0;
    }
    ;
    Finalize6.create = function(value0) {
      return new Finalize6(value0);
    };
    return Finalize6;
  })();
  var Receive = /* @__PURE__ */ (function() {
    function Receive3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Receive3.create = function(value0) {
      return function(value1) {
        return new Receive3(value0, value1);
      };
    };
    return Receive3;
  })();
  var Action2 = /* @__PURE__ */ (function() {
    function Action3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Action3.create = function(value0) {
      return function(value1) {
        return new Action3(value0, value1);
      };
    };
    return Action3;
  })();
  var Query = /* @__PURE__ */ (function() {
    function Query3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Query3.create = function(value0) {
      return function(value1) {
        return new Query3(value0, value1);
      };
    };
    return Query3;
  })();

  // output/Halogen.VDom.Thunk/index.js
  var $runtime_lazy8 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var unsafeEqThunk = function(v, v1) {
    return refEq2(v.value0, v1.value0) && (refEq2(v.value1, v1.value1) && v.value1(v.value3, v1.value3));
  };
  var runThunk = function(v) {
    return v.value2(v.value3);
  };
  var buildThunk = function(toVDom) {
    var haltThunk = function(state3) {
      return halt(state3.vdom);
    };
    var $lazy_patchThunk = $runtime_lazy8("patchThunk", "Halogen.VDom.Thunk", function() {
      return function(state3, t2) {
        var $48 = unsafeEqThunk(state3.thunk, t2);
        if ($48) {
          return mkStep(new Step2(extract2(state3.vdom), state3, $lazy_patchThunk(112), haltThunk));
        }
        ;
        var vdom = step2(state3.vdom, toVDom(runThunk(t2)));
        return mkStep(new Step2(extract2(vdom), {
          vdom,
          thunk: t2
        }, $lazy_patchThunk(115), haltThunk));
      };
    });
    var patchThunk = $lazy_patchThunk(108);
    var renderThunk = function(spec) {
      return function(t) {
        var vdom = buildVDom(spec)(toVDom(runThunk(t)));
        return mkStep(new Step2(extract2(vdom), {
          thunk: t,
          vdom
        }, patchThunk, haltThunk));
      };
    };
    return renderThunk;
  };

  // output/Halogen.Component/index.js
  var voidLeft2 = /* @__PURE__ */ voidLeft(functorHalogenM);
  var traverse_3 = /* @__PURE__ */ traverse_(applicativeHalogenM)(foldableMaybe);
  var map18 = /* @__PURE__ */ map(functorHalogenM);
  var pure5 = /* @__PURE__ */ pure(applicativeHalogenM);
  var lookup4 = /* @__PURE__ */ lookup2();
  var pop3 = /* @__PURE__ */ pop2();
  var insert3 = /* @__PURE__ */ insert2();
  var ComponentSlot = /* @__PURE__ */ (function() {
    function ComponentSlot2(value0) {
      this.value0 = value0;
    }
    ;
    ComponentSlot2.create = function(value0) {
      return new ComponentSlot2(value0);
    };
    return ComponentSlot2;
  })();
  var ThunkSlot = /* @__PURE__ */ (function() {
    function ThunkSlot2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkSlot2.create = function(value0) {
      return new ThunkSlot2(value0);
    };
    return ThunkSlot2;
  })();
  var unComponentSlot = unsafeCoerce2;
  var unComponent = unsafeCoerce2;
  var mkEval = function(args) {
    return function(v) {
      if (v instanceof Initialize) {
        return voidLeft2(traverse_3(args.handleAction)(args.initialize))(v.value0);
      }
      ;
      if (v instanceof Finalize) {
        return voidLeft2(traverse_3(args.handleAction)(args.finalize))(v.value0);
      }
      ;
      if (v instanceof Receive) {
        return voidLeft2(traverse_3(args.handleAction)(args.receive(v.value0)))(v.value1);
      }
      ;
      if (v instanceof Action2) {
        return voidLeft2(args.handleAction(v.value0))(v.value1);
      }
      ;
      if (v instanceof Query) {
        return unCoyoneda(function(g) {
          var $45 = map18(maybe(v.value1(unit))(g));
          return function($46) {
            return $45(args.handleQuery($46));
          };
        })(v.value0);
      }
      ;
      throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): " + [v.constructor.name]);
    };
  };
  var mkComponentSlot = unsafeCoerce2;
  var mkComponent = unsafeCoerce2;
  var defaultEval = /* @__PURE__ */ (function() {
    return {
      handleAction: $$const(pure5(unit)),
      handleQuery: $$const(pure5(Nothing.value)),
      receive: $$const(Nothing.value),
      initialize: Nothing.value,
      finalize: Nothing.value
    };
  })();
  var componentSlot = function() {
    return function(dictIsSymbol) {
      var lookup19 = lookup4(dictIsSymbol);
      var pop12 = pop3(dictIsSymbol);
      var insert110 = insert3(dictIsSymbol);
      return function(dictOrd) {
        var lookup23 = lookup19(dictOrd);
        var pop22 = pop12(dictOrd);
        var insert23 = insert110(dictOrd);
        return function(label5) {
          return function(p2) {
            return function(comp) {
              return function(input3) {
                return function(output2) {
                  return mkComponentSlot({
                    get: lookup23(label5)(p2),
                    pop: pop22(label5)(p2),
                    set: insert23(label5)(p2),
                    component: comp,
                    input: input3,
                    output: output2
                  });
                };
              };
            };
          };
        };
      };
    };
  };

  // output/Halogen.HTML.Elements/index.js
  var element2 = /* @__PURE__ */ (function() {
    return element(Nothing.value);
  })();
  var em = /* @__PURE__ */ element2("em");
  var em_ = /* @__PURE__ */ em([]);
  var footer = /* @__PURE__ */ element2("footer");
  var h1 = /* @__PURE__ */ element2("h1");
  var h1_ = /* @__PURE__ */ h1([]);
  var h2 = /* @__PURE__ */ element2("h2");
  var h2_ = /* @__PURE__ */ h2([]);
  var h3 = /* @__PURE__ */ element2("h3");
  var h3_ = /* @__PURE__ */ h3([]);
  var h4 = /* @__PURE__ */ element2("h4");
  var h4_ = /* @__PURE__ */ h4([]);
  var header = /* @__PURE__ */ element2("header");
  var hr = function(props) {
    return element2("hr")(props)([]);
  };
  var img = function(props) {
    return element2("img")(props)([]);
  };
  var input2 = function(props) {
    return element2("input")(props)([]);
  };
  var label4 = /* @__PURE__ */ element2("label");
  var label_ = /* @__PURE__ */ label4([]);
  var li = /* @__PURE__ */ element2("li");
  var li_ = /* @__PURE__ */ li([]);
  var main = /* @__PURE__ */ element2("main");
  var nav = /* @__PURE__ */ element2("nav");
  var ol = /* @__PURE__ */ element2("ol");
  var ol_ = /* @__PURE__ */ ol([]);
  var p = /* @__PURE__ */ element2("p");
  var p_ = /* @__PURE__ */ p([]);
  var pre = /* @__PURE__ */ element2("pre");
  var pre_ = /* @__PURE__ */ pre([]);
  var section = /* @__PURE__ */ element2("section");
  var span3 = /* @__PURE__ */ element2("span");
  var strong = /* @__PURE__ */ element2("strong");
  var strong_ = /* @__PURE__ */ strong([]);
  var summary = /* @__PURE__ */ element2("summary");
  var summary_ = /* @__PURE__ */ summary([]);
  var table = /* @__PURE__ */ element2("table");
  var tbody = /* @__PURE__ */ element2("tbody");
  var tbody_ = /* @__PURE__ */ tbody([]);
  var td = /* @__PURE__ */ element2("td");
  var td_ = /* @__PURE__ */ td([]);
  var th = /* @__PURE__ */ element2("th");
  var th_ = /* @__PURE__ */ th([]);
  var thead = /* @__PURE__ */ element2("thead");
  var thead_ = /* @__PURE__ */ thead([]);
  var tr = /* @__PURE__ */ element2("tr");
  var tr_ = /* @__PURE__ */ tr([]);
  var ul = /* @__PURE__ */ element2("ul");
  var ul_ = /* @__PURE__ */ ul([]);
  var div2 = /* @__PURE__ */ element2("div");
  var div_ = /* @__PURE__ */ div2([]);
  var details = /* @__PURE__ */ element2("details");
  var code = /* @__PURE__ */ element2("code");
  var code_ = /* @__PURE__ */ code([]);
  var button = /* @__PURE__ */ element2("button");
  var aside = /* @__PURE__ */ element2("aside");
  var a = /* @__PURE__ */ element2("a");

  // output/Halogen.HTML.Properties/index.js
  var unwrap2 = /* @__PURE__ */ unwrap();
  var prop2 = function(dictIsProp) {
    return prop(dictIsProp);
  };
  var prop1 = /* @__PURE__ */ prop2(isPropBoolean);
  var prop22 = /* @__PURE__ */ prop2(isPropString);
  var prop4 = /* @__PURE__ */ prop2(isPropNumber);
  var rel4 = /* @__PURE__ */ prop22("rel");
  var src9 = /* @__PURE__ */ prop22("src");
  var step3 = /* @__PURE__ */ prop2(isPropStepValue)("step");
  var target5 = /* @__PURE__ */ prop22("target");
  var title2 = /* @__PURE__ */ prop22("title");
  var type_17 = function(dictIsProp) {
    return prop2(dictIsProp)("type");
  };
  var value12 = function(dictIsProp) {
    return prop2(dictIsProp)("value");
  };
  var placeholder3 = /* @__PURE__ */ prop22("placeholder");
  var min5 = /* @__PURE__ */ prop4("min");
  var max6 = /* @__PURE__ */ prop4("max");
  var id2 = /* @__PURE__ */ prop22("id");
  var href4 = /* @__PURE__ */ prop22("href");
  var $$for = /* @__PURE__ */ prop22("htmlFor");
  var disabled10 = /* @__PURE__ */ prop1("disabled");
  var classes = /* @__PURE__ */ (function() {
    var $32 = prop22("className");
    var $33 = joinWith(" ");
    var $34 = map(functorArray)(unwrap2);
    return function($35) {
      return $32($33($34($35)));
    };
  })();
  var class_ = /* @__PURE__ */ (function() {
    var $36 = prop22("className");
    return function($37) {
      return $36(unwrap2($37));
    };
  })();
  var checked2 = /* @__PURE__ */ prop1("checked");
  var attr2 = /* @__PURE__ */ (function() {
    return attr(Nothing.value);
  })();
  var style = /* @__PURE__ */ attr2("style");
  var alt5 = /* @__PURE__ */ prop22("alt");

  // output/Halogen.HTML/index.js
  var componentSlot2 = /* @__PURE__ */ componentSlot();
  var slot_ = function() {
    return function(dictIsSymbol) {
      var componentSlot1 = componentSlot2(dictIsSymbol);
      return function(dictOrd) {
        var componentSlot22 = componentSlot1(dictOrd);
        return function(label5) {
          return function(p2) {
            return function(component71) {
              return function(input3) {
                return widget(new ComponentSlot(componentSlot22(label5)(p2)(component71)(input3)($$const(Nothing.value))));
              };
            };
          };
        };
      };
    };
  };
  var slot = function() {
    return function(dictIsSymbol) {
      var componentSlot1 = componentSlot2(dictIsSymbol);
      return function(dictOrd) {
        var componentSlot22 = componentSlot1(dictOrd);
        return function(label5) {
          return function(p2) {
            return function(component71) {
              return function(input3) {
                return function(outputQuery) {
                  return widget(new ComponentSlot(componentSlot22(label5)(p2)(component71)(input3)(function($11) {
                    return Just.create(outputQuery($11));
                  })));
                };
              };
            };
          };
        };
      };
    };
  };

  // output/Control.Monad.Fork.Class/index.js
  var monadForkAff = {
    suspend: suspendAff,
    fork: forkAff,
    join: joinFiber,
    Monad0: function() {
      return monadAff;
    },
    Functor1: function() {
      return functorFiber;
    }
  };
  var fork = function(dict) {
    return dict.fork;
  };

  // output/Effect.Console/foreign.js
  var log2 = function(s) {
    return function() {
      console.log(s);
    };
  };
  var warn = function(s) {
    return function() {
      console.warn(s);
    };
  };

  // output/Halogen.Aff.Driver.State/index.js
  var unRenderStateX = unsafeCoerce2;
  var unDriverStateX = unsafeCoerce2;
  var renderStateX_ = function(dictApplicative) {
    var traverse_16 = traverse_(dictApplicative)(foldableMaybe);
    return function(f) {
      return unDriverStateX(function(st) {
        return traverse_16(f)(st.rendering);
      });
    };
  };
  var mkRenderStateX = unsafeCoerce2;
  var renderStateX = function(dictFunctor) {
    return function(f) {
      return unDriverStateX(function(st) {
        return mkRenderStateX(f(st.rendering));
      });
    };
  };
  var mkDriverStateXRef = unsafeCoerce2;
  var mapDriverState = function(f) {
    return function(v) {
      return f(v);
    };
  };
  var initDriverState = function(component71) {
    return function(input3) {
      return function(handler3) {
        return function(lchs) {
          return function __do5() {
            var selfRef = $$new({})();
            var childrenIn = $$new(empty3)();
            var childrenOut = $$new(empty3)();
            var handlerRef = $$new(handler3)();
            var pendingQueries = $$new(new Just(Nil.value))();
            var pendingOuts = $$new(new Just(Nil.value))();
            var pendingHandlers = $$new(Nothing.value)();
            var fresh2 = $$new(1)();
            var subscriptions = $$new(new Just(empty2))();
            var forks = $$new(empty2)();
            var ds = {
              component: component71,
              state: component71.initialState(input3),
              refs: empty2,
              children: empty3,
              childrenIn,
              childrenOut,
              selfRef,
              handlerRef,
              pendingQueries,
              pendingOuts,
              pendingHandlers,
              rendering: Nothing.value,
              fresh: fresh2,
              subscriptions,
              forks,
              lifecycleHandlers: lchs
            };
            write(ds)(selfRef)();
            return mkDriverStateXRef(selfRef);
          };
        };
      };
    };
  };

  // output/Halogen.Aff.Driver.Eval/index.js
  var traverse_4 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableMaybe);
  var bindFlipped5 = /* @__PURE__ */ bindFlipped(bindMaybe);
  var lookup5 = /* @__PURE__ */ lookup(ordSubscriptionId);
  var bind12 = /* @__PURE__ */ bind(bindAff);
  var liftEffect4 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var discard3 = /* @__PURE__ */ discard(discardUnit);
  var discard1 = /* @__PURE__ */ discard3(bindAff);
  var traverse_12 = /* @__PURE__ */ traverse_(applicativeAff);
  var traverse_22 = /* @__PURE__ */ traverse_12(foldableList);
  var fork3 = /* @__PURE__ */ fork(monadForkAff);
  var parSequence_2 = /* @__PURE__ */ parSequence_(parallelAff)(applicativeParAff)(foldableList);
  var pure6 = /* @__PURE__ */ pure(applicativeAff);
  var map20 = /* @__PURE__ */ map(functorCoyoneda);
  var parallel3 = /* @__PURE__ */ parallel(parallelAff);
  var map110 = /* @__PURE__ */ map(functorAff);
  var sequential2 = /* @__PURE__ */ sequential(parallelAff);
  var map23 = /* @__PURE__ */ map(functorMaybe);
  var insert4 = /* @__PURE__ */ insert(ordSubscriptionId);
  var retractFreeAp2 = /* @__PURE__ */ retractFreeAp(applicativeParAff);
  var $$delete2 = /* @__PURE__ */ $$delete(ordForkId);
  var unlessM2 = /* @__PURE__ */ unlessM(monadEffect);
  var insert12 = /* @__PURE__ */ insert(ordForkId);
  var traverse_32 = /* @__PURE__ */ traverse_12(foldableMaybe);
  var lookup12 = /* @__PURE__ */ lookup(ordForkId);
  var lookup22 = /* @__PURE__ */ lookup(ordString);
  var foldFree2 = /* @__PURE__ */ foldFree(monadRecAff);
  var alter2 = /* @__PURE__ */ alter(ordString);
  var unsubscribe3 = function(sid) {
    return function(ref2) {
      return function __do5() {
        var v = read(ref2)();
        var subs = read(v.subscriptions)();
        return traverse_4(unsubscribe)(bindFlipped5(lookup5(sid))(subs))();
      };
    };
  };
  var queueOrRun = function(ref2) {
    return function(au) {
      return bind12(liftEffect4(read(ref2)))(function(v) {
        if (v instanceof Nothing) {
          return au;
        }
        ;
        if (v instanceof Just) {
          return liftEffect4(write(new Just(new Cons(au, v.value0)))(ref2));
        }
        ;
        throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): " + [v.constructor.name]);
      });
    };
  };
  var handleLifecycle = function(lchs) {
    return function(f) {
      return discard1(liftEffect4(write({
        initializers: Nil.value,
        finalizers: Nil.value
      })(lchs)))(function() {
        return bind12(liftEffect4(f))(function(result) {
          return bind12(liftEffect4(read(lchs)))(function(v) {
            return discard1(traverse_22(fork3)(v.finalizers))(function() {
              return discard1(parSequence_2(v.initializers))(function() {
                return pure6(result);
              });
            });
          });
        });
      });
    };
  };
  var handleAff = /* @__PURE__ */ runAff_(/* @__PURE__ */ either(throwException)(/* @__PURE__ */ $$const(/* @__PURE__ */ pure(applicativeEffect)(unit))));
  var fresh = function(f) {
    return function(ref2) {
      return bind12(liftEffect4(read(ref2)))(function(v) {
        return liftEffect4(modify$prime(function(i2) {
          return {
            state: i2 + 1 | 0,
            value: f(i2)
          };
        })(v.fresh));
      });
    };
  };
  var evalQ = function(render76) {
    return function(ref2) {
      return function(q2) {
        return bind12(liftEffect4(read(ref2)))(function(v) {
          return evalM(render76)(ref2)(v["component"]["eval"](new Query(map20(Just.create)(liftCoyoneda(q2)), $$const(Nothing.value))));
        });
      };
    };
  };
  var evalM = function(render76) {
    return function(initRef) {
      return function(v) {
        var evalChildQuery = function(ref2) {
          return function(cqb) {
            return bind12(liftEffect4(read(ref2)))(function(v1) {
              return unChildQueryBox(function(v2) {
                var evalChild = function(v3) {
                  return parallel3(bind12(liftEffect4(read(v3)))(function(dsx) {
                    return unDriverStateX(function(ds) {
                      return evalQ(render76)(ds.selfRef)(v2.value1);
                    })(dsx);
                  }));
                };
                return map110(v2.value2)(sequential2(v2.value0(applicativeParAff)(evalChild)(v1.children)));
              })(cqb);
            });
          };
        };
        var go2 = function(ref2) {
          return function(v1) {
            if (v1 instanceof State) {
              return bind12(liftEffect4(read(ref2)))(function(v2) {
                var v3 = v1.value0(v2.state);
                if (unsafeRefEq(v2.state)(v3.value1)) {
                  return pure6(v3.value0);
                }
                ;
                if (otherwise) {
                  return discard1(liftEffect4(write({
                    component: v2.component,
                    refs: v2.refs,
                    children: v2.children,
                    childrenIn: v2.childrenIn,
                    childrenOut: v2.childrenOut,
                    selfRef: v2.selfRef,
                    handlerRef: v2.handlerRef,
                    pendingQueries: v2.pendingQueries,
                    pendingOuts: v2.pendingOuts,
                    pendingHandlers: v2.pendingHandlers,
                    rendering: v2.rendering,
                    fresh: v2.fresh,
                    subscriptions: v2.subscriptions,
                    forks: v2.forks,
                    lifecycleHandlers: v2.lifecycleHandlers,
                    state: v3.value1
                  })(ref2)))(function() {
                    return discard1(handleLifecycle(v2.lifecycleHandlers)(render76(v2.lifecycleHandlers)(ref2)))(function() {
                      return pure6(v3.value0);
                    });
                  });
                }
                ;
                throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): " + [v3.constructor.name]);
              });
            }
            ;
            if (v1 instanceof Subscribe) {
              return bind12(fresh(SubscriptionId)(ref2))(function(sid) {
                return bind12(liftEffect4(subscribe(v1.value0(sid))(function(act) {
                  return handleAff(evalF(render76)(ref2)(new Action(act)));
                })))(function(finalize) {
                  return bind12(liftEffect4(read(ref2)))(function(v2) {
                    return discard1(liftEffect4(modify_2(map23(insert4(sid)(finalize)))(v2.subscriptions)))(function() {
                      return pure6(v1.value1(sid));
                    });
                  });
                });
              });
            }
            ;
            if (v1 instanceof Unsubscribe) {
              return discard1(liftEffect4(unsubscribe3(v1.value0)(ref2)))(function() {
                return pure6(v1.value1);
              });
            }
            ;
            if (v1 instanceof Lift2) {
              return v1.value0;
            }
            ;
            if (v1 instanceof ChildQuery2) {
              return evalChildQuery(ref2)(v1.value0);
            }
            ;
            if (v1 instanceof Raise) {
              return bind12(liftEffect4(read(ref2)))(function(v2) {
                return bind12(liftEffect4(read(v2.handlerRef)))(function(handler3) {
                  return discard1(queueOrRun(v2.pendingOuts)(handler3(v1.value0)))(function() {
                    return pure6(v1.value1);
                  });
                });
              });
            }
            ;
            if (v1 instanceof Par) {
              return sequential2(retractFreeAp2(hoistFreeAp((function() {
                var $119 = evalM(render76)(ref2);
                return function($120) {
                  return parallel3($119($120));
                };
              })())(v1.value0)));
            }
            ;
            if (v1 instanceof Fork) {
              return bind12(fresh(ForkId)(ref2))(function(fid) {
                return bind12(liftEffect4(read(ref2)))(function(v2) {
                  return bind12(liftEffect4($$new(false)))(function(doneRef) {
                    return bind12(fork3($$finally(liftEffect4(function __do5() {
                      modify_2($$delete2(fid))(v2.forks)();
                      return write(true)(doneRef)();
                    }))(evalM(render76)(ref2)(v1.value0))))(function(fiber) {
                      return discard1(liftEffect4(unlessM2(read(doneRef))(modify_2(insert12(fid)(fiber))(v2.forks))))(function() {
                        return pure6(v1.value1(fid));
                      });
                    });
                  });
                });
              });
            }
            ;
            if (v1 instanceof Join) {
              return bind12(liftEffect4(read(ref2)))(function(v2) {
                return bind12(liftEffect4(read(v2.forks)))(function(forkMap) {
                  return discard1(traverse_32(joinFiber)(lookup12(v1.value0)(forkMap)))(function() {
                    return pure6(v1.value1);
                  });
                });
              });
            }
            ;
            if (v1 instanceof Kill) {
              return bind12(liftEffect4(read(ref2)))(function(v2) {
                return bind12(liftEffect4(read(v2.forks)))(function(forkMap) {
                  return discard1(traverse_32(killFiber(error("Cancelled")))(lookup12(v1.value0)(forkMap)))(function() {
                    return pure6(v1.value1);
                  });
                });
              });
            }
            ;
            if (v1 instanceof GetRef) {
              return bind12(liftEffect4(read(ref2)))(function(v2) {
                return pure6(v1.value1(lookup22(v1.value0)(v2.refs)));
              });
            }
            ;
            throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): " + [v1.constructor.name]);
          };
        };
        return foldFree2(go2(initRef))(v);
      };
    };
  };
  var evalF = function(render76) {
    return function(ref2) {
      return function(v) {
        if (v instanceof RefUpdate) {
          return liftEffect4(flip(modify_2)(ref2)(mapDriverState(function(st) {
            return {
              component: st.component,
              state: st.state,
              children: st.children,
              childrenIn: st.childrenIn,
              childrenOut: st.childrenOut,
              selfRef: st.selfRef,
              handlerRef: st.handlerRef,
              pendingQueries: st.pendingQueries,
              pendingOuts: st.pendingOuts,
              pendingHandlers: st.pendingHandlers,
              rendering: st.rendering,
              fresh: st.fresh,
              subscriptions: st.subscriptions,
              forks: st.forks,
              lifecycleHandlers: st.lifecycleHandlers,
              refs: alter2($$const(v.value1))(v.value0)(st.refs)
            };
          })));
        }
        ;
        if (v instanceof Action) {
          return bind12(liftEffect4(read(ref2)))(function(v1) {
            return evalM(render76)(ref2)(v1["component"]["eval"](new Action2(v.value0, unit)));
          });
        }
        ;
        throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): " + [v.constructor.name]);
      };
    };
  };

  // output/Halogen.Aff.Driver/index.js
  var bind4 = /* @__PURE__ */ bind(bindEffect);
  var discard4 = /* @__PURE__ */ discard(discardUnit);
  var for_2 = /* @__PURE__ */ for_(applicativeEffect)(foldableMaybe);
  var traverse_5 = /* @__PURE__ */ traverse_(applicativeAff)(foldableList);
  var fork4 = /* @__PURE__ */ fork(monadForkAff);
  var bindFlipped6 = /* @__PURE__ */ bindFlipped(bindEffect);
  var traverse_13 = /* @__PURE__ */ traverse_(applicativeEffect);
  var traverse_23 = /* @__PURE__ */ traverse_13(foldableMaybe);
  var traverse_33 = /* @__PURE__ */ traverse_13(foldableMap);
  var discard22 = /* @__PURE__ */ discard4(bindAff);
  var parSequence_3 = /* @__PURE__ */ parSequence_(parallelAff)(applicativeParAff)(foldableList);
  var liftEffect5 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var pure7 = /* @__PURE__ */ pure(applicativeEffect);
  var map21 = /* @__PURE__ */ map(functorEffect);
  var pure12 = /* @__PURE__ */ pure(applicativeAff);
  var when3 = /* @__PURE__ */ when(applicativeEffect);
  var renderStateX2 = /* @__PURE__ */ renderStateX(functorEffect);
  var $$void7 = /* @__PURE__ */ $$void(functorAff);
  var foreachSlot2 = /* @__PURE__ */ foreachSlot(applicativeEffect);
  var renderStateX_2 = /* @__PURE__ */ renderStateX_(applicativeEffect);
  var tailRecM3 = /* @__PURE__ */ tailRecM(monadRecEffect);
  var voidLeft3 = /* @__PURE__ */ voidLeft(functorEffect);
  var bind13 = /* @__PURE__ */ bind(bindAff);
  var liftEffect1 = /* @__PURE__ */ liftEffect(monadEffectEffect);
  var newLifecycleHandlers = /* @__PURE__ */ (function() {
    return $$new({
      initializers: Nil.value,
      finalizers: Nil.value
    });
  })();
  var handlePending = function(ref2) {
    return function __do5() {
      var queue = read(ref2)();
      write(Nothing.value)(ref2)();
      return for_2(queue)((function() {
        var $59 = traverse_5(fork4);
        return function($60) {
          return handleAff($59(reverse2($60)));
        };
      })())();
    };
  };
  var cleanupSubscriptionsAndForks = function(v) {
    return function __do5() {
      bindFlipped6(traverse_23(traverse_33(unsubscribe)))(read(v.subscriptions))();
      write(Nothing.value)(v.subscriptions)();
      bindFlipped6(traverse_33((function() {
        var $61 = killFiber(error("finalized"));
        return function($62) {
          return handleAff($61($62));
        };
      })()))(read(v.forks))();
      return write(empty2)(v.forks)();
    };
  };
  var runUI = function(renderSpec2) {
    return function(component71) {
      return function(i2) {
        var squashChildInitializers = function(lchs) {
          return function(preInits) {
            return unDriverStateX(function(st) {
              var parentInitializer = evalM(render76)(st.selfRef)(st["component"]["eval"](new Initialize(unit)));
              return modify_2(function(handlers) {
                return {
                  initializers: new Cons(discard22(parSequence_3(reverse2(handlers.initializers)))(function() {
                    return discard22(parentInitializer)(function() {
                      return liftEffect5(function __do5() {
                        handlePending(st.pendingQueries)();
                        return handlePending(st.pendingOuts)();
                      });
                    });
                  }), preInits),
                  finalizers: handlers.finalizers
                };
              })(lchs);
            });
          };
        };
        var runComponent = function(lchs) {
          return function(handler3) {
            return function(j) {
              return unComponent(function(c) {
                return function __do5() {
                  var lchs$prime = newLifecycleHandlers();
                  var $$var2 = initDriverState(c)(j)(handler3)(lchs$prime)();
                  var pre2 = read(lchs)();
                  write({
                    initializers: Nil.value,
                    finalizers: pre2.finalizers
                  })(lchs)();
                  bindFlipped6(unDriverStateX((function() {
                    var $63 = render76(lchs);
                    return function($64) {
                      return $63((function(v) {
                        return v.selfRef;
                      })($64));
                    };
                  })()))(read($$var2))();
                  bindFlipped6(squashChildInitializers(lchs)(pre2.initializers))(read($$var2))();
                  return $$var2;
                };
              });
            };
          };
        };
        var renderChild = function(lchs) {
          return function(handler3) {
            return function(childrenInRef) {
              return function(childrenOutRef) {
                return unComponentSlot(function(slot3) {
                  return function __do5() {
                    var childrenIn = map21(slot3.pop)(read(childrenInRef))();
                    var $$var2 = (function() {
                      if (childrenIn instanceof Just) {
                        write(childrenIn.value0.value1)(childrenInRef)();
                        var dsx = read(childrenIn.value0.value0)();
                        unDriverStateX(function(st) {
                          return function __do6() {
                            flip(write)(st.handlerRef)((function() {
                              var $65 = maybe(pure12(unit))(handler3);
                              return function($66) {
                                return $65(slot3.output($66));
                              };
                            })())();
                            return handleAff(evalM(render76)(st.selfRef)(st["component"]["eval"](new Receive(slot3.input, unit))))();
                          };
                        })(dsx)();
                        return childrenIn.value0.value0;
                      }
                      ;
                      if (childrenIn instanceof Nothing) {
                        return runComponent(lchs)((function() {
                          var $67 = maybe(pure12(unit))(handler3);
                          return function($68) {
                            return $67(slot3.output($68));
                          };
                        })())(slot3.input)(slot3.component)();
                      }
                      ;
                      throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): " + [childrenIn.constructor.name]);
                    })();
                    var isDuplicate = map21(function($69) {
                      return isJust(slot3.get($69));
                    })(read(childrenOutRef))();
                    when3(isDuplicate)(warn("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))();
                    modify_2(slot3.set($$var2))(childrenOutRef)();
                    return bind4(read($$var2))(renderStateX2(function(v) {
                      if (v instanceof Nothing) {
                        return $$throw("Halogen internal error: child was not initialized in renderChild");
                      }
                      ;
                      if (v instanceof Just) {
                        return pure7(renderSpec2.renderChild(v.value0));
                      }
                      ;
                      throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): " + [v.constructor.name]);
                    }))();
                  };
                });
              };
            };
          };
        };
        var render76 = function(lchs) {
          return function($$var2) {
            return function __do5() {
              var v = read($$var2)();
              var shouldProcessHandlers = map21(isNothing)(read(v.pendingHandlers))();
              when3(shouldProcessHandlers)(write(new Just(Nil.value))(v.pendingHandlers))();
              write(empty3)(v.childrenOut)();
              write(v.children)(v.childrenIn)();
              var handler3 = (function() {
                var $70 = queueOrRun(v.pendingHandlers);
                var $71 = evalF(render76)(v.selfRef);
                return function($72) {
                  return $70($$void7($71($72)));
                };
              })();
              var childHandler = (function() {
                var $73 = queueOrRun(v.pendingQueries);
                return function($74) {
                  return $73(handler3(Action.create($74)));
                };
              })();
              var rendering = renderSpec2.render(function($75) {
                return handleAff(handler3($75));
              })(renderChild(lchs)(childHandler)(v.childrenIn)(v.childrenOut))(v.component.render(v.state))(v.rendering)();
              var children3 = read(v.childrenOut)();
              var childrenIn = read(v.childrenIn)();
              foreachSlot2(childrenIn)(function(v1) {
                return function __do6() {
                  var childDS = read(v1)();
                  renderStateX_2(renderSpec2.removeChild)(childDS)();
                  return finalize(lchs)(childDS)();
                };
              })();
              flip(modify_2)(v.selfRef)(mapDriverState(function(ds$prime) {
                return {
                  component: ds$prime.component,
                  state: ds$prime.state,
                  refs: ds$prime.refs,
                  childrenIn: ds$prime.childrenIn,
                  childrenOut: ds$prime.childrenOut,
                  selfRef: ds$prime.selfRef,
                  handlerRef: ds$prime.handlerRef,
                  pendingQueries: ds$prime.pendingQueries,
                  pendingOuts: ds$prime.pendingOuts,
                  pendingHandlers: ds$prime.pendingHandlers,
                  fresh: ds$prime.fresh,
                  subscriptions: ds$prime.subscriptions,
                  forks: ds$prime.forks,
                  lifecycleHandlers: ds$prime.lifecycleHandlers,
                  rendering: new Just(rendering),
                  children: children3
                };
              }))();
              return when3(shouldProcessHandlers)(flip(tailRecM3)(unit)(function(v1) {
                return function __do6() {
                  var handlers = read(v.pendingHandlers)();
                  write(new Just(Nil.value))(v.pendingHandlers)();
                  traverse_23((function() {
                    var $76 = traverse_5(fork4);
                    return function($77) {
                      return handleAff($76(reverse2($77)));
                    };
                  })())(handlers)();
                  var mmore = read(v.pendingHandlers)();
                  var $52 = maybe(false)($$null3)(mmore);
                  if ($52) {
                    return voidLeft3(write(Nothing.value)(v.pendingHandlers))(new Done(unit))();
                  }
                  ;
                  return new Loop(unit);
                };
              }))();
            };
          };
        };
        var finalize = function(lchs) {
          return unDriverStateX(function(st) {
            return function __do5() {
              cleanupSubscriptionsAndForks(st)();
              var f = evalM(render76)(st.selfRef)(st["component"]["eval"](new Finalize(unit)));
              modify_2(function(handlers) {
                return {
                  initializers: handlers.initializers,
                  finalizers: new Cons(f, handlers.finalizers)
                };
              })(lchs)();
              return foreachSlot2(st.children)(function(v) {
                return function __do6() {
                  var dsx = read(v)();
                  return finalize(lchs)(dsx)();
                };
              })();
            };
          });
        };
        var evalDriver = function(disposed) {
          return function(ref2) {
            return function(q2) {
              return bind13(liftEffect5(read(disposed)))(function(v) {
                if (v) {
                  return pure12(Nothing.value);
                }
                ;
                return evalQ(render76)(ref2)(q2);
              });
            };
          };
        };
        var dispose = function(disposed) {
          return function(lchs) {
            return function(dsx) {
              return handleLifecycle(lchs)(function __do5() {
                var v = read(disposed)();
                if (v) {
                  return unit;
                }
                ;
                write(true)(disposed)();
                finalize(lchs)(dsx)();
                return unDriverStateX(function(v1) {
                  return function __do6() {
                    var v2 = liftEffect1(read(v1.selfRef))();
                    return for_2(v2.rendering)(renderSpec2.dispose)();
                  };
                })(dsx)();
              });
            };
          };
        };
        return bind13(liftEffect5(newLifecycleHandlers))(function(lchs) {
          return bind13(liftEffect5($$new(false)))(function(disposed) {
            return handleLifecycle(lchs)(function __do5() {
              var sio = create3();
              var dsx = bindFlipped6(read)(runComponent(lchs)((function() {
                var $78 = notify(sio.listener);
                return function($79) {
                  return liftEffect5($78($79));
                };
              })())(i2)(component71))();
              return unDriverStateX(function(st) {
                return pure7({
                  query: evalDriver(disposed)(st.selfRef),
                  messages: sio.emitter,
                  dispose: dispose(disposed)(lchs)(dsx)
                });
              })(dsx)();
            });
          });
        });
      };
    };
  };

  // output/Web.DOM.Node/foreign.js
  var getEffProp2 = function(name16) {
    return function(node) {
      return function() {
        return node[name16];
      };
    };
  };
  var baseURI = getEffProp2("baseURI");
  var _ownerDocument = getEffProp2("ownerDocument");
  var _parentNode = getEffProp2("parentNode");
  var _parentElement = getEffProp2("parentElement");
  var childNodes = getEffProp2("childNodes");
  var _firstChild = getEffProp2("firstChild");
  var _lastChild = getEffProp2("lastChild");
  var _previousSibling = getEffProp2("previousSibling");
  var _nextSibling = getEffProp2("nextSibling");
  var _nodeValue = getEffProp2("nodeValue");
  var textContent = getEffProp2("textContent");
  function insertBefore(node1) {
    return function(node2) {
      return function(parent2) {
        return function() {
          parent2.insertBefore(node1, node2);
        };
      };
    };
  }
  function appendChild(node) {
    return function(parent2) {
      return function() {
        parent2.appendChild(node);
      };
    };
  }
  function removeChild2(node) {
    return function(parent2) {
      return function() {
        parent2.removeChild(node);
      };
    };
  }

  // output/Web.DOM.Node/index.js
  var map24 = /* @__PURE__ */ map(functorEffect);
  var parentNode2 = /* @__PURE__ */ (function() {
    var $6 = map24(toMaybe);
    return function($7) {
      return $6(_parentNode($7));
    };
  })();
  var nextSibling = /* @__PURE__ */ (function() {
    var $15 = map24(toMaybe);
    return function($16) {
      return $15(_nextSibling($16));
    };
  })();

  // output/Halogen.VDom.Driver/index.js
  var $runtime_lazy9 = function(name16, moduleName, init5) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init5();
      state3 = 2;
      return val;
    };
  };
  var $$void8 = /* @__PURE__ */ $$void(functorEffect);
  var pure8 = /* @__PURE__ */ pure(applicativeEffect);
  var traverse_6 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableMaybe);
  var unwrap3 = /* @__PURE__ */ unwrap();
  var when4 = /* @__PURE__ */ when(applicativeEffect);
  var not3 = /* @__PURE__ */ not(/* @__PURE__ */ heytingAlgebraFunction(/* @__PURE__ */ heytingAlgebraFunction(heytingAlgebraBoolean)));
  var identity11 = /* @__PURE__ */ identity(categoryFn);
  var bind14 = /* @__PURE__ */ bind(bindAff);
  var liftEffect6 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var map25 = /* @__PURE__ */ map(functorEffect);
  var bindFlipped7 = /* @__PURE__ */ bindFlipped(bindEffect);
  var substInParent = function(v) {
    return function(v1) {
      return function(v2) {
        if (v1 instanceof Just && v2 instanceof Just) {
          return $$void8(insertBefore(v)(v1.value0)(v2.value0));
        }
        ;
        if (v1 instanceof Nothing && v2 instanceof Just) {
          return $$void8(appendChild(v)(v2.value0));
        }
        ;
        return pure8(unit);
      };
    };
  };
  var removeChild3 = function(v) {
    return function __do5() {
      var npn = parentNode2(v.node)();
      return traverse_6(function(pn) {
        return removeChild2(v.node)(pn);
      })(npn)();
    };
  };
  var mkSpec = function(handler3) {
    return function(renderChildRef) {
      return function(document3) {
        var getNode = unRenderStateX(function(v) {
          return v.node;
        });
        var done = function(st) {
          if (st instanceof Just) {
            return halt(st.value0);
          }
          ;
          return unit;
        };
        var buildWidget2 = function(spec) {
          var buildThunk2 = buildThunk(unwrap3)(spec);
          var $lazy_patch = $runtime_lazy9("patch", "Halogen.VDom.Driver", function() {
            return function(st, slot3) {
              if (st instanceof Just) {
                if (slot3 instanceof ComponentSlot) {
                  halt(st.value0);
                  return $lazy_renderComponentSlot(100)(slot3.value0);
                }
                ;
                if (slot3 instanceof ThunkSlot) {
                  var step$prime = step2(st.value0, slot3.value0);
                  return mkStep(new Step2(extract2(step$prime), new Just(step$prime), $lazy_patch(103), done));
                }
                ;
                throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): " + [slot3.constructor.name]);
              }
              ;
              return $lazy_render(104)(slot3);
            };
          });
          var $lazy_render = $runtime_lazy9("render", "Halogen.VDom.Driver", function() {
            return function(slot3) {
              if (slot3 instanceof ComponentSlot) {
                return $lazy_renderComponentSlot(86)(slot3.value0);
              }
              ;
              if (slot3 instanceof ThunkSlot) {
                var step4 = buildThunk2(slot3.value0);
                return mkStep(new Step2(extract2(step4), new Just(step4), $lazy_patch(89), done));
              }
              ;
              throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): " + [slot3.constructor.name]);
            };
          });
          var $lazy_renderComponentSlot = $runtime_lazy9("renderComponentSlot", "Halogen.VDom.Driver", function() {
            return function(cs) {
              var renderChild = read(renderChildRef)();
              var rsx = renderChild(cs)();
              var node = getNode(rsx);
              return mkStep(new Step2(node, Nothing.value, $lazy_patch(117), done));
            };
          });
          var patch2 = $lazy_patch(91);
          var render76 = $lazy_render(82);
          var renderComponentSlot = $lazy_renderComponentSlot(109);
          return render76;
        };
        var buildAttributes = buildProp(handler3);
        return {
          buildWidget: buildWidget2,
          buildAttributes,
          document: document3
        };
      };
    };
  };
  var renderSpec = function(document3) {
    return function(container) {
      var render76 = function(handler3) {
        return function(child) {
          return function(v) {
            return function(v1) {
              if (v1 instanceof Nothing) {
                return function __do5() {
                  var renderChildRef = $$new(child)();
                  var spec = mkSpec(handler3)(renderChildRef)(document3);
                  var machine = buildVDom(spec)(v);
                  var node = extract2(machine);
                  $$void8(appendChild(node)(toNode(container)))();
                  return {
                    machine,
                    node,
                    renderChildRef
                  };
                };
              }
              ;
              if (v1 instanceof Just) {
                return function __do5() {
                  write(child)(v1.value0.renderChildRef)();
                  var parent2 = parentNode2(v1.value0.node)();
                  var nextSib = nextSibling(v1.value0.node)();
                  var machine$prime = step2(v1.value0.machine, v);
                  var newNode = extract2(machine$prime);
                  when4(not3(unsafeRefEq)(v1.value0.node)(newNode))(substInParent(newNode)(nextSib)(parent2))();
                  return {
                    machine: machine$prime,
                    node: newNode,
                    renderChildRef: v1.value0.renderChildRef
                  };
                };
              }
              ;
              throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): " + [v1.constructor.name]);
            };
          };
        };
      };
      return {
        render: render76,
        renderChild: identity11,
        removeChild: removeChild3,
        dispose: removeChild3
      };
    };
  };
  var runUI2 = function(component71) {
    return function(i2) {
      return function(element3) {
        return bind14(liftEffect6(map25(toDocument)(bindFlipped7(document2)(windowImpl))))(function(document3) {
          return runUI(renderSpec(document3)(element3))(component71)(i2);
        });
      };
    };
  };

  // output/PSD3.Website.Types/index.js
  var UnderstandingSection = /* @__PURE__ */ (function() {
    function UnderstandingSection2() {
    }
    ;
    UnderstandingSection2.value = new UnderstandingSection2();
    return UnderstandingSection2;
  })();
  var TutorialSection = /* @__PURE__ */ (function() {
    function TutorialSection2() {
    }
    ;
    TutorialSection2.value = new TutorialSection2();
    return TutorialSection2;
  })();
  var HowToSection = /* @__PURE__ */ (function() {
    function HowToSection2() {
    }
    ;
    HowToSection2.value = new HowToSection2();
    return HowToSection2;
  })();
  var APISection = /* @__PURE__ */ (function() {
    function APISection2() {
    }
    ;
    APISection2.value = new APISection2();
    return APISection2;
  })();
  var Home = /* @__PURE__ */ (function() {
    function Home2() {
    }
    ;
    Home2.value = new Home2();
    return Home2;
  })();
  var GettingStarted = /* @__PURE__ */ (function() {
    function GettingStarted2() {
    }
    ;
    GettingStarted2.value = new GettingStarted2();
    return GettingStarted2;
  })();
  var Wizard = /* @__PURE__ */ (function() {
    function Wizard2() {
    }
    ;
    Wizard2.value = new Wizard2();
    return Wizard2;
  })();
  var HowtoIndex = /* @__PURE__ */ (function() {
    function HowtoIndex2() {
    }
    ;
    HowtoIndex2.value = new HowtoIndex2();
    return HowtoIndex2;
  })();
  var Reference = /* @__PURE__ */ (function() {
    function Reference2() {
    }
    ;
    Reference2.value = new Reference2();
    return Reference2;
  })();
  var ReferenceModule = /* @__PURE__ */ (function() {
    function ReferenceModule2(value0) {
      this.value0 = value0;
    }
    ;
    ReferenceModule2.create = function(value0) {
      return new ReferenceModule2(value0);
    };
    return ReferenceModule2;
  })();
  var About = /* @__PURE__ */ (function() {
    function About2() {
    }
    ;
    About2.value = new About2();
    return About2;
  })();
  var UnderstandingIndex = /* @__PURE__ */ (function() {
    function UnderstandingIndex2() {
    }
    ;
    UnderstandingIndex2.value = new UnderstandingIndex2();
    return UnderstandingIndex2;
  })();
  var UnderstandingFinallyTagless = /* @__PURE__ */ (function() {
    function UnderstandingFinallyTagless2() {
    }
    ;
    UnderstandingFinallyTagless2.value = new UnderstandingFinallyTagless2();
    return UnderstandingFinallyTagless2;
  })();
  var UnderstandingSelectionM = /* @__PURE__ */ (function() {
    function UnderstandingSelectionM2() {
    }
    ;
    UnderstandingSelectionM2.value = new UnderstandingSelectionM2();
    return UnderstandingSelectionM2;
  })();
  var UnderstandingCapabilities = /* @__PURE__ */ (function() {
    function UnderstandingCapabilities2() {
    }
    ;
    UnderstandingCapabilities2.value = new UnderstandingCapabilities2();
    return UnderstandingCapabilities2;
  })();
  var UnderstandingTypeSystem = /* @__PURE__ */ (function() {
    function UnderstandingTypeSystem2() {
    }
    ;
    UnderstandingTypeSystem2.value = new UnderstandingTypeSystem2();
    return UnderstandingTypeSystem2;
  })();
  var UnderstandingDatumPattern = /* @__PURE__ */ (function() {
    function UnderstandingDatumPattern2() {
    }
    ;
    UnderstandingDatumPattern2.value = new UnderstandingDatumPattern2();
    return UnderstandingDatumPattern2;
  })();
  var UnderstandingGrammar = /* @__PURE__ */ (function() {
    function UnderstandingGrammar2() {
    }
    ;
    UnderstandingGrammar2.value = new UnderstandingGrammar2();
    return UnderstandingGrammar2;
  })();
  var UnderstandingPhilosophy = /* @__PURE__ */ (function() {
    function UnderstandingPhilosophy2() {
    }
    ;
    UnderstandingPhilosophy2.value = new UnderstandingPhilosophy2();
    return UnderstandingPhilosophy2;
  })();
  var UnderstandingConcepts = /* @__PURE__ */ (function() {
    function UnderstandingConcepts2() {
    }
    ;
    UnderstandingConcepts2.value = new UnderstandingConcepts2();
    return UnderstandingConcepts2;
  })();
  var UnderstandingPatterns = /* @__PURE__ */ (function() {
    function UnderstandingPatterns2() {
    }
    ;
    UnderstandingPatterns2.value = new UnderstandingPatterns2();
    return UnderstandingPatterns2;
  })();
  var SimpleCharts1 = /* @__PURE__ */ (function() {
    function SimpleCharts12() {
    }
    ;
    SimpleCharts12.value = new SimpleCharts12();
    return SimpleCharts12;
  })();
  var SimpleCharts2 = /* @__PURE__ */ (function() {
    function SimpleCharts22() {
    }
    ;
    SimpleCharts22.value = new SimpleCharts22();
    return SimpleCharts22;
  })();
  var DataFlowViz = /* @__PURE__ */ (function() {
    function DataFlowViz2() {
    }
    ;
    DataFlowViz2.value = new DataFlowViz2();
    return DataFlowViz2;
  })();
  var Movement = /* @__PURE__ */ (function() {
    function Movement2() {
    }
    ;
    Movement2.value = new Movement2();
    return Movement2;
  })();
  var Hierarchies = /* @__PURE__ */ (function() {
    function Hierarchies2() {
    }
    ;
    Hierarchies2.value = new Hierarchies2();
    return Hierarchies2;
  })();
  var IsometricCurveExperiment = /* @__PURE__ */ (function() {
    function IsometricCurveExperiment2() {
    }
    ;
    IsometricCurveExperiment2.value = new IsometricCurveExperiment2();
    return IsometricCurveExperiment2;
  })();
  var Interpreters = /* @__PURE__ */ (function() {
    function Interpreters2() {
    }
    ;
    Interpreters2.value = new Interpreters2();
    return Interpreters2;
  })();
  var MermaidDiagrams = /* @__PURE__ */ (function() {
    function MermaidDiagrams2() {
    }
    ;
    MermaidDiagrams2.value = new MermaidDiagrams2();
    return MermaidDiagrams2;
  })();
  var ForceNavigator = /* @__PURE__ */ (function() {
    function ForceNavigator2() {
    }
    ;
    ForceNavigator2.value = new ForceNavigator2();
    return ForceNavigator2;
  })();
  var CodeExplorer = /* @__PURE__ */ (function() {
    function CodeExplorer2() {
    }
    ;
    CodeExplorer2.value = new CodeExplorer2();
    return CodeExplorer2;
  })();
  var Explore = /* @__PURE__ */ (function() {
    function Explore2(value0) {
      this.value0 = value0;
    }
    ;
    Explore2.create = function(value0) {
      return new Explore2(value0);
    };
    return Explore2;
  })();
  var WealthHealth = /* @__PURE__ */ (function() {
    function WealthHealth2() {
    }
    ;
    WealthHealth2.value = new WealthHealth2();
    return WealthHealth2;
  })();
  var CodeAtlas = /* @__PURE__ */ (function() {
    function CodeAtlas2() {
    }
    ;
    CodeAtlas2.value = new CodeAtlas2();
    return CodeAtlas2;
  })();
  var FpFtw = /* @__PURE__ */ (function() {
    function FpFtw2() {
    }
    ;
    FpFtw2.value = new FpFtw2();
    return FpFtw2;
  })();
  var ExamplesGallery = /* @__PURE__ */ (function() {
    function ExamplesGallery2() {
    }
    ;
    ExamplesGallery2.value = new ExamplesGallery2();
    return ExamplesGallery2;
  })();
  var Example = /* @__PURE__ */ (function() {
    function Example3(value0) {
      this.value0 = value0;
    }
    ;
    Example3.create = function(value0) {
      return new Example3(value0);
    };
    return Example3;
  })();
  var PSD3v2Examples = /* @__PURE__ */ (function() {
    function PSD3v2Examples2() {
    }
    ;
    PSD3v2Examples2.value = new PSD3v2Examples2();
    return PSD3v2Examples2;
  })();
  var Acknowledgements = /* @__PURE__ */ (function() {
    function Acknowledgements2() {
    }
    ;
    Acknowledgements2.value = new Acknowledgements2();
    return Acknowledgements2;
  })();
  var NotFound = /* @__PURE__ */ (function() {
    function NotFound2() {
    }
    ;
    NotFound2.value = new NotFound2();
    return NotFound2;
  })();
  var showRoute = {
    show: function(v) {
      if (v instanceof Home) {
        return "Home";
      }
      ;
      if (v instanceof GettingStarted) {
        return "Getting Started";
      }
      ;
      if (v instanceof Wizard) {
        return "Wizard";
      }
      ;
      if (v instanceof HowtoIndex) {
        return "How-to Guides";
      }
      ;
      if (v instanceof Reference) {
        return "API Reference";
      }
      ;
      if (v instanceof ReferenceModule) {
        return "Module: " + v.value0;
      }
      ;
      if (v instanceof About) {
        return "About";
      }
      ;
      if (v instanceof UnderstandingIndex) {
        return "Understanding";
      }
      ;
      if (v instanceof UnderstandingFinallyTagless) {
        return "Understanding: Finally Tagless";
      }
      ;
      if (v instanceof UnderstandingSelectionM) {
        return "Understanding: SelectionM";
      }
      ;
      if (v instanceof UnderstandingCapabilities) {
        return "Understanding: Capabilities";
      }
      ;
      if (v instanceof UnderstandingTypeSystem) {
        return "Understanding: Type System";
      }
      ;
      if (v instanceof UnderstandingDatumPattern) {
        return "Understanding: Datum Pattern";
      }
      ;
      if (v instanceof UnderstandingGrammar) {
        return "Understanding: Grammar";
      }
      ;
      if (v instanceof UnderstandingConcepts) {
        return "Understanding: Concepts";
      }
      ;
      if (v instanceof UnderstandingPatterns) {
        return "Understanding: Patterns";
      }
      ;
      if (v instanceof UnderstandingPhilosophy) {
        return "Understanding: Philosophy";
      }
      ;
      if (v instanceof SimpleCharts1) {
        return "Simplest Charts";
      }
      ;
      if (v instanceof SimpleCharts2) {
        return "Lines and Bars";
      }
      ;
      if (v instanceof DataFlowViz) {
        return "Data Flow Visualizations";
      }
      ;
      if (v instanceof Movement) {
        return "Movement & Transition";
      }
      ;
      if (v instanceof Hierarchies) {
        return "Hierarchies";
      }
      ;
      if (v instanceof IsometricCurveExperiment) {
        return "Isometric Curve Experiment";
      }
      ;
      if (v instanceof Interpreters) {
        return "Interpreters";
      }
      ;
      if (v instanceof MermaidDiagrams) {
        return "Mermaid AST Diagrams";
      }
      ;
      if (v instanceof ForceNavigator) {
        return "Force Navigator";
      }
      ;
      if (v instanceof CodeExplorer) {
        return "Code Explorer";
      }
      ;
      if (v instanceof Explore) {
        return "Explore: " + v.value0;
      }
      ;
      if (v instanceof WealthHealth) {
        return "Wealth & Health of Nations";
      }
      ;
      if (v instanceof CodeAtlas) {
        return "Code Atlas";
      }
      ;
      if (v instanceof FpFtw) {
        return "FP FTW";
      }
      ;
      if (v instanceof ExamplesGallery) {
        return "Examples Gallery";
      }
      ;
      if (v instanceof PSD3v2Examples) {
        return "PSD3v2 Examples";
      }
      ;
      if (v instanceof Example) {
        return "Example: " + v.value0;
      }
      ;
      if (v instanceof Acknowledgements) {
        return "Acknowledgements";
      }
      ;
      if (v instanceof NotFound) {
        return "Not Found";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Website.Types (line 123, column 1 - line 159, column 30): " + [v.constructor.name]);
    }
  };
  var eqSection = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof UnderstandingSection && y46 instanceof UnderstandingSection) {
          return true;
        }
        ;
        if (x46 instanceof TutorialSection && y46 instanceof TutorialSection) {
          return true;
        }
        ;
        if (x46 instanceof HowToSection && y46 instanceof HowToSection) {
          return true;
        }
        ;
        if (x46 instanceof APISection && y46 instanceof APISection) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eqRoute = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof Home && y46 instanceof Home) {
          return true;
        }
        ;
        if (x46 instanceof GettingStarted && y46 instanceof GettingStarted) {
          return true;
        }
        ;
        if (x46 instanceof Wizard && y46 instanceof Wizard) {
          return true;
        }
        ;
        if (x46 instanceof HowtoIndex && y46 instanceof HowtoIndex) {
          return true;
        }
        ;
        if (x46 instanceof Reference && y46 instanceof Reference) {
          return true;
        }
        ;
        if (x46 instanceof ReferenceModule && y46 instanceof ReferenceModule) {
          return x46.value0 === y46.value0;
        }
        ;
        if (x46 instanceof About && y46 instanceof About) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingIndex && y46 instanceof UnderstandingIndex) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingFinallyTagless && y46 instanceof UnderstandingFinallyTagless) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingSelectionM && y46 instanceof UnderstandingSelectionM) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingCapabilities && y46 instanceof UnderstandingCapabilities) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingTypeSystem && y46 instanceof UnderstandingTypeSystem) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingDatumPattern && y46 instanceof UnderstandingDatumPattern) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingGrammar && y46 instanceof UnderstandingGrammar) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingPhilosophy && y46 instanceof UnderstandingPhilosophy) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingConcepts && y46 instanceof UnderstandingConcepts) {
          return true;
        }
        ;
        if (x46 instanceof UnderstandingPatterns && y46 instanceof UnderstandingPatterns) {
          return true;
        }
        ;
        if (x46 instanceof SimpleCharts1 && y46 instanceof SimpleCharts1) {
          return true;
        }
        ;
        if (x46 instanceof SimpleCharts2 && y46 instanceof SimpleCharts2) {
          return true;
        }
        ;
        if (x46 instanceof DataFlowViz && y46 instanceof DataFlowViz) {
          return true;
        }
        ;
        if (x46 instanceof Movement && y46 instanceof Movement) {
          return true;
        }
        ;
        if (x46 instanceof Hierarchies && y46 instanceof Hierarchies) {
          return true;
        }
        ;
        if (x46 instanceof IsometricCurveExperiment && y46 instanceof IsometricCurveExperiment) {
          return true;
        }
        ;
        if (x46 instanceof Interpreters && y46 instanceof Interpreters) {
          return true;
        }
        ;
        if (x46 instanceof MermaidDiagrams && y46 instanceof MermaidDiagrams) {
          return true;
        }
        ;
        if (x46 instanceof ForceNavigator && y46 instanceof ForceNavigator) {
          return true;
        }
        ;
        if (x46 instanceof CodeExplorer && y46 instanceof CodeExplorer) {
          return true;
        }
        ;
        if (x46 instanceof Explore && y46 instanceof Explore) {
          return x46.value0 === y46.value0;
        }
        ;
        if (x46 instanceof WealthHealth && y46 instanceof WealthHealth) {
          return true;
        }
        ;
        if (x46 instanceof CodeAtlas && y46 instanceof CodeAtlas) {
          return true;
        }
        ;
        if (x46 instanceof FpFtw && y46 instanceof FpFtw) {
          return true;
        }
        ;
        if (x46 instanceof ExamplesGallery && y46 instanceof ExamplesGallery) {
          return true;
        }
        ;
        if (x46 instanceof Example && y46 instanceof Example) {
          return x46.value0 === y46.value0;
        }
        ;
        if (x46 instanceof PSD3v2Examples && y46 instanceof PSD3v2Examples) {
          return true;
        }
        ;
        if (x46 instanceof Acknowledgements && y46 instanceof Acknowledgements) {
          return true;
        }
        ;
        if (x46 instanceof NotFound && y46 instanceof NotFound) {
          return true;
        }
        ;
        return false;
      };
    }
  };

  // output/Data.Semiring.Free/index.js
  var append12 = /* @__PURE__ */ append(semigroupList);
  var bind5 = /* @__PURE__ */ bind(bindList);
  var pure9 = /* @__PURE__ */ pure(applicativeList);
  var semiringFree = /* @__PURE__ */ (function() {
    return {
      add: function(v) {
        return function(v1) {
          return append12(v)(v1);
        };
      },
      zero: Nil.value,
      mul: function(v) {
        return function(v1) {
          return bind5(v)(function(xs) {
            return bind5(v1)(function(ys) {
              return pure9(append12(xs)(ys));
            });
          });
        };
      },
      one: singleton5(Nil.value)
    };
  })();
  var free = function(a2) {
    return singleton5(singleton5(a2));
  };

  // output/Data.Validation.Semiring/index.js
  var V = function(x46) {
    return x46;
  };
  var validation = function(v) {
    return function(v1) {
      return function(v2) {
        if (v2 instanceof Left) {
          return v(v2.value0);
        }
        ;
        if (v2 instanceof Right) {
          return v1(v2.value0);
        }
        ;
        throw new Error("Failed pattern match at Data.Validation.Semiring (line 49, column 1 - line 49, column 84): " + [v.constructor.name, v1.constructor.name, v2.constructor.name]);
      };
    };
  };
  var invalid = function($113) {
    return V(Left.create($113));
  };
  var functorV = functorEither;
  var applyV = function(dictSemiring) {
    var mul3 = mul(dictSemiring);
    return {
      apply: function(v) {
        return function(v1) {
          if (v instanceof Left && v1 instanceof Left) {
            return new Left(mul3(v.value0)(v1.value0));
          }
          ;
          if (v instanceof Left) {
            return new Left(v.value0);
          }
          ;
          if (v1 instanceof Left) {
            return new Left(v1.value0);
          }
          ;
          if (v instanceof Right && v1 instanceof Right) {
            return new Right(v.value0(v1.value0));
          }
          ;
          throw new Error("Failed pattern match at Data.Validation.Semiring (line 90, column 1 - line 94, column 54): " + [v.constructor.name, v1.constructor.name]);
        };
      },
      Functor0: function() {
        return functorV;
      }
    };
  };
  var applicativeV = function(dictSemiring) {
    var applyV1 = applyV(dictSemiring);
    return {
      pure: function($121) {
        return V(Right.create($121));
      },
      Apply0: function() {
        return applyV1;
      }
    };
  };
  var altV = function(dictSemiring) {
    var add4 = add(dictSemiring);
    return {
      alt: function(v) {
        return function(v1) {
          if (v instanceof Left && v1 instanceof Left) {
            return new Left(add4(v.value0)(v1.value0));
          }
          ;
          if (v instanceof Left) {
            return v1;
          }
          ;
          if (v instanceof Right) {
            return new Right(v.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Validation.Semiring (line 105, column 1 - line 108, column 36): " + [v.constructor.name, v1.constructor.name]);
        };
      },
      Functor0: function() {
        return functorV;
      }
    };
  };

  // output/Routing.Match.Error/index.js
  var UnexpectedPath = /* @__PURE__ */ (function() {
    function UnexpectedPath2(value0) {
      this.value0 = value0;
    }
    ;
    UnexpectedPath2.create = function(value0) {
      return new UnexpectedPath2(value0);
    };
    return UnexpectedPath2;
  })();
  var ExpectedBoolean = /* @__PURE__ */ (function() {
    function ExpectedBoolean2() {
    }
    ;
    ExpectedBoolean2.value = new ExpectedBoolean2();
    return ExpectedBoolean2;
  })();
  var ExpectedEnd = /* @__PURE__ */ (function() {
    function ExpectedEnd2() {
    }
    ;
    ExpectedEnd2.value = new ExpectedEnd2();
    return ExpectedEnd2;
  })();
  var ExpectedNumber = /* @__PURE__ */ (function() {
    function ExpectedNumber2() {
    }
    ;
    ExpectedNumber2.value = new ExpectedNumber2();
    return ExpectedNumber2;
  })();
  var ExpectedInt = /* @__PURE__ */ (function() {
    function ExpectedInt2() {
    }
    ;
    ExpectedInt2.value = new ExpectedInt2();
    return ExpectedInt2;
  })();
  var ExpectedString = /* @__PURE__ */ (function() {
    function ExpectedString2() {
    }
    ;
    ExpectedString2.value = new ExpectedString2();
    return ExpectedString2;
  })();
  var ExpectedQuery = /* @__PURE__ */ (function() {
    function ExpectedQuery2() {
    }
    ;
    ExpectedQuery2.value = new ExpectedQuery2();
    return ExpectedQuery2;
  })();
  var ExpectedPathPart = /* @__PURE__ */ (function() {
    function ExpectedPathPart2() {
    }
    ;
    ExpectedPathPart2.value = new ExpectedPathPart2();
    return ExpectedPathPart2;
  })();
  var KeyNotFound = /* @__PURE__ */ (function() {
    function KeyNotFound2(value0) {
      this.value0 = value0;
    }
    ;
    KeyNotFound2.create = function(value0) {
      return new KeyNotFound2(value0);
    };
    return KeyNotFound2;
  })();
  var Fail = /* @__PURE__ */ (function() {
    function Fail2(value0) {
      this.value0 = value0;
    }
    ;
    Fail2.create = function(value0) {
      return new Fail2(value0);
    };
    return Fail2;
  })();
  var showMatchError = function(err) {
    if (err instanceof UnexpectedPath) {
      return "expected path part: " + err.value0;
    }
    ;
    if (err instanceof KeyNotFound) {
      return "key: " + (err.value0 + " has not found in query part");
    }
    ;
    if (err instanceof ExpectedQuery) {
      return "expected query - found path";
    }
    ;
    if (err instanceof ExpectedNumber) {
      return "expected number";
    }
    ;
    if (err instanceof ExpectedInt) {
      return "expected int";
    }
    ;
    if (err instanceof ExpectedBoolean) {
      return "expected boolean";
    }
    ;
    if (err instanceof ExpectedEnd) {
      return "expected end";
    }
    ;
    if (err instanceof ExpectedString) {
      return "expected string var";
    }
    ;
    if (err instanceof ExpectedPathPart) {
      return "expected path part, found query";
    }
    ;
    if (err instanceof Fail) {
      return "match error: " + err.value0;
    }
    ;
    throw new Error("Failed pattern match at Routing.Match.Error (line 19, column 3 - line 29, column 39): " + [err.constructor.name]);
  };

  // output/Routing.Types/index.js
  var Path = /* @__PURE__ */ (function() {
    function Path6(value0) {
      this.value0 = value0;
    }
    ;
    Path6.create = function(value0) {
      return new Path6(value0);
    };
    return Path6;
  })();
  var Query2 = /* @__PURE__ */ (function() {
    function Query3(value0) {
      this.value0 = value0;
    }
    ;
    Query3.create = function(value0) {
      return new Query3(value0);
    };
    return Query3;
  })();

  // output/Routing.Match/index.js
  var pure10 = /* @__PURE__ */ pure(/* @__PURE__ */ applicativeV(semiringFree));
  var foldl5 = /* @__PURE__ */ foldl(foldableList);
  var bind6 = /* @__PURE__ */ bind(bindList);
  var map26 = /* @__PURE__ */ map(functorList);
  var unwrap4 = /* @__PURE__ */ unwrap();
  var pure13 = /* @__PURE__ */ pure(applicativeList);
  var mul2 = /* @__PURE__ */ mul(semiringFree);
  var identity12 = /* @__PURE__ */ identity(categoryFn);
  var one2 = /* @__PURE__ */ one(semiringFree);
  var alt6 = /* @__PURE__ */ alt(/* @__PURE__ */ altV(semiringFree));
  var str = function(route) {
    if (route instanceof Cons && route.value0 instanceof Path) {
      return pure10(new Tuple(route.value1, route.value0.value0));
    }
    ;
    return invalid(free(ExpectedString.value));
  };
  var runMatch = function(v) {
    return function(route) {
      var foldErrors = function(errs) {
        return new Left(foldl5(function(b2) {
          return function(a2) {
            return a2 + ("\n" + b2);
          };
        })("")(bind6(map26(reverse2)(unwrap4(errs)))(function(es) {
          return pure13(foldl5(function(b2) {
            return function(a2) {
              return a2 + (";" + b2);
            };
          })("")(map26(showMatchError)(es)));
        })));
      };
      return validation(foldErrors)(function($109) {
        return Right.create(snd($109));
      })(v(route));
    };
  };
  var matchFunctor = {
    map: function(fn) {
      return function(v) {
        return function(r) {
          return validation(invalid)(function(v1) {
            return pure10(new Tuple(v1.value0, fn(v1.value1)));
          })(v(r));
        };
      };
    }
  };
  var matchApply = {
    apply: function(v) {
      return function(v1) {
        var processFnRes = function(v2) {
          return validation(invalid)(function(v3) {
            return pure10(new Tuple(v3.value0, v2.value1(v3.value1)));
          })(v1(v2.value0));
        };
        var processFnErr = function(r) {
          return function(err) {
            return invalid(mul2(err)(validation(identity12)($$const(one2))(v1(r))));
          };
        };
        return function(r) {
          return validation(processFnErr(r))(processFnRes)(v(r));
        };
      };
    },
    Functor0: function() {
      return matchFunctor;
    }
  };
  var matchApplicative = {
    pure: function(a2) {
      return function(r) {
        return pure10(new Tuple(r, a2));
      };
    },
    Apply0: function() {
      return matchApply;
    }
  };
  var matchAlt = {
    alt: function(v) {
      return function(v1) {
        return function(r) {
          return alt6(v(r))(v1(r));
        };
      };
    },
    Functor0: function() {
      return matchFunctor;
    }
  };
  var lit = function(input3) {
    return function(route) {
      if (route instanceof Cons && (route.value0 instanceof Path && route.value0.value0 === input3)) {
        return pure10(new Tuple(route.value1, unit));
      }
      ;
      if (route instanceof Cons && route.value0 instanceof Path) {
        return invalid(free(new UnexpectedPath(input3)));
      }
      ;
      return invalid(free(ExpectedPathPart.value));
    };
  };
  var root = /* @__PURE__ */ lit("");
  var end = function(route) {
    if (route instanceof Nil) {
      return pure10(new Tuple(Nil.value, unit));
    }
    ;
    return invalid(free(ExpectedEnd.value));
  };

  // output/PSD3.RoutingDSL/index.js
  var applyFirst2 = /* @__PURE__ */ applyFirst(matchApply);
  var voidRight2 = /* @__PURE__ */ voidRight(matchFunctor);
  var map27 = /* @__PURE__ */ map(matchFunctor);
  var applySecond2 = /* @__PURE__ */ applySecond(matchApply);
  var alt7 = /* @__PURE__ */ alt(matchAlt);
  var wizard = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Wizard.value)(lit("wizard")))(end);
  })();
  var wealthHealth = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(WealthHealth.value)(lit("wealth-health")))(end);
  })();
  var understandingTypeSystem = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingTypeSystem.value)(lit("understanding")))(lit("type-system")))(end);
  })();
  var understandingSelectionM = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingSelectionM.value)(lit("understanding")))(lit("selectionm")))(end);
  })();
  var understandingPhilosophy = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingPhilosophy.value)(lit("understanding")))(lit("philosophy")))(end);
  })();
  var understandingPatterns = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingIndex.value)(lit("understanding")))(lit("patterns")))(end);
  })();
  var understandingIndex = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(UnderstandingIndex.value)(lit("understanding")))(end);
  })();
  var understandingGrammar = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingGrammar.value)(lit("understanding")))(lit("grammar")))(end);
  })();
  var understandingFinallyTagless = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingFinallyTagless.value)(lit("understanding")))(lit("finally-tagless")))(end);
  })();
  var understandingDatumPattern = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingDatumPattern.value)(lit("understanding")))(lit("datum-pattern")))(end);
  })();
  var understandingConcepts = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingIndex.value)(lit("understanding")))(lit("concepts")))(end);
  })();
  var understandingCapabilities = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingCapabilities.value)(lit("understanding")))(lit("capabilities")))(end);
  })();
  var simpleCharts2 = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(SimpleCharts2.value)(lit("simple-charts-2")))(end);
  })();
  var simpleCharts1 = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(SimpleCharts1.value)(lit("simple-charts-1")))(end);
  })();
  var routeToPath = function(v) {
    if (v instanceof Home) {
      return "/home";
    }
    ;
    if (v instanceof GettingStarted) {
      return "/getting-started";
    }
    ;
    if (v instanceof Wizard) {
      return "/wizard";
    }
    ;
    if (v instanceof HowtoIndex) {
      return "/howto";
    }
    ;
    if (v instanceof Reference) {
      return "/reference";
    }
    ;
    if (v instanceof ReferenceModule) {
      return "/reference/" + v.value0;
    }
    ;
    if (v instanceof About) {
      return "/understanding/philosophy";
    }
    ;
    if (v instanceof UnderstandingIndex) {
      return "/understanding";
    }
    ;
    if (v instanceof UnderstandingFinallyTagless) {
      return "/understanding/finally-tagless";
    }
    ;
    if (v instanceof UnderstandingSelectionM) {
      return "/understanding/selectionm";
    }
    ;
    if (v instanceof UnderstandingCapabilities) {
      return "/understanding/capabilities";
    }
    ;
    if (v instanceof UnderstandingTypeSystem) {
      return "/understanding/type-system";
    }
    ;
    if (v instanceof UnderstandingDatumPattern) {
      return "/understanding/datum-pattern";
    }
    ;
    if (v instanceof UnderstandingGrammar) {
      return "/understanding/grammar";
    }
    ;
    if (v instanceof UnderstandingPhilosophy) {
      return "/understanding/philosophy";
    }
    ;
    if (v instanceof UnderstandingConcepts) {
      return "/understanding";
    }
    ;
    if (v instanceof UnderstandingPatterns) {
      return "/understanding";
    }
    ;
    if (v instanceof SimpleCharts1) {
      return "/simple-charts-1";
    }
    ;
    if (v instanceof SimpleCharts2) {
      return "/simple-charts-2";
    }
    ;
    if (v instanceof DataFlowViz) {
      return "/data-flow";
    }
    ;
    if (v instanceof Movement) {
      return "/movement";
    }
    ;
    if (v instanceof Hierarchies) {
      return "/hierarchies";
    }
    ;
    if (v instanceof IsometricCurveExperiment) {
      return "/isometric-curve-experiment";
    }
    ;
    if (v instanceof Interpreters) {
      return "/interpreters";
    }
    ;
    if (v instanceof MermaidDiagrams) {
      return "/mermaid-diagrams";
    }
    ;
    if (v instanceof ForceNavigator) {
      return "/force-navigator";
    }
    ;
    if (v instanceof CodeExplorer) {
      return "/code-explorer";
    }
    ;
    if (v instanceof Explore) {
      return "/explore/" + v.value0;
    }
    ;
    if (v instanceof WealthHealth) {
      return "/wealth-health";
    }
    ;
    if (v instanceof CodeAtlas) {
      return "/code-atlas";
    }
    ;
    if (v instanceof FpFtw) {
      return "/fp-ftw";
    }
    ;
    if (v instanceof ExamplesGallery) {
      return "/examples";
    }
    ;
    if (v instanceof PSD3v2Examples) {
      return "/psd3v2";
    }
    ;
    if (v instanceof Example) {
      return "/example/" + v.value0;
    }
    ;
    if (v instanceof Acknowledgements) {
      return "/acknowledgements";
    }
    ;
    if (v instanceof NotFound) {
      return "/not-found";
    }
    ;
    throw new Error("Failed pattern match at PSD3.RoutingDSL (line 209, column 1 - line 209, column 31): " + [v.constructor.name]);
  };
  var rootRedirect = /* @__PURE__ */ (function() {
    return voidRight2(Home.value)(end);
  })();
  var referenceModule = /* @__PURE__ */ (function() {
    return applyFirst2(map27(ReferenceModule.create)(applySecond2(lit("reference"))(str)))(end);
  })();
  var reference = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Reference.value)(lit("reference")))(end);
  })();
  var psd3v2Examples = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(PSD3v2Examples.value)(lit("psd3v2")))(end);
  })();
  var notFound = /* @__PURE__ */ (function() {
    return pure(matchApplicative)(NotFound.value);
  })();
  var movement = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Movement.value)(lit("movement")))(end);
  })();
  var mermaidDiagrams = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(MermaidDiagrams.value)(lit("mermaid-diagrams")))(end);
  })();
  var isometricCurveExperiment = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(IsometricCurveExperiment.value)(lit("isometric-curve-experiment")))(end);
  })();
  var interpreters = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Interpreters.value)(lit("interpreters")))(end);
  })();
  var howtoIndex = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(HowtoIndex.value)(lit("howto")))(end);
  })();
  var home = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Home.value)(lit("home")))(end);
  })();
  var hierarchies = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Hierarchies.value)(lit("hierarchies")))(end);
  })();
  var gettingStarted = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(GettingStarted.value)(lit("getting-started")))(end);
  })();
  var fpFtw = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(FpFtw.value)(lit("fp-ftw")))(end);
  })();
  var forceNavigator = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(ForceNavigator.value)(lit("force-navigator")))(end);
  })();
  var explore = /* @__PURE__ */ (function() {
    return applyFirst2(map27(Explore.create)(applySecond2(lit("explore"))(str)))(end);
  })();
  var examplesGallery = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(ExamplesGallery.value)(lit("examples")))(end);
  })();
  var example = /* @__PURE__ */ (function() {
    return applyFirst2(map27(Example.create)(applySecond2(lit("example"))(str)))(end);
  })();
  var dataFlowViz = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(DataFlowViz.value)(lit("data-flow")))(end);
  })();
  var codeExplorer = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(CodeExplorer.value)(lit("code-explorer")))(end);
  })();
  var codeAtlas = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(CodeAtlas.value)(lit("code-atlas")))(end);
  })();
  var acknowledgements = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Acknowledgements.value)(lit("acknowledgements")))(end);
  })();
  var about = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(UnderstandingPhilosophy.value)(lit("about")))(end);
  })();
  var routes = /* @__PURE__ */ alt7(home)(/* @__PURE__ */ alt7(gettingStarted)(/* @__PURE__ */ alt7(wizard)(/* @__PURE__ */ alt7(howtoIndex)(/* @__PURE__ */ alt7(referenceModule)(/* @__PURE__ */ alt7(reference)(/* @__PURE__ */ alt7(understandingFinallyTagless)(/* @__PURE__ */ alt7(understandingSelectionM)(/* @__PURE__ */ alt7(understandingCapabilities)(/* @__PURE__ */ alt7(understandingTypeSystem)(/* @__PURE__ */ alt7(understandingDatumPattern)(/* @__PURE__ */ alt7(understandingGrammar)(/* @__PURE__ */ alt7(understandingPhilosophy)(/* @__PURE__ */ alt7(understandingIndex)(/* @__PURE__ */ alt7(understandingConcepts)(/* @__PURE__ */ alt7(understandingPatterns)(/* @__PURE__ */ alt7(about)(/* @__PURE__ */ alt7(simpleCharts1)(/* @__PURE__ */ alt7(simpleCharts2)(/* @__PURE__ */ alt7(dataFlowViz)(/* @__PURE__ */ alt7(movement)(/* @__PURE__ */ alt7(hierarchies)(/* @__PURE__ */ alt7(isometricCurveExperiment)(/* @__PURE__ */ alt7(interpreters)(/* @__PURE__ */ alt7(mermaidDiagrams)(/* @__PURE__ */ alt7(forceNavigator)(/* @__PURE__ */ alt7(codeExplorer)(/* @__PURE__ */ alt7(explore)(/* @__PURE__ */ alt7(wealthHealth)(/* @__PURE__ */ alt7(codeAtlas)(/* @__PURE__ */ alt7(fpFtw)(/* @__PURE__ */ alt7(examplesGallery)(/* @__PURE__ */ alt7(psd3v2Examples)(/* @__PURE__ */ alt7(example)(/* @__PURE__ */ alt7(acknowledgements)(/* @__PURE__ */ alt7(rootRedirect)(notFound))))))))))))))))))))))))))))))))))));
  var routing = /* @__PURE__ */ applySecond2(root)(routes);

  // output/PSD3.Shared.Footer/index.js
  var render = /* @__PURE__ */ (function() {
    return footer([classes(["site-footer"])])([hr([classes(["site-footer__rule"])]), div2([classes(["site-footer__content"])])([a([href4("#" + routeToPath(Acknowledgements.value)), classes(["site-footer__link"])])([text5("Acknowledgements")])])]);
  })();

  // output/PSD3.Acknowledgements/index.js
  var pure11 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize2 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var render2 = function(v) {
    return div2([classes(["acknowledgements-page"])])([div2([classes(["acknowledgements-content"])])([h1([classes(["acknowledgements-title"])])([text5("Acknowledgements")]), section([classes(["acknowledgements-section"])])([h2_([text5("D3.js and Data Visualization")]), p_([text5("This project would not exist without "), a([href4("https://d3js.org/")])([text5("D3.js")]), text5(", created by "), a([href4("https://bost.ocks.org/mike/")])([text5("Mike Bostock")]), text5(". D3 revolutionized web-based data visualization and established patterns that have become fundamental to the field. Many of the examples in PS<$>D3 are adapted from Mike's extensive collection of examples and tutorials.")]), p_([text5("Thanks so much to Mike for creating D3, for his clear documentation and examples, and for making the library open source. His work on Observable and continued contributions to visualization continue to inspire.")])]), section([classes(["acknowledgements-section"])])([h2_([text5("Observable Examples (ISC License)")]), p_([text5("Several chart examples in PS<$>D3 are based on visualizations from "), a([href4("https://observablehq.com/")])([text5("Observable")]), text5(", licensed under the ISC License. These include:")]), ul_([li_([a([href4("https://observablehq.com/@d3/grouped-bar-chart/2")])([text5("Grouped Bar Chart")]), text5(" (Copyright 2018\u20132020 Observable, Inc.)")]), li_([a([href4("https://observablehq.com/@d3/multi-line-chart/2")])([text5("Multi-Line Chart")]), text5(" (Copyright 2018\u20132023 Observable, Inc.)")]), li_([a([href4("https://observablehq.com/@d3/radial-stacked-bar-chart/2")])([text5("Radial Stacked Bar Chart")]), text5(" (Copyright 2019\u20132023 Observable, Inc., created by Mike Bostock)")])]), p_([text5("These examples have been reimplemented in PureScript to demonstrate the PS<$>D3 library's capabilities while faithfully reproducing the original visualizations' dimensions, scales, and styling.")])]), section([classes(["acknowledgements-section"])])([h2_([text5("Data Visualization Pioneers")]), p_([a([href4("https://www.edwardtufte.com/")])([text5("Edward Tufte")]), text5("'s work on information design and visual communication established many of the principles we follow today. His books remain essential reading for anyone interested in effective data presentation.")]), p_([a([href4("https://www.gapminder.org/about/hans-rosling/")])([text5("Hans Rosling")]), text5("'s passionate advocacy for data literacy and his innovative animated visualizations (particularly the Gapminder World visualization) showed how data can tell compelling stories. The Wealth & Health example in this project is inspired by his work.")])]), section([classes(["acknowledgements-section"])])([h2_([text5("PureScript and Functional Programming")]), p_([a([href4("http://functorial.com/")])([text5("Phil Freeman")]), text5(", for his presentation and example of finally tagless encodings in PureScript which provided the spark for this library's architecture.")]), p_([text5("Ian Ross, for his solution to the polymorphic attribute architecture with typeclasses, so neat.")]), p_([text5("The PureScript Core Team members, past, present and future and the wider PureScript community for building this incredibly nice language and ecosystem. I'd particularly like to single out Mike Solomon, Jordan Martinez, Thomas Honeyman, Fabrizio Ferrai who listened to me drone on about this on conference calls.")])]), section([classes(["acknowledgements-section"])])([h2_([text5("About This Project")]), p_([text5("PS<$>D3 is an experimental exploration of what data visualization APIs might look like in a strongly-typed functional programming language. It aims to preserve D3's flexibility while adding type safety and composability.")]), p_([text5("This project is open source and available on GitHub. Contributions, feedback, and suggestions are always welcome.")])])]), render]);
  };
  var handleAction = function(v) {
    return pure11(unit);
  };
  var component = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render2,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction,
        initialize: new Just(Initialize2.value)
      })
    });
  })();

  // output/CodeSnippets/index.js
  var snippet_simulationM2Class_content = "class (Monad m, SimulationM selection m) <= SimulationM2 selection m | m -> selection where\n  -- ** Dynamic Updates **\n\n  update :: forall a key. SimulationUpdate a key -> m { nodes :: Array (SimulationNode a), links :: Array D3Link_Swizzled }\n\n  -- ** Animation (Tick Functions) **\n\n  addTickFunction    :: forall d. Label -> Step selection d -> m Unit";
  var snippet_selectionMClass_content = "class (Monad m) <= SelectionM selection m where\n  appendTo        :: forall d. selection d -> Element -> Array (SelectionAttribute d) -> m (selection d)\n\n  selectUnder     :: forall d. selection d -> Selector (selection d) -> m (selection d)\n\n  attach          :: forall d. Selector (selection d) -> m (selection d)\n\n  filterSelection :: forall d. selection d -> Selector (selection d) -> m (selection d)\n\n  mergeSelections :: forall d. selection d -> selection d -> m (selection d)\n\n  setAttributes   :: forall d. selection d -> Array (SelectionAttribute d) -> m Unit\n\n  on              :: forall d. selection d -> Behavior (selection d) -> m Unit\n\n  openSelection   :: forall d. selection d -> Selector (selection d) -> m (selection d)\n\n  simpleJoin      :: forall d datum key. selection d -> Element -> (Array datum) -> (datum -> key) -> m (selection datum)\n\n  nestedJoin      :: forall d f datum. Foldable f =>\n                     selection d -> Element -> (Datum_ -> f datum) -> (Datum_ -> Index_) -> m (selection datum)\n\n  updateJoin      :: forall d datum key. selection d -> Element -> (Array datum) -> (datum -> key)\n    -> m { enter :: selection datum, exit :: selection d, update :: selection datum }";
  var snippet_parabolaUnsafe_content = "module D3.Viz.Parabola.Unsafe where\n\nimport PSD3.Internal.Types (Datum_)\nimport Unsafe.Coerce (unsafeCoerce)\n\n-- This is safe in the context of the SelectionM monad because D3's data join ensures Datum_ contains\n-- the same data type we originally passed to simpleJoin\ncoerceDatumToInt :: Datum_ -> Int\ncoerceDatumToInt = unsafeCoerce";
  var snippet_parabolaDraw_content = '    [ strokeColor \\(d :: Int) -> d3SchemePairedN_ ((toNumber d) / 100.0)\n    , strokeWidth 3.0\n    , fill "none"\n    , cx \\(_ :: Int) (i :: Index_) -> (index_ToNumber i) * 20.0\n    , cy \\(d :: Int) -> 100.0 - (toNumber d) / 5.0\n    , radius 10.0\n    ]\n  pure circles\n-- Snippet_End';
  var snippet_parabolaDatum_content = '\n-- Snippet_End\n\n-- Snippet_Start\n-- Name: ParabolaDraw\ndrawWithData :: forall m. SelectionM D3Selection_ m => Model -> Selector (D3Selection_ Int) -> m (D3Selection_ Int)\ndrawWithData circleData selector = do\n  root        <- attach selector\n  svg         <- appendTo root Svg [ viewBox (-10.0) (-100.0) 320.0 160.0, classed "d3svg gup" ]\n  circleGroup <- appendTo svg  Group []';
  var getSnippetInfo = function(name16) {
    if (name16 === "parabolaDatum") {
      return {
        name: "parabolaDatum",
        content: snippet_parabolaDatum_content,
        source: "src/website/viz/Parabola/Parabola.purs",
        lines: "15-27"
      };
    }
    ;
    if (name16 === "parabolaDraw") {
      return {
        name: "parabolaDraw",
        content: snippet_parabolaDraw_content,
        source: "src/website/viz/Parabola/Parabola.purs",
        lines: "32-44"
      };
    }
    ;
    if (name16 === "parabolaUnsafe") {
      return {
        name: "parabolaUnsafe",
        content: snippet_parabolaUnsafe_content,
        source: "src/website/viz/Parabola/Unsafe.purs",
        lines: "1-10"
      };
    }
    ;
    if (name16 === "selectionMClass") {
      return {
        name: "selectionMClass",
        content: snippet_selectionMClass_content,
        source: "src/lib/PSD3/Capabilities/Selection.purs",
        lines: "85-258"
      };
    }
    ;
    if (name16 === "simulationM2Class") {
      return {
        name: "simulationM2Class",
        content: snippet_simulationM2Class_content,
        source: "src/lib/PSD3/Capabilities/Simulation.purs",
        lines: "254-320"
      };
    }
    ;
    return {
      name: "not-found",
      content: "Snippet not found: " + name16,
      source: "",
      lines: ""
    };
  };

  // output/PSD3.Shared.Utilities/foreign.js
  function highlightAllLineNumbers_() {
    return () => {
      if (typeof Prism !== "undefined" && Prism.highlightAll) {
        setTimeout(() => {
          document.querySelectorAll(".line-numbers-rows").forEach((el) => el.remove());
          Prism.highlightAll();
          const lineNumberElements = document.querySelectorAll(".line-numbers-rows");
          console.log("Line numbers elements found:", lineNumberElements.length);
        }, 100);
      }
    };
  }

  // output/PSD3.Shared.Utilities/index.js
  var highlightAllLineNumbers = highlightAllLineNumbers_;

  // output/CodeSnippet/index.js
  var show4 = /* @__PURE__ */ show(showInt);
  var triggerPrismHighlighting = function(dictMonadEffect) {
    return liftEffect(dictMonadEffect)(highlightAllLineNumbers);
  };
  var getStartLine = function(lineRange) {
    var v = split("-")(lineRange);
    if (v.length === 2) {
      return fromMaybe(1)(fromString2(v[0]));
    }
    ;
    return 1;
  };
  var codeSnippet = function(snippetName) {
    return function(language2) {
      var info2 = getSnippetInfo(snippetName);
      var startLine = getStartLine(info2.lines);
      return div2([classes(["code-snippet-container"])])([div2([classes(["code-snippet-meta"])])([text5(info2.source + (" (lines " + (info2.lines + ")")))]), pre([classes(["language-" + language2, "line-numbers"]), attr2("data-start")(show4(startLine))])([code_([text5(info2.content)])])]);
    };
  };

  // output/Control.Monad.Except/index.js
  var unwrap5 = /* @__PURE__ */ unwrap();
  var runExcept = function($3) {
    return unwrap5(runExceptT($3));
  };

  // output/Foreign.Index/foreign.js
  function unsafeReadPropImpl(f, s, key, value18) {
    return value18 == null ? f : s(value18[key]);
  }

  // output/Foreign.Index/index.js
  var unsafeReadProp = function(dictMonad) {
    var fail3 = fail(dictMonad);
    var pure56 = pure(applicativeExceptT(dictMonad));
    return function(k) {
      return function(value18) {
        return unsafeReadPropImpl(fail3(new TypeMismatch("object", typeOf(value18))), pure56, k, value18);
      };
    };
  };
  var readProp = function(dictMonad) {
    return unsafeReadProp(dictMonad);
  };

  // output/Web.Event.Event/foreign.js
  function _currentTarget(e) {
    return e.currentTarget;
  }

  // output/Web.Event.Event/index.js
  var currentTarget = function($5) {
    return toMaybe(_currentTarget($5));
  };

  // output/Web.UIEvent.MouseEvent.EventTypes/index.js
  var click2 = "click";

  // output/Halogen.HTML.Events/index.js
  var map28 = /* @__PURE__ */ map(functorMaybe);
  var composeKleisli2 = /* @__PURE__ */ composeKleisli(bindMaybe);
  var composeKleisliFlipped3 = /* @__PURE__ */ composeKleisliFlipped(/* @__PURE__ */ bindExceptT(monadIdentity));
  var readProp2 = /* @__PURE__ */ readProp(monadIdentity);
  var readString2 = /* @__PURE__ */ readString(monadIdentity);
  var mouseHandler = unsafeCoerce2;
  var handler$prime = function(et) {
    return function(f) {
      return handler(et)(function(ev) {
        return map28(Action.create)(f(ev));
      });
    };
  };
  var handler2 = function(et) {
    return function(f) {
      return handler(et)(function(ev) {
        return new Just(new Action(f(ev)));
      });
    };
  };
  var onClick = /* @__PURE__ */ (function() {
    var $15 = handler2(click2);
    return function($16) {
      return $15(mouseHandler($16));
    };
  })();
  var addForeignPropHandler = function(key) {
    return function(prop7) {
      return function(reader) {
        return function(f) {
          var go2 = function(a2) {
            return composeKleisliFlipped3(reader)(readProp2(prop7))(unsafeToForeign(a2));
          };
          return handler$prime(key)(composeKleisli2(currentTarget)(function(e) {
            return either($$const(Nothing.value))(function($85) {
              return Just.create(f($85));
            })(runExcept(go2(e)));
          }));
        };
      };
    };
  };
  var onChecked = /* @__PURE__ */ addForeignPropHandler(change)("checked")(/* @__PURE__ */ readBoolean(monadIdentity));
  var onValueInput = /* @__PURE__ */ addForeignPropHandler(input)("value")(readString2);

  // output/PSD3.Shared.RHSNavigation/index.js
  var eq3 = /* @__PURE__ */ eq(eqRoute);
  var navLink = function(route) {
    return function(label5) {
      return function(currentRoute) {
        var $3 = eq3(route)(currentRoute);
        if ($3) {
          return span3([classes(["explanation-page__nav-link", "explanation-page__nav-link--active"])])([text5(label5)]);
        }
        ;
        return a([href4("#" + routeToPath(route)), classes(["explanation-page__nav-link"])])([text5(label5 + " \u2192")]);
      };
    };
  };
  var render3 = function(currentRoute) {
    return div2([classes(["explanation-page__nav-panel"])])([h3([classes(["explanation-page__nav-title"])])([text5("How-to Guides")]), nav([classes(["explanation-page__nav-links"])])([navLink(HowtoIndex.value)("\u2190 All Guides")(currentRoute), hr([classes(["explanation-page__nav-divider"])]), p([classes(["explanation-page__nav-section-title"])])([text5("Basic Visualizations")]), navLink(new Explore("TLCSimple"))("Three Little Circles")(currentRoute), navLink(new Explore("GUP"))("General Update Pattern")(currentRoute), navLink(new Explore("TLCParabola"))("Data-Driven Positioning")(currentRoute), navLink(new Explore("BarChartDraw"))("Build a Bar Chart")(currentRoute), navLink(new Explore("LineChartDraw"))("Build a Line Chart")(currentRoute), navLink(new Explore("ScatterPlotQuartet"))("Anscombe's Quartet")(currentRoute), hr([classes(["explanation-page__nav-divider"])]), a([href4("https://github.com/afcondon/purescript-d3-tagless"), target5("_blank"), rel4("noopener noreferrer"), classes(["explanation-page__nav-link", "explanation-page__nav-link--external"])])([text5("GitHub \u2197")])])]);
  };
  var component2 = /* @__PURE__ */ mkComponent({
    initialState: /* @__PURE__ */ identity(categoryFn),
    render: render3,
    "eval": /* @__PURE__ */ mkEval(defaultEval)
  });

  // output/PSD3.Understanding.TOC/foreign.js
  (function() {
    document.addEventListener("click", function(event) {
      const link4 = event.target.closest("a[data-anchor-link]");
      if (link4) {
        event.preventDefault();
        const anchorId = link4.getAttribute("data-anchor-link");
        const element3 = document.getElementById(anchorId);
        if (element3) {
          element3.scrollIntoView({
            behavior: "smooth",
            block: "start"
          });
        } else {
          console.warn(`Anchor element with id "${anchorId}" not found`);
        }
      }
    });
  })();

  // output/PSD3.Understanding.TOC/index.js
  var show5 = /* @__PURE__ */ show(showInt);
  var append13 = /* @__PURE__ */ append(semigroupArray);
  var type_19 = /* @__PURE__ */ type_17(isPropButtonType);
  var map29 = /* @__PURE__ */ map(functorArray);
  var AnchorLink = /* @__PURE__ */ (function() {
    function AnchorLink2(value0) {
      this.value0 = value0;
    }
    ;
    AnchorLink2.create = function(value0) {
      return new AnchorLink2(value0);
    };
    return AnchorLink2;
  })();
  var RouteLink = /* @__PURE__ */ (function() {
    function RouteLink2(value0) {
      this.value0 = value0;
    }
    ;
    RouteLink2.create = function(value0) {
      return new RouteLink2(value0);
    };
    return RouteLink2;
  })();
  var tocAnchor = function(anchor) {
    return function(label5) {
      return function(level) {
        return {
          target: new AnchorLink(anchor),
          label: label5,
          level
        };
      };
    };
  };
  var renderTOCItem = function(item) {
    var routeLinkClass = (function() {
      if (item.target instanceof RouteLink) {
        return ["toc-nav__item--route-link"];
      }
      ;
      return [];
    })();
    var levelClass = (function() {
      if (item.level === 0) {
        return [];
      }
      ;
      return ["toc-nav__item--level-" + show5(item.level + 1 | 0)];
    })();
    var classes2 = append13(["toc-nav__item"])(append13(levelClass)(routeLinkClass));
    if (item.target instanceof AnchorLink) {
      return a([href4("#" + item.target.value0), classes(classes2), attr2("data-anchor-link")(item.target.value0)])([text5(item.label)]);
    }
    ;
    if (item.target instanceof RouteLink) {
      return a([href4("#" + routeToPath(item.target.value0)), classes(classes2)])([text5(item.label)]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.TOC (line 78, column 5 - line 93, column 33): " + [item.target.constructor.name]);
  };
  var renderTOC = function(config) {
    return div2([classes(["toc-panel"])])([img([src9(fromMaybe("bookmark.jpeg")(config.image)), alt5(""), classes(["toc-panel__bookmark-pin"])]), div2([classes(["toc-panel__main"])])([div2([classes(["floating-panel__header"])])([h3([classes(["floating-panel__title"])])([text5(config.title)]), button([classes(["floating-panel__toggle"]), type_19(ButtonButton.value)])([text5("\u2212")])]), div2([classes(["floating-panel__content", "toc-panel__content"])])([nav([classes(["toc-nav"])])(map29(renderTOCItem)(config.items))])])]);
  };

  // output/PSD3.CodeExplorer.CodeExplorationPage/index.js
  var monadEffectHalogenM2 = /* @__PURE__ */ monadEffectHalogenM(monadEffectAff);
  var triggerPrismHighlighting2 = /* @__PURE__ */ triggerPrismHighlighting(monadEffectHalogenM2);
  var liftEffect7 = /* @__PURE__ */ liftEffect(monadEffectHalogenM2);
  var slot_2 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "rhsNav";
    }
  })(ordUnit);
  var Initialize3 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var GoBack = /* @__PURE__ */ (function() {
    function GoBack2() {
    }
    ;
    GoBack2.value = new GoBack2();
    return GoBack2;
  })();
  var handleAction2 = function(v) {
    if (v instanceof Initialize3) {
      return triggerPrismHighlighting2;
    }
    ;
    if (v instanceof GoBack) {
      return liftEffect7(function __do5() {
        var w = windowImpl();
        var h = history(w)();
        return back(h)();
      });
    }
    ;
    throw new Error("Failed pattern match at PSD3.CodeExplorer.CodeExplorationPage (line 52, column 16 - line 60, column 13): " + [v.constructor.name]);
  };
  var _rhsNav = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render4 = function(state3) {
    return div2([classes(["docs-page", "exploration-page"])])([renderTOC({
      title: "Breakdown",
      items: [tocAnchor("overview")("Overview")(0), tocAnchor("code")("The Code")(0), tocAnchor("line-by-line")("Line by Line")(0), tocAnchor("concepts")("Key Concepts")(0), tocAnchor("reference")("API Reference")(0), tocAnchor("related")("Related Examples")(0)],
      image: new Just("assets/bookmark-images/howto.jpeg")
    }), slot_2(_rhsNav)(unit)(component2)(new Explore(state3.snippetId)), section([classes(["tutorial-section", "tutorial-intro", "exploration-intro"]), id2("overview")])([h1([classes(["tutorial-title", "exploration-title"])])([text5("Exploring: " + state3.snippetId)]), p_([text5("Welcome to the code exploration zone. Here we'll disassemble every aspect of this code snippet, explain the concepts behind it, and connect you to the library reference documentation.")]), p_([text5("This is your deep dive into PureScript D3 programming - understanding not just what the code does, but why it's written this way, what each function means, and where to learn more.")]), p_([text5("When you've finished exploring this code, "), a([classes(["exploration-back-link"]), onClick(function(v) {
      return GoBack.value;
    })])([text5("this link")]), text5(" will take you back to the example you came from.")])]), section([classes(["tutorial-section"]), id2("code")])([h2([classes(["tutorial-section-title"])])([text5("The Code")]), p_([text5("Here's the complete code for this example:")]), codeSnippet(state3.snippetId)("haskell")]), section([classes(["tutorial-section"]), id2("line-by-line")])([h2([classes(["tutorial-section-title"])])([text5("Line by Line Breakdown")]), p_([text5("Coming soon: A detailed walkthrough of each line, with clickable function names linking to their API documentation.")]), div2([classes(["placeholder-content"])])([p_([text5("This section will provide:")]), ul_([li_([text5("Annotated code with inline explanations")]), li_([text5("Clickable function names \u2192 API reference")]), li_([text5("Type signatures for each function used")]), li_([text5("Data flow visualization")]), li_([text5("Common patterns and idioms explained")])]), p_([text5("Example structure:")]), pre([classes(["code-example-annotated"])])([code_([text5('-- Line 1: Attach to a DOM element\nroot <- attach "div.scatterplot-viz"\n        ^^^^^^\n        [attach] :: Selector s -> m s\n        Click to see full documentation \u2192\n\n-- Line 2: Create SVG with attributes\nsvg <- appendTo root Svg [...]\n       ^^^^^^^^\n       [appendTo] :: s -> Element -> Array Attr -> m s\n       Click to see full documentation \u2192')])])])]), section([classes(["tutorial-section"]), id2("concepts")])([h2([classes(["tutorial-section-title"])])([text5("Key Concepts")]), p_([text5("Coming soon: An explanation of the key programming concepts and D3 patterns used in this example.")]), div2([classes(["placeholder-content"])])([p_([text5("This section will explain:")]), ul_([li_([text5("Finally Tagless pattern - why and how")]), li_([text5("D3 selection concepts - the mental model")]), li_([text5("Data binding and joins - enter/update/exit")]), li_([text5("SVG element creation - coordinate systems")]), li_([text5("Monadic composition - chaining operations")])])])]), section([classes(["tutorial-section"]), id2("reference")])([h2([classes(["tutorial-section-title"])])([text5("API Reference")]), p_([text5("Gateway to the library reference documentation. Each function used in this example links to its full documentation.")]), div2([classes(["placeholder-content"])])([p_([text5("Functions used in this example:")]), div2([classes(["api-reference-list"])])([div2([classes(["api-reference-item"])])([h4_([text5("attach")]), pre_([code_([text5("attach :: forall s m. SelectionM s m => Selector s -> m s")])]), p_([text5("Attaches to an existing DOM element using a CSS selector. This is typically the first operation in any D3 visualization.")]), a([href4("#/reference/attach"), classes(["api-reference-link"])])([text5("\u2192 Full documentation")])]), div2([classes(["api-reference-item"])])([h4_([text5("appendTo")]), pre_([code_([text5("appendTo :: forall s m. SelectionM s m => s -> Element -> Array (Attr s) -> m s")])]), p_([text5("Appends a new element to an existing selection with specified attributes. Returns a selection containing the new element.")]), a([href4("#/reference/appendTo"), classes(["api-reference-link"])])([text5("\u2192 Full documentation")])]), p([classes(["api-reference-note"])])([text5("More functions will be documented here as the reference material is built out...")])])])]), section([classes(["tutorial-section"]), id2("related")])([h2([classes(["tutorial-section-title"])])([text5("Related Examples")]), p_([text5("Coming soon: Links to related examples and next steps in your learning journey.")]), div2([classes(["placeholder-content"])])([p_([text5("Explore similar examples:")]), ul_([li_([text5("Simple variations of this pattern")]), li_([text5("More complex examples building on these concepts")]), li_([text5("Alternative approaches to the same visualization")])])])])]);
  };
  var component3 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(snippetId) {
        return {
          snippetId
        };
      },
      render: render4,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction2,
        initialize: new Just(Initialize3.value)
      })
    });
  })();

  // output/D3.Viz.Spago.Files/foreign.js
  function readSpago_Raw_JSON_(modulesBody) {
    return (packagesBody) => (lsdepsBody) => (locBody) => {
      const modules = decodeModulesFile(modulesBody);
      const packages = decodePackagesFile(packagesBody);
      const lsDeps = decodeLsDepsFile(lsdepsBody);
      const loc = decodeLOCFile(locBody);
      const pathToLOC = buildPathLookup(loc);
      const modulesWithLOC = modules.map((module2) => ({
        ...module2,
        loc: lookupLOC(module2.path, pathToLOC, loc)
      }));
      return { modules: modulesWithLOC, packages, lsDeps, loc };
    };
  }
  function buildPathLookup(locArray) {
    const lookup19 = {};
    for (const entry of locArray) {
      lookup19[entry.path] = entry.loc;
      const parts = entry.path.split("/");
      if (parts[0] === ".spago" && parts.length >= 4) {
        const pkg = parts[1];
        const relPath = parts.slice(3).join("/");
        lookup19[`${pkg}::${relPath}`] = entry.loc;
      }
    }
    return lookup19;
  }
  function lookupLOC(modulePath, pathToLOC, locArray) {
    if (pathToLOC[modulePath]) {
      return pathToLOC[modulePath];
    }
    const parts = modulePath.split("/");
    if (parts[0] === ".spago" && parts.length >= 4) {
      let pkg, relPath;
      if (parts[1] === "p" && parts.length >= 5) {
        pkg = parts[2];
        relPath = parts.slice(4).join("/");
      } else {
        pkg = parts[1];
        relPath = parts.slice(3).join("/");
      }
      const fuzzyKey = `${pkg}::${relPath}`;
      if (pathToLOC[fuzzyKey]) {
        return pathToLOC[fuzzyKey];
      }
    }
    return 10;
  }
  var decodeModulesFile = function(filecontents) {
    const json2 = JSON.parse(filecontents);
    const modules = Object.keys(json2).map((key) => {
      return { key, depends: json2[key].depends, path: json2[key].path };
    });
    return modules;
  };
  var decodePackagesFile = function(filecontents) {
    const json2 = JSON.parse(filecontents);
    const packages = Object.keys(json2).map((key) => {
      return { key, depends: json2[key].depends };
    });
    return packages;
  };
  var decodeLOCFile = function(filecontents) {
    const json2 = JSON.parse(filecontents);
    return json2.loc;
  };
  var decodeLsDepsFile = function(filecontents) {
    const jsonlines = splitIntoLines(filecontents);
    jsonlines.length = jsonlines.length - 1;
    var objectArray = jsonlines.map((d23) => JSON.parse(d23));
    return objectArray;
  };
  function splitIntoLines(str2) {
    return str2.split(/\r\n|[\n\v\f\r\u0085\u2028\u2029]/);
  }

  // output/Data.Graph/index.js
  var map30 = /* @__PURE__ */ map(functorList);
  var mempty2 = /* @__PURE__ */ mempty(monoidList);
  var append6 = /* @__PURE__ */ append(semigroupCatList);
  var fromFoldable5 = /* @__PURE__ */ fromFoldable4(foldableList);
  var fromFoldable1 = /* @__PURE__ */ fromFoldable4(foldableArray);
  var Emit = /* @__PURE__ */ (function() {
    function Emit2(value0) {
      this.value0 = value0;
    }
    ;
    Emit2.create = function(value0) {
      return new Emit2(value0);
    };
    return Emit2;
  })();
  var Visit = /* @__PURE__ */ (function() {
    function Visit2(value0) {
      this.value0 = value0;
    }
    ;
    Visit2.create = function(value0) {
      return new Visit2(value0);
    };
    return Visit2;
  })();
  var Graph = function(x46) {
    return x46;
  };
  var topologicalSort = function(dictOrd) {
    var member10 = member(dictOrd);
    var $$delete11 = $$delete(dictOrd);
    var lookup19 = lookup(dictOrd);
    return function(v) {
      var visit = function($copy_state) {
        return function($copy_stack) {
          var $tco_var_state = $copy_state;
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(state3, stack) {
            var v1 = uncons4(stack);
            if (v1 instanceof Nothing) {
              $tco_done = true;
              return state3;
            }
            ;
            if (v1 instanceof Just && v1.value0.value0 instanceof Emit) {
              var state$prime = {
                result: new Cons(v1.value0.value0.value0, state3.result),
                unvisited: state3.unvisited
              };
              $tco_var_state = state$prime;
              $copy_stack = v1.value0.value1;
              return;
            }
            ;
            if (v1 instanceof Just && v1.value0.value0 instanceof Visit) {
              if (member10(v1.value0.value0.value0)(state3.unvisited)) {
                var start7 = {
                  result: state3.result,
                  unvisited: $$delete11(v1.value0.value0.value0)(state3.unvisited)
                };
                var next2 = maybe(mempty2)(snd)(lookup19(v1.value0.value0.value0)(v));
                $tco_var_state = start7;
                $copy_stack = append6(fromFoldable5(map30(Visit.create)(next2)))(cons3(new Emit(v1.value0.value0.value0))(v1.value0.value1));
                return;
              }
              ;
              if (otherwise) {
                $tco_var_state = state3;
                $copy_stack = v1.value0.value1;
                return;
              }
              ;
            }
            ;
            throw new Error("Failed pattern match at Data.Graph (line 126, column 7 - line 144, column 40): " + [v1.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($tco_var_state, $copy_stack);
          }
          ;
          return $tco_result;
        };
      };
      var initialState7 = {
        unvisited: v,
        result: Nil.value
      };
      var go2 = function($copy_v1) {
        var $tco_done1 = false;
        var $tco_result;
        function $tco_loop(v1) {
          var v2 = findMin(v1.unvisited);
          if (v2 instanceof Just) {
            $copy_v1 = visit(v1)(fromFoldable1([new Visit(v2.value0.key)]));
            return;
          }
          ;
          if (v2 instanceof Nothing) {
            $tco_done1 = true;
            return v1.result;
          }
          ;
          throw new Error("Failed pattern match at Data.Graph (line 120, column 7 - line 122, column 26): " + [v2.constructor.name]);
        }
        ;
        while (!$tco_done1) {
          $tco_result = $tco_loop($copy_v1);
        }
        ;
        return $tco_result;
      };
      return go2(initialState7);
    };
  };
  var fromMap = Graph;

  // output/Data.Set/index.js
  var coerce4 = /* @__PURE__ */ coerce();
  var foldMap2 = /* @__PURE__ */ foldMap(foldableList);
  var foldl6 = /* @__PURE__ */ foldl(foldableList);
  var foldr5 = /* @__PURE__ */ foldr(foldableList);
  var $$Set = function(x46) {
    return x46;
  };
  var union3 = function(dictOrd) {
    return coerce4(union(dictOrd));
  };
  var toList2 = function(v) {
    return keys(v);
  };
  var toUnfoldable4 = function(dictUnfoldable) {
    var $96 = toUnfoldable2(dictUnfoldable);
    return function($97) {
      return $96(toList2($97));
    };
  };
  var size5 = /* @__PURE__ */ coerce4(size3);
  var singleton9 = function(a2) {
    return singleton3(a2)(unit);
  };
  var semigroupSet = function(dictOrd) {
    return {
      append: union3(dictOrd)
    };
  };
  var member2 = function(dictOrd) {
    return coerce4(member(dictOrd));
  };
  var isEmpty2 = /* @__PURE__ */ coerce4(isEmpty);
  var intersection2 = function(dictOrd) {
    return coerce4(intersection(dictOrd));
  };
  var insert5 = function(dictOrd) {
    var insert110 = insert(dictOrd);
    return function(a2) {
      return function(v) {
        return insert110(a2)(unit)(v);
      };
    };
  };
  var fromMap2 = $$Set;
  var foldableSet = {
    foldMap: function(dictMonoid) {
      var foldMap12 = foldMap2(dictMonoid);
      return function(f) {
        var $98 = foldMap12(f);
        return function($99) {
          return $98(toList2($99));
        };
      };
    },
    foldl: function(f) {
      return function(x46) {
        var $100 = foldl6(f)(x46);
        return function($101) {
          return $100(toList2($101));
        };
      };
    },
    foldr: function(f) {
      return function(x46) {
        var $102 = foldr5(f)(x46);
        return function($103) {
          return $102(toList2($103));
        };
      };
    }
  };
  var empty7 = empty2;
  var fromFoldable6 = function(dictFoldable) {
    var foldl23 = foldl(dictFoldable);
    return function(dictOrd) {
      var insert110 = insert5(dictOrd);
      return foldl23(function(m) {
        return function(a2) {
          return insert110(a2)(m);
        };
      })(empty7);
    };
  };
  var difference2 = function(dictOrd) {
    return coerce4(difference(dictOrd));
  };
  var $$delete3 = function(dictOrd) {
    return coerce4($$delete(dictOrd));
  };

  // output/PSD3.Data.Graph/index.js
  var map31 = /* @__PURE__ */ map(functorArray);
  var lookup6 = /* @__PURE__ */ lookup(ordInt);
  var fromFoldable7 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var fromFoldable12 = /* @__PURE__ */ fromFoldable(ordInt)(foldableArray);
  var append7 = /* @__PURE__ */ append(semigroupArray);
  var fromFoldable22 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordInt);
  var alter3 = /* @__PURE__ */ alter(ordInt);
  var getLinksTo = function(nodeId) {
    return function(model) {
      var v = lookup6(nodeId)(model.maps.linksByTarget);
      if (v instanceof Nothing) {
        return [];
      }
      ;
      if (v instanceof Just) {
        return v.value0;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Data.Graph (line 206, column 3 - line 208, column 24): " + [v.constructor.name]);
    };
  };
  var getLinksFrom = function(nodeId) {
    return function(model) {
      var v = lookup6(nodeId)(model.maps.linksBySource);
      if (v instanceof Nothing) {
        return [];
      }
      ;
      if (v instanceof Just) {
        return v.value0;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Data.Graph (line 196, column 3 - line 198, column 24): " + [v.constructor.name]);
    };
  };
  var toDataGraph = function(config) {
    return function(model) {
      var buildEntry = function(node) {
        var nodeId = config.getNodeId(node);
        var links = getLinksFrom(nodeId)(model);
        var targets = fromFoldable7(map31(config.getLinkTarget)(links));
        return new Tuple(nodeId, new Tuple(node, targets));
      };
      var entries = map31(buildEntry)(model.nodes);
      var graphMap = fromFoldable12(entries);
      return fromMap(graphMap);
    };
  };
  var buildGraphModel = function(config) {
    return function(nodes) {
      return function(links) {
        var addToArray = function(v) {
          return function(v1) {
            if (v1 instanceof Nothing) {
              return new Just([v]);
            }
            ;
            if (v1 instanceof Just) {
              return new Just(append7(v1.value0)([v]));
            }
            ;
            throw new Error("Failed pattern match at PSD3.Data.Graph (line 112, column 5 - line 112, column 68): " + [v.constructor.name, v1.constructor.name]);
          };
        };
        var nodeIds = fromFoldable22(map31(config.getNodeId)(nodes));
        var nodeById = fromFoldable12(map31(function(n) {
          return new Tuple(config.getNodeId(n), n);
        })(nodes));
        var linksByTarget = foldl3(function(acc) {
          return function(link4) {
            var targetId = config.getLinkTarget(link4);
            return alter3(addToArray(link4))(targetId)(acc);
          };
        })(empty2)(links);
        var linksBySource = foldl3(function(acc) {
          return function(link4) {
            var sourceId = config.getLinkSource(link4);
            return alter3(addToArray(link4))(sourceId)(acc);
          };
        })(empty2)(links);
        var maps = {
          nodeById,
          linksBySource,
          linksByTarget,
          nodeIds
        };
        return {
          nodes,
          links,
          maps
        };
      };
    };
  };

  // output/Data.Array.NonEmpty.Internal/index.js
  var functorNonEmptyArray = functorArray;

  // output/Data.Array.NonEmpty/index.js
  var fromJust5 = /* @__PURE__ */ fromJust();
  var toArray = function(v) {
    return v;
  };
  var adaptMaybe = function(f) {
    return function($126) {
      return fromJust5(f(toArray($126)));
    };
  };
  var head4 = /* @__PURE__ */ adaptMaybe(head);
  var adaptAny = function(f) {
    return function($128) {
      return f(toArray($128));
    };
  };
  var length8 = /* @__PURE__ */ adaptAny(length3);

  // output/Utility/index.js
  var map32 = /* @__PURE__ */ map(functorNonEmptyArray);
  var getWindowWidthHeight = function __do2() {
    var win = windowImpl();
    var w = innerWidth(win)();
    var h = innerHeight(win)();
    return new Tuple(toNumber(w), toNumber(h));
  };
  var equalSnd = function(dictEq) {
    var eq25 = eq(dictEq);
    return function(a2) {
      return function(b2) {
        return eq25(snd(a2))(snd(b2));
      };
    };
  };
  var compareSnd = function(dictOrd) {
    var compare20 = compare(dictOrd);
    return function(a2) {
      return function(b2) {
        return compare20(snd(a2))(snd(b2));
      };
    };
  };
  var chunk = function(tuples) {
    var $$package = snd(head4(tuples));
    var contains3 = toArray(map32(fst)(tuples));
    return new Tuple($$package, contains3);
  };

  // output/D3.Viz.Spago.Files/index.js
  var append8 = /* @__PURE__ */ append(semigroupArray);
  var map33 = /* @__PURE__ */ map(functorArray);
  var fromFoldableWith2 = /* @__PURE__ */ fromFoldableWith(ordString)(foldableArray);
  var lookup7 = /* @__PURE__ */ lookup(ordString);
  var fromFoldable8 = /* @__PURE__ */ fromFoldable(ordString)(foldableArray);
  var mapFlipped2 = /* @__PURE__ */ mapFlipped(functorArray);
  var bind7 = /* @__PURE__ */ bind(bindMaybe);
  var sum2 = /* @__PURE__ */ sum(foldableArray)(semiringNumber);
  var equalSnd2 = /* @__PURE__ */ equalSnd(eqString);
  var compareSnd2 = /* @__PURE__ */ compareSnd(ordString);
  var fromFoldable13 = /* @__PURE__ */ fromFoldable(ordInt)(foldableArray);
  var PackageInfo = /* @__PURE__ */ (function() {
    function PackageInfo2(value0) {
      this.value0 = value0;
    }
    ;
    PackageInfo2.create = function(value0) {
      return new PackageInfo2(value0);
    };
    return PackageInfo2;
  })();
  var IsModule = /* @__PURE__ */ (function() {
    function IsModule2(value0) {
      this.value0 = value0;
    }
    ;
    IsModule2.create = function(value0) {
      return new IsModule2(value0);
    };
    return IsModule2;
  })();
  var IsPackage = /* @__PURE__ */ (function() {
    function IsPackage2(value0) {
      this.value0 = value0;
    }
    ;
    IsPackage2.create = function(value0) {
      return new IsPackage2(value0);
    };
    return IsPackage2;
  })();
  var M2M_Tree = /* @__PURE__ */ (function() {
    function M2M_Tree2() {
    }
    ;
    M2M_Tree2.value = new M2M_Tree2();
    return M2M_Tree2;
  })();
  var M2M_Graph = /* @__PURE__ */ (function() {
    function M2M_Graph2() {
    }
    ;
    M2M_Graph2.value = new M2M_Graph2();
    return M2M_Graph2;
  })();
  var P2P = /* @__PURE__ */ (function() {
    function P2P2() {
    }
    ;
    P2P2.value = new P2P2();
    return P2P2;
  })();
  var M2P = /* @__PURE__ */ (function() {
    function M2P2() {
    }
    ;
    M2P2.value = new M2P2();
    return M2P2;
  })();
  var eqLinkType = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof M2M_Tree && y46 instanceof M2M_Tree) {
          return true;
        }
        ;
        if (x46 instanceof M2M_Graph && y46 instanceof M2M_Graph) {
          return true;
        }
        ;
        if (x46 instanceof P2P && y46 instanceof P2P) {
          return true;
        }
        ;
        if (x46 instanceof M2P && y46 instanceof M2P) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq13 = /* @__PURE__ */ eq(eqLinkType);
  var unpackLink$prime = unsafeCoerce2;
  var showNodeType = {
    show: function(v) {
      if (v instanceof IsModule) {
        return "module";
      }
      ;
      if (v instanceof IsPackage) {
        return "package";
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Spago.Files (line 315, column 1 - line 317, column 47): " + [v.constructor.name]);
    }
  };
  var showLinkType = {
    show: function(v) {
      if (v instanceof M2M_Tree) {
        return "M2M-Tree";
      }
      ;
      if (v instanceof M2M_Graph) {
        return "M2M-Graph";
      }
      ;
      if (v instanceof P2P) {
        return "P2P";
      }
      ;
      if (v instanceof M2P) {
        return "module to package dependency";
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Spago.Files (line 318, column 1 - line 322, column 44): " + [v.constructor.name]);
    }
  };
  var isP2P_Link = function(link4) {
    return eq13(unpackLink$prime(link4).linktype)(P2P.value);
  };
  var isM2P_Link = function(link4) {
    return eq13(unpackLink$prime(link4).linktype)(M2P.value);
  };
  var isM2M_Tree_Link = function(link4) {
    return eq13(unpackLink$prime(link4).linktype)(M2M_Tree.value);
  };
  var isM2M_Graph_Link = function(link4) {
    return eq13(unpackLink$prime(link4).linktype)(M2M_Graph.value);
  };
  var getGraphJSONData = function(v) {
    var names = append8(map33(function(v1) {
      return v1.key;
    })(v.modules))(map33(function(v1) {
      return v1.key;
    })(v.packages));
    var makeModuleToPackageLink = function(m) {
      return {
        source: m.id,
        target: m.containerID,
        linktype: M2P.value,
        inSim: true
      };
    };
    var makeLink = function(linktype) {
      return function(v1) {
        return {
          source: v1.value0,
          target: v1.value1,
          linktype,
          inSim: true
        };
      };
    };
    var linkGraphConfig = {
      getNodeId: function(v1) {
        return v1.id;
      },
      getLinkSource: function(link4) {
        return link4.source;
      },
      getLinkTarget: function(link4) {
        return link4.target;
      }
    };
    var ids = range2(0)(length3(names) - 1 | 0);
    var name2ID = fromFoldableWith2(function(v1) {
      return function(v2) {
        return v1;
      };
    })(zip(names)(ids));
    var getId = function(s) {
      return fromMaybe(0)(lookup7(s)(name2ID));
    };
    var makeNodeFromModuleJSONPL = function(m) {
      var id5 = getId(m.key);
      return {
        id: id5,
        name: m.key,
        containerID: getId(m["package"]),
        containerName: m["package"],
        loc: m.loc,
        nodetype: new IsModule(m.path),
        inSim: true,
        links: {
          targets: map33(getId)(m.depends),
          sources: [],
          treeChildren: [],
          inPackage: [],
          outPackage: [],
          contains: []
        },
        connected: false,
        showChildren: false,
        containsMany: false,
        treeXY: nullImpl,
        treeDepth: nullImpl,
        gridXY: nullImpl
      };
    };
    var foldDepends = function(b2) {
      return function(a2) {
        var id5 = getId(a2.key);
        var makeTuple = function(s) {
          return new Tuple(id5, getId(s));
        };
        return append8(map33(makeTuple)(a2.depends))(b2);
      };
    };
    var moduleLinks = map33(makeLink(M2M_Graph.value))(foldl3(foldDepends)([])(v.modules));
    var packageLinks = map33(makeLink(P2P.value))(foldl3(foldDepends)([])(v.packages));
    var depsMap = fromFoldable8(mapFlipped2(v.lsDeps)(function(d23) {
      return new Tuple(d23.packageName, {
        version: d23.version,
        repo: d23.repo.contents
      });
    }));
    var makeNodeFromPackageJSONCL = function(p2) {
      var repo = fromMaybe({
        version: "not found",
        repo: "not found"
      })(lookup7(p2.key)(depsMap));
      var id5 = getId(p2.key);
      return {
        id: id5,
        name: p2.key,
        inSim: true,
        nodetype: new IsPackage(new PackageInfo(repo)),
        containerID: id5,
        containerName: p2.key,
        loc: p2.loc,
        links: {
          targets: map33(getId)(p2.depends),
          sources: [],
          treeChildren: [],
          inPackage: [],
          outPackage: [],
          contains: map33(getId)(p2.contains)
        },
        connected: true,
        showChildren: true,
        containsMany: length3(p2.contains) > 1,
        treeXY: nullImpl,
        treeDepth: nullImpl,
        gridXY: nullImpl
      };
    };
    var addPackageInfo = function(v1) {
      var packageName = (function() {
        var pieces = split("/")(v1.path);
        return bind7(index2(pieces)(0))(function(root3) {
          return bind7(index2(pieces)(1))(function(packageString) {
            if (root3 === ".spago") {
              var $52 = packageString === "p";
              if ($52) {
                return index2(pieces)(2);
              }
              ;
              return new Just(packageString);
            }
            ;
            if (root3 === "src") {
              return new Just("my-project");
            }
            ;
            return Nothing.value;
          });
        });
      })();
      var $$package = fromMaybe("")(packageName);
      return {
        key: v1.key,
        depends: v1.depends,
        path: v1.path,
        loc: v1.loc,
        "package": $$package
      };
    };
    var modulesPL = map33(addPackageInfo)(v.modules);
    var mapNamesToModules = fromFoldable8(map33(function(m) {
      return new Tuple(m.key, m);
    })(modulesPL));
    var maybeModules = function(ms) {
      return catMaybes(map33(function(k) {
        return lookup7(k)(mapNamesToModules);
      })(ms));
    };
    var rollUpLOC = function(ms) {
      return sum2(map33(function(v1) {
        return v1.loc;
      })(maybeModules(ms)));
    };
    var moduleNodes = map33(makeNodeFromModuleJSONPL)(modulesPL);
    var modulePackageLinks = map33(makeModuleToPackageLink)(moduleNodes);
    var links = append8(moduleLinks)(append8(packageLinks)(modulePackageLinks));
    var modulePackageTuples = map33(function(m) {
      return new Tuple(m.key, m["package"]);
    })(modulesPL);
    var packageContains = map33(chunk)(groupBy(equalSnd2)(sortBy(compareSnd2)(modulePackageTuples)));
    var packageContainsMap = fromFoldable8(packageContains);
    var packageLOC = map33(function(v1) {
      return new Tuple(v1.value0, rollUpLOC(v1.value1));
    })(packageContains);
    var packageLOCMap = fromFoldable8(packageLOC);
    var addRollUpLOC = function(v1) {
      return {
        key: v1.key,
        depends: v1.depends,
        contains: v1.contains,
        loc: fromMaybe(0)(lookup7(v1.key)(packageLOCMap))
      };
    };
    var addContains = function(v1) {
      return {
        key: v1.key,
        depends: v1.depends,
        contains: fromMaybe([])(lookup7(v1.key)(packageContainsMap))
      };
    };
    var packagesCL = map33(function($73) {
      return addRollUpLOC(addContains($73));
    })(v.packages);
    var packageNodes = map33(makeNodeFromPackageJSONCL)(packagesCL);
    var nodes = append8(moduleNodes)(packageNodes);
    var linkGraph = buildGraphModel(linkGraphConfig)(nodes)(links);
    var getSourceLinks = function(v1) {
      var incomingLinks = getLinksTo(v1.id)(linkGraph);
      var sources = map33(function($74) {
        return $74.source;
      })(incomingLinks);
      return new Tuple(v1.id, sources);
    };
    var sourceLinksMap = fromFoldable13(map33(getSourceLinks)(nodes));
    return {
      links,
      nodes,
      moduleNodes,
      packageNodes,
      moduleLinks,
      packageLinks,
      modulePackageLinks,
      sourceLinksMap,
      name2ID,
      id2Name: empty2,
      id2Package: empty2,
      id2LOC: empty2
    };
  };

  // output/PSD3.Internal.Attributes.Instances/index.js
  var Static = /* @__PURE__ */ (function() {
    function Static2(value0) {
      this.value0 = value0;
    }
    ;
    Static2.create = function(value0) {
      return new Static2(value0);
    };
    return Static2;
  })();
  var Fn = /* @__PURE__ */ (function() {
    function Fn2(value0) {
      this.value0 = value0;
    }
    ;
    Fn2.create = function(value0) {
      return new Fn2(value0);
    };
    return Fn2;
  })();
  var FnI = /* @__PURE__ */ (function() {
    function FnI2(value0) {
      this.value0 = value0;
    }
    ;
    FnI2.create = function(value0) {
      return new FnI2(value0);
    };
    return FnI2;
  })();
  var StringAttr = /* @__PURE__ */ (function() {
    function StringAttr2(value0) {
      this.value0 = value0;
    }
    ;
    StringAttr2.create = function(value0) {
      return new StringAttr2(value0);
    };
    return StringAttr2;
  })();
  var NumberAttr = /* @__PURE__ */ (function() {
    function NumberAttr2(value0) {
      this.value0 = value0;
    }
    ;
    NumberAttr2.create = function(value0) {
      return new NumberAttr2(value0);
    };
    return NumberAttr2;
  })();
  var ArrayAttr = /* @__PURE__ */ (function() {
    function ArrayAttr2(value0) {
      this.value0 = value0;
    }
    ;
    ArrayAttr2.create = function(value0) {
      return new ArrayAttr2(value0);
    };
    return ArrayAttr2;
  })();
  var AttributeSetter = /* @__PURE__ */ (function() {
    function AttributeSetter2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    AttributeSetter2.create = function(value0) {
      return function(value1) {
        return new AttributeSetter2(value0, value1);
      };
    };
    return AttributeSetter2;
  })();
  var unwrapDatumFn = function(v) {
    return v;
  };
  var unboxAttr = function(v) {
    if (v instanceof StringAttr && v.value0 instanceof Static) {
      return v.value0.value0;
    }
    ;
    if (v instanceof StringAttr && v.value0 instanceof Fn) {
      return v.value0.value0;
    }
    ;
    if (v instanceof StringAttr && v.value0 instanceof FnI) {
      return mkFn2(v.value0.value0);
    }
    ;
    if (v instanceof NumberAttr && v.value0 instanceof Static) {
      return v.value0.value0;
    }
    ;
    if (v instanceof NumberAttr && v.value0 instanceof Fn) {
      return v.value0.value0;
    }
    ;
    if (v instanceof NumberAttr && v.value0 instanceof FnI) {
      return mkFn2(v.value0.value0);
    }
    ;
    if (v instanceof ArrayAttr && v.value0 instanceof Static) {
      return v.value0.value0;
    }
    ;
    if (v instanceof ArrayAttr && v.value0 instanceof Fn) {
      return v.value0.value0;
    }
    ;
    if (v instanceof ArrayAttr && v.value0 instanceof FnI) {
      return mkFn2(v.value0.value0);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Internal.Attributes.Instances (line 68, column 3 - line 79, column 54): " + [v.constructor.name]);
  };
  var toAttrStringFnI = {
    toAttr: function($49) {
      return StringAttr.create(FnI.create($49));
    }
  };
  var toAttrStringFn = {
    toAttr: function($50) {
      return StringAttr.create(Fn.create($50));
    }
  };
  var toAttrStringDatumFnI = {
    toAttr: function(v) {
      return new StringAttr(new FnI(v));
    }
  };
  var toAttrStringDatumFn = {
    toAttr: function(v) {
      return new StringAttr(new Fn(v));
    }
  };
  var toAttrString = {
    toAttr: function($51) {
      return StringAttr.create(Static.create($51));
    }
  };
  var toAttrNumberFnI = {
    toAttr: function($52) {
      return NumberAttr.create(FnI.create($52));
    }
  };
  var toAttrNumberFn = {
    toAttr: function($53) {
      return NumberAttr.create(Fn.create($53));
    }
  };
  var toAttrNumberDatumFnI = {
    toAttr: function(v) {
      return new NumberAttr(new FnI(v));
    }
  };
  var toAttrNumberDatumFn = {
    toAttr: function(v) {
      return new NumberAttr(new Fn(v));
    }
  };
  var toAttrNumber = {
    toAttr: function($54) {
      return NumberAttr.create(Static.create($54));
    }
  };
  var toAttr = function(dict) {
    return dict.toAttr;
  };

  // output/PSD3.Internal.FFI/foreign.js
  function d3Append_(element3) {
    return (selection2) => {
      return selection2.append(element3);
    };
  }
  function d3DataWithKeyFunction_(data) {
    return (keyFn) => (selection2) => {
      return selection2.data(data, keyFn);
    };
  }
  function d3DataWithFunction_(extractFn) {
    return (keyFn) => (selection2) => {
      return selection2.data(extractFn, keyFn);
    };
  }
  function d3EnterAndAppend_(element3) {
    return (selection2) => {
      return selection2.enter().append(element3);
    };
  }
  function d3GetExitSelection_(selection2) {
    return selection2.exit();
  }
  function d3GetEnterSelection_(selection2) {
    return selection2.enter();
  }
  function d3FilterSelection_(selection2) {
    return (selector) => selection2.filter(selector);
  }
  function d3LowerSelection_(selection2) {
    return selection2.lower();
  }
  function d3MergeSelectionWith_(enter) {
    return (update4) => {
      return enter.merge(update4);
    };
  }
  function d3OrderSelection_(selection2) {
    return selection2.order();
  }
  function d3RaiseSelection_(selection2) {
    return selection2.raise();
  }
  function d3RemoveSelection_(selection2) {
    return selection2.remove();
  }
  function d3SelectAllInDOM_(selector) {
    return d3.selectAll(selector);
  }
  function d3SelectFirstInDOM_(selector) {
    return d3.select(selector);
  }
  function d3SelectionIsEmpty_(selection2) {
    return selection2.empty();
  }
  function d3SelectionSelect_(selector) {
    return (selection2) => {
      return selection2.select(selector);
    };
  }
  function d3SelectionSelectAll_(selector) {
    return (selection2) => {
      return selection2.selectAll(selector);
    };
  }
  function d3SetAttr_(name16) {
    return (value18) => (selection2) => {
      return selection2.attr(name16, value18);
    };
  }
  function d3SetHTML_(value18) {
    return (selection2) => {
      return selection2.html(value18);
    };
  }
  function d3SetProperty_(value18) {
    return (selection2) => {
      return selection2.property(value18);
    };
  }
  function d3SetText_(value18) {
    return (selection2) => {
      return selection2.text(value18);
    };
  }
  function d3SortSelection_(selection2) {
    return (compare20) => selection2.sort(compare20);
  }
  function simulationDrag_(label5) {
    return (selection2) => (simulation) => (dragFn) => selection2.call(dragFn(label5, simulation));
  }
  function disableDrag_(selection2) {
    return selection2.on(".drag", null);
  }
  function selectionOn_(selection2) {
    return (event) => (callback) => {
      return selection2.on(event, callback);
    };
  }
  function d3AddTransition_(selection2) {
    return (transition2) => {
      var handle;
      if (transition2.name == "") {
        handle = selection2.transition();
        if (transition2.duration != 0) {
          handle.duration(transition2.duration);
        }
        if (transition2.delay != 0) {
          handle.delay(transition2.delay);
        }
      } else {
        handle = selection2.transition(transition2.name);
      }
      return handle;
    };
  }
  function simdrag_(label5, simulation) {
    function dragstarted(event) {
      if (!event.active) simulation.alphaTarget(0.3).restart();
      event.subject.fx = event.subject.x;
      event.subject.fy = event.subject.y;
    }
    function dragged(event) {
      event.subject.fx = event.x;
      event.subject.fy = event.y;
    }
    function dragended(event) {
      if (!event.active) simulation.alphaTarget(0);
      event.subject.fx = null;
      event.subject.fy = null;
    }
    return d3.drag().on("start." + label5, dragstarted).on("drag." + label5, dragged).on("end." + label5, dragended);
  }
  var linksForceName_ = "links";
  function disableTick_(simulation) {
    return (name16) => {
      return simulation.on("tick." + name16, () => null);
    };
  }
  function forceCenter_() {
    return d3.forceCenter();
  }
  function forceCollideFn_() {
    return d3.forceCollide();
  }
  function forceLink_() {
    return d3.forceLink().id((d23) => d23.id);
  }
  function forceMany_() {
    return d3.forceManyBody();
  }
  function forceRadial_() {
    return d3.forceRadial();
  }
  function forceX_() {
    return d3.forceX();
  }
  function forceY_() {
    return d3.forceY();
  }
  function getNodes_(simulation) {
    return simulation.nodes();
  }
  function keyIsID_(d23) {
    return d23.id;
  }
  function setAlpha_(simulation) {
    return (alpha) => {
      console.log(`FFI: setting simulation.alpha to ${alpha}`);
      simulation.alpha(alpha);
    };
  }
  function setAlphaDecay_(simulation) {
    return (alphaDecay) => simulation.alphaDecay(alphaDecay);
  }
  function setAlphaMin_(simulation) {
    return (alphaMin) => simulation.alphaMin(alphaMin);
  }
  function setAlphaTarget_(simulation) {
    return (alphaTarget) => simulation.alphaTarget(alphaTarget);
  }
  function setAsNullForceInSimulation_(simulation) {
    return (label5) => simulation.force(label5, null);
  }
  function setForceDistance_(force2) {
    return (attr3) => force2.distance(attr3);
  }
  function setForceDistanceMax_(force2) {
    return (attr3) => force2.distanceMax(attr3);
  }
  function setForceDistanceMin_(force2) {
    return (attr3) => force2.distanceMin(attr3);
  }
  function setForceIterations_(force2) {
    return (attr3) => force2.iterations(attr3);
  }
  function setForceRadius_(force2) {
    return (attr3) => force2.radius(attr3);
  }
  function setForceStrength_(force2) {
    return (attr3) => force2.strength(attr3);
  }
  function setForceTheta_(force2) {
    return (attr3) => force2.theta(attr3);
  }
  function setForceX_(force2) {
    return (attr3) => force2.x(attr3);
  }
  function setForceY_(force2) {
    return (attr3) => force2.y(attr3);
  }
  function setVelocityDecay_(simulation) {
    return (velocityDecay) => simulation.velocityDecay(velocityDecay);
  }
  function startSimulation_(simulation) {
    console.log(`FFI: restarting the simulation, alpha before: ${simulation.alpha()}`);
    simulation.alpha(1).restart();
    console.log(`FFI: restarted simulation, alpha after: ${simulation.alpha()}`);
  }
  function stopSimulation_(simulation) {
    return simulation.stop();
  }
  function initSimulation_(config) {
    return (keyFn) => {
      const simulation = d3.forceSimulation([]).force(linksForceName_, d3.forceLink([]).id(keyFn)).alpha(config.alpha).alphaTarget(config.alphaTarget).alphaMin(config.alphaMin).alphaDecay(config.alphaDecay).velocityDecay(config.velocityDecay);
      if (true) {
        console.log(`FFI: initSimulation${simulation}`);
      }
      return simulation;
    };
  }
  function readSimulationVariables_(simulation) {
    return {
      alpha: simulation.alpha(),
      alphaTarget: simulation.alphaTarget(),
      alphaMin: simulation.alphaMin(),
      alphaDecay: simulation.alphaDecay(),
      velocityDecay: simulation.velocityDecay()
    };
  }
  function getIDsFromNodes_(nodes) {
    return (keyFn) => {
      const keys4 = [];
      for (let i2 = 0; i2 < nodes.length; i2++) {
        keys4[i2] = keyFn(nodes[i2]);
      }
      return keys4;
    };
  }
  function setNodes_(simulation) {
    return (nodes) => {
      console.log(`FFI: setting nodes in simulation, there are ${nodes.length} nodes`);
      const oldNodes = simulation.nodes();
      const oldNodeMap = new Map(oldNodes.map((d23) => [d23.id, d23]));
      const nodesWithPositions = nodes.map((newNode) => {
        const oldNode = oldNodeMap.get(newNode.id);
        if (oldNode) {
          return Object.assign({}, newNode, {
            x: oldNode.x,
            y: oldNode.y,
            vx: oldNode.vx,
            vy: oldNode.vy,
            // Only override fx/fy if new node has them explicitly set
            fx: newNode.fx !== void 0 ? newNode.fx : oldNode.fx,
            fy: newNode.fy !== void 0 ? newNode.fy : oldNode.fy
          });
        }
        return newNode;
      });
      simulation.nodes(nodesWithPositions);
      return simulation.nodes();
    };
  }
  function setLinks_(simulation) {
    return (links) => {
      console.log(`FFI: setting links in simulation, there are ${links.length} links`);
      simulation.force(linksForceName_).links(links);
    };
  }
  function swizzleLinks_(links) {
    return (simNodes) => (keyFn) => {
      console.log(`FFI: swizzling links in simulation, there are ${links.length} links`);
      const nodeById = new Map(simNodes.map((d23) => [keyFn(d23), d23]));
      const swizzledLinks = links.filter((link4, index5, arr) => {
        if (typeof link4.source !== "object") {
          link4.source = nodeById.get(link4.source);
        } else {
          link4.source = nodeById.get(keyFn(link4.source));
        }
        if (typeof link4.target !== "object") {
          link4.target = nodeById.get(link4.target);
        } else {
          link4.target = nodeById.get(keyFn(link4.target));
        }
        if (typeof link4.source === "undefined" || link4.target === "undefined") {
          return false;
        } else {
          link4.id = keyFn(link4.source) + "-" + keyFn(link4.target);
          return true;
        }
      });
      return swizzledLinks;
    };
  }
  function getLinkIDs_(keyFn) {
    return (link4) => {
      const sourceID = typeof link4.source == `object` ? keyFn(link4.source) : link4.source;
      const targetID = typeof link4.target == `object` ? keyFn(link4.target) : link4.target;
      return { sourceID, targetID };
    };
  }
  function getLinksFromSimulation_(simulation) {
    linksForce = simulation.force(linksForceName_);
    if (typeof linksForce === `undefined`) {
      return [];
    }
    const result = linksForce.links();
    if (typeof result === `undefined`) {
      return [];
    }
    return result;
  }
  function onTick_(simulation) {
    return (name16) => (tickFn) => {
      var result = simulation.on("tick." + name16, () => {
        tickFn();
      });
      return result;
    };
  }
  function putForceInSimulation_(simulation) {
    return (label5) => (force2) => {
      simulation.force(label5, force2);
    };
  }
  var linkHorizontal_ = d3.linkHorizontal().x((d23) => d23.y).y((d23) => d23.x);
  var linkHorizontal2_ = d3.linkHorizontal().x((d23) => d23.x).y((d23) => d23.y);
  var linkVertical_ = d3.linkVertical().x((d23) => d23.x).y((d23) => d23.y);
  function chordLayout_(matrix) {
    return d3.chord()(matrix);
  }
  function chordGroups_(chordLayout) {
    return chordLayout.groups;
  }
  function chordArray_(chordLayout) {
    return Array.from(chordLayout);
  }
  function ribbonGenerator_() {
    return d3.ribbon();
  }
  function arcGenerator_() {
    return d3.arc();
  }
  function ribbonPath_(generator) {
    return (chord) => generator(chord);
  }
  function arcPath_(generator) {
    return (group4) => generator(group4);
  }
  function setRibbonRadius_(generator) {
    return (radius34) => {
      generator.radius(radius34);
      return generator;
    };
  }
  function setArcInnerRadius_(generator) {
    return (radius34) => {
      generator.innerRadius(radius34);
      return generator;
    };
  }
  function setArcOuterRadius_(generator) {
    return (radius34) => {
      generator.outerRadius(radius34);
      return generator;
    };
  }
  function d3AttachZoomDefaultExtent_(selection2) {
    return (config) => {
      function zoomed({ transform: transform3 }) {
        config.target.attr("transform", transform3);
      }
      return selection2.call(
        d3.zoom().scaleExtent(config.scaleExtent).on(`zoom.${config.name}`, zoomed)
      );
    };
  }
  function d3AttachZoom_(selection2) {
    return (config) => {
      selection2.call(
        d3.zoom().extent(config.extent).scaleExtent(config.scaleExtent).on(`zoom.${config.name}`, (event) => {
          config.target.attr("transform", event.transform);
        })
      );
      return selection2;
    };
  }

  // output/PSD3.Internal.Types/index.js
  var MouseEnter = /* @__PURE__ */ (function() {
    function MouseEnter2() {
    }
    ;
    MouseEnter2.value = new MouseEnter2();
    return MouseEnter2;
  })();
  var MouseLeave = /* @__PURE__ */ (function() {
    function MouseLeave2() {
    }
    ;
    MouseLeave2.value = new MouseLeave2();
    return MouseLeave2;
  })();
  var MouseClick = /* @__PURE__ */ (function() {
    function MouseClick2() {
    }
    ;
    MouseClick2.value = new MouseClick2();
    return MouseClick2;
  })();
  var MouseDown = /* @__PURE__ */ (function() {
    function MouseDown2() {
    }
    ;
    MouseDown2.value = new MouseDown2();
    return MouseDown2;
  })();
  var MouseUp = /* @__PURE__ */ (function() {
    function MouseUp2() {
    }
    ;
    MouseUp2.value = new MouseUp2();
    return MouseUp2;
  })();
  var Div = /* @__PURE__ */ (function() {
    function Div3() {
    }
    ;
    Div3.value = new Div3();
    return Div3;
  })();
  var Svg = /* @__PURE__ */ (function() {
    function Svg2() {
    }
    ;
    Svg2.value = new Svg2();
    return Svg2;
  })();
  var Circle = /* @__PURE__ */ (function() {
    function Circle3() {
    }
    ;
    Circle3.value = new Circle3();
    return Circle3;
  })();
  var Line = /* @__PURE__ */ (function() {
    function Line3() {
    }
    ;
    Line3.value = new Line3();
    return Line3;
  })();
  var Group = /* @__PURE__ */ (function() {
    function Group3() {
    }
    ;
    Group3.value = new Group3();
    return Group3;
  })();
  var Text2 = /* @__PURE__ */ (function() {
    function Text4() {
    }
    ;
    Text4.value = new Text4();
    return Text4;
  })();
  var Path2 = /* @__PURE__ */ (function() {
    function Path6() {
    }
    ;
    Path6.value = new Path6();
    return Path6;
  })();
  var Rect = /* @__PURE__ */ (function() {
    function Rect3() {
    }
    ;
    Rect3.value = new Rect3();
    return Rect3;
  })();
  var Title = /* @__PURE__ */ (function() {
    function Title2() {
    }
    ;
    Title2.value = new Title2();
    return Title2;
  })();
  var Span = /* @__PURE__ */ (function() {
    function Span3() {
    }
    ;
    Span3.value = new Span3();
    return Span3;
  })();
  var Table = /* @__PURE__ */ (function() {
    function Table2() {
    }
    ;
    Table2.value = new Table2();
    return Table2;
  })();
  var Tr = /* @__PURE__ */ (function() {
    function Tr2() {
    }
    ;
    Tr2.value = new Tr2();
    return Tr2;
  })();
  var Td = /* @__PURE__ */ (function() {
    function Td2() {
    }
    ;
    Td2.value = new Td2();
    return Td2;
  })();
  var DefaultCubic = /* @__PURE__ */ (function() {
    function DefaultCubic2() {
    }
    ;
    DefaultCubic2.value = new DefaultCubic2();
    return DefaultCubic2;
  })();
  var showMouseEvent = {
    show: function(v) {
      if (v instanceof MouseEnter) {
        return "mouseenter";
      }
      ;
      if (v instanceof MouseLeave) {
        return "mouseleave";
      }
      ;
      if (v instanceof MouseClick) {
        return "click";
      }
      ;
      if (v instanceof MouseDown) {
        return "mousedown";
      }
      ;
      if (v instanceof MouseUp) {
        return "mouseup";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Types (line 54, column 1 - line 59, column 30): " + [v.constructor.name]);
    }
  };
  var showElement = {
    show: function(v) {
      if (v instanceof Div) {
        return "div";
      }
      ;
      if (v instanceof Svg) {
        return "svg";
      }
      ;
      if (v instanceof Circle) {
        return "circle";
      }
      ;
      if (v instanceof Line) {
        return "line";
      }
      ;
      if (v instanceof Group) {
        return "g";
      }
      ;
      if (v instanceof Text2) {
        return "text";
      }
      ;
      if (v instanceof Path2) {
        return "path";
      }
      ;
      if (v instanceof Rect) {
        return "rect";
      }
      ;
      if (v instanceof Title) {
        return "title";
      }
      ;
      if (v instanceof Span) {
        return "span";
      }
      ;
      if (v instanceof Table) {
        return "table";
      }
      ;
      if (v instanceof Tr) {
        return "tr";
      }
      ;
      if (v instanceof Td) {
        return "td";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Types (line 28, column 1 - line 41, column 21): " + [v.constructor.name]);
    }
  };
  var index_ToInt = unsafeCoerce2;
  var index_ToNumber = function(i2) {
    return toNumber(index_ToInt(i2));
  };

  // output/PSD3.Internal.Zoom/index.js
  var DefaultZoomExtent = /* @__PURE__ */ (function() {
    function DefaultZoomExtent2() {
    }
    ;
    DefaultZoomExtent2.value = new DefaultZoomExtent2();
    return DefaultZoomExtent2;
  })();
  var ZoomExtent = /* @__PURE__ */ (function() {
    function ZoomExtent2(value0) {
      this.value0 = value0;
    }
    ;
    ZoomExtent2.create = function(value0) {
      return new ZoomExtent2(value0);
    };
    return ZoomExtent2;
  })();
  var ScaleExtent = /* @__PURE__ */ (function() {
    function ScaleExtent2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ScaleExtent2.create = function(value0) {
      return function(value1) {
        return new ScaleExtent2(value0, value1);
      };
    };
    return ScaleExtent2;
  })();

  // output/PSD3.Internal.Selection.Types/index.js
  var show6 = /* @__PURE__ */ show(showMouseEvent);
  var Order = /* @__PURE__ */ (function() {
    function Order2() {
    }
    ;
    Order2.value = new Order2();
    return Order2;
  })();
  var Sort = /* @__PURE__ */ (function() {
    function Sort2(value0) {
      this.value0 = value0;
    }
    ;
    Sort2.create = function(value0) {
      return new Sort2(value0);
    };
    return Sort2;
  })();
  var Raise2 = /* @__PURE__ */ (function() {
    function Raise3() {
    }
    ;
    Raise3.value = new Raise3();
    return Raise3;
  })();
  var Lower = /* @__PURE__ */ (function() {
    function Lower2() {
    }
    ;
    Lower2.value = new Lower2();
    return Lower2;
  })();
  var AttrT = /* @__PURE__ */ (function() {
    function AttrT2(value0) {
      this.value0 = value0;
    }
    ;
    AttrT2.create = function(value0) {
      return new AttrT2(value0);
    };
    return AttrT2;
  })();
  var TextT = /* @__PURE__ */ (function() {
    function TextT2(value0) {
      this.value0 = value0;
    }
    ;
    TextT2.create = function(value0) {
      return new TextT2(value0);
    };
    return TextT2;
  })();
  var HTMLT = /* @__PURE__ */ (function() {
    function HTMLT2(value0) {
      this.value0 = value0;
    }
    ;
    HTMLT2.create = function(value0) {
      return new HTMLT2(value0);
    };
    return HTMLT2;
  })();
  var PropertyT = /* @__PURE__ */ (function() {
    function PropertyT2(value0) {
      this.value0 = value0;
    }
    ;
    PropertyT2.create = function(value0) {
      return new PropertyT2(value0);
    };
    return PropertyT2;
  })();
  var OrderingT = /* @__PURE__ */ (function() {
    function OrderingT2(value0) {
      this.value0 = value0;
    }
    ;
    OrderingT2.create = function(value0) {
      return new OrderingT2(value0);
    };
    return OrderingT2;
  })();
  var TransitionT = /* @__PURE__ */ (function() {
    function TransitionT2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    TransitionT2.create = function(value0) {
      return function(value1) {
        return new TransitionT2(value0, value1);
      };
    };
    return TransitionT2;
  })();
  var RemoveT = /* @__PURE__ */ (function() {
    function RemoveT2() {
    }
    ;
    RemoveT2.value = new RemoveT2();
    return RemoveT2;
  })();
  var OnT = /* @__PURE__ */ (function() {
    function OnT2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    OnT2.create = function(value0) {
      return function(value1) {
        return new OnT2(value0, value1);
      };
    };
    return OnT2;
  })();
  var OnT$prime = /* @__PURE__ */ (function() {
    function OnT$prime2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    OnT$prime2.create = function(value0) {
      return function(value1) {
        return new OnT$prime2(value0, value1);
      };
    };
    return OnT$prime2;
  })();
  var DefaultDrag = /* @__PURE__ */ (function() {
    function DefaultDrag2() {
    }
    ;
    DefaultDrag2.value = new DefaultDrag2();
    return DefaultDrag2;
  })();
  var NoDrag = /* @__PURE__ */ (function() {
    function NoDrag2() {
    }
    ;
    NoDrag2.value = new NoDrag2();
    return NoDrag2;
  })();
  var CustomDrag = /* @__PURE__ */ (function() {
    function CustomDrag2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    CustomDrag2.create = function(value0) {
      return function(value1) {
        return new CustomDrag2(value0, value1);
      };
    };
    return CustomDrag2;
  })();
  var Drag = /* @__PURE__ */ (function() {
    function Drag2(value0) {
      this.value0 = value0;
    }
    ;
    Drag2.create = function(value0) {
      return new Drag2(value0);
    };
    return Drag2;
  })();
  var Zoom = /* @__PURE__ */ (function() {
    function Zoom2(value0) {
      this.value0 = value0;
    }
    ;
    Zoom2.create = function(value0) {
      return new Zoom2(value0);
    };
    return Zoom2;
  })();
  var showOrderingAttribute = {
    show: function(v) {
      if (v instanceof Order) {
        return "Order";
      }
      ;
      if (v instanceof Raise2) {
        return "Raise";
      }
      ;
      if (v instanceof Lower) {
        return "Lower";
      }
      ;
      if (v instanceof Sort) {
        return "Sort";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Selection.Types (line 81, column 1 - line 85, column 25): " + [v.constructor.name]);
    }
  };
  var applySelectionAttributeD3 = function(v) {
    return function(v1) {
      if (v1 instanceof AttrT) {
        return d3SetAttr_(v1.value0.value0)(unboxAttr(v1.value0.value1))(v);
      }
      ;
      if (v1 instanceof TextT) {
        return d3SetText_(unboxAttr(v1.value0.value1))(v);
      }
      ;
      if (v1 instanceof PropertyT) {
        return d3SetProperty_(unboxAttr(v1.value0.value1))(v);
      }
      ;
      if (v1 instanceof HTMLT) {
        return d3SetHTML_(unboxAttr(v1.value0.value1))(v);
      }
      ;
      if (v1 instanceof RemoveT) {
        var removed_ = d3RemoveSelection_(v);
        return removed_;
      }
      ;
      if (v1 instanceof TransitionT) {
        var tHandler = d3AddTransition_(v)(v1.value1);
        var v2 = foldl3(applySelectionAttributeD3)(tHandler)(v1.value0);
        return v;
      }
      ;
      if (v1 instanceof OnT) {
        return selectionOn_(v)(show6(v1.value0))(v1.value1);
      }
      ;
      if (v1 instanceof OnT$prime) {
        return selectionOn_(v)(show6(v1.value0))(v1.value1);
      }
      ;
      if (v1 instanceof OrderingT) {
        if (v1.value0 instanceof Order) {
          return d3OrderSelection_(v);
        }
        ;
        if (v1.value0 instanceof Sort) {
          return d3SortSelection_(v)(v1.value0.value0);
        }
        ;
        if (v1.value0 instanceof Raise2) {
          return d3RaiseSelection_(v);
        }
        ;
        if (v1.value0 instanceof Lower) {
          return d3LowerSelection_(v);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Internal.Selection.Types (line 118, column 3 - line 122, column 51): " + [v1.value0.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Selection.Types (line 88, column 1 - line 88, column 96): " + [v.constructor.name, v1.constructor.name]);
    };
  };

  // output/PSD3.Internal.Attributes.Sugar/index.js
  var toAttr2 = /* @__PURE__ */ toAttr(toAttrString);
  var intercalate4 = /* @__PURE__ */ intercalate2(monoidString);
  var map34 = /* @__PURE__ */ map(functorArray);
  var show7 = /* @__PURE__ */ show(showNumber);
  var append14 = /* @__PURE__ */ append(semigroupArray);
  var flap2 = /* @__PURE__ */ flap(functorArray);
  var y2 = function(dictToAttr) {
    var $109 = AttributeSetter.create("y2");
    var $110 = toAttr(dictToAttr);
    return function($111) {
      return AttrT.create($109($110($111)));
    };
  };
  var y1 = function(dictToAttr) {
    var $112 = AttributeSetter.create("y1");
    var $113 = toAttr(dictToAttr);
    return function($114) {
      return AttrT.create($112($113($114)));
    };
  };
  var y = function(dictToAttr) {
    var $115 = AttributeSetter.create("y");
    var $116 = toAttr(dictToAttr);
    return function($117) {
      return AttrT.create($115($116($117)));
    };
  };
  var x2 = function(dictToAttr) {
    var $118 = AttributeSetter.create("x2");
    var $119 = toAttr(dictToAttr);
    return function($120) {
      return AttrT.create($118($119($120)));
    };
  };
  var x1 = function(dictToAttr) {
    var $121 = AttributeSetter.create("x1");
    var $122 = toAttr(dictToAttr);
    return function($123) {
      return AttrT.create($121($122($123)));
    };
  };
  var x = function(dictToAttr) {
    var $124 = AttributeSetter.create("x");
    var $125 = toAttr(dictToAttr);
    return function($126) {
      return AttrT.create($124($125($126)));
    };
  };
  var width8 = function(dictToAttr) {
    var $127 = AttributeSetter.create("width");
    var $128 = toAttr(dictToAttr);
    return function($129) {
      return AttrT.create($127($128($129)));
    };
  };
  var viewBox = function(xo) {
    return function(yo) {
      return function(w) {
        return function(h) {
          var vb = intercalate4(" ")(map34(show7)([xo, yo, w, h]));
          return AttrT.create(AttributeSetter.create("viewBox")(toAttr2(vb)));
        };
      };
    };
  };
  var transform$prime = /* @__PURE__ */ (function() {
    var $130 = AttributeSetter.create("transform");
    return function($131) {
      return AttrT.create($130(StringAttr.create(Fn.create($131))));
    };
  })();
  var to = function(v) {
    return function(v1) {
      if (v instanceof TransitionT && v.value0.length === 0) {
        return [new TransitionT(v1, v.value1)];
      }
      ;
      if (v instanceof TransitionT) {
        return [new TransitionT(append14(v.value0)(v1), v.value1)];
      }
      ;
      return cons(v)(v1);
    };
  };
  var textAnchor = function(dictToAttr) {
    var $132 = AttributeSetter.create("text-anchor");
    var $133 = toAttr(dictToAttr);
    return function($134) {
      return AttrT.create($132($133($134)));
    };
  };
  var text6 = function(dictToAttr) {
    var $135 = AttributeSetter.create("text");
    var $136 = toAttr(dictToAttr);
    return function($137) {
      return TextT.create($135($136($137)));
    };
  };
  var strokeWidth = function(dictToAttr) {
    var $138 = AttributeSetter.create("stroke-width");
    var $139 = toAttr(dictToAttr);
    return function($140) {
      return AttrT.create($138($139($140)));
    };
  };
  var strokeOpacity = function(dictToAttr) {
    var $141 = AttributeSetter.create("stroke-opacity");
    var $142 = toAttr(dictToAttr);
    return function($143) {
      return AttrT.create($141($142($143)));
    };
  };
  var strokeColor = function(dictToAttr) {
    var $144 = AttributeSetter.create("stroke");
    var $145 = toAttr(dictToAttr);
    return function($146) {
      return AttrT.create($144($145($146)));
    };
  };
  var sortSelection = function(compare20) {
    return new OrderingT(new Sort(compare20));
  };
  var remove = /* @__PURE__ */ (function() {
    return RemoveT.value;
  })();
  var radius = function(dictToAttr) {
    var $156 = AttributeSetter.create("r");
    var $157 = toAttr(dictToAttr);
    return function($158) {
      return AttrT.create($156($157($158)));
    };
  };
  var opacity = function(dictToAttr) {
    var $168 = AttributeSetter.create("opacity");
    var $169 = toAttr(dictToAttr);
    return function($170) {
      return AttrT.create($168($169($170)));
    };
  };
  var onMouseEventEffectful = function(event) {
    return function(listener) {
      return new OnT$prime(event, mkEffectFn3(listener));
    };
  };
  var height8 = function(dictToAttr) {
    var $171 = AttributeSetter.create("height");
    var $172 = toAttr(dictToAttr);
    return function($173) {
      return AttrT.create($171($172($173)));
    };
  };
  var fontSize = function(dictToAttr) {
    var $174 = AttributeSetter.create("font-size");
    var $175 = toAttr(dictToAttr);
    return function($176) {
      return AttrT.create($174($175($176)));
    };
  };
  var fontFamily = function(dictToAttr) {
    var $177 = AttributeSetter.create("font-family");
    var $178 = toAttr(dictToAttr);
    return function($179) {
      return AttrT.create($177($178($179)));
    };
  };
  var fillOpacity = function(dictToAttr) {
    var $180 = AttributeSetter.create("fill-opacity");
    var $181 = toAttr(dictToAttr);
    return function($182) {
      return AttrT.create($180($181($182)));
    };
  };
  var fill = function(dictToAttr) {
    var $183 = AttributeSetter.create("fill");
    var $184 = toAttr(dictToAttr);
    return function($185) {
      return AttrT.create($183($184($185)));
    };
  };
  var dy = function(dictToAttr) {
    var $186 = AttributeSetter.create("dy");
    var $187 = toAttr(dictToAttr);
    return function($188) {
      return AttrT.create($186($187($188)));
    };
  };
  var defaultTransition = /* @__PURE__ */ (function() {
    return {
      name: "",
      delay: 0,
      duration: 0,
      easing: DefaultCubic.value
    };
  })();
  var transitionWithDuration = function(duration2) {
    return new TransitionT([], {
      name: defaultTransition.name,
      delay: defaultTransition.delay,
      easing: defaultTransition.easing,
      duration: duration2
    });
  };
  var d = function(dictToAttr) {
    var $192 = AttributeSetter.create("d");
    var $193 = toAttr(dictToAttr);
    return function($194) {
      return AttrT.create($192($193($194)));
    };
  };
  var cy = function(dictToAttr) {
    var $195 = AttributeSetter.create("cy");
    var $196 = toAttr(dictToAttr);
    return function($197) {
      return AttrT.create($195($196($197)));
    };
  };
  var cx = function(dictToAttr) {
    var $198 = AttributeSetter.create("cx");
    var $199 = toAttr(dictToAttr);
    return function($200) {
      return AttrT.create($198($199($200)));
    };
  };
  var cursor = function(dictToAttr) {
    var $201 = AttributeSetter.create("cursor");
    var $202 = toAttr(dictToAttr);
    return function($203) {
      return AttrT.create($201($202($203)));
    };
  };
  var classed = function(dictToAttr) {
    var $204 = AttributeSetter.create("class");
    var $205 = toAttr(dictToAttr);
    return function($206) {
      return AttrT.create($204($205($206)));
    };
  };
  var assembleTransforms = function(fs) {
    return function(d1) {
      return intercalate4(" ")(flap2(fs)(d1));
    };
  };
  var transform = function($210) {
    return transform$prime(assembleTransforms($210));
  };
  var andThen = function(dictSemigroup) {
    return append(dictSemigroup);
  };

  // output/PSD3.Internal.Scales.Scales/foreign.js
  var d3SchemeCategory10 = d3.scaleOrdinal(d3.schemeCategory10);
  function d3SchemeCategory10N_(number4) {
    return d3SchemeCategory10(number4);
  }
  var d3SchemePaired = d3.scaleOrdinal(d3.schemePaired);
  function d3SchemePairedN_(number4) {
    return d3SchemePaired(number4);
  }
  var d3SchemeDiverging10 = d3.scaleDiverging(d3.interpolateBrBG).domain([0, 250, 500]);
  var d3SchemeSequential10 = d3.scaleSequential().interpolator(d3.interpolateYlOrRd).domain([0, 5, 10]);
  function d3SchemeSequential10N_(number4) {
    return d3SchemeSequential10(number4);
  }

  // output/D3.Viz.Spago.Draw.Attributes/index.js
  var show8 = /* @__PURE__ */ show(showNumber);
  var classed2 = /* @__PURE__ */ classed(toAttrString);
  var width9 = /* @__PURE__ */ width8(toAttrNumber);
  var height9 = /* @__PURE__ */ height8(toAttrNumber);
  var cursor2 = /* @__PURE__ */ cursor(toAttrString);
  var show12 = /* @__PURE__ */ show(showNodeType);
  var classed1 = /* @__PURE__ */ classed(toAttrStringFn);
  var radius2 = /* @__PURE__ */ radius(toAttrNumberFn);
  var fill2 = /* @__PURE__ */ fill(toAttrStringFn);
  var opacity2 = /* @__PURE__ */ opacity(toAttrNumberFn);
  var x3 = /* @__PURE__ */ x(toAttrNumber);
  var y3 = /* @__PURE__ */ y(toAttrNumberFn);
  var textAnchor2 = /* @__PURE__ */ textAnchor(toAttrString);
  var text7 = /* @__PURE__ */ text6(toAttrStringFn);
  var strokeColor2 = /* @__PURE__ */ strokeColor(toAttrStringFn);
  var strokeWidth2 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var translateNode = function(d23) {
    return "translate(" + (show8(d23.x) + ("," + (show8(d23.y) + ")")));
  };
  var svgAttrs = function(w) {
    return function(h) {
      return [viewBox(-w / 2.1)(-h / 2.05)(w)(h), classed2("overlay"), width9(w), height9(h), cursor2("grab")];
    };
  };
  var positionLabel = function(d23) {
    if (d23.nodetype instanceof IsModule) {
      return -d23.r;
    }
    ;
    if (d23.nodetype instanceof IsPackage) {
      return 0;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Draw.Attributes (line 32, column 19 - line 34, column 23): " + [d23.nodetype.constructor.name]);
  };
  var opacityByType = function(d23) {
    if (d23.nodetype instanceof IsPackage) {
      return 0.4;
    }
    ;
    if (d23.nodetype instanceof IsModule) {
      return 0.7;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Draw.Attributes (line 51, column 19 - line 53, column 22): " + [d23.nodetype.constructor.name]);
  };
  var nodeRadius = function(d23) {
    return d23.r;
  };
  var nodeName2 = function(d23) {
    return d23.name;
  };
  var nodeClass = function(d23) {
    return show12(d23.nodetype) + (" " + (d23.containerName + (" " + (d23.name + (function() {
      if (d23.connected) {
        return " connected";
      }
      ;
      return "";
    })()))));
  };
  var updateAttrs = [/* @__PURE__ */ classed1(function(v) {
    return nodeClass(v);
  }), /* @__PURE__ */ transform$prime(function(v) {
    return translateNode(v);
  })];
  var enterAttrs = [/* @__PURE__ */ classed1(function(v) {
    return nodeClass(v);
  }), /* @__PURE__ */ transform$prime(function(v) {
    return translateNode(v);
  })];
  var colorByGroup = function(d23) {
    return d3SchemeCategory10N_(toNumber(d23.cluster));
  };
  var fillByUsage = function(d23) {
    if (d23.connected) {
      return colorByGroup(d23);
    }
    ;
    return "none";
  };
  var graphSceneAttributes = /* @__PURE__ */ (function() {
    return {
      circles: [radius2(function(v) {
        return nodeRadius(v);
      }), fill2(function(v) {
        return colorByGroup(v);
      }), opacity2(function(v) {
        return opacityByType(v);
      })],
      labels: [classed2("label"), x3(0.2), y3(function(v) {
        return positionLabel(v);
      }), textAnchor2("middle"), text7(function(v) {
        return nodeName2(v);
      })],
      tagMap: Nothing.value
    };
  })();
  var strokeByUsage = function(d23) {
    if (d23.connected) {
      return "none";
    }
    ;
    return colorByGroup(d23);
  };
  var colorByDepth = function(d23) {
    var v = toMaybe(d23.treeDepth);
    if (v instanceof Nothing) {
      return "none";
    }
    ;
    if (v instanceof Just) {
      return d3SchemeSequential10N_(toNumber(v.value0));
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Draw.Attributes (line 46, column 18 - line 48, column 56): " + [v.constructor.name]);
  };
  var treeSceneAttributes = /* @__PURE__ */ (function() {
    return {
      circles: [radius2(function(v) {
        return nodeRadius(v);
      }), fill2(function(v) {
        return colorByDepth(v);
      }), strokeColor2(function(v) {
        return colorByGroup(v);
      }), strokeWidth2(3)],
      labels: [classed2("label"), x3(4), y(toAttrNumber)(2), text7(function(v) {
        return nodeName2(v);
      })],
      tagMap: Nothing.value
    };
  })();
  var clusterSceneAttributes = /* @__PURE__ */ (function() {
    return {
      circles: [radius2(function(v) {
        return nodeRadius(v);
      }), fill2(function(v) {
        return fillByUsage(v);
      }), strokeColor2(function(v) {
        return strokeByUsage(v);
      }), strokeWidth2(3), opacity2(function(v) {
        return opacityByType(v);
      })],
      labels: [classed2("label"), x3(0.2), y3(function(v) {
        return positionLabel(v);
      }), textAnchor2("middle"), text7(function(v) {
        return nodeName2(v);
      })],
      tagMap: Nothing.value
    };
  })();

  // output/PSD3.Capabilities.Selection/index.js
  var updateJoin = function(dict) {
    return dict.updateJoin;
  };
  var simpleJoin = function(dict) {
    return dict.simpleJoin;
  };
  var setAttributes = function(dict) {
    return dict.setAttributes;
  };
  var selectUnder = function(dict) {
    return dict.selectUnder;
  };
  var openSelection = function(dict) {
    return dict.openSelection;
  };
  var on2 = function(dict) {
    return dict.on;
  };
  var nestedJoin = function(dict) {
    return dict.nestedJoin;
  };
  var mergeSelections = function(dict) {
    return dict.mergeSelections;
  };
  var filterSelection = function(dict) {
    return dict.filterSelection;
  };
  var attach = function(dict) {
    return dict.attach;
  };
  var appendTo = function(dict) {
    return dict.appendTo;
  };

  // output/D3.Viz.Spago.Render/index.js
  var classed3 = /* @__PURE__ */ classed(toAttrString);
  var classed12 = /* @__PURE__ */ classed(toAttrStringFn);
  var lookup8 = /* @__PURE__ */ lookup(ordInt);
  var fromFoldable9 = /* @__PURE__ */ fromFoldable2(foldableSet);
  var show9 = /* @__PURE__ */ show(showLinkType);
  var discard5 = /* @__PURE__ */ discard(discardUnit);
  var show13 = /* @__PURE__ */ show(showElement);
  var classed22 = /* @__PURE__ */ classed(toAttrStringDatumFn);
  var strokeColor3 = /* @__PURE__ */ strokeColor(toAttrStringDatumFn);
  var x12 = /* @__PURE__ */ x1(toAttrNumberDatumFn);
  var y12 = /* @__PURE__ */ y1(toAttrNumberDatumFn);
  var x22 = /* @__PURE__ */ x2(toAttrNumberDatumFn);
  var y22 = /* @__PURE__ */ y2(toAttrNumberDatumFn);
  var makeTagClassesAttr = function(v) {
    if (v instanceof Nothing) {
      return classed3("");
    }
    ;
    if (v instanceof Just) {
      return classed12(function(v1) {
        var tags = fromMaybe(empty7)(lookup8(v1.id)(v.value0));
        return joinWith(" ")(fromFoldable9(tags));
      });
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Render (line 41, column 1 - line 41, column 97): " + [v.constructor.name]);
  };
  var linkColor = function(l) {
    if (l.linktype instanceof P2P) {
      return "red";
    }
    ;
    if (l.linktype instanceof M2P) {
      return "blue";
    }
    ;
    if (l.linktype instanceof M2M_Graph) {
      return "green";
    }
    ;
    if (l.linktype instanceof M2M_Tree) {
      return "orange";
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Render (line 33, column 15 - line 37, column 23): " + [l.linktype.constructor.name]);
  };
  var linkClass = function(l) {
    return show9(l.linktype);
  };
  var spagoRenderCallbacks = function(dictMonad) {
    var Bind1 = dictMonad.Bind1();
    var bind92 = bind(Bind1);
    var pure56 = pure(dictMonad.Applicative0());
    var discard115 = discard5(Bind1);
    return function(dictSelectionM) {
      var appendTo6 = appendTo(dictSelectionM);
      var on3 = on2(dictSelectionM);
      var setAttributes5 = setAttributes(dictSelectionM);
      var selectUnder4 = selectUnder(dictSelectionM);
      return {
        onNodeEnter: function(enterSel) {
          return function(attrs) {
            var tagClassesAttr = makeTagClassesAttr(attrs.tagMap);
            var enterAttrsWithTags = cons(tagClassesAttr)(enterAttrs);
            return bind92(appendTo6(enterSel)(Group.value)(enterAttrsWithTags))(function(nodeEnter) {
              return bind92(appendTo6(nodeEnter)(Circle.value)(attrs.circles))(function() {
                return bind92(appendTo6(nodeEnter)(Text2.value)(attrs.labels))(function() {
                  return bind92(on3(nodeEnter)(new Drag(new CustomDrag("spago", simdrag_))))(function() {
                    return pure56(nodeEnter);
                  });
                });
              });
            });
          };
        },
        onNodeUpdate: function(updateSel) {
          return function(attrs) {
            var tagClassesAttr = makeTagClassesAttr(attrs.tagMap);
            var updateAttrsWithTags = cons(tagClassesAttr)(updateAttrs);
            return discard115(setAttributes5(updateSel)(updateAttrsWithTags))(function() {
              return bind92(selectUnder4(updateSel)(show13(Circle.value)))(function(updateCircles) {
                return discard115(setAttributes5(updateCircles)(attrs.circles))(function() {
                  return bind92(selectUnder4(updateSel)(show13(Text2.value)))(function(updateLabels) {
                    return setAttributes5(updateLabels)(attrs.labels);
                  });
                });
              });
            });
          };
        },
        onNodeExit: function(exitSel) {
          return setAttributes5(exitSel)([remove]);
        },
        onLinkEnter: function(enterSel) {
          return function(attrs) {
            return bind92(appendTo6(enterSel)(Line.value)([classed22(function(d23) {
              return linkClass(d23);
            }), strokeColor3(function(d23) {
              return linkColor(d23);
            }), classed3("enter")]))(function(linkEnter) {
              return pure56(linkEnter);
            });
          };
        },
        onLinkUpdate: function(updateSel) {
          return function(attrs) {
            return setAttributes5(updateSel)([classed3("update")]);
          };
        },
        onLinkExit: function(exitSel) {
          return setAttributes5(exitSel)([remove]);
        },
        nodeTickAttrs: function(attrs) {
          return [transform$prime(function(v) {
            return translateNode(v);
          })];
        },
        linkTickAttrs: [x12(function(d23) {
          return d23.source.x;
        }), y12(function(d23) {
          return d23.source.y;
        }), x22(function(d23) {
          return d23.target.x;
        }), y22(function(d23) {
          return d23.target.y;
        })]
      };
    };
  };

  // output/Data.Tree/index.js
  var foldr6 = /* @__PURE__ */ foldr(foldableList);
  var foldl7 = /* @__PURE__ */ foldl(foldableList);
  var foldMap3 = /* @__PURE__ */ foldMap(foldableList);
  var Node2 = /* @__PURE__ */ (function() {
    function Node3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Node3.create = function(value0) {
      return function(value1) {
        return new Node3(value0, value1);
      };
    };
    return Node3;
  })();
  var foldableTree = {
    foldr: function(f) {
      return function(b2) {
        return function(v) {
          return f(v.value0)(foldr6(flip(foldr(foldableTree)(f)))(b2)(v.value1));
        };
      };
    },
    foldl: function(f) {
      return function(b2) {
        return function(v) {
          return f(foldl7(foldl(foldableTree)(f))(b2)(v.value1))(v.value0);
        };
      };
    },
    foldMap: function(dictMonoid) {
      var append123 = append(dictMonoid.Semigroup0());
      var foldMap12 = foldMap3(dictMonoid);
      return function(f) {
        return function(v) {
          return append123(f(v.value0))(foldMap12(foldMap(foldableTree)(dictMonoid)(f))(v.value1));
        };
      };
    }
  };

  // output/PSD3.Data.Tree/index.js
  var TidyTree = /* @__PURE__ */ (function() {
    function TidyTree2() {
    }
    ;
    TidyTree2.value = new TidyTree2();
    return TidyTree2;
  })();
  var Dendrogram = /* @__PURE__ */ (function() {
    function Dendrogram2() {
    }
    ;
    Dendrogram2.value = new Dendrogram2();
    return Dendrogram2;
  })();
  var Radial = /* @__PURE__ */ (function() {
    function Radial4() {
    }
    ;
    Radial4.value = new Radial4();
    return Radial4;
  })();
  var Horizontal = /* @__PURE__ */ (function() {
    function Horizontal4() {
    }
    ;
    Horizontal4.value = new Horizontal4();
    return Horizontal4;
  })();
  var Vertical = /* @__PURE__ */ (function() {
    function Vertical4() {
    }
    ;
    Vertical4.value = new Vertical4();
    return Vertical4;
  })();
  var showTreeType = {
    show: function(v) {
      if (v instanceof TidyTree) {
        return "Tidy Tree";
      }
      ;
      if (v instanceof Dendrogram) {
        return "Dendrogram";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Data.Tree (line 34, column 1 - line 36, column 33): " + [v.constructor.name]);
    }
  };
  var eqTreeLayout = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof Radial && y46 instanceof Radial) {
          return true;
        }
        ;
        if (x46 instanceof Horizontal && y46 instanceof Horizontal) {
          return true;
        }
        ;
        if (x46 instanceof Vertical && y46 instanceof Vertical) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var ordTreeLayout = {
    compare: function(x46) {
      return function(y46) {
        if (x46 instanceof Radial && y46 instanceof Radial) {
          return EQ.value;
        }
        ;
        if (x46 instanceof Radial) {
          return LT.value;
        }
        ;
        if (y46 instanceof Radial) {
          return GT.value;
        }
        ;
        if (x46 instanceof Horizontal && y46 instanceof Horizontal) {
          return EQ.value;
        }
        ;
        if (x46 instanceof Horizontal) {
          return LT.value;
        }
        ;
        if (y46 instanceof Horizontal) {
          return GT.value;
        }
        ;
        if (x46 instanceof Vertical && y46 instanceof Vertical) {
          return EQ.value;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Data.Tree (line 0, column 0 - line 0, column 0): " + [x46.constructor.name, y46.constructor.name]);
      };
    },
    Eq0: function() {
      return eqTreeLayout;
    }
  };

  // output/PSD3.CodeExplorer.Actions/index.js
  var eq4 = /* @__PURE__ */ eq(eqTreeLayout);
  var compare2 = /* @__PURE__ */ compare(ordTreeLayout);
  var NodeClick = /* @__PURE__ */ (function() {
    function NodeClick3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    NodeClick3.create = function(value0) {
      return function(value1) {
        return new NodeClick3(value0, value1);
      };
    };
    return NodeClick3;
  })();
  var TopLevelCSS = /* @__PURE__ */ (function() {
    function TopLevelCSS2(value0) {
      this.value0 = value0;
    }
    ;
    TopLevelCSS2.create = function(value0) {
      return new TopLevelCSS2(value0);
    };
    return TopLevelCSS2;
  })();
  var GraphStyle = /* @__PURE__ */ (function() {
    function GraphStyle2(value0) {
      this.value0 = value0;
    }
    ;
    GraphStyle2.create = function(value0) {
      return new GraphStyle2(value0);
    };
    return GraphStyle2;
  })();
  var EmptyScene = /* @__PURE__ */ (function() {
    function EmptyScene2() {
    }
    ;
    EmptyScene2.value = new EmptyScene2();
    return EmptyScene2;
  })();
  var PackageGrid = /* @__PURE__ */ (function() {
    function PackageGrid2() {
    }
    ;
    PackageGrid2.value = new PackageGrid2();
    return PackageGrid2;
  })();
  var PackageGraph = /* @__PURE__ */ (function() {
    function PackageGraph2() {
    }
    ;
    PackageGraph2.value = new PackageGraph2();
    return PackageGraph2;
  })();
  var ModuleTree = /* @__PURE__ */ (function() {
    function ModuleTree2(value0) {
      this.value0 = value0;
    }
    ;
    ModuleTree2.create = function(value0) {
      return new ModuleTree2(value0);
    };
    return ModuleTree2;
  })();
  var LayerSwarm = /* @__PURE__ */ (function() {
    function LayerSwarm2() {
    }
    ;
    LayerSwarm2.value = new LayerSwarm2();
    return LayerSwarm2;
  })();
  var LinkShowFilter = /* @__PURE__ */ (function() {
    function LinkShowFilter2(value0) {
      this.value0 = value0;
    }
    ;
    LinkShowFilter2.create = function(value0) {
      return new LinkShowFilter2(value0);
    };
    return LinkShowFilter2;
  })();
  var LinkForceFilter = /* @__PURE__ */ (function() {
    function LinkForceFilter2(value0) {
      this.value0 = value0;
    }
    ;
    LinkForceFilter2.create = function(value0) {
      return new LinkForceFilter2(value0);
    };
    return LinkForceFilter2;
  })();
  var NodeFilter = /* @__PURE__ */ (function() {
    function NodeFilter2(value0) {
      this.value0 = value0;
    }
    ;
    NodeFilter2.create = function(value0) {
      return new NodeFilter2(value0);
    };
    return NodeFilter2;
  })();
  var Initialize4 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var Finalize2 = /* @__PURE__ */ (function() {
    function Finalize6() {
    }
    ;
    Finalize6.value = new Finalize6();
    return Finalize6;
  })();
  var Scene = /* @__PURE__ */ (function() {
    function Scene2(value0) {
      this.value0 = value0;
    }
    ;
    Scene2.create = function(value0) {
      return new Scene2(value0);
    };
    return Scene2;
  })();
  var ToggleForce = /* @__PURE__ */ (function() {
    function ToggleForce3(value0) {
      this.value0 = value0;
    }
    ;
    ToggleForce3.create = function(value0) {
      return new ToggleForce3(value0);
    };
    return ToggleForce3;
  })();
  var Filter = /* @__PURE__ */ (function() {
    function Filter2(value0) {
      this.value0 = value0;
    }
    ;
    Filter2.create = function(value0) {
      return new Filter2(value0);
    };
    return Filter2;
  })();
  var ChangeStyling = /* @__PURE__ */ (function() {
    function ChangeStyling2(value0) {
      this.value0 = value0;
    }
    ;
    ChangeStyling2.create = function(value0) {
      return new ChangeStyling2(value0);
    };
    return ChangeStyling2;
  })();
  var ChangeSimConfig = /* @__PURE__ */ (function() {
    function ChangeSimConfig2(value0) {
      this.value0 = value0;
    }
    ;
    ChangeSimConfig2.create = function(value0) {
      return new ChangeSimConfig2(value0);
    };
    return ChangeSimConfig2;
  })();
  var StopSim = /* @__PURE__ */ (function() {
    function StopSim2() {
    }
    ;
    StopSim2.value = new StopSim2();
    return StopSim2;
  })();
  var StartSim = /* @__PURE__ */ (function() {
    function StartSim2() {
    }
    ;
    StartSim2.value = new StartSim2();
    return StartSim2;
  })();
  var EventFromVizualization = /* @__PURE__ */ (function() {
    function EventFromVizualization3(value0) {
      this.value0 = value0;
    }
    ;
    EventFromVizualization3.create = function(value0) {
      return new EventFromVizualization3(value0);
    };
    return EventFromVizualization3;
  })();
  var ToggleChildrenOfNode = /* @__PURE__ */ (function() {
    function ToggleChildrenOfNode2(value0) {
      this.value0 = value0;
    }
    ;
    ToggleChildrenOfNode2.create = function(value0) {
      return new ToggleChildrenOfNode2(value0);
    };
    return ToggleChildrenOfNode2;
  })();
  var SpotlightNode = /* @__PURE__ */ (function() {
    function SpotlightNode2(value0) {
      this.value0 = value0;
    }
    ;
    SpotlightNode2.create = function(value0) {
      return new SpotlightNode2(value0);
    };
    return SpotlightNode2;
  })();
  var UnToggleChildrenOfNode = /* @__PURE__ */ (function() {
    function UnToggleChildrenOfNode2(value0) {
      this.value0 = value0;
    }
    ;
    UnToggleChildrenOfNode2.create = function(value0) {
      return new UnToggleChildrenOfNode2(value0);
    };
    return UnToggleChildrenOfNode2;
  })();
  var TagHalogen = /* @__PURE__ */ (function() {
    function TagHalogen2() {
    }
    ;
    TagHalogen2.value = new TagHalogen2();
    return TagHalogen2;
  })();
  var ClearTags = /* @__PURE__ */ (function() {
    function ClearTags2() {
    }
    ;
    ClearTags2.value = new ClearTags2();
    return ClearTags2;
  })();
  var DismissWelcome = /* @__PURE__ */ (function() {
    function DismissWelcome2() {
    }
    ;
    DismissWelcome2.value = new DismissWelcome2();
    return DismissWelcome2;
  })();
  var eqScene = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof EmptyScene && y46 instanceof EmptyScene) {
          return true;
        }
        ;
        if (x46 instanceof PackageGrid && y46 instanceof PackageGrid) {
          return true;
        }
        ;
        if (x46 instanceof PackageGraph && y46 instanceof PackageGraph) {
          return true;
        }
        ;
        if (x46 instanceof ModuleTree && y46 instanceof ModuleTree) {
          return eq4(x46.value0)(y46.value0);
        }
        ;
        if (x46 instanceof LayerSwarm && y46 instanceof LayerSwarm) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var ordScene = {
    compare: function(x46) {
      return function(y46) {
        if (x46 instanceof EmptyScene && y46 instanceof EmptyScene) {
          return EQ.value;
        }
        ;
        if (x46 instanceof EmptyScene) {
          return LT.value;
        }
        ;
        if (y46 instanceof EmptyScene) {
          return GT.value;
        }
        ;
        if (x46 instanceof PackageGrid && y46 instanceof PackageGrid) {
          return EQ.value;
        }
        ;
        if (x46 instanceof PackageGrid) {
          return LT.value;
        }
        ;
        if (y46 instanceof PackageGrid) {
          return GT.value;
        }
        ;
        if (x46 instanceof PackageGraph && y46 instanceof PackageGraph) {
          return EQ.value;
        }
        ;
        if (x46 instanceof PackageGraph) {
          return LT.value;
        }
        ;
        if (y46 instanceof PackageGraph) {
          return GT.value;
        }
        ;
        if (x46 instanceof ModuleTree && y46 instanceof ModuleTree) {
          return compare2(x46.value0)(y46.value0);
        }
        ;
        if (x46 instanceof ModuleTree) {
          return LT.value;
        }
        ;
        if (y46 instanceof ModuleTree) {
          return GT.value;
        }
        ;
        if (x46 instanceof LayerSwarm && y46 instanceof LayerSwarm) {
          return EQ.value;
        }
        ;
        throw new Error("Failed pattern match at PSD3.CodeExplorer.Actions (line 0, column 0 - line 0, column 0): " + [x46.constructor.name, y46.constructor.name]);
      };
    },
    Eq0: function() {
      return eqScene;
    }
  };

  // output/PSD3.Capabilities.Simulation/index.js
  var update = function(dict) {
    return dict.update;
  };
  var stop = function(dict) {
    return dict.stop;
  };
  var start2 = function(dict) {
    return dict.start;
  };
  var init3 = function(dict) {
    return dict.init;
  };
  var addTickFunction = function(dict) {
    return dict.addTickFunction;
  };

  // output/Data.Lens.Internal.Forget/index.js
  var profunctorForget = {
    dimap: function(f) {
      return function(v) {
        return function(v1) {
          return function($36) {
            return v1(f($36));
          };
        };
      };
    }
  };
  var strongForget = {
    first: function(v) {
      return function($37) {
        return v(fst($37));
      };
    },
    second: function(v) {
      return function($38) {
        return v(snd($38));
      };
    },
    Profunctor0: function() {
      return profunctorForget;
    }
  };

  // output/Data.Profunctor.Strong/index.js
  var strongFn = {
    first: function(a2b) {
      return function(v) {
        return new Tuple(a2b(v.value0), v.value1);
      };
    },
    second: /* @__PURE__ */ map(functorTuple),
    Profunctor0: function() {
      return profunctorFn;
    }
  };
  var first = function(dict) {
    return dict.first;
  };

  // output/Data.Lens.Iso/index.js
  var coerce5 = /* @__PURE__ */ coerce();
  var iso = function(f) {
    return function(g) {
      return function(dictProfunctor) {
        var dimap2 = dimap(dictProfunctor);
        return function(pab) {
          return dimap2(f)(g)(pab);
        };
      };
    };
  };
  var coerced = function() {
    return function() {
      return function(dictProfunctor) {
        return iso(coerce5)(coerce5)(dictProfunctor);
      };
    };
  };

  // output/Data.Lens.Iso.Newtype/index.js
  var coerced2 = /* @__PURE__ */ coerced()();
  var _Newtype = function() {
    return function() {
      return function(dictProfunctor) {
        return coerced2(dictProfunctor);
      };
    };
  };

  // output/Data.Lens.Lens/index.js
  var lens$prime = function(to2) {
    return function(dictStrong) {
      var dimap2 = dimap(dictStrong.Profunctor0());
      var first2 = first(dictStrong);
      return function(pab) {
        return dimap2(to2)(function(v) {
          return v.value1(v.value0);
        })(first2(pab));
      };
    };
  };
  var lens = function(get17) {
    return function(set5) {
      return function(dictStrong) {
        return lens$prime(function(s) {
          return new Tuple(get17(s), function(b2) {
            return set5(s)(b2);
          });
        })(dictStrong);
      };
    };
  };

  // output/Data.Lens.Setter/index.js
  var over2 = function(l) {
    return l;
  };
  var set = function(l) {
    return function(b2) {
      return over2(l)($$const(b2));
    };
  };
  var modifying = function(dictMonadState) {
    var $$void13 = $$void(dictMonadState.Monad0().Bind1().Apply0().Functor0());
    var modify5 = modify(dictMonadState);
    return function(p2) {
      return function(f) {
        return $$void13(modify5(over2(p2)(f)));
      };
    };
  };
  var assign2 = function(dictMonadState) {
    var $$void13 = $$void(dictMonadState.Monad0().Bind1().Apply0().Functor0());
    var modify5 = modify(dictMonadState);
    return function(p2) {
      return function(b2) {
        return $$void13(modify5(set(p2)(b2)));
      };
    };
  };

  // output/Data.Lens.Getter/index.js
  var unwrap6 = /* @__PURE__ */ unwrap();
  var identity13 = /* @__PURE__ */ identity(categoryFn);
  var view = function(l) {
    return unwrap6(l(identity13));
  };
  var viewOn = function(s) {
    return function(l) {
      return view(l)(s);
    };
  };
  var use = function(dictMonadState) {
    var gets4 = gets(dictMonadState);
    return function(p2) {
      return gets4(function(v) {
        return viewOn(v)(p2);
      });
    };
  };

  // output/Record/index.js
  var set2 = function(dictIsSymbol) {
    var reflectSymbol2 = reflectSymbol(dictIsSymbol);
    return function() {
      return function() {
        return function(l) {
          return function(b2) {
            return function(r) {
              return unsafeSet(reflectSymbol2(l))(b2)(r);
            };
          };
        };
      };
    };
  };
  var get2 = function(dictIsSymbol) {
    var reflectSymbol2 = reflectSymbol(dictIsSymbol);
    return function() {
      return function(l) {
        return function(r) {
          return unsafeGet(reflectSymbol2(l))(r);
        };
      };
    };
  };

  // output/Data.Lens.Record/index.js
  var prop3 = function(dictIsSymbol) {
    var get17 = get2(dictIsSymbol)();
    var set5 = set2(dictIsSymbol)()();
    return function() {
      return function() {
        return function(l) {
          return function(dictStrong) {
            return lens(get17(l))(flip(set5(l)))(dictStrong);
          };
        };
      };
    };
  };

  // output/PSD3.Internal.Simulation.Types/index.js
  var trace2 = /* @__PURE__ */ trace();
  var _Newtype2 = /* @__PURE__ */ _Newtype()();
  var prop5 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "velocityDecay";
    }
  })()();
  var prop32 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "status";
    }
  })()();
  var prop42 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "name";
    }
  })()();
  var prop11 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "simulation";
    }
  })()();
  var prop12 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "forceLibrary";
    }
  })()();
  var prop13 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "handle_";
    }
  })()();
  var prop15 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "alphaTarget";
    }
  })()();
  var prop16 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "alphaMin";
    }
  })()();
  var prop17 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "alphaDecay";
    }
  })()();
  var prop18 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "alpha";
    }
  })()();
  var Step3 = /* @__PURE__ */ (function() {
    function Step4(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Step4.create = function(value0) {
      return function(value1) {
        return new Step4(value0, value1);
      };
    };
    return Step4;
  })();
  var StepTransformFFI = /* @__PURE__ */ (function() {
    function StepTransformFFI2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    StepTransformFFI2.create = function(value0) {
      return function(value1) {
        return new StepTransformFFI2(value0, value1);
      };
    };
    return StepTransformFFI2;
  })();
  var Alpha = /* @__PURE__ */ (function() {
    function Alpha2(value0) {
      this.value0 = value0;
    }
    ;
    Alpha2.create = function(value0) {
      return new Alpha2(value0);
    };
    return Alpha2;
  })();
  var AlphaTarget = /* @__PURE__ */ (function() {
    function AlphaTarget2(value0) {
      this.value0 = value0;
    }
    ;
    AlphaTarget2.create = function(value0) {
      return new AlphaTarget2(value0);
    };
    return AlphaTarget2;
  })();
  var AlphaMin = /* @__PURE__ */ (function() {
    function AlphaMin2(value0) {
      this.value0 = value0;
    }
    ;
    AlphaMin2.create = function(value0) {
      return new AlphaMin2(value0);
    };
    return AlphaMin2;
  })();
  var AlphaDecay = /* @__PURE__ */ (function() {
    function AlphaDecay2(value0) {
      this.value0 = value0;
    }
    ;
    AlphaDecay2.create = function(value0) {
      return new AlphaDecay2(value0);
    };
    return AlphaDecay2;
  })();
  var VelocityDecay = /* @__PURE__ */ (function() {
    function VelocityDecay2(value0) {
      this.value0 = value0;
    }
    ;
    VelocityDecay2.create = function(value0) {
      return new VelocityDecay2(value0);
    };
    return VelocityDecay2;
  })();
  var ForceManyBody = /* @__PURE__ */ (function() {
    function ForceManyBody2() {
    }
    ;
    ForceManyBody2.value = new ForceManyBody2();
    return ForceManyBody2;
  })();
  var ForceCenter = /* @__PURE__ */ (function() {
    function ForceCenter2() {
    }
    ;
    ForceCenter2.value = new ForceCenter2();
    return ForceCenter2;
  })();
  var ForceCollide = /* @__PURE__ */ (function() {
    function ForceCollide2() {
    }
    ;
    ForceCollide2.value = new ForceCollide2();
    return ForceCollide2;
  })();
  var ForceX = /* @__PURE__ */ (function() {
    function ForceX2() {
    }
    ;
    ForceX2.value = new ForceX2();
    return ForceX2;
  })();
  var ForceY = /* @__PURE__ */ (function() {
    function ForceY2() {
    }
    ;
    ForceY2.value = new ForceY2();
    return ForceY2;
  })();
  var ForceRadial = /* @__PURE__ */ (function() {
    function ForceRadial2() {
    }
    ;
    ForceRadial2.value = new ForceRadial2();
    return ForceRadial2;
  })();
  var RegularForce = /* @__PURE__ */ (function() {
    function RegularForce2(value0) {
      this.value0 = value0;
    }
    ;
    RegularForce2.create = function(value0) {
      return new RegularForce2(value0);
    };
    return RegularForce2;
  })();
  var LinkForce = /* @__PURE__ */ (function() {
    function LinkForce2() {
    }
    ;
    LinkForce2.value = new LinkForce2();
    return LinkForce2;
  })();
  var ForceActive = /* @__PURE__ */ (function() {
    function ForceActive2() {
    }
    ;
    ForceActive2.value = new ForceActive2();
    return ForceActive2;
  })();
  var ForceDisabled = /* @__PURE__ */ (function() {
    function ForceDisabled2() {
    }
    ;
    ForceDisabled2.value = new ForceDisabled2();
    return ForceDisabled2;
  })();
  var ForceFilter = /* @__PURE__ */ (function() {
    function ForceFilter2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ForceFilter2.create = function(value0) {
      return function(value1) {
        return new ForceFilter2(value0, value1);
      };
    };
    return ForceFilter2;
  })();
  var showRegularForceType = {
    show: function(v) {
      if (v instanceof ForceManyBody) {
        return "ForceManyBody";
      }
      ;
      if (v instanceof ForceCenter) {
        return "ForceCenter";
      }
      ;
      if (v instanceof ForceCollide) {
        return "ForceCollide";
      }
      ;
      if (v instanceof ForceX) {
        return "ForceX";
      }
      ;
      if (v instanceof ForceY) {
        return "ForceY";
      }
      ;
      if (v instanceof ForceRadial) {
        return "ForceRadial";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Simulation.Types (line 222, column 1 - line 228, column 46): " + [v.constructor.name]);
    }
  };
  var showForceFilter = function(v) {
    if (v instanceof Just) {
      return v.value0.value0;
    }
    ;
    if (v instanceof Nothing) {
      return " (no filter)";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Internal.Simulation.Types (line 204, column 1 - line 204, column 61): " + [v.constructor.name]);
  };
  var eqForceStatus = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof ForceActive && y46 instanceof ForceActive) {
          return true;
        }
        ;
        if (x46 instanceof ForceDisabled && y46 instanceof ForceDisabled) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var defaultConfigSimulation = {
    alpha: 1,
    alphaTarget: 0,
    alphaMin: 1e-3,
    alphaDecay: 0.0228,
    velocityDecay: 0.4
  };
  var initialSimulationState = function(forces3) {
    var v = trace2({
      simulation: "initialized",
      forceLibrary: forces3
    })(function(v1) {
      return unit;
    });
    return {
      handle_: initSimulation_(defaultConfigSimulation)(keyIsID_),
      data: {
        nodes: [],
        links: []
      },
      key: keyIsID_,
      forceLibrary: forces3,
      ticks: empty2,
      alpha: defaultConfigSimulation.alpha,
      alphaTarget: defaultConfigSimulation.alphaTarget,
      alphaMin: defaultConfigSimulation.alphaMin,
      alphaDecay: defaultConfigSimulation.alphaDecay,
      velocityDecay: defaultConfigSimulation.velocityDecay
    };
  };
  var allNodes = /* @__PURE__ */ (function() {
    return Nothing.value;
  })();
  var _velocityDecay = function(dictStrong) {
    var $225 = _Newtype2(dictStrong.Profunctor0());
    var $226 = prop5($$Proxy.value)(dictStrong);
    return function($227) {
      return $225($226($227));
    };
  };
  var _status = function(dictStrong) {
    var $238 = _Newtype2(dictStrong.Profunctor0());
    var $239 = prop32($$Proxy.value)(dictStrong);
    return function($240) {
      return $238($239($240));
    };
  };
  var _name = function(dictStrong) {
    var $241 = _Newtype2(dictStrong.Profunctor0());
    var $242 = prop42($$Proxy.value)(dictStrong);
    return function($243) {
      return $241($242($243));
    };
  };
  var _d3Simulation = function(dictStrong) {
    return prop11($$Proxy.value)(dictStrong);
  };
  var _forceLibrary = function(dictStrong) {
    var $265 = _d3Simulation(dictStrong);
    var $266 = _Newtype2(dictStrong.Profunctor0());
    var $267 = prop12($$Proxy.value)(dictStrong);
    return function($268) {
      return $265($266($267($268)));
    };
  };
  var _handle = function(dictStrong) {
    var $272 = _d3Simulation(dictStrong);
    var $273 = _Newtype2(dictStrong.Profunctor0());
    var $274 = prop13($$Proxy.value)(dictStrong);
    return function($275) {
      return $272($273($274($275)));
    };
  };
  var _alphaTarget = function(dictStrong) {
    var $279 = _Newtype2(dictStrong.Profunctor0());
    var $280 = prop15($$Proxy.value)(dictStrong);
    return function($281) {
      return $279($280($281));
    };
  };
  var _alphaMin = function(dictStrong) {
    var $282 = _Newtype2(dictStrong.Profunctor0());
    var $283 = prop16($$Proxy.value)(dictStrong);
    return function($284) {
      return $282($283($284));
    };
  };
  var _alphaDecay = function(dictStrong) {
    var $285 = _Newtype2(dictStrong.Profunctor0());
    var $286 = prop17($$Proxy.value)(dictStrong);
    return function($287) {
      return $285($286($287));
    };
  };
  var _alpha = function(dictStrong) {
    var $288 = _Newtype2(dictStrong.Profunctor0());
    var $289 = prop18($$Proxy.value)(dictStrong);
    return function($290) {
      return $288($289($290));
    };
  };

  // output/PSD3.Simulation.Update/index.js
  var foldl9 = /* @__PURE__ */ foldl(foldableArray);
  var elem3 = /* @__PURE__ */ elem2(eqString);
  var show10 = /* @__PURE__ */ show(showElement);
  var discard6 = /* @__PURE__ */ discard(discardUnit);
  var genericUpdateSimulation = function(dictMonad) {
    var Bind1 = dictMonad.Bind1();
    var bind92 = bind(Bind1);
    var discard115 = discard6(Bind1);
    var pure56 = pure(dictMonad.Applicative0());
    return function(dictSelectionM) {
      var openSelection5 = openSelection(dictSelectionM);
      var updateJoin5 = updateJoin(dictSelectionM);
      var mergeSelections3 = mergeSelections(dictSelectionM);
      return function(dictSimulationM2) {
        var update4 = update(dictSimulationM2);
        var addTickFunction2 = addTickFunction(dictSimulationM2);
        return function(v) {
          return function(v1) {
            return function(v2) {
              return function(v3) {
                return function(v4) {
                  return function(v5) {
                    return function(v6) {
                      return function(v7) {
                        if (v.nodes instanceof Just && v.links instanceof Just) {
                          var filteredNodes = filter(v3.nodeFilter)(v3.allNodes);
                          var initializedNodes = foldl9(function(nodes) {
                            return function(fn) {
                              return fn(nodes);
                            };
                          })(filteredNodes)(v3.nodeInitializers);
                          var nodeIDs = getIDsFromNodes_(initializedNodes)(v4);
                          var validLink = function(link4) {
                            var linkIDs = getLinkIDs_(v4)(link4);
                            return elem3(linkIDs.sourceID)(nodeIDs) && elem3(linkIDs.targetID)(nodeIDs);
                          };
                          var structurallyFilteredLinks = filter(validLink)(v3.allLinks);
                          var finalLinks = (function() {
                            if (v3.linkFilter instanceof Nothing) {
                              return structurallyFilteredLinks;
                            }
                            ;
                            if (v3.linkFilter instanceof Just) {
                              return filter(v3.linkFilter.value0)(structurallyFilteredLinks);
                            }
                            ;
                            throw new Error("Failed pattern match at PSD3.Simulation.Update (line 191, column 20 - line 193, column 75): " + [v3.linkFilter.constructor.name]);
                          })();
                          var internalUpdateConfig = {
                            nodes: new Just(initializedNodes),
                            links: new Just(finalLinks),
                            nodeFilter: Nothing.value,
                            linkFilter: Nothing.value,
                            activeForces: v3.activeForces,
                            config: v3.config,
                            keyFn: v4
                          };
                          return bind92(update4(internalUpdateConfig))(function(enhanced) {
                            return bind92(openSelection5(v.nodes.value0)(show10(v1)))(function(node) {
                              return bind92(openSelection5(v.links.value0)(show10(v2)))(function(link4) {
                                return bind92(updateJoin5(node)(v1)(enhanced.nodes)(v4))(function(node$prime) {
                                  return bind92(v7.onNodeEnter(node$prime.enter)(v6))(function(nodeEnter) {
                                    return discard115(v7.onNodeUpdate(node$prime.update)(v6))(function() {
                                      return discard115(v7.onNodeExit(node$prime.exit))(function() {
                                        return bind92(mergeSelections3(nodeEnter)(node$prime.update))(function(mergedNodes) {
                                          return bind92(updateJoin5(link4)(v2)(enhanced.links)(v5))(function(link$prime) {
                                            return bind92(v7.onLinkEnter(link$prime.enter)(v6))(function(linkEnter) {
                                              return discard115(v7.onLinkUpdate(link$prime.update)(v6))(function() {
                                                return discard115(v7.onLinkExit(link$prime.exit))(function() {
                                                  return bind92(mergeSelections3(linkEnter)(link$prime.update))(function(mergedLinks) {
                                                    return discard115(addTickFunction2("nodes")(new Step3(mergedNodes, v7.nodeTickAttrs(v6))))(function() {
                                                      return discard115(addTickFunction2("links")(new Step3(mergedLinks, v7.linkTickAttrs)))(function() {
                                                        return pure56(unit);
                                                      });
                                                    });
                                                  });
                                                });
                                              });
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        }
                        ;
                        return pure56(unit);
                      };
                    };
                  };
                };
              };
            };
          };
        };
      };
    };
  };

  // output/D3.Viz.Spago.Draw/index.js
  var classed4 = /* @__PURE__ */ classed(toAttrString);
  var updateSimulation = function(dictBind) {
    return function(dictMonadEffect) {
      var Monad0 = dictMonadEffect.Monad0();
      var genericUpdateSimulation2 = genericUpdateSimulation(Monad0);
      var spagoRenderCallbacks2 = spagoRenderCallbacks(Monad0);
      return function(dictSelectionM) {
        var genericUpdateSimulation1 = genericUpdateSimulation2(dictSelectionM);
        var spagoRenderCallbacks1 = spagoRenderCallbacks2(dictSelectionM);
        return function(dictSimulationM2) {
          var genericUpdateSimulation22 = genericUpdateSimulation1(dictSimulationM2);
          return function(selections) {
            return function(dataConfig) {
              return function(attrs) {
                return genericUpdateSimulation22({
                  nodes: selections.nodes,
                  links: selections.links
                })(Group.value)(Line.value)({
                  allNodes: dataConfig.allNodes,
                  allLinks: dataConfig.allLinks,
                  nodeFilter: dataConfig.nodeFilter,
                  linkFilter: dataConfig.linkFilter,
                  nodeInitializers: dataConfig.nodeInitializers,
                  activeForces: new Just(dataConfig.activeForces),
                  config: Nothing.value
                })(function(n) {
                  return n.id;
                })(keyIsID_)(attrs)(spagoRenderCallbacks1);
              };
            };
          };
        };
      };
    };
  };
  var initialize = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSimulationM2) {
        return function(dictSelectionM) {
          var attach6 = attach(dictSelectionM);
          var appendTo6 = appendTo(dictSelectionM);
          var on3 = on2(dictSelectionM);
          return bind92(liftEffect53(getWindowWidthHeight))(function(v) {
            return bind92(attach6("div.svg-container"))(function(v1) {
              return bind92(appendTo6(v1)(Svg.value)(svgAttrs(v.value0)(v.value1)))(function(svg2) {
                return bind92(appendTo6(svg2)(Group.value)([]))(function(inner) {
                  return bind92(on3(inner)(new Drag(DefaultDrag.value)))(function() {
                    return bind92(on3(svg2)(new Zoom({
                      extent: new ZoomExtent({
                        top: 0,
                        left: 0,
                        bottom: v.value1,
                        right: v.value0
                      }),
                      scale: new ScaleExtent(0.1, 4),
                      name: "spago",
                      target: inner
                    })))(function() {
                      return bind92(appendTo6(inner)(Group.value)([classed4("links")]))(function(linksGroup) {
                        return bind92(appendTo6(inner)(Group.value)([classed4("nodes")]))(function(nodesGroup) {
                          return pure56({
                            nodes: new Just(nodesGroup),
                            links: new Just(linksGroup)
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        };
      };
    };
  };
  var getVizEventFromClick = function(e) {
    return function(d23) {
      return function(t) {
        return new NodeClick(d23.nodetype, d23.id);
      };
    };
  };

  // output/D3.Viz.Spago.Model/foreign.js
  var spotlitSelection;
  var spotlitNode;
  var sourcesSelection;
  var targetSelection;
  var spotlitID;
  var spotlit = false;
  spotlightNeighbours_ = (simulation, id5, nodetype) => {
    spotlit = true;
    spotlitID = id5;
    simulation.stop();
    svg = d3.select("div.svg-container svg");
    nodeSelection = svg.selectAll("g.nodes g");
    spotlitSelection = nodeSelection.filter((d23, i2) => d23.id == id5);
    spotlitNode = spotlitSelection.node();
    spotlitNode.__data__.fx = spotlitNode.__data__.fx || spotlitNode.__data__.x;
    spotlitNode.__data__.fy = spotlitNode.__data__.fy || spotlitNode.__data__.y;
    const targets = spotlitNode.__data__.links.targets;
    const sources = spotlitNode.__data__.links.sources;
    sourcesSelection = nodeSelection.filter((d23, i2) => sources.includes(d23.id));
    targetSelection = nodeSelection.filter((d23, i2) => targets.includes(d23.id));
    svg.classed("spotlight", true);
    sourcesSelection.classed("source", true);
    targetSelection.classed("target", true);
    spotlitSelection.classed("spotlight", true);
    spotlitSelection.classed("source target", false);
    simulation.force(
      "collide",
      d3.forceCollide().radius(
        (d23) => sources.includes(d23.id) || targets.includes(d23.id) ? d23.r * 4 : d23.id === d23.containerID ? 10 : d23.r
      )
    );
    simulation.alpha(1).restart();
  };
  unSpotlightNeighbours_ = (simulation) => {
    simulation.stop();
    svg.classed("spotlight", false);
    spotlitNode.__data__.fx = null;
    spotlitNode.__data__.fy = null;
    spotlitSelection.classed("spotlight", false);
    sourcesSelection.classed("source", false);
    targetSelection.classed("target", false);
    simulation.force(
      "collide",
      d3.forceCollide().radius((d23) => d23.id === d23.containerID ? 10 : d23.r)
    );
    simulation.restart();
    spotlit = false;
  };

  // output/D3.Viz.Spago.Model/index.js
  var lookup9 = /* @__PURE__ */ lookup(ordInt);
  var map35 = /* @__PURE__ */ map(functorArray);
  var append9 = /* @__PURE__ */ append(semigroupArray);
  var fromFoldable10 = /* @__PURE__ */ fromFoldable(ordInt)(foldableArray);
  var foldlWithIndex2 = /* @__PURE__ */ foldlWithIndex(foldableWithIndexArray);
  var bind8 = /* @__PURE__ */ bind(bindArray);
  var mapFlipped3 = /* @__PURE__ */ mapFlipped(functorArray);
  var upgradeSpagoNodeData = function(sourcesMap) {
    return function(node) {
      return {
        links: {
          targets: node.links.targets,
          treeChildren: node.links.treeChildren,
          inPackage: node.links.inPackage,
          outPackage: node.links.outPackage,
          contains: node.links.contains,
          sources: fromMaybe([])(lookup9(node.id)(sourcesMap))
        },
        id: node.id,
        cluster: node.containerID,
        connected: node.connected,
        showChildren: (function() {
          if (node.nodetype instanceof IsPackage) {
            return true;
          }
          ;
          if (node.nodetype instanceof IsModule) {
            return false;
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.Spago.Model (line 207, column 20 - line 209, column 45): " + [node.nodetype.constructor.name]);
        })(),
        containerID: node.containerID,
        containerName: node.containerName,
        containsMany: node.containsMany,
        focusX: 0,
        focusY: 0,
        fx: nullImpl,
        fy: nullImpl,
        inSim: true,
        loc: node.loc,
        name: node.name,
        nodetype: node.nodetype,
        r: sqrt(node.loc),
        treeXY: nullImpl,
        treeDepth: nullImpl,
        gridXY: nullImpl,
        vx: 0,
        vy: 0,
        x: 0,
        y: 0
      };
    };
  };
  var unpinAllNodes = function(nodes) {
    var unpin = function(d23) {
      return {
        x: d23.x,
        y: d23.y,
        vx: d23.vx,
        vy: d23.vy,
        id: d23.id,
        links: d23.links,
        connected: d23.connected,
        showChildren: d23.showChildren,
        containerID: d23.containerID,
        containerName: d23.containerName,
        containsMany: d23.containsMany,
        inSim: d23.inSim,
        loc: d23.loc,
        name: d23.name,
        nodetype: d23.nodetype,
        treeXY: d23.treeXY,
        treeDepth: d23.treeDepth,
        gridXY: d23.gridXY,
        cluster: d23.cluster,
        focusX: d23.focusX,
        focusY: d23.focusY,
        r: d23.r,
        fx: nullImpl,
        fy: nullImpl
      };
    };
    return map35(unpin)(nodes);
  };
  var spagoGraphConfig = {
    getNodeId: function(v) {
      return v.id;
    },
    getLinkSource: function(link4) {
      return link4.source;
    },
    getLinkTarget: function(link4) {
      return link4.target;
    }
  };
  var scalePoint = function(xFactor) {
    return function(yFactor) {
      return function(xy) {
        return {
          x: xy.x * xFactor,
          y: xy.y * yFactor
        };
      };
    };
  };
  var offsetXY = function(offset) {
    return function(xy) {
      return {
        x: xy.x + offset.x,
        y: xy.y + offset.y
      };
    };
  };
  var numberToGridPoint = function(columns) {
    return function(i2) {
      var d23 = toNumber(i2);
      var c = toNumber(columns);
      var x46 = remainder(d23)(c);
      var y46 = floor(d23 / c);
      return {
        x: x46,
        y: y46
      };
    };
  };
  var isUsedModule = function(d23) {
    if (d23.nodetype instanceof IsPackage) {
      return false;
    }
    ;
    if (d23.nodetype instanceof IsModule) {
      return d23.connected;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Model (line 197, column 18 - line 199, column 30): " + [d23.nodetype.constructor.name]);
  };
  var treeNodesToSwarmStart = function(nodes) {
    var setSwarmStart = function(d23) {
      var treeXY = fromMaybe({
        x: d23.x,
        y: d23.y
      })(toMaybe(d23.treeXY));
      return {
        vx: d23.vx,
        vy: d23.vy,
        id: d23.id,
        links: d23.links,
        connected: d23.connected,
        showChildren: d23.showChildren,
        containerID: d23.containerID,
        containerName: d23.containerName,
        containsMany: d23.containsMany,
        inSim: d23.inSim,
        loc: d23.loc,
        name: d23.name,
        nodetype: d23.nodetype,
        treeXY: d23.treeXY,
        treeDepth: d23.treeDepth,
        gridXY: d23.gridXY,
        cluster: d23.cluster,
        focusX: d23.focusX,
        focusY: d23.focusY,
        r: d23.r,
        x: treeXY.x,
        y: 0,
        fx: nullImpl,
        fy: nullImpl
      };
    };
    var partitioned = partition(isUsedModule)(nodes);
    return append9(partitioned.no)(map35(setSwarmStart)(partitioned.yes));
  };
  var treeNodesToTreeXY_H = function(nodes) {
    var setXYtoTreeXY = function(d23) {
      var treeXY = fromMaybe({
        x: d23.x,
        y: d23.y
      })(toMaybe(d23.treeXY));
      return {
        vx: d23.vx,
        vy: d23.vy,
        fx: d23.fx,
        fy: d23.fy,
        id: d23.id,
        links: d23.links,
        connected: d23.connected,
        showChildren: d23.showChildren,
        containerID: d23.containerID,
        containerName: d23.containerName,
        containsMany: d23.containsMany,
        inSim: d23.inSim,
        loc: d23.loc,
        name: d23.name,
        nodetype: d23.nodetype,
        treeDepth: d23.treeDepth,
        gridXY: d23.gridXY,
        cluster: d23.cluster,
        focusX: d23.focusX,
        focusY: d23.focusY,
        r: d23.r,
        treeXY: notNull(treeXY),
        x: treeXY.x,
        y: treeXY.y
      };
    };
    var partitioned = partition(isUsedModule)(nodes);
    return append9(partitioned.no)(map35(setXYtoTreeXY)(partitioned.yes));
  };
  var treeNodesToTreeXY_R = function(nodes) {
    var setXYtoTreeXY = function(d23) {
      var treeXY = fromMaybe({
        x: d23.x,
        y: d23.y
      })(toMaybe(d23.treeXY));
      var radialTranslate = function(p2) {
        var x46 = p2.x * cos(p2.y);
        var y46 = p2.x * sin(p2.y);
        return {
          x: x46,
          y: y46
        };
      };
      var radialXY = radialTranslate(treeXY);
      return {
        vx: d23.vx,
        vy: d23.vy,
        fx: d23.fx,
        fy: d23.fy,
        id: d23.id,
        links: d23.links,
        connected: d23.connected,
        showChildren: d23.showChildren,
        containerID: d23.containerID,
        containerName: d23.containerName,
        containsMany: d23.containsMany,
        inSim: d23.inSim,
        loc: d23.loc,
        name: d23.name,
        nodetype: d23.nodetype,
        treeDepth: d23.treeDepth,
        gridXY: d23.gridXY,
        cluster: d23.cluster,
        focusX: d23.focusX,
        focusY: d23.focusY,
        r: d23.r,
        treeXY: notNull(treeXY),
        x: radialXY.x,
        y: radialXY.y
      };
    };
    var partitioned = partition(isUsedModule)(nodes);
    return append9(partitioned.no)(map35(setXYtoTreeXY)(partitioned.yes));
  };
  var treeNodesToTreeXY_V = function(nodes) {
    var setXYtoTreeXY = function(d23) {
      var treeXY = fromMaybe({
        x: d23.y,
        y: d23.x
      })(toMaybe(d23.treeXY));
      return {
        vx: d23.vx,
        vy: d23.vy,
        fx: d23.fx,
        fy: d23.fy,
        id: d23.id,
        links: d23.links,
        connected: d23.connected,
        showChildren: d23.showChildren,
        containerID: d23.containerID,
        containerName: d23.containerName,
        containsMany: d23.containsMany,
        inSim: d23.inSim,
        loc: d23.loc,
        name: d23.name,
        nodetype: d23.nodetype,
        treeDepth: d23.treeDepth,
        gridXY: d23.gridXY,
        cluster: d23.cluster,
        focusX: d23.focusX,
        focusY: d23.focusY,
        r: d23.r,
        treeXY: notNull(treeXY),
        x: treeXY.y,
        y: treeXY.x
      };
    };
    var partitioned = partition(isUsedModule)(nodes);
    return append9(partitioned.no)(map35(setXYtoTreeXY)(partitioned.yes));
  };
  var isPackageOrVisibleModule = function(id5) {
    return function(d23) {
      if (d23.nodetype instanceof IsModule) {
        return d23.containerID === id5;
      }
      ;
      if (d23.nodetype instanceof IsPackage) {
        return true;
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Spago.Model (line 187, column 33 - line 189, column 24): " + [d23.nodetype.constructor.name]);
    };
  };
  var isPackage = function(d23) {
    if (d23.nodetype instanceof IsModule) {
      return false;
    }
    ;
    if (d23.nodetype instanceof IsPackage) {
      return true;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Model (line 182, column 15 - line 184, column 24): " + [d23.nodetype.constructor.name]);
  };
  var moduleNodesToContainerXY = function(nodes) {
    var partitioned = partition(isPackage)(nodes);
    var packagesIndexMap = fromFoldable10(foldl3(function(b2) {
      return function(a2) {
        return cons(new Tuple(a2.id, a2.gridXY))(b2);
      };
    })([])(partitioned.yes));
    var setModuleGridXY = function(m) {
      var v = lookup9(m.containerID)(packagesIndexMap);
      if (v instanceof Nothing) {
        return m;
      }
      ;
      if (v instanceof Just) {
        var v1 = toMaybe(v.value0);
        if (v1 instanceof Nothing) {
          return {
            containerID: m.containerID,
            cluster: m.cluster,
            connected: m.connected,
            containerName: m.containerName,
            containsMany: m.containsMany,
            focusX: m.focusX,
            focusY: m.focusY,
            fx: m.fx,
            fy: m.fy,
            id: m.id,
            inSim: m.inSim,
            links: m.links,
            loc: m.loc,
            name: m.name,
            nodetype: m.nodetype,
            r: m.r,
            showChildren: m.showChildren,
            treeDepth: m.treeDepth,
            treeXY: m.treeXY,
            vx: m.vx,
            vy: m.vy,
            x: 0,
            y: 0,
            gridXY: v.value0
          };
        }
        ;
        if (v1 instanceof Just) {
          return {
            containerID: m.containerID,
            cluster: m.cluster,
            connected: m.connected,
            containerName: m.containerName,
            containsMany: m.containsMany,
            focusX: m.focusX,
            focusY: m.focusY,
            fx: m.fx,
            fy: m.fy,
            id: m.id,
            inSim: m.inSim,
            links: m.links,
            loc: m.loc,
            name: m.name,
            nodetype: m.nodetype,
            r: m.r,
            showChildren: m.showChildren,
            treeDepth: m.treeDepth,
            treeXY: m.treeXY,
            vx: m.vx,
            vy: m.vy,
            x: v1.value0.x,
            y: v1.value0.y,
            gridXY: v.value0
          };
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.Spago.Model (line 290, column 11 - line 292, column 65): " + [v1.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Spago.Model (line 287, column 7 - line 292, column 65): " + [v.constructor.name]);
    };
    var modulesWithGrid = map35(setModuleGridXY)(partitioned.no);
    return append9(modulesWithGrid)(partitioned.yes);
  };
  var packageNodesToGridXY = function(nodes) {
    var partitioned = partition(isPackage)(nodes);
    var packageCount = length3(partitioned.yes);
    var columns = floor2(ceil(sqrt(toNumber(packageCount))));
    var offset = -(toNumber(columns) / 2);
    var packagesWithGrid = (function() {
      var setGridXY = function(p2) {
        return function(i2) {
          var gridXY = scalePoint(200)(200)(offsetXY({
            x: offset,
            y: offset
          })(numberToGridPoint(columns)(i2)));
          return {
            cluster: p2.cluster,
            connected: p2.connected,
            containerID: p2.containerID,
            containerName: p2.containerName,
            containsMany: p2.containsMany,
            focusX: p2.focusX,
            focusY: p2.focusY,
            fx: p2.fx,
            fy: p2.fy,
            id: p2.id,
            inSim: p2.inSim,
            links: p2.links,
            loc: p2.loc,
            name: p2.name,
            nodetype: p2.nodetype,
            r: p2.r,
            showChildren: p2.showChildren,
            treeDepth: p2.treeDepth,
            treeXY: p2.treeXY,
            vx: p2.vx,
            vy: p2.vy,
            gridXY: notNull(gridXY),
            x: gridXY.x,
            y: gridXY.y
          };
        };
      };
      return foldlWithIndex2(function(i2) {
        return function(b2) {
          return function(a2) {
            return cons(setGridXY(a2)(i2))(b2);
          };
        };
      })([])(partitioned.yes);
    })();
    return append9(partitioned.no)(packagesWithGrid);
  };
  var isModule = function(d23) {
    if (d23.nodetype instanceof IsModule) {
      return true;
    }
    ;
    if (d23.nodetype instanceof IsPackage) {
      return false;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.Spago.Model (line 192, column 14 - line 194, column 25): " + [d23.nodetype.constructor.name]);
  };
  var initialRadius = 10;
  var initialAngle = /* @__PURE__ */ (function() {
    return pi * (3 - sqrt(5));
  })();
  var setForPhyllotaxis = function(index5) {
    return function(d23) {
      var i2 = toNumber(index5);
      var radius34 = initialRadius * sqrt(0.5 + i2);
      var angle = i2 * initialAngle;
      return {
        vx: d23.vx,
        vy: d23.vy,
        fx: d23.fx,
        fy: d23.fy,
        id: d23.id,
        links: d23.links,
        connected: d23.connected,
        showChildren: d23.showChildren,
        containerID: d23.containerID,
        containerName: d23.containerName,
        containsMany: d23.containsMany,
        inSim: d23.inSim,
        loc: d23.loc,
        name: d23.name,
        nodetype: d23.nodetype,
        treeXY: d23.treeXY,
        treeDepth: d23.treeDepth,
        gridXY: d23.gridXY,
        cluster: d23.cluster,
        focusX: d23.focusX,
        focusY: d23.focusY,
        r: d23.r,
        x: radius34 * cos(angle),
        y: radius34 * sin(angle)
      };
    };
  };
  var nodesToPhyllotaxis = function(predicate) {
    return function(nodes) {
      var partitioned = partition(predicate)(nodes);
      return append9(partitioned.no)(mapWithIndex3(setForPhyllotaxis)(partitioned.yes));
    };
  };
  var packagesNodesToPhyllotaxis = /* @__PURE__ */ nodesToPhyllotaxis(isPackage);
  var fixNamedNodeTo = function(label5) {
    return function(point) {
      return function(nodes) {
        var fixNamedNode$prime = function(d23) {
          var $83 = d23.name === label5;
          if ($83) {
            return {
              name: d23.name,
              cluster: d23.cluster,
              connected: d23.connected,
              containerID: d23.containerID,
              containerName: d23.containerName,
              containsMany: d23.containsMany,
              focusX: d23.focusX,
              focusY: d23.focusY,
              gridXY: d23.gridXY,
              id: d23.id,
              inSim: d23.inSim,
              links: d23.links,
              loc: d23.loc,
              nodetype: d23.nodetype,
              r: d23.r,
              showChildren: d23.showChildren,
              treeDepth: d23.treeDepth,
              treeXY: d23.treeXY,
              vx: d23.vx,
              vy: d23.vy,
              x: d23.x,
              y: d23.y,
              fx: notNull(point.x),
              fy: notNull(point.y)
            };
          }
          ;
          return d23;
        };
        return map35(fixNamedNode$prime)(nodes);
      };
    };
  };
  var buildSpagoGraph = function(nodes) {
    var links = bind8(nodes)(function(node) {
      return mapFlipped3(node.links.targets)(function(target7) {
        return {
          source: node.id,
          target: target7,
          linktype: M2M_Graph.value,
          inSim: true
        };
      });
    });
    var graphModel = buildGraphModel(spagoGraphConfig)(nodes)(links);
    var graph = toDataGraph(spagoGraphConfig)(graphModel);
    return {
      graph,
      graphModel
    };
  };
  var makeSpagoGraphModel = function(json2) {
    var v = getGraphJSONData(json2);
    var v1 = buildSpagoGraph(v.nodes);
    return {
      links: v.links,
      nodes: mapFlipped3(v.nodes)(upgradeSpagoNodeData(v.sourceLinksMap)),
      graph: v1.graph,
      graphModel: v1.graphModel,
      tree: Nothing.value,
      maps: {
        name2ID: v.name2ID,
        id2Name: v.id2Name,
        id2Package: v.id2Package,
        id2LOC: v.id2LOC,
        id2TreeData: empty2
      }
    };
  };
  var convertFilesToGraphModel = function(moduleJSON) {
    return function(packageJSON) {
      return function(lsdepJSON) {
        return function(locJSON) {
          return makeSpagoGraphModel(readSpago_Raw_JSON_(moduleJSON.body)(packageJSON.body)(lsdepJSON.body)(locJSON.body));
        };
      };
    };
  };
  var allNodes2 = /* @__PURE__ */ $$const(true);

  // output/Data.MediaType.Common/index.js
  var applicationJSON = "application/json";
  var applicationFormURLEncoded = "application/x-www-form-urlencoded";

  // output/Affjax.ResponseFormat/index.js
  var identity14 = /* @__PURE__ */ identity(categoryFn);
  var $$ArrayBuffer = /* @__PURE__ */ (function() {
    function $$ArrayBuffer2(value0) {
      this.value0 = value0;
    }
    ;
    $$ArrayBuffer2.create = function(value0) {
      return new $$ArrayBuffer2(value0);
    };
    return $$ArrayBuffer2;
  })();
  var Blob = /* @__PURE__ */ (function() {
    function Blob3(value0) {
      this.value0 = value0;
    }
    ;
    Blob3.create = function(value0) {
      return new Blob3(value0);
    };
    return Blob3;
  })();
  var Document = /* @__PURE__ */ (function() {
    function Document3(value0) {
      this.value0 = value0;
    }
    ;
    Document3.create = function(value0) {
      return new Document3(value0);
    };
    return Document3;
  })();
  var Json = /* @__PURE__ */ (function() {
    function Json3(value0) {
      this.value0 = value0;
    }
    ;
    Json3.create = function(value0) {
      return new Json3(value0);
    };
    return Json3;
  })();
  var $$String = /* @__PURE__ */ (function() {
    function $$String3(value0) {
      this.value0 = value0;
    }
    ;
    $$String3.create = function(value0) {
      return new $$String3(value0);
    };
    return $$String3;
  })();
  var Ignore = /* @__PURE__ */ (function() {
    function Ignore2(value0) {
      this.value0 = value0;
    }
    ;
    Ignore2.create = function(value0) {
      return new Ignore2(value0);
    };
    return Ignore2;
  })();
  var toResponseType = function(v) {
    if (v instanceof $$ArrayBuffer) {
      return "arraybuffer";
    }
    ;
    if (v instanceof Blob) {
      return "blob";
    }
    ;
    if (v instanceof Document) {
      return "document";
    }
    ;
    if (v instanceof Json) {
      return "text";
    }
    ;
    if (v instanceof $$String) {
      return "text";
    }
    ;
    if (v instanceof Ignore) {
      return "";
    }
    ;
    throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): " + [v.constructor.name]);
  };
  var toMediaType = function(v) {
    if (v instanceof Json) {
      return new Just(applicationJSON);
    }
    ;
    return Nothing.value;
  };
  var string = /* @__PURE__ */ (function() {
    return new $$String(identity14);
  })();
  var ignore = /* @__PURE__ */ (function() {
    return new Ignore(identity14);
  })();

  // output/Affjax.Web/foreign.js
  var driver = {
    newXHR: function() {
      return new XMLHttpRequest();
    },
    fixupUrl: function(url) {
      return url || "/";
    }
  };

  // output/Affjax/foreign.js
  function _ajax(platformSpecificDriver, timeoutErrorMessageIdent, requestFailedMessageIdent, mkHeader, options2) {
    return function(errback, callback) {
      var xhr = platformSpecificDriver.newXHR();
      var fixedUrl = platformSpecificDriver.fixupUrl(options2.url, xhr);
      xhr.open(options2.method || "GET", fixedUrl, true, options2.username, options2.password);
      if (options2.headers) {
        try {
          for (var i2 = 0, header2; (header2 = options2.headers[i2]) != null; i2++) {
            xhr.setRequestHeader(header2.field, header2.value);
          }
        } catch (e) {
          errback(e);
        }
      }
      var onerror = function(msgIdent) {
        return function() {
          errback(new Error(msgIdent));
        };
      };
      xhr.onerror = onerror(requestFailedMessageIdent);
      xhr.ontimeout = onerror(timeoutErrorMessageIdent);
      xhr.onload = function() {
        callback({
          status: xhr.status,
          statusText: xhr.statusText,
          headers: xhr.getAllResponseHeaders().split("\r\n").filter(function(header3) {
            return header3.length > 0;
          }).map(function(header3) {
            var i3 = header3.indexOf(":");
            return mkHeader(header3.substring(0, i3))(header3.substring(i3 + 2));
          }),
          body: xhr.response
        });
      };
      xhr.responseType = options2.responseType;
      xhr.withCredentials = options2.withCredentials;
      xhr.timeout = options2.timeout;
      xhr.send(options2.content);
      return function(error4, cancelErrback, cancelCallback) {
        try {
          xhr.abort();
        } catch (e) {
          return cancelErrback(e);
        }
        return cancelCallback();
      };
    };
  }

  // output/Affjax.RequestBody/index.js
  var ArrayView = /* @__PURE__ */ (function() {
    function ArrayView2(value0) {
      this.value0 = value0;
    }
    ;
    ArrayView2.create = function(value0) {
      return new ArrayView2(value0);
    };
    return ArrayView2;
  })();
  var Blob2 = /* @__PURE__ */ (function() {
    function Blob3(value0) {
      this.value0 = value0;
    }
    ;
    Blob3.create = function(value0) {
      return new Blob3(value0);
    };
    return Blob3;
  })();
  var Document2 = /* @__PURE__ */ (function() {
    function Document3(value0) {
      this.value0 = value0;
    }
    ;
    Document3.create = function(value0) {
      return new Document3(value0);
    };
    return Document3;
  })();
  var $$String2 = /* @__PURE__ */ (function() {
    function $$String3(value0) {
      this.value0 = value0;
    }
    ;
    $$String3.create = function(value0) {
      return new $$String3(value0);
    };
    return $$String3;
  })();
  var FormData = /* @__PURE__ */ (function() {
    function FormData2(value0) {
      this.value0 = value0;
    }
    ;
    FormData2.create = function(value0) {
      return new FormData2(value0);
    };
    return FormData2;
  })();
  var FormURLEncoded = /* @__PURE__ */ (function() {
    function FormURLEncoded2(value0) {
      this.value0 = value0;
    }
    ;
    FormURLEncoded2.create = function(value0) {
      return new FormURLEncoded2(value0);
    };
    return FormURLEncoded2;
  })();
  var Json2 = /* @__PURE__ */ (function() {
    function Json3(value0) {
      this.value0 = value0;
    }
    ;
    Json3.create = function(value0) {
      return new Json3(value0);
    };
    return Json3;
  })();
  var toMediaType2 = function(v) {
    if (v instanceof FormURLEncoded) {
      return new Just(applicationFormURLEncoded);
    }
    ;
    if (v instanceof Json2) {
      return new Just(applicationJSON);
    }
    ;
    return Nothing.value;
  };

  // output/Affjax.RequestHeader/index.js
  var unwrap7 = /* @__PURE__ */ unwrap();
  var Accept = /* @__PURE__ */ (function() {
    function Accept2(value0) {
      this.value0 = value0;
    }
    ;
    Accept2.create = function(value0) {
      return new Accept2(value0);
    };
    return Accept2;
  })();
  var ContentType = /* @__PURE__ */ (function() {
    function ContentType2(value0) {
      this.value0 = value0;
    }
    ;
    ContentType2.create = function(value0) {
      return new ContentType2(value0);
    };
    return ContentType2;
  })();
  var RequestHeader = /* @__PURE__ */ (function() {
    function RequestHeader2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    RequestHeader2.create = function(value0) {
      return function(value1) {
        return new RequestHeader2(value0, value1);
      };
    };
    return RequestHeader2;
  })();
  var value13 = function(v) {
    if (v instanceof Accept) {
      return unwrap7(v.value0);
    }
    ;
    if (v instanceof ContentType) {
      return unwrap7(v.value0);
    }
    ;
    if (v instanceof RequestHeader) {
      return v.value1;
    }
    ;
    throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): " + [v.constructor.name]);
  };
  var name15 = function(v) {
    if (v instanceof Accept) {
      return "Accept";
    }
    ;
    if (v instanceof ContentType) {
      return "Content-Type";
    }
    ;
    if (v instanceof RequestHeader) {
      return v.value0;
    }
    ;
    throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): " + [v.constructor.name]);
  };

  // output/Affjax.ResponseHeader/index.js
  var ResponseHeader = /* @__PURE__ */ (function() {
    function ResponseHeader2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ResponseHeader2.create = function(value0) {
      return function(value1) {
        return new ResponseHeader2(value0, value1);
      };
    };
    return ResponseHeader2;
  })();

  // output/Data.Argonaut.Core/foreign.js
  function id3(x46) {
    return x46;
  }
  function stringify(j) {
    return JSON.stringify(j);
  }

  // output/Data.Argonaut.Core/index.js
  var jsonEmptyObject = /* @__PURE__ */ id3(empty4);

  // output/Data.Argonaut.Parser/foreign.js
  function _jsonParser(fail3, succ, s) {
    try {
      return succ(JSON.parse(s));
    } catch (e) {
      return fail3(e.message);
    }
  }

  // output/Data.Argonaut.Parser/index.js
  var jsonParser = function(j) {
    return _jsonParser(Left.create, Right.create, j);
  };

  // output/JSURI/foreign.js
  function encodeURIComponent_to_RFC3986(input3) {
    return input3.replace(/[!'()*]/g, function(c) {
      return "%" + c.charCodeAt(0).toString(16);
    });
  }
  function _encodeFormURLComponent(fail3, succeed, input3) {
    try {
      return succeed(encodeURIComponent_to_RFC3986(encodeURIComponent(input3)).replace(/%20/g, "+"));
    } catch (err) {
      return fail3(err);
    }
  }
  function _decodeURIComponent(fail3, succeed, input3) {
    try {
      return succeed(decodeURIComponent(input3));
    } catch (err) {
      return fail3(err);
    }
  }

  // output/JSURI/index.js
  var encodeFormURLComponent = /* @__PURE__ */ (function() {
    return runFn3(_encodeFormURLComponent)($$const(Nothing.value))(Just.create);
  })();
  var $$decodeURIComponent = /* @__PURE__ */ (function() {
    return runFn3(_decodeURIComponent)($$const(Nothing.value))(Just.create);
  })();

  // output/Data.FormURLEncoded/index.js
  var apply2 = /* @__PURE__ */ apply(applyMaybe);
  var map36 = /* @__PURE__ */ map(functorMaybe);
  var traverse2 = /* @__PURE__ */ traverse(traversableArray)(applicativeMaybe);
  var toArray2 = function(v) {
    return v;
  };
  var encode = /* @__PURE__ */ (function() {
    var encodePart = function(v) {
      if (v.value1 instanceof Nothing) {
        return encodeFormURLComponent(v.value0);
      }
      ;
      if (v.value1 instanceof Just) {
        return apply2(map36(function(key) {
          return function(val) {
            return key + ("=" + val);
          };
        })(encodeFormURLComponent(v.value0)))(encodeFormURLComponent(v.value1.value0));
      }
      ;
      throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): " + [v.constructor.name]);
    };
    var $37 = map36(joinWith("&"));
    var $38 = traverse2(encodePart);
    return function($39) {
      return $37($38(toArray2($39)));
    };
  })();

  // output/Data.HTTP.Method/index.js
  var OPTIONS = /* @__PURE__ */ (function() {
    function OPTIONS2() {
    }
    ;
    OPTIONS2.value = new OPTIONS2();
    return OPTIONS2;
  })();
  var GET2 = /* @__PURE__ */ (function() {
    function GET3() {
    }
    ;
    GET3.value = new GET3();
    return GET3;
  })();
  var HEAD = /* @__PURE__ */ (function() {
    function HEAD2() {
    }
    ;
    HEAD2.value = new HEAD2();
    return HEAD2;
  })();
  var POST2 = /* @__PURE__ */ (function() {
    function POST3() {
    }
    ;
    POST3.value = new POST3();
    return POST3;
  })();
  var PUT = /* @__PURE__ */ (function() {
    function PUT2() {
    }
    ;
    PUT2.value = new PUT2();
    return PUT2;
  })();
  var DELETE = /* @__PURE__ */ (function() {
    function DELETE2() {
    }
    ;
    DELETE2.value = new DELETE2();
    return DELETE2;
  })();
  var TRACE = /* @__PURE__ */ (function() {
    function TRACE2() {
    }
    ;
    TRACE2.value = new TRACE2();
    return TRACE2;
  })();
  var CONNECT = /* @__PURE__ */ (function() {
    function CONNECT2() {
    }
    ;
    CONNECT2.value = new CONNECT2();
    return CONNECT2;
  })();
  var PROPFIND = /* @__PURE__ */ (function() {
    function PROPFIND2() {
    }
    ;
    PROPFIND2.value = new PROPFIND2();
    return PROPFIND2;
  })();
  var PROPPATCH = /* @__PURE__ */ (function() {
    function PROPPATCH2() {
    }
    ;
    PROPPATCH2.value = new PROPPATCH2();
    return PROPPATCH2;
  })();
  var MKCOL = /* @__PURE__ */ (function() {
    function MKCOL2() {
    }
    ;
    MKCOL2.value = new MKCOL2();
    return MKCOL2;
  })();
  var COPY = /* @__PURE__ */ (function() {
    function COPY2() {
    }
    ;
    COPY2.value = new COPY2();
    return COPY2;
  })();
  var MOVE = /* @__PURE__ */ (function() {
    function MOVE2() {
    }
    ;
    MOVE2.value = new MOVE2();
    return MOVE2;
  })();
  var LOCK = /* @__PURE__ */ (function() {
    function LOCK2() {
    }
    ;
    LOCK2.value = new LOCK2();
    return LOCK2;
  })();
  var UNLOCK = /* @__PURE__ */ (function() {
    function UNLOCK2() {
    }
    ;
    UNLOCK2.value = new UNLOCK2();
    return UNLOCK2;
  })();
  var PATCH = /* @__PURE__ */ (function() {
    function PATCH2() {
    }
    ;
    PATCH2.value = new PATCH2();
    return PATCH2;
  })();
  var unCustomMethod = function(v) {
    return v;
  };
  var showMethod = {
    show: function(v) {
      if (v instanceof OPTIONS) {
        return "OPTIONS";
      }
      ;
      if (v instanceof GET2) {
        return "GET";
      }
      ;
      if (v instanceof HEAD) {
        return "HEAD";
      }
      ;
      if (v instanceof POST2) {
        return "POST";
      }
      ;
      if (v instanceof PUT) {
        return "PUT";
      }
      ;
      if (v instanceof DELETE) {
        return "DELETE";
      }
      ;
      if (v instanceof TRACE) {
        return "TRACE";
      }
      ;
      if (v instanceof CONNECT) {
        return "CONNECT";
      }
      ;
      if (v instanceof PROPFIND) {
        return "PROPFIND";
      }
      ;
      if (v instanceof PROPPATCH) {
        return "PROPPATCH";
      }
      ;
      if (v instanceof MKCOL) {
        return "MKCOL";
      }
      ;
      if (v instanceof COPY) {
        return "COPY";
      }
      ;
      if (v instanceof MOVE) {
        return "MOVE";
      }
      ;
      if (v instanceof LOCK) {
        return "LOCK";
      }
      ;
      if (v instanceof UNLOCK) {
        return "UNLOCK";
      }
      ;
      if (v instanceof PATCH) {
        return "PATCH";
      }
      ;
      throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): " + [v.constructor.name]);
    }
  };
  var print6 = /* @__PURE__ */ either(/* @__PURE__ */ show(showMethod))(unCustomMethod);

  // output/Effect.Aff.Compat/index.js
  var fromEffectFnAff = function(v) {
    return makeAff(function(k) {
      return function __do5() {
        var v1 = v(function($9) {
          return k(Left.create($9))();
        }, function($10) {
          return k(Right.create($10))();
        });
        return function(e) {
          return makeAff(function(k2) {
            return function __do6() {
              v1(e, function($11) {
                return k2(Left.create($11))();
              }, function($12) {
                return k2(Right.create($12))();
              });
              return nonCanceler;
            };
          });
        };
      };
    });
  };

  // output/Affjax/index.js
  var pure14 = /* @__PURE__ */ pure(/* @__PURE__ */ applicativeExceptT(monadIdentity));
  var fail2 = /* @__PURE__ */ fail(monadIdentity);
  var unsafeReadTagged2 = /* @__PURE__ */ unsafeReadTagged(monadIdentity);
  var alt8 = /* @__PURE__ */ alt(/* @__PURE__ */ altExceptT(semigroupNonEmptyList)(monadIdentity));
  var composeKleisliFlipped4 = /* @__PURE__ */ composeKleisliFlipped(/* @__PURE__ */ bindExceptT(monadIdentity));
  var map37 = /* @__PURE__ */ map(functorMaybe);
  var any3 = /* @__PURE__ */ any(foldableArray)(heytingAlgebraBoolean);
  var eq5 = /* @__PURE__ */ eq(eqString);
  var bindFlipped8 = /* @__PURE__ */ bindFlipped(bindMaybe);
  var map111 = /* @__PURE__ */ map(functorArray);
  var mapFlipped4 = /* @__PURE__ */ mapFlipped(functorAff);
  var $$try3 = /* @__PURE__ */ $$try(monadErrorAff);
  var pure15 = /* @__PURE__ */ pure(applicativeAff);
  var RequestContentError = /* @__PURE__ */ (function() {
    function RequestContentError2(value0) {
      this.value0 = value0;
    }
    ;
    RequestContentError2.create = function(value0) {
      return new RequestContentError2(value0);
    };
    return RequestContentError2;
  })();
  var ResponseBodyError = /* @__PURE__ */ (function() {
    function ResponseBodyError2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ResponseBodyError2.create = function(value0) {
      return function(value1) {
        return new ResponseBodyError2(value0, value1);
      };
    };
    return ResponseBodyError2;
  })();
  var TimeoutError = /* @__PURE__ */ (function() {
    function TimeoutError2() {
    }
    ;
    TimeoutError2.value = new TimeoutError2();
    return TimeoutError2;
  })();
  var RequestFailedError = /* @__PURE__ */ (function() {
    function RequestFailedError2() {
    }
    ;
    RequestFailedError2.value = new RequestFailedError2();
    return RequestFailedError2;
  })();
  var XHROtherError = /* @__PURE__ */ (function() {
    function XHROtherError2(value0) {
      this.value0 = value0;
    }
    ;
    XHROtherError2.create = function(value0) {
      return new XHROtherError2(value0);
    };
    return XHROtherError2;
  })();
  var request2 = function(driver2) {
    return function(req2) {
      var parseJSON = function(v2) {
        if (v2 === "") {
          return pure14(jsonEmptyObject);
        }
        ;
        return either(function($74) {
          return fail2(ForeignError.create($74));
        })(pure14)(jsonParser(v2));
      };
      var fromResponse = (function() {
        if (req2.responseFormat instanceof $$ArrayBuffer) {
          return unsafeReadTagged2("ArrayBuffer");
        }
        ;
        if (req2.responseFormat instanceof Blob) {
          return unsafeReadTagged2("Blob");
        }
        ;
        if (req2.responseFormat instanceof Document) {
          return function(x46) {
            return alt8(unsafeReadTagged2("Document")(x46))(alt8(unsafeReadTagged2("XMLDocument")(x46))(unsafeReadTagged2("HTMLDocument")(x46)));
          };
        }
        ;
        if (req2.responseFormat instanceof Json) {
          return composeKleisliFlipped4(function($75) {
            return req2.responseFormat.value0(parseJSON($75));
          })(unsafeReadTagged2("String"));
        }
        ;
        if (req2.responseFormat instanceof $$String) {
          return unsafeReadTagged2("String");
        }
        ;
        if (req2.responseFormat instanceof Ignore) {
          return $$const(req2.responseFormat.value0(pure14(unit)));
        }
        ;
        throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): " + [req2.responseFormat.constructor.name]);
      })();
      var extractContent = function(v2) {
        if (v2 instanceof ArrayView) {
          return new Right(v2.value0(unsafeToForeign));
        }
        ;
        if (v2 instanceof Blob2) {
          return new Right(unsafeToForeign(v2.value0));
        }
        ;
        if (v2 instanceof Document2) {
          return new Right(unsafeToForeign(v2.value0));
        }
        ;
        if (v2 instanceof $$String2) {
          return new Right(unsafeToForeign(v2.value0));
        }
        ;
        if (v2 instanceof FormData) {
          return new Right(unsafeToForeign(v2.value0));
        }
        ;
        if (v2 instanceof FormURLEncoded) {
          return note("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(map37(unsafeToForeign)(encode(v2.value0)));
        }
        ;
        if (v2 instanceof Json2) {
          return new Right(unsafeToForeign(stringify(v2.value0)));
        }
        ;
        throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): " + [v2.constructor.name]);
      };
      var addHeader = function(mh) {
        return function(hs) {
          if (mh instanceof Just && !any3(on(eq5)(name15)(mh.value0))(hs)) {
            return snoc(hs)(mh.value0);
          }
          ;
          return hs;
        };
      };
      var headers = function(reqContent) {
        return addHeader(map37(ContentType.create)(bindFlipped8(toMediaType2)(reqContent)))(addHeader(map37(Accept.create)(toMediaType(req2.responseFormat)))(req2.headers));
      };
      var ajaxRequest = function(v2) {
        return {
          method: print6(req2.method),
          url: req2.url,
          headers: map111(function(h) {
            return {
              field: name15(h),
              value: value13(h)
            };
          })(headers(req2.content)),
          content: v2,
          responseType: toResponseType(req2.responseFormat),
          username: toNullable(req2.username),
          password: toNullable(req2.password),
          withCredentials: req2.withCredentials,
          timeout: fromMaybe(0)(map37(function(v1) {
            return v1;
          })(req2.timeout))
        };
      };
      var send = function(content3) {
        return mapFlipped4($$try3(fromEffectFnAff(_ajax(driver2, "AffjaxTimeoutErrorMessageIdent", "AffjaxRequestFailedMessageIdent", ResponseHeader.create, ajaxRequest(content3)))))(function(v2) {
          if (v2 instanceof Right) {
            var v1 = runExcept(fromResponse(v2.value0.body));
            if (v1 instanceof Left) {
              return new Left(new ResponseBodyError(head2(v1.value0), v2.value0));
            }
            ;
            if (v1 instanceof Right) {
              return new Right({
                headers: v2.value0.headers,
                status: v2.value0.status,
                statusText: v2.value0.statusText,
                body: v1.value0
              });
            }
            ;
            throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): " + [v1.constructor.name]);
          }
          ;
          if (v2 instanceof Left) {
            return new Left((function() {
              var message2 = message(v2.value0);
              var $61 = message2 === "AffjaxTimeoutErrorMessageIdent";
              if ($61) {
                return TimeoutError.value;
              }
              ;
              var $62 = message2 === "AffjaxRequestFailedMessageIdent";
              if ($62) {
                return RequestFailedError.value;
              }
              ;
              return new XHROtherError(v2.value0);
            })());
          }
          ;
          throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): " + [v2.constructor.name]);
        });
      };
      if (req2.content instanceof Nothing) {
        return send(toNullable(Nothing.value));
      }
      ;
      if (req2.content instanceof Just) {
        var v = extractContent(req2.content.value0);
        if (v instanceof Right) {
          return send(toNullable(new Just(v.value0)));
        }
        ;
        if (v instanceof Left) {
          return pure15(new Left(new RequestContentError(v.value0)));
        }
        ;
        throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): " + [v.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): " + [req2.content.constructor.name]);
    };
  };
  var printError = function(v) {
    if (v instanceof RequestContentError) {
      return "There was a problem with the request content: " + v.value0;
    }
    ;
    if (v instanceof ResponseBodyError) {
      return "There was a problem with the response body: " + renderForeignError(v.value0);
    }
    ;
    if (v instanceof TimeoutError) {
      return "There was a problem making the request: timeout";
    }
    ;
    if (v instanceof RequestFailedError) {
      return "There was a problem making the request: request failed";
    }
    ;
    if (v instanceof XHROtherError) {
      return "There was a problem making the request: " + message(v.value0);
    }
    ;
    throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): " + [v.constructor.name]);
  };
  var defaultRequest = /* @__PURE__ */ (function() {
    return {
      method: new Left(GET2.value),
      url: "/",
      headers: [],
      content: Nothing.value,
      username: Nothing.value,
      password: Nothing.value,
      withCredentials: false,
      responseFormat: ignore,
      timeout: Nothing.value
    };
  })();
  var get3 = function(driver2) {
    return function(rf) {
      return function(u2) {
        return request2(driver2)({
          method: defaultRequest.method,
          headers: defaultRequest.headers,
          content: defaultRequest.content,
          username: defaultRequest.username,
          password: defaultRequest.password,
          withCredentials: defaultRequest.withCredentials,
          timeout: defaultRequest.timeout,
          url: u2,
          responseFormat: rf
        });
      };
    };
  };

  // output/Affjax.Web/index.js
  var get4 = /* @__PURE__ */ get3(driver);

  // output/PSD3.Data.Graph.Algorithms/index.js
  var bind9 = /* @__PURE__ */ bind(bindMaybe);
  var map38 = /* @__PURE__ */ map(functorArray);
  var member3 = /* @__PURE__ */ member2(ordInt);
  var mapFlipped5 = /* @__PURE__ */ mapFlipped(functorArray);
  var append10 = /* @__PURE__ */ append(semigroupArray);
  var append15 = /* @__PURE__ */ append(/* @__PURE__ */ semigroupSet(ordInt));
  var fromFoldable11 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordInt);
  var getReachableNodes = function(config) {
    return function(rootId) {
      return function(graph) {
        var processNextPath = function(state3) {
          return bind9(uncons(state3.openPaths))(function(x46) {
            return bind9(head(x46.head))(function(currentId) {
              var links = getLinksFrom(currentId)(graph);
              var targetIds = map38(config.getLinkTarget)(links);
              var newTargets = partition(function(targetId) {
                return !member3(targetId)(state3.nodes);
              })(targetIds);
              var prunedEdges = mapFlipped5(newTargets.no)(function(targetId) {
                return new Tuple(currentId, targetId);
              });
              var newPaths = mapFlipped5(newTargets.yes)(function(targetId) {
                return cons(targetId)(x46.head);
              });
              var $29 = $$null2(newPaths);
              if ($29) {
                return new Just({
                  nodes: state3.nodes,
                  spanningTree: state3.spanningTree,
                  openPaths: x46.tail,
                  paths: cons(x46.head)(state3.paths),
                  redundantEdges: append10(state3.redundantEdges)(prunedEdges)
                });
              }
              ;
              return new Just({
                paths: state3.paths,
                openPaths: append10(x46.tail)(newPaths),
                nodes: append15(state3.nodes)(fromFoldable11(newTargets.yes)),
                spanningTree: append10(state3.spanningTree)(map38(function(targetId) {
                  return new Tuple(currentId, targetId);
                })(newTargets.yes)),
                redundantEdges: append10(state3.redundantEdges)(prunedEdges)
              });
            });
          });
        };
        var go2 = function($copy_state) {
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(state3) {
            if ($$null2(state3.openPaths)) {
              $tco_done = true;
              return state3;
            }
            ;
            if (otherwise) {
              var v = processNextPath(state3);
              if (v instanceof Nothing) {
                $tco_done = true;
                return state3;
              }
              ;
              if (v instanceof Just) {
                $copy_state = v.value0;
                return;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Data.Graph.Algorithms (line 69, column 21 - line 71, column 35): " + [v.constructor.name]);
            }
            ;
            throw new Error("Failed pattern match at PSD3.Data.Graph.Algorithms (line 67, column 5 - line 71, column 35): " + [state3.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($copy_state);
          }
          ;
          return $tco_result;
        };
        var initialState7 = {
          nodes: empty7,
          spanningTree: [],
          redundantEdges: [],
          paths: [],
          openPaths: [[rootId]]
        };
        var finalState = go2(initialState7);
        return {
          nodes: finalState.nodes,
          spanningTree: finalState.spanningTree,
          redundantEdges: finalState.redundantEdges,
          paths: finalState.paths
        };
      };
    };
  };

  // output/PSD3.Layout.Hierarchy.Tree4/index.js
  var compare3 = /* @__PURE__ */ compare(ordInt);
  var map39 = /* @__PURE__ */ map(functorList);
  var fromFoldable14 = /* @__PURE__ */ fromFoldable2(foldableList);
  var fromFoldable15 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var add2 = /* @__PURE__ */ add(semiringNumber);
  var fromFoldable23 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var map112 = /* @__PURE__ */ map(functorArray);
  var maximum2 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var minimum2 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum1 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var scanl3 = /* @__PURE__ */ scanl(traversableList);
  var Contours = /* @__PURE__ */ (function() {
    function Contours2(value0) {
      this.value0 = value0;
    }
    ;
    Contours2.create = function(value0) {
      return new Contours2(value0);
    };
    return Contours2;
  })();
  var sortByHeight = function(v) {
    var compareByHeight = function(v1) {
      return function(v2) {
        return compare3(v2.value0.height)(v1.value0.height);
      };
    };
    var sortedGrandchildren = map39(sortByHeight)(v.value1);
    var childArray = fromFoldable14(sortedGrandchildren);
    var sortedArray = sortBy(compareByHeight)(childArray);
    var sortedChildrenList = fromFoldable15(sortedArray);
    return new Node2(v.value0, sortedChildrenList);
  };
  var singletonContours = /* @__PURE__ */ (function() {
    return new Contours({
      left: new Cons(0, Nil.value),
      right: new Cons(0, Nil.value)
    });
  })();
  var scanContours = function(minSep) {
    return function(v) {
      return function(v1) {
        var go2 = function($copy_v2) {
          return function($copy_v3) {
            return function($copy_v4) {
              var $tco_var_v2 = $copy_v2;
              var $tco_var_v3 = $copy_v3;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(v2, v3, v4) {
                if (v3 instanceof Nil) {
                  $tco_done = true;
                  return v2;
                }
                ;
                if (v4 instanceof Nil) {
                  $tco_done = true;
                  return v2;
                }
                ;
                if (v3 instanceof Cons && v4 instanceof Cons) {
                  var actualSep = v2 + v4.value0 - v3.value0;
                  var neededSep = (function() {
                    var $66 = actualSep < minSep;
                    if ($66) {
                      return v2 + (minSep - actualSep);
                    }
                    ;
                    return v2;
                  })();
                  $tco_var_v2 = neededSep;
                  $tco_var_v3 = v3.value1;
                  $copy_v4 = v4.value1;
                  return;
                }
                ;
                throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 195, column 5 - line 195, column 49): " + [v2.constructor.name, v3.constructor.name, v4.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_v2, $tco_var_v3, $copy_v4);
              }
              ;
              return $tco_result;
            };
          };
        };
        return go2(minSep)(v.value0.right)(v1.value0.left);
      };
    };
  };
  var scaleToPixels = function(config) {
    return function(inputTree) {
      var allNodes3 = fromFoldable23(inputTree);
      var allX = map112(function(n) {
        return n.x;
      })(allNodes3);
      var maxX = fromMaybe(1)(maximum2(allX));
      var minX = fromMaybe(0)(minimum2(allX));
      var xRange = (function() {
        var $73 = maxX - minX === 0;
        if ($73) {
          return 1;
        }
        ;
        return maxX - minX;
      })();
      var scaleX2 = function(x46) {
        return (x46 - minX) / xRange * config.size.width;
      };
      var allDepths = map112(function(n) {
        return n.depth;
      })(allNodes3);
      var maxDepth2 = fromMaybe(1)(maximum1(allDepths));
      var scaleY2 = function(depth) {
        return toNumber(depth) / toNumber(maxDepth2) * config.size.height;
      };
      var go2 = function(v) {
        return new Node2((function() {
          var $75 = {};
          for (var $76 in v.value0) {
            if ({}.hasOwnProperty.call(v.value0, $76)) {
              $75[$76] = v["value0"][$76];
            }
            ;
          }
          ;
          $75.x = scaleX2(v.value0.x);
          $75.y = scaleY2(v.value0.depth);
          return $75;
        })(), map39(go2)(v.value1));
      };
      return go2(inputTree);
    };
  };
  var petrify = function(parentX) {
    return function(v) {
      var nodeY = toNumber(v.value0.value1.depth);
      var nodeX = parentX + v.value0.value0.offset;
      var childrenWithCoords = map39(petrify(nodeX))(v.value1);
      return new Node2((function() {
        var $82 = {};
        for (var $83 in v.value0.value1) {
          if ({}.hasOwnProperty.call(v.value0.value1, $83)) {
            $82[$83] = v["value0"]["value1"][$83];
          }
          ;
        }
        ;
        $82.x = nodeX;
        $82.y = nodeY;
        return $82;
      })(), childrenWithCoords);
    };
  };
  var mergeContoursRight = function(contours) {
    var mergeLevel = function(cs) {
      var currentLevels = mapMaybe(function(c) {
        if (c instanceof Cons) {
          return new Just(c.value0);
        }
        ;
        if (c instanceof Nil) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 282, column 18 - line 284, column 27): " + [c.constructor.name]);
      })(cs);
      var v = head(currentLevels);
      if (v instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (v instanceof Just) {
        var restContours = mapMaybe(function(c) {
          if (c instanceof Cons) {
            return new Just(c.value1);
          }
          ;
          if (c instanceof Nil) {
            return Nothing.value;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 294, column 24 - line 296, column 33): " + [c.constructor.name]);
        })(cs);
        var maxVal = fromMaybe(0)(maximum2(currentLevels));
        return new Cons(maxVal, mergeLevel(restContours));
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 287, column 9 - line 299, column 52): " + [v.constructor.name]);
    };
    if (contours.length === 0) {
      return Nil.value;
    }
    ;
    return mergeLevel(contours);
  };
  var mergeContoursLeft = function(contours) {
    var mergeLevel = function(cs) {
      var currentLevels = mapMaybe(function(c) {
        if (c instanceof Cons) {
          return new Just(c.value0);
        }
        ;
        if (c instanceof Nil) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 251, column 18 - line 253, column 27): " + [c.constructor.name]);
      })(cs);
      var v = head(currentLevels);
      if (v instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (v instanceof Just) {
        var restContours = mapMaybe(function(c) {
          if (c instanceof Cons) {
            return new Just(c.value1);
          }
          ;
          if (c instanceof Nil) {
            return Nothing.value;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 263, column 24 - line 265, column 33): " + [c.constructor.name]);
        })(cs);
        var minVal = fromMaybe(0)(minimum2(currentLevels));
        return new Cons(minVal, mergeLevel(restContours));
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 256, column 9 - line 268, column 52): " + [v.constructor.name]);
    };
    if (contours.length === 0) {
      return Nil.value;
    }
    ;
    return mergeLevel(contours);
  };
  var spliceContours = function(offsets) {
    return function(contours) {
      var v = fromFoldable14(zipWith2(Tuple.create)(offsets)(contours));
      if (v.length === 0) {
        return singletonContours;
      }
      ;
      if (v.length === 1) {
        return new Contours({
          left: new Cons(0, map39(function(x46) {
            return x46 + v[0].value0;
          })(v[0].value1.value0.left)),
          right: new Cons(0, map39(function(x46) {
            return x46 + v[0].value0;
          })(v[0].value1.value0.right))
        });
      }
      ;
      var shiftedContours = map112(function(v1) {
        return new Contours({
          left: map39(function(x46) {
            return x46 + v1.value0;
          })(v1.value1.value0.left),
          right: map39(function(x46) {
            return x46 + v1.value0;
          })(v1.value1.value0.right)
        });
      })(v);
      var mergedRight = mergeContoursRight(map112(function(v1) {
        return v1.value0.right;
      })(shiftedContours));
      var mergedLeft = mergeContoursLeft(map112(function(v1) {
        return v1.value0.left;
      })(shiftedContours));
      return new Contours({
        left: new Cons(0, mergedLeft),
        right: new Cons(0, mergedRight)
      });
    };
  };
  var defaultTreeConfig = {
    size: {
      width: 800,
      height: 600
    },
    minSeparation: 1
  };
  var computeSeparations = function(minSep) {
    return function(contours) {
      var tailSafe = function(v) {
        if (v instanceof Nil) {
          return Nil.value;
        }
        ;
        if (v instanceof Cons) {
          return v.value1;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree4 (line 183, column 5 - line 183, column 43): " + [v.constructor.name]);
      };
      if (contours instanceof Nil) {
        return Nil.value;
      }
      ;
      if (contours instanceof Cons && contours.value1 instanceof Nil) {
        return Nil.value;
      }
      ;
      return zipWith2(scanContours(minSep))(contours)(tailSafe(contours));
    };
  };
  var render5 = function(minSep) {
    return function(inputTree) {
      var updateOffset = function(v2) {
        return function(newOffset) {
          return new Node2(new Tuple({
            offset: newOffset
          }, v2.value0.value1), v2.value1);
        };
      };
      var renderWithContours = function(v2) {
        var childCount = length4(v2.value1);
        if (childCount === 0) {
          return new Tuple(new Node2(new Tuple({
            offset: 0
          }, v2.value0), Nil.value), singletonContours);
        }
        ;
        var childResults = map39(renderWithContours)(v2.value1);
        var childTrees = map39(function(v1) {
          return v1.value0;
        })(childResults);
        var childContours = map39(function(v1) {
          return v1.value1;
        })(childResults);
        var separations = computeSeparations(minSep)(childContours);
        var childAbsoluteOffsets = new Cons(0, scanl3(add2)(0)(separations));
        var leftmostOffset = fromMaybe(0)(head(fromFoldable14(childAbsoluteOffsets)));
        var rightmostOffset = fromMaybe(0)(last(fromFoldable14(childAbsoluteOffsets)));
        var parentOffset = (leftmostOffset + rightmostOffset) / 2;
        var childRelativeOffsets = map39(function(absOffset) {
          return absOffset - parentOffset;
        })(childAbsoluteOffsets);
        var childrenWithOffsets = zipWith2(updateOffset)(childTrees)(childRelativeOffsets);
        var parentContours = spliceContours(childRelativeOffsets)(childContours);
        var resultTree = new Node2(new Tuple({
          offset: parentOffset
        }, v2.value0), childrenWithOffsets);
        return new Tuple(resultTree, parentContours);
      };
      var v = renderWithContours(inputTree);
      return v.value0;
    };
  };
  var addHeightField = function(v) {
    var childrenWithHeight = map39(addHeightField)(v.value1);
    var nodeHeight = (function() {
      var v1 = fromFoldable14(childrenWithHeight);
      if (v1.length === 0) {
        return 0;
      }
      ;
      var childHeights = map112(function(v2) {
        return v2.value0.height;
      })(v1);
      var maxChildHeight = fromMaybe(0)(maximum1(childHeights));
      return maxChildHeight + 1 | 0;
    })();
    return new Node2((function() {
      var $150 = {};
      for (var $151 in v.value0) {
        if ({}.hasOwnProperty.call(v.value0, $151)) {
          $150[$151] = v["value0"][$151];
        }
        ;
      }
      ;
      $150.height = nodeHeight;
      return $150;
    })(), childrenWithHeight);
  };
  var addDepth = function(currentDepth) {
    return function(v) {
      return new Node2((function() {
        var $157 = {};
        for (var $158 in v.value0) {
          if ({}.hasOwnProperty.call(v.value0, $158)) {
            $157[$158] = v["value0"][$158];
          }
          ;
        }
        ;
        $157.depth = currentDepth;
        return $157;
      })(), map39(addDepth(currentDepth + 1 | 0))(v.value1));
    };
  };
  var tree2 = function(config) {
    return function(inputTree) {
      var withDepth = addDepth(0)(inputTree);
      var rendered = render5(config.minSeparation)(withDepth);
      var withCoords = petrify(0)(rendered);
      var scaled = scaleToPixels(config)(withCoords);
      return scaled;
    };
  };
  var treeWithSorting = function(config) {
    return function(inputTree) {
      var withDepth = addDepth(0)(inputTree);
      var withHeight = addHeightField(withDepth);
      var sorted = sortByHeight(withHeight);
      var rendered = render5(config.minSeparation)(sorted);
      var withCoords = petrify(0)(rendered);
      var scaled = scaleToPixels(config)(withCoords);
      return scaled;
    };
  };

  // output/D3.Viz.Spago.Tree/index.js
  var lookup10 = /* @__PURE__ */ lookup(ordInt);
  var map40 = /* @__PURE__ */ map(functorArray);
  var map113 = /* @__PURE__ */ map(functorList);
  var fromFoldable16 = /* @__PURE__ */ fromFoldable2(foldableList);
  var insert8 = /* @__PURE__ */ insert(ordInt);
  var foldl10 = /* @__PURE__ */ foldl(foldableList);
  var fromFoldable17 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var fromFoldable24 = /* @__PURE__ */ fromFoldable2(foldableSet);
  var elem4 = /* @__PURE__ */ elem2(eqInt);
  var fromFoldable32 = /* @__PURE__ */ fromFoldable(ordInt)(foldableArray);
  var append11 = /* @__PURE__ */ append(semigroupArray);
  var updateNodeTreeXY = function(nodes) {
    return function(treeDerivedDataMap) {
      var updateNode2 = function(node) {
        var v = lookup10(node.id)(treeDerivedDataMap);
        if (v instanceof Nothing) {
          return node;
        }
        ;
        if (v instanceof Just) {
          return {
            x: node.x,
            y: node.y,
            vx: node.vx,
            vy: node.vy,
            fx: node.fx,
            fy: node.fy,
            id: node.id,
            links: node.links,
            showChildren: node.showChildren,
            containerID: node.containerID,
            containerName: node.containerName,
            containsMany: node.containsMany,
            inSim: node.inSim,
            loc: node.loc,
            name: node.name,
            nodetype: node.nodetype,
            gridXY: node.gridXY,
            cluster: node.cluster,
            focusX: node.focusX,
            focusY: node.focusY,
            r: node.r,
            treeXY: notNull({
              x: v.value0.x,
              y: v.value0.y
            }),
            treeDepth: notNull(v.value0.depth),
            connected: true
          };
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.Spago.Tree (line 144, column 7 - line 150, column 17): " + [v.constructor.name]);
      };
      return map40(updateNode2)(nodes);
    };
  };
  var tupleToLink = function(linktype) {
    return function(v) {
      return {
        source: v.value0,
        target: v.value1,
        linktype,
        inSim: true
      };
    };
  };
  var mapTree = function(f) {
    return function(v) {
      return new Node2(f(v.value0), map113(mapTree(f))(v.value1));
    };
  };
  var isP2P_Link2 = function(link4) {
    if (link4.linktype instanceof P2P) {
      return true;
    }
    ;
    return false;
  };
  var flattenTreeToMap = function(tree4) {
    var go2 = function(v) {
      return function(acc) {
        var isLeaf = (function() {
          if (v.value1 instanceof Nil) {
            return true;
          }
          ;
          return false;
        })();
        var childIDs = fromFoldable16(map113(function(v1) {
          return v1.value0.id;
        })(v.value1));
        var treeFields = {
          x: v.value0.x,
          y: v.value0.y,
          isTreeLeaf: isLeaf,
          depth: v.value0.depth,
          childIDs
        };
        var accWithNode = insert8(v.value0.id)(treeFields)(acc);
        return foldl10(function(m) {
          return function(child) {
            return go2(child)(m);
          };
        })(accWithNode)(v.value1);
      };
    };
    return go2(tree4)(empty2);
  };
  var buildIDTree = function(rootID) {
    return function(links) {
      var getChildren4 = function(nodeId) {
        var matchingLinks = filter(function(link4) {
          return link4.source === nodeId;
        })(links);
        return map40(function(link4) {
          return link4.target;
        })(matchingLinks);
      };
      var go2 = function(nodeId) {
        var children3 = getChildren4(nodeId);
        var childTrees = map40(go2)(children3);
        return new Node2(nodeId, fromFoldable17(childTrees));
      };
      return go2(rootID);
    };
  };
  var treeReduction = function(rootID) {
    return function(model) {
      var reachable = getReachableNodes(spagoGraphConfig)(rootID)(model.graphModel);
      var reachableNodes = fromFoldable24(reachable.nodes);
      var treenodes = partition(function(n) {
        return elem4(n.id)(reachableNodes) || n.id === rootID;
      })(model.nodes);
      var treelinks = map40(tupleToLink(M2M_Tree.value))(reachable.spanningTree);
      var prunedTreeLinks = map40(tupleToLink(M2M_Graph.value))(reachable.redundantEdges);
      var onlyPackageLinks = filter(isP2P_Link2)(model.links);
      var nodeMap = fromFoldable32(map40(function(n) {
        return new Tuple(n.id, n);
      })(model.nodes));
      var links = append11(treelinks)(append11(prunedTreeLinks)(onlyPackageLinks));
      var idTree = buildIDTree(rootID)(treelinks);
      var dataTree = mapTree(function(nodeId) {
        var v = lookup10(nodeId)(nodeMap);
        if (v instanceof Just) {
          return {
            id: nodeId,
            x: v.value0.x,
            y: v.value0.y,
            depth: 0
          };
        }
        ;
        if (v instanceof Nothing) {
          return {
            id: nodeId,
            x: 0,
            y: 0,
            depth: 0
          };
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.Spago.Tree (line 108, column 9 - line 110, column 62): " + [v.constructor.name]);
      })(idTree);
      var config = {
        size: {
          width: 4e3,
          height: 800
        },
        minSeparation: 8
      };
      var laidOutTree = tree2(config)(dataTree);
      var treeDerivedDataMap = flattenTreeToMap(laidOutTree);
      var positionedNodes = updateNodeTreeXY(treenodes.yes)(treeDerivedDataMap);
      return {
        graph: model.graph,
        graphModel: model.graphModel,
        links,
        nodes: append11(positionedNodes)(treenodes.no),
        tree: model.tree,
        maps: {
          name2ID: model.maps.name2ID,
          id2Name: model.maps.id2Name,
          id2Package: model.maps.id2Package,
          id2LOC: model.maps.id2LOC,
          id2TreeData: treeDerivedDataMap
        }
      };
    };
  };

  // output/PSD3.CodeExplorer.Data/index.js
  var bind10 = /* @__PURE__ */ bind(bindMaybe);
  var lookup11 = /* @__PURE__ */ lookup(ordString);
  var pure16 = /* @__PURE__ */ pure(applicativeMaybe);
  var bind15 = /* @__PURE__ */ bind(bindAff);
  var apply3 = /* @__PURE__ */ apply(applyEither);
  var map41 = /* @__PURE__ */ map(functorEither);
  var pure17 = /* @__PURE__ */ pure(applicativeAff);
  var addTreeToModel = function(rootName) {
    return function(maybeModel) {
      return bind10(maybeModel)(function(model) {
        return bind10(lookup11(rootName)(model.maps.name2ID))(function(rootID) {
          return pure16(treeReduction(rootID)(model));
        });
      });
    };
  };
  var readModelData = /* @__PURE__ */ (function() {
    return bind15(get4(string)("./data/spago-data/modules.json"))(function(moduleJSON) {
      return bind15(get4(string)("./data/spago-data/packages.json"))(function(packageJSON) {
        return bind15(get4(string)("./data/spago-data/lsdeps.jsonlines"))(function(lsdepJSON) {
          return bind15(get4(string)("./data/spago-data/LOC.json"))(function(locJSON) {
            var model = hush(apply3(apply3(apply3(map41(convertFilesToGraphModel)(moduleJSON))(packageJSON))(lsdepJSON))(locJSON));
            return pure17(addTreeToModel("PSD3.Main")(model));
          });
        });
      });
    });
  })();

  // output/PSD3.Internal.Simulation.Config/index.js
  var yVal = function(n) {
    return new AttributeSetter("y", new NumberAttr(new Static(n)));
  };
  var yFn = function(fn) {
    return new AttributeSetter("y", new NumberAttr(new FnI(fn)));
  };
  var xVal = function(n) {
    return new AttributeSetter("x", new NumberAttr(new Static(n)));
  };
  var xFn = function(fn) {
    return new AttributeSetter("x", new NumberAttr(new FnI(fn)));
  };
  var thetaVal = function(n) {
    return new AttributeSetter("theta", new NumberAttr(new Static(n)));
  };
  var strengthVal = function(n) {
    return new AttributeSetter("strength", new NumberAttr(new Static(n)));
  };
  var radiusVal = function(n) {
    return new AttributeSetter("radius", new NumberAttr(new Static(n)));
  };
  var radiusFn = function(fn) {
    return new AttributeSetter("radius", new NumberAttr(new FnI(fn)));
  };
  var numKey = function(fn) {
    return new AttributeSetter("keyFn", new NumberAttr(new Fn(fn)));
  };
  var distanceVal = function(n) {
    return new AttributeSetter("distance", new NumberAttr(new Static(n)));
  };
  var distanceMinVal = function(n) {
    return new AttributeSetter("distanceMin", new NumberAttr(new Static(n)));
  };
  var distanceMaxVal = function(n) {
    return new AttributeSetter("distanceMax", new NumberAttr(new Static(n)));
  };

  // output/PSD3.Internal.Simulation.Forces/index.js
  var _status2 = /* @__PURE__ */ _status(strongFn);
  var show11 = /* @__PURE__ */ show(showRegularForceType);
  var _name2 = /* @__PURE__ */ _name(strongForget);
  var fromFoldable18 = /* @__PURE__ */ fromFoldable(ordString);
  var elem5 = /* @__PURE__ */ elem2(eqString);
  var unwrap8 = /* @__PURE__ */ unwrap();
  var map114 = /* @__PURE__ */ map(functorArray);
  var showType = function(v) {
    if (v instanceof LinkForce) {
      return "linkForce";
    }
    ;
    if (v instanceof RegularForce) {
      return show11(v.value0);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 33, column 3 - line 35, column 29): " + [v.constructor.name]);
  };
  var removeForceFromSimulation = function(v) {
    return function(simulation_) {
      if (v.type instanceof RegularForce) {
        return setAsNullForceInSimulation_(simulation_)(v.name);
      }
      ;
      if (v.type instanceof LinkForce) {
        return setAsNullForceInSimulation_(simulation_)(v.name);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 112, column 3 - line 115, column 73): " + [v.type.constructor.name]);
    };
  };
  var putForceInSimulation = function(v) {
    return function(simulation_) {
      if (v.type instanceof RegularForce) {
        return putForceInSimulation_(simulation_)(v.name)(v.force_);
      }
      ;
      if (v.type instanceof LinkForce) {
        return putForceInSimulation_(simulation_)(v.name)(v.force_);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 103, column 3 - line 107, column 80): " + [v.type.constructor.name]);
    };
  };
  var initialize2 = function(dictFoldable) {
    var fromFoldable124 = fromFoldable18(dictFoldable);
    return function(dictFunctor) {
      var map211 = map(dictFunctor);
      return function(forces3) {
        return fromFoldable124(map211(function(f) {
          return new Tuple(view(_name2)(f), f);
        })(forces3));
      };
    };
  };
  var enableForce = /* @__PURE__ */ (function() {
    return set(_status2)(ForceActive.value);
  })();
  var enableByLabels = function(simulation) {
    return function(labels9) {
      return function(force2) {
        var $43 = elem5(view(_name2)(force2))(labels9);
        if ($43) {
          var v = putForceInSimulation(force2)(simulation);
          return enableForce(force2);
        }
        ;
        return force2;
      };
    };
  };
  var disableForce = /* @__PURE__ */ (function() {
    return set(_status2)(ForceDisabled.value);
  })();
  var disableByLabels = function(simulation) {
    return function(labels9) {
      return function(force2) {
        var $45 = elem5(view(_name2)(force2))(labels9);
        if ($45) {
          var v = removeForceFromSimulation(force2)(simulation);
          return disableForce(force2);
        }
        ;
        return force2;
      };
    };
  };
  var createRegularForce_ = function(v) {
    if (v instanceof ForceManyBody) {
      return forceMany_(unit);
    }
    ;
    if (v instanceof ForceCenter) {
      return forceCenter_(unit);
    }
    ;
    if (v instanceof ForceCollide) {
      return forceCollideFn_(unit);
    }
    ;
    if (v instanceof ForceX) {
      return forceX_(unit);
    }
    ;
    if (v instanceof ForceY) {
      return forceY_(unit);
    }
    ;
    if (v instanceof ForceRadial) {
      return forceRadial_(unit);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 167, column 23 - line 173, column 52): " + [v.constructor.name]);
  };
  var createForce_ = function(v) {
    if (v instanceof RegularForce) {
      return createRegularForce_(v.value0);
    }
    ;
    if (v instanceof LinkForce) {
      return forceLink_(unit);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 161, column 3 - line 163, column 38): " + [v.constructor.name]);
  };
  var createLinkForce = function(f) {
    return function(cs) {
      return {
        type: LinkForce.value,
        name: linksForceName_,
        status: ForceDisabled.value,
        filter: f,
        attributes: cs,
        force_: createForce_(LinkForce.value)
      };
    };
  };
  var createForce = function(l) {
    return function(t) {
      return function(f) {
        return function(cs) {
          return {
            type: t,
            name: l,
            status: ForceDisabled.value,
            filter: f,
            attributes: cs,
            force_: createForce_(t)
          };
        };
      };
    };
  };
  var attrFilter = function(filter$prime) {
    return function(default$prime) {
      var addFilterToStatic = function(filter7) {
        return function(value18) {
          return function($$default) {
            return function(d23) {
              var $49 = filter7(d23);
              if ($49) {
                return value18;
              }
              ;
              return $$default;
            };
          };
        };
      };
      var addFilterToFn = function(filter7) {
        return function(fn) {
          return function($$default) {
            return function(d23) {
              var $50 = filter7(d23);
              if ($50) {
                return fn(d23);
              }
              ;
              return $$default;
            };
          };
        };
      };
      return function(v) {
        if (v instanceof StringAttr && v.value0 instanceof Static) {
          return new StringAttr(new Static(v.value0.value0));
        }
        ;
        if (v instanceof StringAttr && v.value0 instanceof Fn) {
          return new StringAttr(new Fn(v.value0.value0));
        }
        ;
        if (v instanceof StringAttr && v.value0 instanceof FnI) {
          return new StringAttr(new FnI(v.value0.value0));
        }
        ;
        if (v instanceof NumberAttr && v.value0 instanceof Static) {
          return new NumberAttr(new Fn(addFilterToStatic(filter$prime)(v.value0.value0)(default$prime)));
        }
        ;
        if (v instanceof NumberAttr && v.value0 instanceof Fn) {
          return new NumberAttr(new Fn(addFilterToFn(filter$prime)(v.value0.value0)(default$prime)));
        }
        ;
        if (v instanceof NumberAttr && v.value0 instanceof FnI) {
          return new NumberAttr(new FnI(v.value0.value0));
        }
        ;
        if (v instanceof ArrayAttr && v.value0 instanceof Static) {
          return new ArrayAttr(new Static(v.value0.value0));
        }
        ;
        if (v instanceof ArrayAttr && v.value0 instanceof Fn) {
          return new ArrayAttr(new Fn(v.value0.value0));
        }
        ;
        if (v instanceof ArrayAttr && v.value0 instanceof FnI) {
          return new ArrayAttr(new FnI(v.value0.value0));
        }
        ;
        throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 212, column 3 - line 224, column 49): " + [v.constructor.name]);
      };
    };
  };
  var setForceAttr = function(force_) {
    return function(maybeFilter) {
      return function(v) {
        if (v.value0 === "strength") {
          if (maybeFilter instanceof Nothing) {
            return setForceStrength_(force_)(unboxAttr(v.value1));
          }
          ;
          if (maybeFilter instanceof Just) {
            return setForceStrength_(force_)(unboxAttr(attrFilter(maybeFilter.value0.value1)(0)(v.value1)));
          }
          ;
          throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 182, column 7 - line 186, column 82): " + [maybeFilter.constructor.name]);
        }
        ;
        if (v.value0 === "radius") {
          return setForceRadius_(force_)(unboxAttr(v.value1));
        }
        ;
        if (v.value0 === "theta") {
          return setForceTheta_(force_)(unboxAttr(v.value1));
        }
        ;
        if (v.value0 === "distanceMin") {
          return setForceDistanceMin_(force_)(unboxAttr(v.value1));
        }
        ;
        if (v.value0 === "distanceMax") {
          return setForceDistanceMax_(force_)(unboxAttr(v.value1));
        }
        ;
        if (v.value0 === "iterations") {
          return setForceIterations_(force_)(unboxAttr(v.value1));
        }
        ;
        if (v.value0 === "x") {
          return setForceX_(force_)(unboxAttr(v.value1));
        }
        ;
        if (v.value0 === "y") {
          return setForceY_(force_)(unboxAttr(v.value1));
        }
        ;
        if (v.value0 === "distance") {
          return setForceDistance_(force_)(unboxAttr(v.value1));
        }
        ;
        return force_;
      };
    };
  };
  var updateForceInSimulation = function(simulation) {
    return function(force2) {
      var f = unwrap8(force2);
      var v = map114(function(a2) {
        return setForceAttr(f.force_)(f.filter)(unwrap8(a2));
      })(f.attributes);
      if (f.status instanceof ForceActive) {
        return putForceInSimulation(force2)(simulation);
      }
      ;
      if (f.status instanceof ForceDisabled) {
        return removeForceFromSimulation(force2)(simulation);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Internal.Simulation.Forces (line 96, column 5 - line 98, column 66): " + [f.status.constructor.name]);
    };
  };

  // output/PSD3.CodeExplorer.Forces/index.js
  var map42 = /* @__PURE__ */ map(functorMaybe);
  var treePointY = function(d23) {
    return fromMaybe(d23.y)(map42(function(v) {
      return v.y;
    })(toMaybe(d23.treeXY)));
  };
  var treePointX = function(d23) {
    return fromMaybe(d23.x)(map42(function(v) {
      return v.x;
    })(toMaybe(d23.treeXY)));
  };
  var isUnusedModule = function(d23) {
    if (d23.nodetype instanceof IsPackage) {
      return false;
    }
    ;
    if (d23.nodetype instanceof IsModule) {
      return !d23.connected;
    }
    ;
    throw new Error("Failed pattern match at PSD3.CodeExplorer.Forces (line 41, column 20 - line 43, column 34): " + [d23.nodetype.constructor.name]);
  };
  var isTreeParent = function(d23) {
    if (d23.links.treeChildren.length === 0) {
      return false;
    }
    ;
    return true;
  };
  var gridPointY = function(d23) {
    return fromMaybe(d23.y)(map42(function(v) {
      return v.y;
    })(toMaybe(d23.gridXY)));
  };
  var gridPointX = function(d23) {
    return fromMaybe(d23.x)(map42(function(v) {
      return v.x;
    })(toMaybe(d23.gridXY)));
  };
  var collideRadiusBig = function(d23) {
    return d23.r + 10;
  };
  var collideRadius = function(d23) {
    var $31 = d23.id === d23.containerID;
    if ($31) {
      return 10;
    }
    ;
    return d23.r;
  };
  var forceLibrary = /* @__PURE__ */ (function() {
    var usedModulesOnly = new Just(new ForceFilter("used modules only", function($32) {
      return isUsedModule($32);
    }));
    var unusedModulesOnly = new Just(new ForceFilter("unused modules only", function($33) {
      return isUnusedModule($33);
    }));
    var treeExceptLeaves = new Just(new ForceFilter("tree parent nodes only", function($34) {
      return isTreeParent($34);
    }));
    var packagesOnly = new Just(new ForceFilter("all packages", function($35) {
      return isPackage($35);
    }));
    var modulesOnly = new Just(new ForceFilter("all modules", function($36) {
      return isModule($36);
    }));
    return initialize2(foldableArray)(functorArray)([createForce("center")(new RegularForce(ForceCenter.value))(allNodes)([strengthVal(0.5), xVal(0), yVal(0)]), createForce("x")(new RegularForce(ForceX.value))(allNodes)([strengthVal(0.05), xVal(0)]), createForce("y")(new RegularForce(ForceY.value))(allNodes)([strengthVal(0.07), yVal(0)]), createForce("collide1")(new RegularForce(ForceCollide.value))(allNodes)([strengthVal(1), radiusFn(function(d23) {
      return function(v) {
        return collideRadius(d23);
      };
    })]), createForce("collide2")(new RegularForce(ForceCollide.value))(allNodes)([strengthVal(0.7), radiusFn(function(d23) {
      return function(v) {
        return collideRadiusBig(d23);
      };
    })]), createForce("charge1")(new RegularForce(ForceManyBody.value))(allNodes)([strengthVal(-50), thetaVal(0.9), distanceMinVal(1), distanceMaxVal(infinity)]), createForce("charge2")(new RegularForce(ForceManyBody.value))(allNodes)([strengthVal(-100), thetaVal(0.9), distanceMinVal(1), distanceMaxVal(400)]), createForce("chargetree")(new RegularForce(ForceManyBody.value))(treeExceptLeaves)([strengthVal(-100), thetaVal(0.9), distanceMinVal(1), distanceMaxVal(400)]), createForce("clusterx_M")(new RegularForce(ForceX.value))(modulesOnly)([strengthVal(0.2), xFn(function(d23) {
      return function(v) {
        return gridPointX(d23);
      };
    })]), createForce("clustery_M")(new RegularForce(ForceY.value))(modulesOnly)([strengthVal(0.2), yFn(function(d23) {
      return function(v) {
        return gridPointY(d23);
      };
    })]), createForce("clusterx_P")(new RegularForce(ForceX.value))(packagesOnly)([strengthVal(0.8), xFn(function(d23) {
      return function(v) {
        return gridPointX(d23);
      };
    })]), createForce("clustery_P")(new RegularForce(ForceY.value))(packagesOnly)([strengthVal(0.8), yFn(function(d23) {
      return function(v) {
        return gridPointY(d23);
      };
    })]), createForce("htreeNodesX")(new RegularForce(ForceX.value))(new Just(new ForceFilter("tree only", function($37) {
      return $37.connected;
    })))([strengthVal(0.4), xFn(function(d23) {
      return function(v) {
        return treePointX(d23);
      };
    })]), createForce("htreeNodesY")(new RegularForce(ForceY.value))(new Just(new ForceFilter("tree only", function($38) {
      return $38.connected;
    })))([strengthVal(0.4), yFn(function(d23) {
      return function(v) {
        return treePointY(d23);
      };
    })]), createForce("vtreeNodesX")(new RegularForce(ForceX.value))(new Just(new ForceFilter("tree only", function($39) {
      return $39.connected;
    })))([strengthVal(0.4), xFn(function(d23) {
      return function(v) {
        return treePointY(d23);
      };
    })]), createForce("vtreeNodesY")(new RegularForce(ForceY.value))(new Just(new ForceFilter("tree only", function($40) {
      return $40.connected;
    })))([strengthVal(0.4), yFn(function(d23) {
      return function(v) {
        return treePointX(d23);
      };
    })]), createForce("packageOrbit")(new RegularForce(ForceRadial.value))(packagesOnly)([strengthVal(0.7), xVal(0), yVal(0), radiusVal(1200)]), createForce("unusedOrbit")(new RegularForce(ForceRadial.value))(unusedModulesOnly)([strengthVal(0.8), xVal(0), yVal(0), radiusVal(900)]), createForce("moduleOrbit")(new RegularForce(ForceRadial.value))(usedModulesOnly)([strengthVal(0.8), xVal(0), yVal(0), radiusVal(600)]), createLinkForce(Nothing.value)([strengthVal(0.5), distanceVal(0), numKey(function($41) {
      return toNumber((function(v) {
        return v.id;
      })($41));
    })])]);
  })();

  // output/PSD3.Properties/index.js
  var lmap2 = /* @__PURE__ */ lmap(bifunctorTuple);
  var append16 = /* @__PURE__ */ append(semigroupArray);
  var rmap3 = /* @__PURE__ */ rmap(bifunctorTuple);
  var elem6 = /* @__PURE__ */ elem2(eqString);
  var not4 = /* @__PURE__ */ not(/* @__PURE__ */ heytingAlgebraFunction(heytingAlgebraBoolean));
  var pure18 = /* @__PURE__ */ pure(applicativeArray);
  var map43 = /* @__PURE__ */ map(functorArray);
  var startsWith = function(str0) {
    return function(str1) {
      return str0 === take3(length5(str0))(str1);
    };
  };
  var extract3 = /* @__PURE__ */ (function() {
    var f = function(v) {
      return function(v1) {
        if (v1 instanceof Property && v1.value0 === "className") {
          return lmap2(function(v2) {
            return append16(v2)(split(" ")(v1.value1));
          })(v);
        }
        ;
        return rmap3(function(v2) {
          return append16(v2)([v1]);
        })(v);
      };
    };
    return foldl3(f)(new Tuple([], []));
  })();
  var classifySide = function(str2) {
    if (startsWith("t-")(str2)) {
      return "top";
    }
    ;
    if (startsWith("r-")(str2)) {
      return "right";
    }
    ;
    if (startsWith("b-")(str2)) {
      return "bottom";
    }
    ;
    if (startsWith("l-")(str2)) {
      return "left";
    }
    ;
    if (startsWith("x-")(str2)) {
      return "horizontal";
    }
    ;
    if (startsWith("y-")(str2)) {
      return "vertical";
    }
    ;
    if (startsWith("-")(str2)) {
      return "all";
    }
    ;
    if (otherwise) {
      return "";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Properties (line 103, column 1 - line 105, column 12): " + [str2.constructor.name]);
  };
  var append$prime = function(v) {
    return function(v1) {
      if (v1 === "") {
        return v;
      }
      ;
      return v + ("-" + v1);
    };
  };
  var classifyOverflow = function(str2) {
    if (startsWith("x-")(str2)) {
      return append$prime("horizontal")(classifyOverflow(drop3(2)(str2)));
    }
    ;
    if (startsWith("y-")(str2)) {
      return append$prime("vertical")(classifyOverflow(drop3(2)(str2)));
    }
    ;
    if (elem6(str2)(["auto", "hidden", "visible", "scroll"])) {
      return "";
    }
    ;
    if (otherwise) {
      return str2;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Properties (line 116, column 1 - line 118, column 12): " + [str2.constructor.name]);
  };
  var classify = function(str2) {
    if (startsWith("p")(str2) && not4($$null)(classifySide(drop3(1)(str2)))) {
      return append$prime("padding")(classifySide(drop3(1)(str2)));
    }
    ;
    if (startsWith("m")(str2) && not4($$null)(classifySide(drop3(1)(str2)))) {
      return append$prime("margin")(classifySide(drop3(1)(str2)));
    }
    ;
    if (startsWith("-m")(str2) && not4($$null)(classifySide(drop3(2)(str2)))) {
      return append$prime("margin")(classifySide(drop3(2)(str2)));
    }
    ;
    if (startsWith("min-")(str2)) {
      return append$prime("min")(classify(drop3(4)(str2)));
    }
    ;
    if (startsWith("max-")(str2)) {
      return append$prime("max")(classify(drop3(4)(str2)));
    }
    ;
    if (startsWith("w-")(str2)) {
      return "width";
    }
    ;
    if (startsWith("h-")(str2)) {
      return "height";
    }
    ;
    if (startsWith("overflow-")(str2) && classifyOverflow(drop3(9)(str2)) !== drop3(9)(str2)) {
      return append$prime("overflow")(classifyOverflow(drop3(9)(str2)));
    }
    ;
    if (otherwise) {
      return str2;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Properties (line 85, column 1 - line 87, column 12): " + [str2.constructor.name]);
  };
  var appendIProps = function(ip) {
    return function(ip$prime) {
      var v = extract3(ip);
      var v1 = extract3(ip$prime);
      var classNames = pure18(classes(map43(ClassName)(nubByEq(function(c) {
        return function(c$prime) {
          return classify(c) === classify(c$prime);
        };
      })(append16(v1.value0)(v.value0)))));
      return append16(v.value1)(append16(v1.value1)(classNames));
    };
  };

  // output/PSD3.Button/index.js
  var map44 = /* @__PURE__ */ map(functorArray);
  var append17 = /* @__PURE__ */ append(semigroupArray);
  var rightClasses = /* @__PURE__ */ map44(ClassName)(["rounded-r"]);
  var leftClasses = /* @__PURE__ */ map44(ClassName)(["mr-px", "rounded-l"]);
  var centerClasses = /* @__PURE__ */ map44(ClassName)(["mr-px"]);
  var buttonSharedClasses = /* @__PURE__ */ map44(ClassName)(["no-outline", "px-4", "py-2", "!active:border-b", "active:border-t", "disabled:opacity-50", "disabled:cursor-default", "!disabled:cursor-pointer"]);
  var buttonPrimaryClasses = /* @__PURE__ */ map44(ClassName)(["bg-blue-88", "border-blue-88", "hover:!disabled:bg-blue-82", "focus:bg-blue-82", "text-white"]);
  var buttonMainClasses = /* @__PURE__ */ append17(buttonSharedClasses)(/* @__PURE__ */ map44(ClassName)(["rounded"]));
  var buttonGroupClasses = /* @__PURE__ */ map44(ClassName)(["flex", "items-center"]);
  var buttonGroupBuilder = function(classes2) {
    return function(iprops) {
      return button(appendIProps([classes(append17(buttonSharedClasses)(classes2))])(iprops));
    };
  };
  var buttonPrimaryCenter = /* @__PURE__ */ buttonGroupBuilder(/* @__PURE__ */ append17(buttonPrimaryClasses)(centerClasses));
  var buttonPrimaryLeft = /* @__PURE__ */ buttonGroupBuilder(/* @__PURE__ */ append17(buttonPrimaryClasses)(leftClasses));
  var buttonPrimaryRight = /* @__PURE__ */ buttonGroupBuilder(/* @__PURE__ */ append17(buttonPrimaryClasses)(rightClasses));
  var buttonGroup = function(iprops) {
    return div2(appendIProps([classes(buttonGroupClasses)])(iprops));
  };
  var buttonGroup_ = /* @__PURE__ */ buttonGroup([]);
  var buttonClasses = /* @__PURE__ */ map44(ClassName)(["bg-grey-50-a20", "border-grey-50-a20", "hover:!disabled:bg-grey-50-a30", "focus:bg-grey-50-a30", "text-black-20"]);
  var buttonLeft = /* @__PURE__ */ buttonGroupBuilder(/* @__PURE__ */ append17(buttonClasses)(leftClasses));
  var buttonRight = /* @__PURE__ */ buttonGroupBuilder(/* @__PURE__ */ append17(buttonClasses)(rightClasses));
  var buttonCenter = /* @__PURE__ */ buttonGroupBuilder(/* @__PURE__ */ append17(buttonClasses)(centerClasses));
  var buttonBuilder = function(classes2) {
    return function(iprops) {
      return button(appendIProps([classes(append17(buttonMainClasses)(classes2))])(iprops));
    };
  };
  var button2 = /* @__PURE__ */ buttonBuilder(buttonClasses);

  // output/Data.Map/index.js
  var keys3 = /* @__PURE__ */ (function() {
    var $38 = $$void(functorMap);
    return function($39) {
      return fromMap2($38($39));
    };
  })();

  // output/PSD3.Component.SimulationState/index.js
  var $$delete7 = /* @__PURE__ */ $$delete3(ordString);
  var member4 = /* @__PURE__ */ member2(ordString);
  var insert9 = /* @__PURE__ */ insert5(ordString);
  var updateScene = function(f) {
    return function(state3) {
      return {
        simulation: state3.simulation,
        model: state3.model,
        staging: state3.staging,
        currentScene: state3.currentScene,
        transitionMatrix: state3.transitionMatrix,
        eventListener: state3.eventListener,
        transitionListener: state3.transitionListener,
        tags: state3.tags,
        showWelcome: state3.showWelcome,
        scene: f(state3.scene)
      };
    };
  };
  var toggleForce = function(label5) {
    return updateScene(function(s) {
      return {
        chooseNodes: s.chooseNodes,
        linksShown: s.linksShown,
        linksActive: s.linksActive,
        cssClass: s.cssClass,
        attributes: s.attributes,
        nodeInitializerFunctions: s.nodeInitializerFunctions,
        transitionConfig: s.transitionConfig,
        activeForces: (function() {
          var $101 = member4(label5)(s.activeForces);
          if ($101) {
            return $$delete7(label5)(s.activeForces);
          }
          ;
          return insert9(label5)(s.activeForces);
        })()
      };
    });
  };
  var tagNodes = function(dictOrd) {
    var alter4 = alter(dictOrd);
    return function(getId) {
      return function(label5) {
        return function(predicate) {
          return function(nodes) {
            return function(state3) {
              var addTag = function(v) {
                return function(v1) {
                  if (v1 instanceof Nothing) {
                    return new Just(singleton9(v));
                  }
                  ;
                  if (v1 instanceof Just) {
                    return new Just(insert9(v)(v1.value0));
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Component.SimulationState (line 421, column 5 - line 421, column 65): " + [v.constructor.name, v1.constructor.name]);
                };
              };
              var newTags = foldl3(function(acc) {
                return function(node) {
                  var $105 = predicate(node);
                  if ($105) {
                    return alter4(addTag(label5))(getId(node))(acc);
                  }
                  ;
                  return acc;
                };
              })(state3.tags)(nodes);
              return {
                simulation: state3.simulation,
                model: state3.model,
                staging: state3.staging,
                scene: state3.scene,
                currentScene: state3.currentScene,
                transitionMatrix: state3.transitionMatrix,
                eventListener: state3.eventListener,
                transitionListener: state3.transitionListener,
                showWelcome: state3.showWelcome,
                tags: newTags
              };
            };
          };
        };
      };
    };
  };
  var setSceneAttributes = function(attrs) {
    return updateScene(function(s) {
      return {
        chooseNodes: s.chooseNodes,
        linksShown: s.linksShown,
        linksActive: s.linksActive,
        activeForces: s.activeForces,
        cssClass: s.cssClass,
        nodeInitializerFunctions: s.nodeInitializerFunctions,
        transitionConfig: s.transitionConfig,
        attributes: attrs
      };
    });
  };
  var setLinksShown = function(fn) {
    return updateScene(function(s) {
      return {
        chooseNodes: s.chooseNodes,
        linksActive: s.linksActive,
        activeForces: s.activeForces,
        cssClass: s.cssClass,
        attributes: s.attributes,
        nodeInitializerFunctions: s.nodeInitializerFunctions,
        transitionConfig: s.transitionConfig,
        linksShown: fn
      };
    });
  };
  var setLinksActive = function(fn) {
    return updateScene(function(s) {
      return {
        chooseNodes: s.chooseNodes,
        linksShown: s.linksShown,
        activeForces: s.activeForces,
        cssClass: s.cssClass,
        attributes: s.attributes,
        nodeInitializerFunctions: s.nodeInitializerFunctions,
        transitionConfig: s.transitionConfig,
        linksActive: fn
      };
    });
  };
  var setCssClass = function(css) {
    return updateScene(function(s) {
      return {
        chooseNodes: s.chooseNodes,
        linksShown: s.linksShown,
        linksActive: s.linksActive,
        activeForces: s.activeForces,
        attributes: s.attributes,
        nodeInitializerFunctions: s.nodeInitializerFunctions,
        transitionConfig: s.transitionConfig,
        cssClass: css
      };
    });
  };
  var setChooseNodes = function(fn) {
    return updateScene(function(s) {
      return {
        linksShown: s.linksShown,
        linksActive: s.linksActive,
        activeForces: s.activeForces,
        cssClass: s.cssClass,
        attributes: s.attributes,
        nodeInitializerFunctions: s.nodeInitializerFunctions,
        transitionConfig: s.transitionConfig,
        chooseNodes: fn
      };
    });
  };
  var getStagingNodes = function(state3) {
    return state3.staging.rawdata.nodes;
  };
  var getStagingLinks = function(state3) {
    return state3.staging.rawdata.links;
  };
  var clearAllTags = function(state3) {
    return {
      simulation: state3.simulation,
      model: state3.model,
      staging: state3.staging,
      scene: state3.scene,
      currentScene: state3.currentScene,
      transitionMatrix: state3.transitionMatrix,
      eventListener: state3.eventListener,
      transitionListener: state3.transitionListener,
      showWelcome: state3.showWelcome,
      tags: empty2
    };
  };
  var applySceneWithTransition = function(dictOrd) {
    var lookup19 = lookup(ordTuple(dictOrd)(dictOrd));
    return function(targetScene) {
      return function(baseConfig) {
        return function(state3) {
          var transitionSpec = lookup19(new Tuple(state3.currentScene, targetScene))(state3.transitionMatrix);
          var config = {
            activeForces: baseConfig.activeForces,
            attributes: baseConfig.attributes,
            chooseNodes: baseConfig.chooseNodes,
            cssClass: baseConfig.cssClass,
            linksActive: baseConfig.linksActive,
            linksShown: baseConfig.linksShown,
            nodeInitializerFunctions: baseConfig.nodeInitializerFunctions,
            transitionConfig: transitionSpec
          };
          return {
            simulation: state3.simulation,
            model: state3.model,
            staging: state3.staging,
            currentScene: state3.currentScene,
            transitionMatrix: state3.transitionMatrix,
            eventListener: state3.eventListener,
            transitionListener: state3.transitionListener,
            tags: state3.tags,
            showWelcome: state3.showWelcome,
            scene: config
          };
        };
      };
    };
  };

  // output/PSD3.CodeExplorer.State/index.js
  var tagNodes1 = /* @__PURE__ */ tagNodes(ordInt);
  var fromFoldable19 = /* @__PURE__ */ fromFoldable6(foldableSet)(ordString);
  var _handle2 = /* @__PURE__ */ _handle(strongForget);
  var toggleForce2 = toggleForce;
  var tagNodes2 = function(label5) {
    return function(predicate) {
      return function(nodes) {
        return function(state3) {
          return tagNodes1(function(v) {
            return v.id;
          })(label5)(predicate)(nodes)(state3);
        };
      };
    };
  };
  var setSceneAttributes2 = setSceneAttributes;
  var setLinksShown2 = setLinksShown;
  var setLinksActive2 = setLinksActive;
  var setCssClass2 = setCssClass;
  var setChooseNodes2 = setChooseNodes;
  var initialScene = function(forceLibrary5) {
    return {
      chooseNodes: isPackage,
      linksShown: $$const(false),
      linksActive: $$const(false),
      activeForces: fromFoldable19(keys3(forceLibrary5)),
      cssClass: "",
      attributes: clusterSceneAttributes,
      nodeInitializerFunctions: [],
      transitionConfig: Nothing.value
    };
  };
  var getStagingNodes2 = getStagingNodes;
  var getStagingLinks2 = getStagingLinks;
  var getSimulationVariables = function(state3) {
    var handle = view(_handle2)(state3);
    return readSimulationVariables_(handle);
  };
  var getModelNodes = function(state3) {
    if (state3.model instanceof Just) {
      return state3.model.value0.nodes;
    }
    ;
    if (state3.model instanceof Nothing) {
      return [];
    }
    ;
    throw new Error("Failed pattern match at PSD3.CodeExplorer.State (line 208, column 23 - line 210, column 16): " + [state3.model.constructor.name]);
  };
  var getModelLinks = function(state3) {
    if (state3.model instanceof Just) {
      return state3.model.value0.links;
    }
    ;
    if (state3.model instanceof Nothing) {
      return [];
    }
    ;
    throw new Error("Failed pattern match at PSD3.CodeExplorer.State (line 213, column 23 - line 215, column 16): " + [state3.model.constructor.name]);
  };
  var clearAllTags2 = clearAllTags;
  var applySceneWithTransition2 = /* @__PURE__ */ applySceneWithTransition(ordScene);

  // output/PSD3.CodeExplorer.WelcomeOverlay/index.js
  var render6 = function(dismissAction) {
    return div2([classes(["welcome-overlay"])])([div2([classes(["welcome-overlay__backdrop"]), onClick($$const(dismissAction))])([]), div2([classes(["welcome-overlay__content"])])([div2([classes(["welcome-overlay__header"])])([h2([classes(["welcome-overlay__title"])])([text5("Welcome to Code Explorer")]), button([classes(["welcome-overlay__close"]), onClick($$const(dismissAction))])([text5("\xD7")])]), div2([classes(["welcome-overlay__body"])])([p([classes(["welcome-overlay__intro"])])([text5("Explore the PureScript package dependency graph with interactive force-directed layouts.")]), div2([classes(["welcome-overlay__section"])])([h3_([text5("\u{1F3AE} Interactive Controls")]), p_([text5("Try zooming, clicking, and dragging nodes!")]), ul_([li_([text5("Zoom: Scroll wheel or pinch to zoom in/out")]), li_([text5("Pan: Click and drag the background")]), li_([text5("Move nodes: Click and drag individual nodes")])])]), div2([classes(["welcome-overlay__section"])])([h3_([text5("\u25C0 Left Panel: Scene Selection")]), p_([text5("Control what visualization you see:")]), ul_([li_([text5("Package Grid: Cluster view of packages")]), li_([text5("Package Graph: Force-directed package relationships")]), li_([text5("Module Trees: Hierarchical module layouts (horizontal, vertical, radial)")]), li_([text5("Layer Swarm: Modules organized by dependency layers")])])]), div2([classes(["welcome-overlay__section"])])([h3_([text5("\u25B6 Right Panel: Force Controls")]), p_([text5("Activate and deactivate physics forces that govern the layout:")]), ul_([li_([text5("Click force names to toggle them on/off")]), li_([text5("Adjust parameters with sliders")]), li_([text5("Watch the simulation respond in real-time")])])])]), div2([classes(["welcome-overlay__footer"])])([button([classes(["button", "button--primary"]), onClick($$const(dismissAction))])([text5("Got it, let's explore!")])])])]);
  };

  // output/PSD3.Format/index.js
  var map45 = /* @__PURE__ */ map(functorArray);
  var subHeadingClasses = /* @__PURE__ */ map45(ClassName)(["text-xl", "font-medium", "leading-loose", "flex", "items-center", "mb-6"]);
  var subHeading = function(iprops) {
    return function(html2) {
      return h2(appendIProps([classes(subHeadingClasses)])(iprops))(html2);
    };
  };
  var subHeading_ = /* @__PURE__ */ subHeading([]);
  var contentHeadingClasses = /* @__PURE__ */ map45(ClassName)(["mb-6", "text-lg", "font-normal", "leading-loose", "flex", "items-center"]);
  var contentHeading = function(iprops) {
    return h3(appendIProps([classes(contentHeadingClasses)])(iprops));
  };
  var contentHeading_ = /* @__PURE__ */ contentHeading([]);
  var captionClasses = /* @__PURE__ */ map45(ClassName)(["block", "font-light", "mb-6", "text-grey-70", "text-sm", "tracking-wide", "uppercase"]);
  var caption2 = function(iprops) {
    return h4(appendIProps([classes(captionClasses)])(iprops));
  };
  var caption_2 = /* @__PURE__ */ caption2([]);

  // output/PSD3.Shared.TutorialNav/index.js
  var eq6 = /* @__PURE__ */ eq(eqRoute);
  var show14 = /* @__PURE__ */ show(showRoute);
  var allTutorialRoutes = /* @__PURE__ */ (function() {
    return [SimpleCharts1.value, SimpleCharts2.value, Hierarchies.value, DataFlowViz.value, Movement.value, FpFtw.value, Interpreters.value, WealthHealth.value, CodeExplorer.value, CodeAtlas.value];
  })();
  var getNextTutorial = function(currentRoute) {
    var v = findIndex(function(r) {
      return eq6(r)(currentRoute);
    })(allTutorialRoutes);
    if (v instanceof Nothing) {
      return Nothing.value;
    }
    ;
    if (v instanceof Just) {
      return index2(allTutorialRoutes)(v.value0 + 1 | 0);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Shared.TutorialNav (line 35, column 3 - line 37, column 53): " + [v.constructor.name]);
  };
  var getPrevTutorial = function(currentRoute) {
    var v = findIndex(function(r) {
      return eq6(r)(currentRoute);
    })(allTutorialRoutes);
    if (v instanceof Nothing) {
      return Nothing.value;
    }
    ;
    if (v instanceof Just) {
      var $13 = v.value0 > 0;
      if ($13) {
        return index2(allTutorialRoutes)(v.value0 - 1 | 0);
      }
      ;
      return Nothing.value;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Shared.TutorialNav (line 42, column 3 - line 44, column 82): " + [v.constructor.name]);
  };
  var renderHeader = function(currentRoute) {
    return header([classes(["example-header"])])([div2([classes(["example-header-left"])])([a([href4("#" + routeToPath(Home.value)), classes(["example-logo-link"])])([img([src9("assets/psd3-logo-color.svg"), alt5("PSD3 Logo"), classes(["example-logo"])])]), a([href4("#" + (routeToPath(Home.value) + "tutorials")), classes(["example-gallery-link"])])([text5("Tour")]), div2([classes(["example-title-container"])])([h1([classes(["example-title"])])([text5(show14(currentRoute))])])]), div2([classes(["example-header-right"])])([(function() {
      var v = getPrevTutorial(currentRoute);
      if (v instanceof Nothing) {
        return span3([classes(["example-nav-button", "disabled"])])([text5("\u2190 Previous")]);
      }
      ;
      if (v instanceof Just) {
        return a([href4("#" + routeToPath(v.value0)), classes(["example-nav-button"])])([text5("\u2190 Previous")]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Shared.TutorialNav (line 77, column 11 - line 87, column 41): " + [v.constructor.name]);
    })(), (function() {
      var v = getNextTutorial(currentRoute);
      if (v instanceof Nothing) {
        return span3([classes(["example-nav-button", "disabled"])])([text5("Next \u2192")]);
      }
      ;
      if (v instanceof Just) {
        return a([href4("#" + routeToPath(v.value0)), classes(["example-nav-button"])])([text5("Next \u2192")]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Shared.TutorialNav (line 88, column 11 - line 98, column 37): " + [v.constructor.name]);
    })()])]);
  };

  // output/PSD3.Shared.ZoomSticker/index.js
  var render7 = /* @__PURE__ */ div2([/* @__PURE__ */ classes(["zoom-sticker"])])([/* @__PURE__ */ span3([/* @__PURE__ */ classes(["zoom-sticker__icon"])])([/* @__PURE__ */ text5("\u{1F50D}")]), /* @__PURE__ */ span3([/* @__PURE__ */ classes(["zoom-sticker__text"])])([/* @__PURE__ */ text5("Try zooming!")])]);

  // output/PSD3.CodeExplorer.HTML/index.js
  var type_20 = /* @__PURE__ */ type_17(isPropInputType);
  var value14 = /* @__PURE__ */ value12(isPropString);
  var show15 = /* @__PURE__ */ show(showNumber);
  var eq7 = /* @__PURE__ */ eq(eqForceStatus);
  var map46 = /* @__PURE__ */ map(functorArray);
  var toUnfoldable5 = /* @__PURE__ */ toUnfoldable(unfoldableArray);
  var _forceLibrary2 = /* @__PURE__ */ _forceLibrary(strongForget);
  var show16 = /* @__PURE__ */ show(showInt);
  var slider = function(config) {
    var toScale = function(s) {
      return toNumber(fromMaybe(0)(fromString2(s))) / 100;
    };
    return [onValueInput(function($20) {
      return ChangeSimConfig.create(config["var"](toScale($20)));
    }), type_20(InputRange.value), id2(config.id), class_("range-slider scaling-slider"), min5(config.min), max6(config.max), step3(new Step(config.step)), value14(show15(config.value))];
  };
  var renderTableForces = function(state3) {
    var renderForceItem = function(v) {
      return div2([classes(["force-item", (function() {
        var $15 = eq7(v.status)(ForceActive.value);
        if ($15) {
          return "force-active";
        }
        ;
        return "force-inactive";
      })()]), onClick($$const(new ToggleForce(v.name)))])([div2([classes(["force-name"])])([text5(v.name)]), div2([classes(["force-type"])])([text5(showType(v.type))]), div2([classes(["force-filter"])])([text5(showForceFilter(v.filter))])]);
    };
    var forceData = map46(snd)(toUnfoldable5(view(_forceLibrary2)(state3)));
    return div_([h3_([text5("Forces")]), div2([classes(["force-grid"])])(map46(renderForceItem)(forceData))]);
  };
  var renderSimState = function(state3) {
    return div2([classes(["spago-sim-state"])])([caption_2([text5("Simulation state")]), p_([text5("CSS Class: " + state3.scene.cssClass)]), p_([text5("Links: " + show16(length3(getStagingLinks2(state3))))]), p_([text5("Nodes: " + show16(length3(getStagingNodes2(state3))))])]);
  };
  var isProjectModule = function(node) {
    if (node.nodetype instanceof IsModule) {
      return take3(4)(node.nodetype.value0) === "src/";
    }
    ;
    if (node.nodetype instanceof IsPackage) {
      return true;
    }
    ;
    throw new Error("Failed pattern match at PSD3.CodeExplorer.HTML (line 38, column 24 - line 40, column 22): " + [node.nodetype.constructor.name]);
  };
  var renderSimControls = function(state3) {
    var params = getSimulationVariables(state3);
    return div2([classes(["spago-sim-controls"])])([subHeading_([text5("Scene Selection")]), div2([classes(["control-group"])])([buttonGroup_([buttonPrimaryLeft([onClick($$const(new Scene(PackageGrid.value)))])([text5("Package Grid")]), buttonPrimaryRight([onClick($$const(new Scene(PackageGraph.value)))])([text5("Package Graph")])])]), div2([classes(["control-group"])])([buttonGroup_([buttonPrimaryLeft([onClick($$const(new Scene(new ModuleTree(Horizontal.value))))])([text5("Horiz. Tree")]), buttonPrimaryCenter([onClick($$const(new Scene(new ModuleTree(Vertical.value))))])([text5("Vert. Tree")]), buttonPrimaryRight([onClick($$const(new Scene(new ModuleTree(Radial.value))))])([text5("Radial Tree")])])]), div2([classes(["control-group"])])([buttonGroup_([buttonPrimaryLeft([onClick($$const(new Scene(LayerSwarm.value)))])([text5("Layer Swarm")])])]), subHeading_([text5("Tagging (Demo)")]), div2([classes(["control-group"])])([buttonGroup_([buttonPrimaryLeft([onClick($$const(TagHalogen.value))])([text5("Tag Halogen")]), buttonPrimaryRight([onClick($$const(ClearTags.value))])([text5("Clear Tags")])])]), subHeading_([text5("Simulation Control")]), div2([classes(["control-group"])])([input2(slider({
      "var": Alpha.create,
      id: "alpha-slider",
      min: 0,
      max: 100,
      step: 10,
      value: params.alpha * 100
    })), caption_2([text5("Alpha: " + show15(params.alpha))]), input2(slider({
      "var": AlphaTarget.create,
      id: "alphatarget-slider",
      min: 0,
      max: 100,
      step: 10,
      value: params.alphaTarget * 100
    })), caption_2([text5("AlphaTarget: " + show15(params.alphaTarget))])]), div2([classes(["control-group"])])([buttonGroup_([buttonPrimaryLeft([onClick($$const(StopSim.value))])([text5("Stop")]), buttonPrimaryCenter([onClick($$const(new ChangeSimConfig(new AlphaTarget(0.3))))])([text5("Heat")]), buttonPrimaryCenter([onClick($$const(new ChangeSimConfig(new AlphaTarget(0))))])([text5("Cool")]), buttonPrimaryRight([onClick($$const(StartSim.value))])([text5("Start")])])]), subHeading_([text5("Filters")]), div2([classes(["control-group"])])([contentHeading_([text5("Node visibility")]), buttonGroup_([buttonLeft([onClick($$const(new Filter(new NodeFilter(isPackage))))])([text5("Packages")]), buttonCenter([onClick($$const(new Filter(new NodeFilter($$const(true)))))])([text5("All")]), buttonRight([onClick($$const(new Filter(new NodeFilter(isUsedModule))))])([text5("Modules")])])]), div2([classes(["control-group"])])([button2([onClick($$const(new Filter(new NodeFilter(isProjectModule))))])([text5("Only project files")])]), div2([classes(["control-group"])])([contentHeading_([text5("Link Visibility")]), buttonGroup_([buttonLeft([onClick($$const(new Filter(new LinkShowFilter(isM2M_Tree_Link))))])([text5("Tree")]), buttonCenter([onClick($$const(new Filter(new LinkShowFilter(isM2M_Graph_Link))))])([text5("Graph")]), buttonCenter([onClick($$const(new Filter(new LinkShowFilter(isM2P_Link))))])([text5("M2P")]), buttonCenter([onClick($$const(new Filter(new LinkShowFilter(isP2P_Link))))])([text5("P2P")]), buttonRight([onClick($$const(new Filter(new LinkShowFilter($$const(false)))))])([text5("None")])])]), subHeading_([text5("Styling")]), div2([classes(["control-group"])])([buttonGroup_([buttonLeft([onClick($$const(new ChangeStyling(new GraphStyle(clusterSceneAttributes))))])([text5("Cluster")]), buttonCenter([onClick($$const(new ChangeStyling(new GraphStyle(graphSceneAttributes))))])([text5("Graph")]), buttonRight([onClick($$const(new ChangeStyling(new GraphStyle(treeSceneAttributes))))])([text5("Tree")])])])]);
  };
  var render8 = function(state3) {
    return div2([classes(["fullscreen-container", "spago-fullscreen", "page-with-watermark"])])([renderHeader(CodeExplorer.value), div2([classes(["floating-panel", "floating-panel--top-left", "floating-panel--small", "spago-controls-panel", "editorial"])])([h2([classes(["floating-panel__title", "spago-controls__title"])])([text5("Controls")]), renderSimControls(state3), renderSimState(state3)]), div2([classes(["floating-panel", "floating-panel--top-right", "floating-panel--large", "spago-forces-panel", "editorial"])])([renderTableForces(state3)]), div2([classes(["svg-container", "fullscreen-viz", "spago-viz-container", state3.scene.cssClass])])([render7]), (function() {
      if (state3.showWelcome) {
        return render6(DismissWelcome.value);
      }
      ;
      return text5("");
    })()]);
  };

  // output/PSD3.Simulation.Scene/index.js
  var TransitionMove = /* @__PURE__ */ (function() {
    function TransitionMove2() {
    }
    ;
    TransitionMove2.value = new TransitionMove2();
    return TransitionMove2;
  })();
  var InstantMove = /* @__PURE__ */ (function() {
    function InstantMove2() {
    }
    ;
    InstantMove2.value = new InstantMove2();
    return InstantMove2;
  })();
  var FadeOut = /* @__PURE__ */ (function() {
    function FadeOut2() {
    }
    ;
    FadeOut2.value = new FadeOut2();
    return FadeOut2;
  })();
  var ScaleDown = /* @__PURE__ */ (function() {
    function ScaleDown2() {
    }
    ;
    ScaleDown2.value = new ScaleDown2();
    return ScaleDown2;
  })();
  var InstantExit = /* @__PURE__ */ (function() {
    function InstantExit2() {
    }
    ;
    InstantExit2.value = new InstantExit2();
    return InstantExit2;
  })();
  var FadeIn = /* @__PURE__ */ (function() {
    function FadeIn2() {
    }
    ;
    FadeIn2.value = new FadeIn2();
    return FadeIn2;
  })();
  var ScaleUp = /* @__PURE__ */ (function() {
    function ScaleUp2() {
    }
    ;
    ScaleUp2.value = new ScaleUp2();
    return ScaleUp2;
  })();
  var InstantEnter = /* @__PURE__ */ (function() {
    function InstantEnter2() {
    }
    ;
    InstantEnter2.value = new InstantEnter2();
    return InstantEnter2;
  })();
  var smoothTransitionPinned = /* @__PURE__ */ (function() {
    return {
      duration: 1500,
      enterNodes: FadeIn.value,
      exitNodes: FadeOut.value,
      updateNodes: TransitionMove.value,
      pinAfterTransition: true
    };
  })();
  var smoothTransition = /* @__PURE__ */ (function() {
    return {
      duration: 1500,
      enterNodes: FadeIn.value,
      exitNodes: FadeOut.value,
      updateNodes: TransitionMove.value,
      pinAfterTransition: false
    };
  })();
  var encodeUpdateBehavior = function(v) {
    if (v instanceof TransitionMove) {
      return "TransitionMove";
    }
    ;
    if (v instanceof InstantMove) {
      return "InstantMove";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Simulation.Scene (line 54, column 1 - line 54, column 49): " + [v.constructor.name]);
  };
  var encodeExitBehavior = function(v) {
    if (v instanceof FadeOut) {
      return "FadeOut";
    }
    ;
    if (v instanceof ScaleDown) {
      return "ScaleDown";
    }
    ;
    if (v instanceof InstantExit) {
      return "InstantExit";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Simulation.Scene (line 49, column 1 - line 49, column 45): " + [v.constructor.name]);
  };
  var encodeEnterBehavior = function(v) {
    if (v instanceof FadeIn) {
      return "FadeIn";
    }
    ;
    if (v instanceof ScaleUp) {
      return "ScaleUp";
    }
    ;
    if (v instanceof InstantEnter) {
      return "InstantEnter";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Simulation.Scene (line 44, column 1 - line 44, column 47): " + [v.constructor.name]);
  };

  // output/PSD3.CodeExplorer.Scenes/index.js
  var fromFoldable20 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordString);
  var verticalTreeScene = /* @__PURE__ */ (function() {
    return {
      chooseNodes: isUsedModule,
      linksShown: isM2M_Tree_Link,
      linksActive: $$const(false),
      cssClass: "tree vertical",
      attributes: treeSceneAttributes,
      activeForces: fromFoldable20(["vtreeNodesX", "vtreeNodesY", "charge1", "collide2", linksForceName_]),
      nodeInitializerFunctions: [unpinAllNodes, treeNodesToTreeXY_V],
      transitionConfig: new Just(smoothTransition)
    };
  })();
  var radialTreeScene = /* @__PURE__ */ (function() {
    return {
      chooseNodes: isUsedModule,
      linksShown: isM2M_Tree_Link,
      linksActive: $$const(true),
      cssClass: "tree radial",
      attributes: treeSceneAttributes,
      activeForces: fromFoldable20(["center", "collide2", "chargetree", "charge2", linksForceName_]),
      nodeInitializerFunctions: [unpinAllNodes, treeNodesToTreeXY_R, fixNamedNodeTo("PSD3.Main")({
        x: 0,
        y: 0
      })],
      transitionConfig: new Just(smoothTransition)
    };
  })();
  var packageGridScene = /* @__PURE__ */ (function() {
    return {
      chooseNodes: allNodes2,
      linksShown: isM2P_Link,
      linksActive: $$const(true),
      cssClass: "cluster",
      attributes: clusterSceneAttributes,
      activeForces: fromFoldable20(["clusterx_P", "clustery_P", "clusterx_M", "clustery_M", "collide2", linksForceName_]),
      nodeInitializerFunctions: [unpinAllNodes, packageNodesToGridXY, moduleNodesToContainerXY],
      transitionConfig: new Just(smoothTransition)
    };
  })();
  var packageGraphScene = /* @__PURE__ */ (function() {
    return {
      chooseNodes: isPackage,
      linksShown: isP2P_Link,
      linksActive: $$const(true),
      cssClass: "graph",
      attributes: graphSceneAttributes,
      activeForces: fromFoldable20(["center", "collide2", "charge2", "packageOrbit", linksForceName_]),
      nodeInitializerFunctions: [unpinAllNodes, packagesNodesToPhyllotaxis, fixNamedNodeTo("my-project")({
        x: 0,
        y: 0
      })],
      transitionConfig: Nothing.value
    };
  })();
  var layerSwarmScene = /* @__PURE__ */ (function() {
    return {
      chooseNodes: isUsedModule,
      linksShown: isM2M_Tree_Link,
      linksActive: $$const(true),
      cssClass: "tree",
      attributes: treeSceneAttributes,
      activeForces: fromFoldable20(["htreeNodesX", "collide1", "y", linksForceName_]),
      nodeInitializerFunctions: [treeNodesToSwarmStart],
      transitionConfig: Nothing.value
    };
  })();
  var horizontalTreeScene = /* @__PURE__ */ (function() {
    return {
      chooseNodes: isUsedModule,
      linksShown: isM2M_Tree_Link,
      linksActive: $$const(false),
      cssClass: "tree horizontal",
      attributes: treeSceneAttributes,
      activeForces: fromFoldable20(["htreeNodesX", "htreeNodesY", "charge1", "collide2", linksForceName_]),
      nodeInitializerFunctions: [unpinAllNodes, treeNodesToTreeXY_H],
      transitionConfig: new Just(smoothTransition)
    };
  })();

  // node_modules/d3-array/src/ascending.js
  function ascending(a2, b2) {
    return a2 == null || b2 == null ? NaN : a2 < b2 ? -1 : a2 > b2 ? 1 : a2 >= b2 ? 0 : NaN;
  }

  // node_modules/d3-array/src/descending.js
  function descending(a2, b2) {
    return a2 == null || b2 == null ? NaN : b2 < a2 ? -1 : b2 > a2 ? 1 : b2 >= a2 ? 0 : NaN;
  }

  // node_modules/d3-array/src/bisector.js
  function bisector(f) {
    let compare110, compare22, delta;
    if (f.length !== 2) {
      compare110 = ascending;
      compare22 = (d23, x46) => ascending(f(d23), x46);
      delta = (d23, x46) => f(d23) - x46;
    } else {
      compare110 = f === ascending || f === descending ? f : zero2;
      compare22 = f;
      delta = f;
    }
    function left4(a2, x46, lo = 0, hi = a2.length) {
      if (lo < hi) {
        if (compare110(x46, x46) !== 0) return hi;
        do {
          const mid = lo + hi >>> 1;
          if (compare22(a2[mid], x46) < 0) lo = mid + 1;
          else hi = mid;
        } while (lo < hi);
      }
      return lo;
    }
    function right4(a2, x46, lo = 0, hi = a2.length) {
      if (lo < hi) {
        if (compare110(x46, x46) !== 0) return hi;
        do {
          const mid = lo + hi >>> 1;
          if (compare22(a2[mid], x46) <= 0) lo = mid + 1;
          else hi = mid;
        } while (lo < hi);
      }
      return lo;
    }
    function center3(a2, x46, lo = 0, hi = a2.length) {
      const i2 = left4(a2, x46, lo, hi - 1);
      return i2 > lo && delta(a2[i2 - 1], x46) > -delta(a2[i2], x46) ? i2 - 1 : i2;
    }
    return { left: left4, center: center3, right: right4 };
  }
  function zero2() {
    return 0;
  }

  // node_modules/d3-array/src/number.js
  function number(x46) {
    return x46 === null ? NaN : +x46;
  }

  // node_modules/d3-array/src/bisect.js
  var ascendingBisect = bisector(ascending);
  var bisectRight = ascendingBisect.right;
  var bisectLeft = ascendingBisect.left;
  var bisectCenter = bisector(number).center;
  var bisect_default = bisectRight;

  // node_modules/d3-array/src/ticks.js
  var e10 = Math.sqrt(50);
  var e5 = Math.sqrt(10);
  var e2 = Math.sqrt(2);
  function tickSpec(start7, stop4, count) {
    const step4 = (stop4 - start7) / Math.max(0, count), power = Math.floor(Math.log10(step4)), error4 = step4 / Math.pow(10, power), factor = error4 >= e10 ? 10 : error4 >= e5 ? 5 : error4 >= e2 ? 2 : 1;
    let i1, i2, inc;
    if (power < 0) {
      inc = Math.pow(10, -power) / factor;
      i1 = Math.round(start7 * inc);
      i2 = Math.round(stop4 * inc);
      if (i1 / inc < start7) ++i1;
      if (i2 / inc > stop4) --i2;
      inc = -inc;
    } else {
      inc = Math.pow(10, power) * factor;
      i1 = Math.round(start7 / inc);
      i2 = Math.round(stop4 / inc);
      if (i1 * inc < start7) ++i1;
      if (i2 * inc > stop4) --i2;
    }
    if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start7, stop4, count * 2);
    return [i1, i2, inc];
  }
  function ticks(start7, stop4, count) {
    stop4 = +stop4, start7 = +start7, count = +count;
    if (!(count > 0)) return [];
    if (start7 === stop4) return [start7];
    const reverse3 = stop4 < start7, [i1, i2, inc] = reverse3 ? tickSpec(stop4, start7, count) : tickSpec(start7, stop4, count);
    if (!(i2 >= i1)) return [];
    const n = i2 - i1 + 1, ticks2 = new Array(n);
    if (reverse3) {
      if (inc < 0) for (let i3 = 0; i3 < n; ++i3) ticks2[i3] = (i2 - i3) / -inc;
      else for (let i3 = 0; i3 < n; ++i3) ticks2[i3] = (i2 - i3) * inc;
    } else {
      if (inc < 0) for (let i3 = 0; i3 < n; ++i3) ticks2[i3] = (i1 + i3) / -inc;
      else for (let i3 = 0; i3 < n; ++i3) ticks2[i3] = (i1 + i3) * inc;
    }
    return ticks2;
  }
  function tickIncrement(start7, stop4, count) {
    stop4 = +stop4, start7 = +start7, count = +count;
    return tickSpec(start7, stop4, count)[2];
  }
  function tickStep(start7, stop4, count) {
    stop4 = +stop4, start7 = +start7, count = +count;
    const reverse3 = stop4 < start7, inc = reverse3 ? tickIncrement(stop4, start7, count) : tickIncrement(start7, stop4, count);
    return (reverse3 ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);
  }

  // node_modules/d3-axis/src/identity.js
  function identity_default(x46) {
    return x46;
  }

  // node_modules/d3-axis/src/axis.js
  var top3 = 1;
  var right2 = 2;
  var bottom3 = 3;
  var left2 = 4;
  var epsilon = 1e-6;
  function translateX(x46) {
    return "translate(" + x46 + ",0)";
  }
  function translateY(y46) {
    return "translate(0," + y46 + ")";
  }
  function number2(scale) {
    return (d23) => +scale(d23);
  }
  function center(scale, offset) {
    offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;
    if (scale.round()) offset = Math.round(offset);
    return (d23) => +scale(d23) + offset;
  }
  function entering() {
    return !this.__axis;
  }
  function axis(orient, scale) {
    var tickArguments = [], tickValues = null, tickFormat2 = null, tickSizeInner = 6, tickSizeOuter = 6, tickPadding = 3, offset = typeof window !== "undefined" && window.devicePixelRatio > 1 ? 0 : 0.5, k = orient === top3 || orient === left2 ? -1 : 1, x46 = orient === left2 || orient === right2 ? "x" : "y", transform3 = orient === top3 || orient === bottom3 ? translateX : translateY;
    function axis2(context) {
      var values2 = tickValues == null ? scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain() : tickValues, format2 = tickFormat2 == null ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity_default : tickFormat2, spacing = Math.max(tickSizeInner, 0) + tickPadding, range3 = scale.range(), range0 = +range3[0] + offset, range1 = +range3[range3.length - 1] + offset, position2 = (scale.bandwidth ? center : number2)(scale.copy(), offset), selection2 = context.selection ? context.selection() : context, path3 = selection2.selectAll(".domain").data([null]), tick = selection2.selectAll(".tick").data(values2, scale).order(), tickExit = tick.exit(), tickEnter = tick.enter().append("g").attr("class", "tick"), line = tick.select("line"), text35 = tick.select("text");
      path3 = path3.merge(path3.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor"));
      tick = tick.merge(tickEnter);
      line = line.merge(tickEnter.append("line").attr("stroke", "currentColor").attr(x46 + "2", k * tickSizeInner));
      text35 = text35.merge(tickEnter.append("text").attr("fill", "currentColor").attr(x46, k * spacing).attr("dy", orient === top3 ? "0em" : orient === bottom3 ? "0.71em" : "0.32em"));
      if (context !== selection2) {
        path3 = path3.transition(context);
        tick = tick.transition(context);
        line = line.transition(context);
        text35 = text35.transition(context);
        tickExit = tickExit.transition(context).attr("opacity", epsilon).attr("transform", function(d23) {
          return isFinite(d23 = position2(d23)) ? transform3(d23 + offset) : this.getAttribute("transform");
        });
        tickEnter.attr("opacity", epsilon).attr("transform", function(d23) {
          var p2 = this.parentNode.__axis;
          return transform3((p2 && isFinite(p2 = p2(d23)) ? p2 : position2(d23)) + offset);
        });
      }
      tickExit.remove();
      path3.attr("d", orient === left2 || orient === right2 ? tickSizeOuter ? "M" + k * tickSizeOuter + "," + range0 + "H" + offset + "V" + range1 + "H" + k * tickSizeOuter : "M" + offset + "," + range0 + "V" + range1 : tickSizeOuter ? "M" + range0 + "," + k * tickSizeOuter + "V" + offset + "H" + range1 + "V" + k * tickSizeOuter : "M" + range0 + "," + offset + "H" + range1);
      tick.attr("opacity", 1).attr("transform", function(d23) {
        return transform3(position2(d23) + offset);
      });
      line.attr(x46 + "2", k * tickSizeInner);
      text35.attr(x46, k * spacing).text(format2);
      selection2.filter(entering).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", orient === right2 ? "start" : orient === left2 ? "end" : "middle");
      selection2.each(function() {
        this.__axis = position2;
      });
    }
    axis2.scale = function(_) {
      return arguments.length ? (scale = _, axis2) : scale;
    };
    axis2.ticks = function() {
      return tickArguments = Array.from(arguments), axis2;
    };
    axis2.tickArguments = function(_) {
      return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis2) : tickArguments.slice();
    };
    axis2.tickValues = function(_) {
      return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis2) : tickValues && tickValues.slice();
    };
    axis2.tickFormat = function(_) {
      return arguments.length ? (tickFormat2 = _, axis2) : tickFormat2;
    };
    axis2.tickSize = function(_) {
      return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis2) : tickSizeInner;
    };
    axis2.tickSizeInner = function(_) {
      return arguments.length ? (tickSizeInner = +_, axis2) : tickSizeInner;
    };
    axis2.tickSizeOuter = function(_) {
      return arguments.length ? (tickSizeOuter = +_, axis2) : tickSizeOuter;
    };
    axis2.tickPadding = function(_) {
      return arguments.length ? (tickPadding = +_, axis2) : tickPadding;
    };
    axis2.offset = function(_) {
      return arguments.length ? (offset = +_, axis2) : offset;
    };
    return axis2;
  }
  function axisBottom(scale) {
    return axis(bottom3, scale);
  }
  function axisLeft(scale) {
    return axis(left2, scale);
  }

  // node_modules/d3-dispatch/src/dispatch.js
  var noop = { value: () => {
  } };
  function dispatch() {
    for (var i2 = 0, n = arguments.length, _ = {}, t; i2 < n; ++i2) {
      if (!(t = arguments[i2] + "") || t in _ || /[\s.]/.test(t)) throw new Error("illegal type: " + t);
      _[t] = [];
    }
    return new Dispatch(_);
  }
  function Dispatch(_) {
    this._ = _;
  }
  function parseTypenames(typenames, types) {
    return typenames.trim().split(/^|\s+/).map(function(t) {
      var name16 = "", i2 = t.indexOf(".");
      if (i2 >= 0) name16 = t.slice(i2 + 1), t = t.slice(0, i2);
      if (t && !types.hasOwnProperty(t)) throw new Error("unknown type: " + t);
      return { type: t, name: name16 };
    });
  }
  Dispatch.prototype = dispatch.prototype = {
    constructor: Dispatch,
    on: function(typename, callback) {
      var _ = this._, T = parseTypenames(typename + "", _), t, i2 = -1, n = T.length;
      if (arguments.length < 2) {
        while (++i2 < n) if ((t = (typename = T[i2]).type) && (t = get5(_[t], typename.name))) return t;
        return;
      }
      if (callback != null && typeof callback !== "function") throw new Error("invalid callback: " + callback);
      while (++i2 < n) {
        if (t = (typename = T[i2]).type) _[t] = set3(_[t], typename.name, callback);
        else if (callback == null) for (t in _) _[t] = set3(_[t], typename.name, null);
      }
      return this;
    },
    copy: function() {
      var copy3 = {}, _ = this._;
      for (var t in _) copy3[t] = _[t].slice();
      return new Dispatch(copy3);
    },
    call: function(type2, that) {
      if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i2 = 0, n, t; i2 < n; ++i2) args[i2] = arguments[i2 + 2];
      if (!this._.hasOwnProperty(type2)) throw new Error("unknown type: " + type2);
      for (t = this._[type2], i2 = 0, n = t.length; i2 < n; ++i2) t[i2].value.apply(that, args);
    },
    apply: function(type2, that, args) {
      if (!this._.hasOwnProperty(type2)) throw new Error("unknown type: " + type2);
      for (var t = this._[type2], i2 = 0, n = t.length; i2 < n; ++i2) t[i2].value.apply(that, args);
    }
  };
  function get5(type2, name16) {
    for (var i2 = 0, n = type2.length, c; i2 < n; ++i2) {
      if ((c = type2[i2]).name === name16) {
        return c.value;
      }
    }
  }
  function set3(type2, name16, callback) {
    for (var i2 = 0, n = type2.length; i2 < n; ++i2) {
      if (type2[i2].name === name16) {
        type2[i2] = noop, type2 = type2.slice(0, i2).concat(type2.slice(i2 + 1));
        break;
      }
    }
    if (callback != null) type2.push({ name: name16, value: callback });
    return type2;
  }
  var dispatch_default = dispatch;

  // node_modules/d3-selection/src/namespaces.js
  var xhtml = "http://www.w3.org/1999/xhtml";
  var namespaces_default = {
    svg: "http://www.w3.org/2000/svg",
    xhtml,
    xlink: "http://www.w3.org/1999/xlink",
    xml: "http://www.w3.org/XML/1998/namespace",
    xmlns: "http://www.w3.org/2000/xmlns/"
  };

  // node_modules/d3-selection/src/namespace.js
  function namespace_default(name16) {
    var prefix = name16 += "", i2 = prefix.indexOf(":");
    if (i2 >= 0 && (prefix = name16.slice(0, i2)) !== "xmlns") name16 = name16.slice(i2 + 1);
    return namespaces_default.hasOwnProperty(prefix) ? { space: namespaces_default[prefix], local: name16 } : name16;
  }

  // node_modules/d3-selection/src/creator.js
  function creatorInherit(name16) {
    return function() {
      var document3 = this.ownerDocument, uri = this.namespaceURI;
      return uri === xhtml && document3.documentElement.namespaceURI === xhtml ? document3.createElement(name16) : document3.createElementNS(uri, name16);
    };
  }
  function creatorFixed(fullname) {
    return function() {
      return this.ownerDocument.createElementNS(fullname.space, fullname.local);
    };
  }
  function creator_default(name16) {
    var fullname = namespace_default(name16);
    return (fullname.local ? creatorFixed : creatorInherit)(fullname);
  }

  // node_modules/d3-selection/src/selector.js
  function none2() {
  }
  function selector_default(selector) {
    return selector == null ? none2 : function() {
      return this.querySelector(selector);
    };
  }

  // node_modules/d3-selection/src/selection/select.js
  function select_default(select8) {
    if (typeof select8 !== "function") select8 = selector_default(select8);
    for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, subgroup = subgroups[j] = new Array(n), node, subnode, i2 = 0; i2 < n; ++i2) {
        if ((node = group4[i2]) && (subnode = select8.call(node, node.__data__, i2, group4))) {
          if ("__data__" in node) subnode.__data__ = node.__data__;
          subgroup[i2] = subnode;
        }
      }
    }
    return new Selection(subgroups, this._parents);
  }

  // node_modules/d3-selection/src/array.js
  function array(x46) {
    return x46 == null ? [] : Array.isArray(x46) ? x46 : Array.from(x46);
  }

  // node_modules/d3-selection/src/selectorAll.js
  function empty8() {
    return [];
  }
  function selectorAll_default(selector) {
    return selector == null ? empty8 : function() {
      return this.querySelectorAll(selector);
    };
  }

  // node_modules/d3-selection/src/selection/selectAll.js
  function arrayAll(select8) {
    return function() {
      return array(select8.apply(this, arguments));
    };
  }
  function selectAll_default(select8) {
    if (typeof select8 === "function") select8 = arrayAll(select8);
    else select8 = selectorAll_default(select8);
    for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, node, i2 = 0; i2 < n; ++i2) {
        if (node = group4[i2]) {
          subgroups.push(select8.call(node, node.__data__, i2, group4));
          parents.push(node);
        }
      }
    }
    return new Selection(subgroups, parents);
  }

  // node_modules/d3-selection/src/matcher.js
  function matcher_default(selector) {
    return function() {
      return this.matches(selector);
    };
  }
  function childMatcher(selector) {
    return function(node) {
      return node.matches(selector);
    };
  }

  // node_modules/d3-selection/src/selection/selectChild.js
  var find3 = Array.prototype.find;
  function childFind(match2) {
    return function() {
      return find3.call(this.children, match2);
    };
  }
  function childFirst() {
    return this.firstElementChild;
  }
  function selectChild_default(match2) {
    return this.select(match2 == null ? childFirst : childFind(typeof match2 === "function" ? match2 : childMatcher(match2)));
  }

  // node_modules/d3-selection/src/selection/selectChildren.js
  var filter4 = Array.prototype.filter;
  function children2() {
    return Array.from(this.children);
  }
  function childrenFilter(match2) {
    return function() {
      return filter4.call(this.children, match2);
    };
  }
  function selectChildren_default(match2) {
    return this.selectAll(match2 == null ? children2 : childrenFilter(typeof match2 === "function" ? match2 : childMatcher(match2)));
  }

  // node_modules/d3-selection/src/selection/filter.js
  function filter_default(match2) {
    if (typeof match2 !== "function") match2 = matcher_default(match2);
    for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, subgroup = subgroups[j] = [], node, i2 = 0; i2 < n; ++i2) {
        if ((node = group4[i2]) && match2.call(node, node.__data__, i2, group4)) {
          subgroup.push(node);
        }
      }
    }
    return new Selection(subgroups, this._parents);
  }

  // node_modules/d3-selection/src/selection/sparse.js
  function sparse_default(update4) {
    return new Array(update4.length);
  }

  // node_modules/d3-selection/src/selection/enter.js
  function enter_default() {
    return new Selection(this._enter || this._groups.map(sparse_default), this._parents);
  }
  function EnterNode(parent2, datum2) {
    this.ownerDocument = parent2.ownerDocument;
    this.namespaceURI = parent2.namespaceURI;
    this._next = null;
    this._parent = parent2;
    this.__data__ = datum2;
  }
  EnterNode.prototype = {
    constructor: EnterNode,
    appendChild: function(child) {
      return this._parent.insertBefore(child, this._next);
    },
    insertBefore: function(child, next2) {
      return this._parent.insertBefore(child, next2);
    },
    querySelector: function(selector) {
      return this._parent.querySelector(selector);
    },
    querySelectorAll: function(selector) {
      return this._parent.querySelectorAll(selector);
    }
  };

  // node_modules/d3-selection/src/constant.js
  function constant_default(x46) {
    return function() {
      return x46;
    };
  }

  // node_modules/d3-selection/src/selection/data.js
  function bindIndex(parent2, group4, enter, update4, exit, data) {
    var i2 = 0, node, groupLength = group4.length, dataLength = data.length;
    for (; i2 < dataLength; ++i2) {
      if (node = group4[i2]) {
        node.__data__ = data[i2];
        update4[i2] = node;
      } else {
        enter[i2] = new EnterNode(parent2, data[i2]);
      }
    }
    for (; i2 < groupLength; ++i2) {
      if (node = group4[i2]) {
        exit[i2] = node;
      }
    }
  }
  function bindKey(parent2, group4, enter, update4, exit, data, key) {
    var i2, node, nodeByKeyValue = /* @__PURE__ */ new Map(), groupLength = group4.length, dataLength = data.length, keyValues = new Array(groupLength), keyValue;
    for (i2 = 0; i2 < groupLength; ++i2) {
      if (node = group4[i2]) {
        keyValues[i2] = keyValue = key.call(node, node.__data__, i2, group4) + "";
        if (nodeByKeyValue.has(keyValue)) {
          exit[i2] = node;
        } else {
          nodeByKeyValue.set(keyValue, node);
        }
      }
    }
    for (i2 = 0; i2 < dataLength; ++i2) {
      keyValue = key.call(parent2, data[i2], i2, data) + "";
      if (node = nodeByKeyValue.get(keyValue)) {
        update4[i2] = node;
        node.__data__ = data[i2];
        nodeByKeyValue.delete(keyValue);
      } else {
        enter[i2] = new EnterNode(parent2, data[i2]);
      }
    }
    for (i2 = 0; i2 < groupLength; ++i2) {
      if ((node = group4[i2]) && nodeByKeyValue.get(keyValues[i2]) === node) {
        exit[i2] = node;
      }
    }
  }
  function datum(node) {
    return node.__data__;
  }
  function data_default(value18, key) {
    if (!arguments.length) return Array.from(this, datum);
    var bind92 = key ? bindKey : bindIndex, parents = this._parents, groups = this._groups;
    if (typeof value18 !== "function") value18 = constant_default(value18);
    for (var m = groups.length, update4 = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
      var parent2 = parents[j], group4 = groups[j], groupLength = group4.length, data = arraylike(value18.call(parent2, parent2 && parent2.__data__, j, parents)), dataLength = data.length, enterGroup = enter[j] = new Array(dataLength), updateGroup = update4[j] = new Array(dataLength), exitGroup = exit[j] = new Array(groupLength);
      bind92(parent2, group4, enterGroup, updateGroup, exitGroup, data, key);
      for (var i0 = 0, i1 = 0, previous, next2; i0 < dataLength; ++i0) {
        if (previous = enterGroup[i0]) {
          if (i0 >= i1) i1 = i0 + 1;
          while (!(next2 = updateGroup[i1]) && ++i1 < dataLength) ;
          previous._next = next2 || null;
        }
      }
    }
    update4 = new Selection(update4, parents);
    update4._enter = enter;
    update4._exit = exit;
    return update4;
  }
  function arraylike(data) {
    return typeof data === "object" && "length" in data ? data : Array.from(data);
  }

  // node_modules/d3-selection/src/selection/exit.js
  function exit_default() {
    return new Selection(this._exit || this._groups.map(sparse_default), this._parents);
  }

  // node_modules/d3-selection/src/selection/join.js
  function join_default(onenter, onupdate, onexit) {
    var enter = this.enter(), update4 = this, exit = this.exit();
    if (typeof onenter === "function") {
      enter = onenter(enter);
      if (enter) enter = enter.selection();
    } else {
      enter = enter.append(onenter + "");
    }
    if (onupdate != null) {
      update4 = onupdate(update4);
      if (update4) update4 = update4.selection();
    }
    if (onexit == null) exit.remove();
    else onexit(exit);
    return enter && update4 ? enter.merge(update4).order() : update4;
  }

  // node_modules/d3-selection/src/selection/merge.js
  function merge_default(context) {
    var selection2 = context.selection ? context.selection() : context;
    for (var groups0 = this._groups, groups1 = selection2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
      for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge3 = merges[j] = new Array(n), node, i2 = 0; i2 < n; ++i2) {
        if (node = group0[i2] || group1[i2]) {
          merge3[i2] = node;
        }
      }
    }
    for (; j < m0; ++j) {
      merges[j] = groups0[j];
    }
    return new Selection(merges, this._parents);
  }

  // node_modules/d3-selection/src/selection/order.js
  function order_default() {
    for (var groups = this._groups, j = -1, m = groups.length; ++j < m; ) {
      for (var group4 = groups[j], i2 = group4.length - 1, next2 = group4[i2], node; --i2 >= 0; ) {
        if (node = group4[i2]) {
          if (next2 && node.compareDocumentPosition(next2) ^ 4) next2.parentNode.insertBefore(node, next2);
          next2 = node;
        }
      }
    }
    return this;
  }

  // node_modules/d3-selection/src/selection/sort.js
  function sort_default(compare20) {
    if (!compare20) compare20 = ascending2;
    function compareNode(a2, b2) {
      return a2 && b2 ? compare20(a2.__data__, b2.__data__) : !a2 - !b2;
    }
    for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, sortgroup = sortgroups[j] = new Array(n), node, i2 = 0; i2 < n; ++i2) {
        if (node = group4[i2]) {
          sortgroup[i2] = node;
        }
      }
      sortgroup.sort(compareNode);
    }
    return new Selection(sortgroups, this._parents).order();
  }
  function ascending2(a2, b2) {
    return a2 < b2 ? -1 : a2 > b2 ? 1 : a2 >= b2 ? 0 : NaN;
  }

  // node_modules/d3-selection/src/selection/call.js
  function call_default() {
    var callback = arguments[0];
    arguments[0] = this;
    callback.apply(null, arguments);
    return this;
  }

  // node_modules/d3-selection/src/selection/nodes.js
  function nodes_default() {
    return Array.from(this);
  }

  // node_modules/d3-selection/src/selection/node.js
  function node_default() {
    for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
      for (var group4 = groups[j], i2 = 0, n = group4.length; i2 < n; ++i2) {
        var node = group4[i2];
        if (node) return node;
      }
    }
    return null;
  }

  // node_modules/d3-selection/src/selection/size.js
  function size_default() {
    let size6 = 0;
    for (const node of this) ++size6;
    return size6;
  }

  // node_modules/d3-selection/src/selection/empty.js
  function empty_default() {
    return !this.node();
  }

  // node_modules/d3-selection/src/selection/each.js
  function each_default(callback) {
    for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
      for (var group4 = groups[j], i2 = 0, n = group4.length, node; i2 < n; ++i2) {
        if (node = group4[i2]) callback.call(node, node.__data__, i2, group4);
      }
    }
    return this;
  }

  // node_modules/d3-selection/src/selection/attr.js
  function attrRemove(name16) {
    return function() {
      this.removeAttribute(name16);
    };
  }
  function attrRemoveNS(fullname) {
    return function() {
      this.removeAttributeNS(fullname.space, fullname.local);
    };
  }
  function attrConstant(name16, value18) {
    return function() {
      this.setAttribute(name16, value18);
    };
  }
  function attrConstantNS(fullname, value18) {
    return function() {
      this.setAttributeNS(fullname.space, fullname.local, value18);
    };
  }
  function attrFunction(name16, value18) {
    return function() {
      var v = value18.apply(this, arguments);
      if (v == null) this.removeAttribute(name16);
      else this.setAttribute(name16, v);
    };
  }
  function attrFunctionNS(fullname, value18) {
    return function() {
      var v = value18.apply(this, arguments);
      if (v == null) this.removeAttributeNS(fullname.space, fullname.local);
      else this.setAttributeNS(fullname.space, fullname.local, v);
    };
  }
  function attr_default(name16, value18) {
    var fullname = namespace_default(name16);
    if (arguments.length < 2) {
      var node = this.node();
      return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);
    }
    return this.each((value18 == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value18 === "function" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value18));
  }

  // node_modules/d3-selection/src/window.js
  function window_default(node) {
    return node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView;
  }

  // node_modules/d3-selection/src/selection/style.js
  function styleRemove(name16) {
    return function() {
      this.style.removeProperty(name16);
    };
  }
  function styleConstant(name16, value18, priority) {
    return function() {
      this.style.setProperty(name16, value18, priority);
    };
  }
  function styleFunction(name16, value18, priority) {
    return function() {
      var v = value18.apply(this, arguments);
      if (v == null) this.style.removeProperty(name16);
      else this.style.setProperty(name16, v, priority);
    };
  }
  function style_default(name16, value18, priority) {
    return arguments.length > 1 ? this.each((value18 == null ? styleRemove : typeof value18 === "function" ? styleFunction : styleConstant)(name16, value18, priority == null ? "" : priority)) : styleValue(this.node(), name16);
  }
  function styleValue(node, name16) {
    return node.style.getPropertyValue(name16) || window_default(node).getComputedStyle(node, null).getPropertyValue(name16);
  }

  // node_modules/d3-selection/src/selection/property.js
  function propertyRemove(name16) {
    return function() {
      delete this[name16];
    };
  }
  function propertyConstant(name16, value18) {
    return function() {
      this[name16] = value18;
    };
  }
  function propertyFunction(name16, value18) {
    return function() {
      var v = value18.apply(this, arguments);
      if (v == null) delete this[name16];
      else this[name16] = v;
    };
  }
  function property_default(name16, value18) {
    return arguments.length > 1 ? this.each((value18 == null ? propertyRemove : typeof value18 === "function" ? propertyFunction : propertyConstant)(name16, value18)) : this.node()[name16];
  }

  // node_modules/d3-selection/src/selection/classed.js
  function classArray(string2) {
    return string2.trim().split(/^|\s+/);
  }
  function classList2(node) {
    return node.classList || new ClassList(node);
  }
  function ClassList(node) {
    this._node = node;
    this._names = classArray(node.getAttribute("class") || "");
  }
  ClassList.prototype = {
    add: function(name16) {
      var i2 = this._names.indexOf(name16);
      if (i2 < 0) {
        this._names.push(name16);
        this._node.setAttribute("class", this._names.join(" "));
      }
    },
    remove: function(name16) {
      var i2 = this._names.indexOf(name16);
      if (i2 >= 0) {
        this._names.splice(i2, 1);
        this._node.setAttribute("class", this._names.join(" "));
      }
    },
    contains: function(name16) {
      return this._names.indexOf(name16) >= 0;
    }
  };
  function classedAdd(node, names) {
    var list = classList2(node), i2 = -1, n = names.length;
    while (++i2 < n) list.add(names[i2]);
  }
  function classedRemove(node, names) {
    var list = classList2(node), i2 = -1, n = names.length;
    while (++i2 < n) list.remove(names[i2]);
  }
  function classedTrue(names) {
    return function() {
      classedAdd(this, names);
    };
  }
  function classedFalse(names) {
    return function() {
      classedRemove(this, names);
    };
  }
  function classedFunction(names, value18) {
    return function() {
      (value18.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
    };
  }
  function classed_default(name16, value18) {
    var names = classArray(name16 + "");
    if (arguments.length < 2) {
      var list = classList2(this.node()), i2 = -1, n = names.length;
      while (++i2 < n) if (!list.contains(names[i2])) return false;
      return true;
    }
    return this.each((typeof value18 === "function" ? classedFunction : value18 ? classedTrue : classedFalse)(names, value18));
  }

  // node_modules/d3-selection/src/selection/text.js
  function textRemove() {
    this.textContent = "";
  }
  function textConstant(value18) {
    return function() {
      this.textContent = value18;
    };
  }
  function textFunction(value18) {
    return function() {
      var v = value18.apply(this, arguments);
      this.textContent = v == null ? "" : v;
    };
  }
  function text_default(value18) {
    return arguments.length ? this.each(value18 == null ? textRemove : (typeof value18 === "function" ? textFunction : textConstant)(value18)) : this.node().textContent;
  }

  // node_modules/d3-selection/src/selection/html.js
  function htmlRemove() {
    this.innerHTML = "";
  }
  function htmlConstant(value18) {
    return function() {
      this.innerHTML = value18;
    };
  }
  function htmlFunction(value18) {
    return function() {
      var v = value18.apply(this, arguments);
      this.innerHTML = v == null ? "" : v;
    };
  }
  function html_default(value18) {
    return arguments.length ? this.each(value18 == null ? htmlRemove : (typeof value18 === "function" ? htmlFunction : htmlConstant)(value18)) : this.node().innerHTML;
  }

  // node_modules/d3-selection/src/selection/raise.js
  function raise2() {
    if (this.nextSibling) this.parentNode.appendChild(this);
  }
  function raise_default() {
    return this.each(raise2);
  }

  // node_modules/d3-selection/src/selection/lower.js
  function lower() {
    if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);
  }
  function lower_default() {
    return this.each(lower);
  }

  // node_modules/d3-selection/src/selection/append.js
  function append_default(name16) {
    var create5 = typeof name16 === "function" ? name16 : creator_default(name16);
    return this.select(function() {
      return this.appendChild(create5.apply(this, arguments));
    });
  }

  // node_modules/d3-selection/src/selection/insert.js
  function constantNull() {
    return null;
  }
  function insert_default(name16, before) {
    var create5 = typeof name16 === "function" ? name16 : creator_default(name16), select8 = before == null ? constantNull : typeof before === "function" ? before : selector_default(before);
    return this.select(function() {
      return this.insertBefore(create5.apply(this, arguments), select8.apply(this, arguments) || null);
    });
  }

  // node_modules/d3-selection/src/selection/remove.js
  function remove2() {
    var parent2 = this.parentNode;
    if (parent2) parent2.removeChild(this);
  }
  function remove_default() {
    return this.each(remove2);
  }

  // node_modules/d3-selection/src/selection/clone.js
  function selection_cloneShallow() {
    var clone2 = this.cloneNode(false), parent2 = this.parentNode;
    return parent2 ? parent2.insertBefore(clone2, this.nextSibling) : clone2;
  }
  function selection_cloneDeep() {
    var clone2 = this.cloneNode(true), parent2 = this.parentNode;
    return parent2 ? parent2.insertBefore(clone2, this.nextSibling) : clone2;
  }
  function clone_default(deep) {
    return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
  }

  // node_modules/d3-selection/src/selection/datum.js
  function datum_default(value18) {
    return arguments.length ? this.property("__data__", value18) : this.node().__data__;
  }

  // node_modules/d3-selection/src/selection/on.js
  function contextListener(listener) {
    return function(event) {
      listener.call(this, event, this.__data__);
    };
  }
  function parseTypenames2(typenames) {
    return typenames.trim().split(/^|\s+/).map(function(t) {
      var name16 = "", i2 = t.indexOf(".");
      if (i2 >= 0) name16 = t.slice(i2 + 1), t = t.slice(0, i2);
      return { type: t, name: name16 };
    });
  }
  function onRemove(typename) {
    return function() {
      var on3 = this.__on;
      if (!on3) return;
      for (var j = 0, i2 = -1, m = on3.length, o; j < m; ++j) {
        if (o = on3[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
          this.removeEventListener(o.type, o.listener, o.options);
        } else {
          on3[++i2] = o;
        }
      }
      if (++i2) on3.length = i2;
      else delete this.__on;
    };
  }
  function onAdd(typename, value18, options2) {
    return function() {
      var on3 = this.__on, o, listener = contextListener(value18);
      if (on3) for (var j = 0, m = on3.length; j < m; ++j) {
        if ((o = on3[j]).type === typename.type && o.name === typename.name) {
          this.removeEventListener(o.type, o.listener, o.options);
          this.addEventListener(o.type, o.listener = listener, o.options = options2);
          o.value = value18;
          return;
        }
      }
      this.addEventListener(typename.type, listener, options2);
      o = { type: typename.type, name: typename.name, value: value18, listener, options: options2 };
      if (!on3) this.__on = [o];
      else on3.push(o);
    };
  }
  function on_default(typename, value18, options2) {
    var typenames = parseTypenames2(typename + ""), i2, n = typenames.length, t;
    if (arguments.length < 2) {
      var on3 = this.node().__on;
      if (on3) for (var j = 0, m = on3.length, o; j < m; ++j) {
        for (i2 = 0, o = on3[j]; i2 < n; ++i2) {
          if ((t = typenames[i2]).type === o.type && t.name === o.name) {
            return o.value;
          }
        }
      }
      return;
    }
    on3 = value18 ? onAdd : onRemove;
    for (i2 = 0; i2 < n; ++i2) this.each(on3(typenames[i2], value18, options2));
    return this;
  }

  // node_modules/d3-selection/src/selection/dispatch.js
  function dispatchEvent2(node, type2, params) {
    var window2 = window_default(node), event = window2.CustomEvent;
    if (typeof event === "function") {
      event = new event(type2, params);
    } else {
      event = window2.document.createEvent("Event");
      if (params) event.initEvent(type2, params.bubbles, params.cancelable), event.detail = params.detail;
      else event.initEvent(type2, false, false);
    }
    node.dispatchEvent(event);
  }
  function dispatchConstant(type2, params) {
    return function() {
      return dispatchEvent2(this, type2, params);
    };
  }
  function dispatchFunction(type2, params) {
    return function() {
      return dispatchEvent2(this, type2, params.apply(this, arguments));
    };
  }
  function dispatch_default2(type2, params) {
    return this.each((typeof params === "function" ? dispatchFunction : dispatchConstant)(type2, params));
  }

  // node_modules/d3-selection/src/selection/iterator.js
  function* iterator_default() {
    for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
      for (var group4 = groups[j], i2 = 0, n = group4.length, node; i2 < n; ++i2) {
        if (node = group4[i2]) yield node;
      }
    }
  }

  // node_modules/d3-selection/src/selection/index.js
  var root2 = [null];
  function Selection(groups, parents) {
    this._groups = groups;
    this._parents = parents;
  }
  function selection() {
    return new Selection([[document.documentElement]], root2);
  }
  function selection_selection() {
    return this;
  }
  Selection.prototype = selection.prototype = {
    constructor: Selection,
    select: select_default,
    selectAll: selectAll_default,
    selectChild: selectChild_default,
    selectChildren: selectChildren_default,
    filter: filter_default,
    data: data_default,
    enter: enter_default,
    exit: exit_default,
    join: join_default,
    merge: merge_default,
    selection: selection_selection,
    order: order_default,
    sort: sort_default,
    call: call_default,
    nodes: nodes_default,
    node: node_default,
    size: size_default,
    empty: empty_default,
    each: each_default,
    attr: attr_default,
    style: style_default,
    property: property_default,
    classed: classed_default,
    text: text_default,
    html: html_default,
    raise: raise_default,
    lower: lower_default,
    append: append_default,
    insert: insert_default,
    remove: remove_default,
    clone: clone_default,
    datum: datum_default,
    on: on_default,
    dispatch: dispatch_default2,
    [Symbol.iterator]: iterator_default
  };
  var selection_default = selection;

  // node_modules/d3-color/src/define.js
  function define_default(constructor, factory, prototype) {
    constructor.prototype = factory.prototype = prototype;
    prototype.constructor = constructor;
  }
  function extend2(parent2, definition) {
    var prototype = Object.create(parent2.prototype);
    for (var key in definition) prototype[key] = definition[key];
    return prototype;
  }

  // node_modules/d3-color/src/color.js
  function Color() {
  }
  var darker = 0.7;
  var brighter = 1 / darker;
  var reI = "\\s*([+-]?\\d+)\\s*";
  var reN = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
  var reP = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
  var reHex = /^#([0-9a-f]{3,8})$/;
  var reRgbInteger = new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`);
  var reRgbPercent = new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`);
  var reRgbaInteger = new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`);
  var reRgbaPercent = new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`);
  var reHslPercent = new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`);
  var reHslaPercent = new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`);
  var named = {
    aliceblue: 15792383,
    antiquewhite: 16444375,
    aqua: 65535,
    aquamarine: 8388564,
    azure: 15794175,
    beige: 16119260,
    bisque: 16770244,
    black: 0,
    blanchedalmond: 16772045,
    blue: 255,
    blueviolet: 9055202,
    brown: 10824234,
    burlywood: 14596231,
    cadetblue: 6266528,
    chartreuse: 8388352,
    chocolate: 13789470,
    coral: 16744272,
    cornflowerblue: 6591981,
    cornsilk: 16775388,
    crimson: 14423100,
    cyan: 65535,
    darkblue: 139,
    darkcyan: 35723,
    darkgoldenrod: 12092939,
    darkgray: 11119017,
    darkgreen: 25600,
    darkgrey: 11119017,
    darkkhaki: 12433259,
    darkmagenta: 9109643,
    darkolivegreen: 5597999,
    darkorange: 16747520,
    darkorchid: 10040012,
    darkred: 9109504,
    darksalmon: 15308410,
    darkseagreen: 9419919,
    darkslateblue: 4734347,
    darkslategray: 3100495,
    darkslategrey: 3100495,
    darkturquoise: 52945,
    darkviolet: 9699539,
    deeppink: 16716947,
    deepskyblue: 49151,
    dimgray: 6908265,
    dimgrey: 6908265,
    dodgerblue: 2003199,
    firebrick: 11674146,
    floralwhite: 16775920,
    forestgreen: 2263842,
    fuchsia: 16711935,
    gainsboro: 14474460,
    ghostwhite: 16316671,
    gold: 16766720,
    goldenrod: 14329120,
    gray: 8421504,
    green: 32768,
    greenyellow: 11403055,
    grey: 8421504,
    honeydew: 15794160,
    hotpink: 16738740,
    indianred: 13458524,
    indigo: 4915330,
    ivory: 16777200,
    khaki: 15787660,
    lavender: 15132410,
    lavenderblush: 16773365,
    lawngreen: 8190976,
    lemonchiffon: 16775885,
    lightblue: 11393254,
    lightcoral: 15761536,
    lightcyan: 14745599,
    lightgoldenrodyellow: 16448210,
    lightgray: 13882323,
    lightgreen: 9498256,
    lightgrey: 13882323,
    lightpink: 16758465,
    lightsalmon: 16752762,
    lightseagreen: 2142890,
    lightskyblue: 8900346,
    lightslategray: 7833753,
    lightslategrey: 7833753,
    lightsteelblue: 11584734,
    lightyellow: 16777184,
    lime: 65280,
    limegreen: 3329330,
    linen: 16445670,
    magenta: 16711935,
    maroon: 8388608,
    mediumaquamarine: 6737322,
    mediumblue: 205,
    mediumorchid: 12211667,
    mediumpurple: 9662683,
    mediumseagreen: 3978097,
    mediumslateblue: 8087790,
    mediumspringgreen: 64154,
    mediumturquoise: 4772300,
    mediumvioletred: 13047173,
    midnightblue: 1644912,
    mintcream: 16121850,
    mistyrose: 16770273,
    moccasin: 16770229,
    navajowhite: 16768685,
    navy: 128,
    oldlace: 16643558,
    olive: 8421376,
    olivedrab: 7048739,
    orange: 16753920,
    orangered: 16729344,
    orchid: 14315734,
    palegoldenrod: 15657130,
    palegreen: 10025880,
    paleturquoise: 11529966,
    palevioletred: 14381203,
    papayawhip: 16773077,
    peachpuff: 16767673,
    peru: 13468991,
    pink: 16761035,
    plum: 14524637,
    powderblue: 11591910,
    purple: 8388736,
    rebeccapurple: 6697881,
    red: 16711680,
    rosybrown: 12357519,
    royalblue: 4286945,
    saddlebrown: 9127187,
    salmon: 16416882,
    sandybrown: 16032864,
    seagreen: 3050327,
    seashell: 16774638,
    sienna: 10506797,
    silver: 12632256,
    skyblue: 8900331,
    slateblue: 6970061,
    slategray: 7372944,
    slategrey: 7372944,
    snow: 16775930,
    springgreen: 65407,
    steelblue: 4620980,
    tan: 13808780,
    teal: 32896,
    thistle: 14204888,
    tomato: 16737095,
    turquoise: 4251856,
    violet: 15631086,
    wheat: 16113331,
    white: 16777215,
    whitesmoke: 16119285,
    yellow: 16776960,
    yellowgreen: 10145074
  };
  define_default(Color, color, {
    copy(channels) {
      return Object.assign(new this.constructor(), this, channels);
    },
    displayable() {
      return this.rgb().displayable();
    },
    hex: color_formatHex,
    // Deprecated! Use color.formatHex.
    formatHex: color_formatHex,
    formatHex8: color_formatHex8,
    formatHsl: color_formatHsl,
    formatRgb: color_formatRgb,
    toString: color_formatRgb
  });
  function color_formatHex() {
    return this.rgb().formatHex();
  }
  function color_formatHex8() {
    return this.rgb().formatHex8();
  }
  function color_formatHsl() {
    return hslConvert(this).formatHsl();
  }
  function color_formatRgb() {
    return this.rgb().formatRgb();
  }
  function color(format2) {
    var m, l;
    format2 = (format2 + "").trim().toLowerCase();
    return (m = reHex.exec(format2)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) : l === 3 ? new Rgb(m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, (m & 15) << 4 | m & 15, 1) : l === 8 ? rgba(m >> 24 & 255, m >> 16 & 255, m >> 8 & 255, (m & 255) / 255) : l === 4 ? rgba(m >> 12 & 15 | m >> 8 & 240, m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, ((m & 15) << 4 | m & 15) / 255) : null) : (m = reRgbInteger.exec(format2)) ? new Rgb(m[1], m[2], m[3], 1) : (m = reRgbPercent.exec(format2)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) : (m = reRgbaInteger.exec(format2)) ? rgba(m[1], m[2], m[3], m[4]) : (m = reRgbaPercent.exec(format2)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) : (m = reHslPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) : (m = reHslaPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) : named.hasOwnProperty(format2) ? rgbn(named[format2]) : format2 === "transparent" ? new Rgb(NaN, NaN, NaN, 0) : null;
  }
  function rgbn(n) {
    return new Rgb(n >> 16 & 255, n >> 8 & 255, n & 255, 1);
  }
  function rgba(r, g, b2, a2) {
    if (a2 <= 0) r = g = b2 = NaN;
    return new Rgb(r, g, b2, a2);
  }
  function rgbConvert(o) {
    if (!(o instanceof Color)) o = color(o);
    if (!o) return new Rgb();
    o = o.rgb();
    return new Rgb(o.r, o.g, o.b, o.opacity);
  }
  function rgb(r, g, b2, opacity3) {
    return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b2, opacity3 == null ? 1 : opacity3);
  }
  function Rgb(r, g, b2, opacity3) {
    this.r = +r;
    this.g = +g;
    this.b = +b2;
    this.opacity = +opacity3;
  }
  define_default(Rgb, rgb, extend2(Color, {
    brighter(k) {
      k = k == null ? brighter : Math.pow(brighter, k);
      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
    },
    darker(k) {
      k = k == null ? darker : Math.pow(darker, k);
      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
    },
    rgb() {
      return this;
    },
    clamp() {
      return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));
    },
    displayable() {
      return -0.5 <= this.r && this.r < 255.5 && (-0.5 <= this.g && this.g < 255.5) && (-0.5 <= this.b && this.b < 255.5) && (0 <= this.opacity && this.opacity <= 1);
    },
    hex: rgb_formatHex,
    // Deprecated! Use color.formatHex.
    formatHex: rgb_formatHex,
    formatHex8: rgb_formatHex8,
    formatRgb: rgb_formatRgb,
    toString: rgb_formatRgb
  }));
  function rgb_formatHex() {
    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;
  }
  function rgb_formatHex8() {
    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
  }
  function rgb_formatRgb() {
    const a2 = clampa(this.opacity);
    return `${a2 === 1 ? "rgb(" : "rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a2 === 1 ? ")" : `, ${a2})`}`;
  }
  function clampa(opacity3) {
    return isNaN(opacity3) ? 1 : Math.max(0, Math.min(1, opacity3));
  }
  function clampi(value18) {
    return Math.max(0, Math.min(255, Math.round(value18) || 0));
  }
  function hex(value18) {
    value18 = clampi(value18);
    return (value18 < 16 ? "0" : "") + value18.toString(16);
  }
  function hsla(h, s, l, a2) {
    if (a2 <= 0) h = s = l = NaN;
    else if (l <= 0 || l >= 1) h = s = NaN;
    else if (s <= 0) h = NaN;
    return new Hsl(h, s, l, a2);
  }
  function hslConvert(o) {
    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);
    if (!(o instanceof Color)) o = color(o);
    if (!o) return new Hsl();
    if (o instanceof Hsl) return o;
    o = o.rgb();
    var r = o.r / 255, g = o.g / 255, b2 = o.b / 255, min12 = Math.min(r, g, b2), max20 = Math.max(r, g, b2), h = NaN, s = max20 - min12, l = (max20 + min12) / 2;
    if (s) {
      if (r === max20) h = (g - b2) / s + (g < b2) * 6;
      else if (g === max20) h = (b2 - r) / s + 2;
      else h = (r - g) / s + 4;
      s /= l < 0.5 ? max20 + min12 : 2 - max20 - min12;
      h *= 60;
    } else {
      s = l > 0 && l < 1 ? 0 : h;
    }
    return new Hsl(h, s, l, o.opacity);
  }
  function hsl(h, s, l, opacity3) {
    return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity3 == null ? 1 : opacity3);
  }
  function Hsl(h, s, l, opacity3) {
    this.h = +h;
    this.s = +s;
    this.l = +l;
    this.opacity = +opacity3;
  }
  define_default(Hsl, hsl, extend2(Color, {
    brighter(k) {
      k = k == null ? brighter : Math.pow(brighter, k);
      return new Hsl(this.h, this.s, this.l * k, this.opacity);
    },
    darker(k) {
      k = k == null ? darker : Math.pow(darker, k);
      return new Hsl(this.h, this.s, this.l * k, this.opacity);
    },
    rgb() {
      var h = this.h % 360 + (this.h < 0) * 360, s = isNaN(h) || isNaN(this.s) ? 0 : this.s, l = this.l, m2 = l + (l < 0.5 ? l : 1 - l) * s, m1 = 2 * l - m2;
      return new Rgb(
        hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
        hsl2rgb(h, m1, m2),
        hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
        this.opacity
      );
    },
    clamp() {
      return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));
    },
    displayable() {
      return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && (0 <= this.l && this.l <= 1) && (0 <= this.opacity && this.opacity <= 1);
    },
    formatHsl() {
      const a2 = clampa(this.opacity);
      return `${a2 === 1 ? "hsl(" : "hsla("}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a2 === 1 ? ")" : `, ${a2})`}`;
    }
  }));
  function clamph(value18) {
    value18 = (value18 || 0) % 360;
    return value18 < 0 ? value18 + 360 : value18;
  }
  function clampt(value18) {
    return Math.max(0, Math.min(1, value18 || 0));
  }
  function hsl2rgb(h, m1, m2) {
    return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;
  }

  // node_modules/d3-interpolate/src/basis.js
  function basis(t1, v0, v1, v2, v3) {
    var t2 = t1 * t1, t3 = t2 * t1;
    return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;
  }
  function basis_default(values2) {
    var n = values2.length - 1;
    return function(t) {
      var i2 = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n), v1 = values2[i2], v2 = values2[i2 + 1], v0 = i2 > 0 ? values2[i2 - 1] : 2 * v1 - v2, v3 = i2 < n - 1 ? values2[i2 + 2] : 2 * v2 - v1;
      return basis((t - i2 / n) * n, v0, v1, v2, v3);
    };
  }

  // node_modules/d3-interpolate/src/basisClosed.js
  function basisClosed_default(values2) {
    var n = values2.length;
    return function(t) {
      var i2 = Math.floor(((t %= 1) < 0 ? ++t : t) * n), v0 = values2[(i2 + n - 1) % n], v1 = values2[i2 % n], v2 = values2[(i2 + 1) % n], v3 = values2[(i2 + 2) % n];
      return basis((t - i2 / n) * n, v0, v1, v2, v3);
    };
  }

  // node_modules/d3-interpolate/src/constant.js
  var constant_default2 = (x46) => () => x46;

  // node_modules/d3-interpolate/src/color.js
  function linear(a2, d23) {
    return function(t) {
      return a2 + t * d23;
    };
  }
  function exponential(a2, b2, y46) {
    return a2 = Math.pow(a2, y46), b2 = Math.pow(b2, y46) - a2, y46 = 1 / y46, function(t) {
      return Math.pow(a2 + t * b2, y46);
    };
  }
  function gamma(y46) {
    return (y46 = +y46) === 1 ? nogamma : function(a2, b2) {
      return b2 - a2 ? exponential(a2, b2, y46) : constant_default2(isNaN(a2) ? b2 : a2);
    };
  }
  function nogamma(a2, b2) {
    var d23 = b2 - a2;
    return d23 ? linear(a2, d23) : constant_default2(isNaN(a2) ? b2 : a2);
  }

  // node_modules/d3-interpolate/src/rgb.js
  var rgb_default = (function rgbGamma(y46) {
    var color2 = gamma(y46);
    function rgb2(start7, end2) {
      var r = color2((start7 = rgb(start7)).r, (end2 = rgb(end2)).r), g = color2(start7.g, end2.g), b2 = color2(start7.b, end2.b), opacity3 = nogamma(start7.opacity, end2.opacity);
      return function(t) {
        start7.r = r(t);
        start7.g = g(t);
        start7.b = b2(t);
        start7.opacity = opacity3(t);
        return start7 + "";
      };
    }
    rgb2.gamma = rgbGamma;
    return rgb2;
  })(1);
  function rgbSpline(spline) {
    return function(colors6) {
      var n = colors6.length, r = new Array(n), g = new Array(n), b2 = new Array(n), i2, color2;
      for (i2 = 0; i2 < n; ++i2) {
        color2 = rgb(colors6[i2]);
        r[i2] = color2.r || 0;
        g[i2] = color2.g || 0;
        b2[i2] = color2.b || 0;
      }
      r = spline(r);
      g = spline(g);
      b2 = spline(b2);
      color2.opacity = 1;
      return function(t) {
        color2.r = r(t);
        color2.g = g(t);
        color2.b = b2(t);
        return color2 + "";
      };
    };
  }
  var rgbBasis = rgbSpline(basis_default);
  var rgbBasisClosed = rgbSpline(basisClosed_default);

  // node_modules/d3-interpolate/src/numberArray.js
  function numberArray_default(a2, b2) {
    if (!b2) b2 = [];
    var n = a2 ? Math.min(b2.length, a2.length) : 0, c = b2.slice(), i2;
    return function(t) {
      for (i2 = 0; i2 < n; ++i2) c[i2] = a2[i2] * (1 - t) + b2[i2] * t;
      return c;
    };
  }
  function isNumberArray(x46) {
    return ArrayBuffer.isView(x46) && !(x46 instanceof DataView);
  }

  // node_modules/d3-interpolate/src/array.js
  function genericArray(a2, b2) {
    var nb = b2 ? b2.length : 0, na = a2 ? Math.min(nb, a2.length) : 0, x46 = new Array(na), c = new Array(nb), i2;
    for (i2 = 0; i2 < na; ++i2) x46[i2] = value_default(a2[i2], b2[i2]);
    for (; i2 < nb; ++i2) c[i2] = b2[i2];
    return function(t) {
      for (i2 = 0; i2 < na; ++i2) c[i2] = x46[i2](t);
      return c;
    };
  }

  // node_modules/d3-interpolate/src/date.js
  function date_default(a2, b2) {
    var d23 = /* @__PURE__ */ new Date();
    return a2 = +a2, b2 = +b2, function(t) {
      return d23.setTime(a2 * (1 - t) + b2 * t), d23;
    };
  }

  // node_modules/d3-interpolate/src/number.js
  function number_default(a2, b2) {
    return a2 = +a2, b2 = +b2, function(t) {
      return a2 * (1 - t) + b2 * t;
    };
  }

  // node_modules/d3-interpolate/src/object.js
  function object_default(a2, b2) {
    var i2 = {}, c = {}, k;
    if (a2 === null || typeof a2 !== "object") a2 = {};
    if (b2 === null || typeof b2 !== "object") b2 = {};
    for (k in b2) {
      if (k in a2) {
        i2[k] = value_default(a2[k], b2[k]);
      } else {
        c[k] = b2[k];
      }
    }
    return function(t) {
      for (k in i2) c[k] = i2[k](t);
      return c;
    };
  }

  // node_modules/d3-interpolate/src/string.js
  var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
  var reB = new RegExp(reA.source, "g");
  function zero3(b2) {
    return function() {
      return b2;
    };
  }
  function one3(b2) {
    return function(t) {
      return b2(t) + "";
    };
  }
  function string_default(a2, b2) {
    var bi = reA.lastIndex = reB.lastIndex = 0, am, bm, bs, i2 = -1, s = [], q2 = [];
    a2 = a2 + "", b2 = b2 + "";
    while ((am = reA.exec(a2)) && (bm = reB.exec(b2))) {
      if ((bs = bm.index) > bi) {
        bs = b2.slice(bi, bs);
        if (s[i2]) s[i2] += bs;
        else s[++i2] = bs;
      }
      if ((am = am[0]) === (bm = bm[0])) {
        if (s[i2]) s[i2] += bm;
        else s[++i2] = bm;
      } else {
        s[++i2] = null;
        q2.push({ i: i2, x: number_default(am, bm) });
      }
      bi = reB.lastIndex;
    }
    if (bi < b2.length) {
      bs = b2.slice(bi);
      if (s[i2]) s[i2] += bs;
      else s[++i2] = bs;
    }
    return s.length < 2 ? q2[0] ? one3(q2[0].x) : zero3(b2) : (b2 = q2.length, function(t) {
      for (var i3 = 0, o; i3 < b2; ++i3) s[(o = q2[i3]).i] = o.x(t);
      return s.join("");
    });
  }

  // node_modules/d3-interpolate/src/value.js
  function value_default(a2, b2) {
    var t = typeof b2, c;
    return b2 == null || t === "boolean" ? constant_default2(b2) : (t === "number" ? number_default : t === "string" ? (c = color(b2)) ? (b2 = c, rgb_default) : string_default : b2 instanceof color ? rgb_default : b2 instanceof Date ? date_default : isNumberArray(b2) ? numberArray_default : Array.isArray(b2) ? genericArray : typeof b2.valueOf !== "function" && typeof b2.toString !== "function" || isNaN(b2) ? object_default : number_default)(a2, b2);
  }

  // node_modules/d3-interpolate/src/round.js
  function round_default(a2, b2) {
    return a2 = +a2, b2 = +b2, function(t) {
      return Math.round(a2 * (1 - t) + b2 * t);
    };
  }

  // node_modules/d3-interpolate/src/transform/decompose.js
  var degrees = 180 / Math.PI;
  var identity15 = {
    translateX: 0,
    translateY: 0,
    rotate: 0,
    skewX: 0,
    scaleX: 1,
    scaleY: 1
  };
  function decompose_default(a2, b2, c, d23, e, f) {
    var scaleX2, scaleY2, skewX;
    if (scaleX2 = Math.sqrt(a2 * a2 + b2 * b2)) a2 /= scaleX2, b2 /= scaleX2;
    if (skewX = a2 * c + b2 * d23) c -= a2 * skewX, d23 -= b2 * skewX;
    if (scaleY2 = Math.sqrt(c * c + d23 * d23)) c /= scaleY2, d23 /= scaleY2, skewX /= scaleY2;
    if (a2 * d23 < b2 * c) a2 = -a2, b2 = -b2, skewX = -skewX, scaleX2 = -scaleX2;
    return {
      translateX: e,
      translateY: f,
      rotate: Math.atan2(b2, a2) * degrees,
      skewX: Math.atan(skewX) * degrees,
      scaleX: scaleX2,
      scaleY: scaleY2
    };
  }

  // node_modules/d3-interpolate/src/transform/parse.js
  var svgNode;
  function parseCss(value18) {
    const m = new (typeof DOMMatrix === "function" ? DOMMatrix : WebKitCSSMatrix)(value18 + "");
    return m.isIdentity ? identity15 : decompose_default(m.a, m.b, m.c, m.d, m.e, m.f);
  }
  function parseSvg(value18) {
    if (value18 == null) return identity15;
    if (!svgNode) svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
    svgNode.setAttribute("transform", value18);
    if (!(value18 = svgNode.transform.baseVal.consolidate())) return identity15;
    value18 = value18.matrix;
    return decompose_default(value18.a, value18.b, value18.c, value18.d, value18.e, value18.f);
  }

  // node_modules/d3-interpolate/src/transform/index.js
  function interpolateTransform(parse9, pxComma, pxParen, degParen) {
    function pop4(s) {
      return s.length ? s.pop() + " " : "";
    }
    function translate(xa, ya, xb, yb, s, q2) {
      if (xa !== xb || ya !== yb) {
        var i2 = s.push("translate(", null, pxComma, null, pxParen);
        q2.push({ i: i2 - 4, x: number_default(xa, xb) }, { i: i2 - 2, x: number_default(ya, yb) });
      } else if (xb || yb) {
        s.push("translate(" + xb + pxComma + yb + pxParen);
      }
    }
    function rotate(a2, b2, s, q2) {
      if (a2 !== b2) {
        if (a2 - b2 > 180) b2 += 360;
        else if (b2 - a2 > 180) a2 += 360;
        q2.push({ i: s.push(pop4(s) + "rotate(", null, degParen) - 2, x: number_default(a2, b2) });
      } else if (b2) {
        s.push(pop4(s) + "rotate(" + b2 + degParen);
      }
    }
    function skewX(a2, b2, s, q2) {
      if (a2 !== b2) {
        q2.push({ i: s.push(pop4(s) + "skewX(", null, degParen) - 2, x: number_default(a2, b2) });
      } else if (b2) {
        s.push(pop4(s) + "skewX(" + b2 + degParen);
      }
    }
    function scale(xa, ya, xb, yb, s, q2) {
      if (xa !== xb || ya !== yb) {
        var i2 = s.push(pop4(s) + "scale(", null, ",", null, ")");
        q2.push({ i: i2 - 4, x: number_default(xa, xb) }, { i: i2 - 2, x: number_default(ya, yb) });
      } else if (xb !== 1 || yb !== 1) {
        s.push(pop4(s) + "scale(" + xb + "," + yb + ")");
      }
    }
    return function(a2, b2) {
      var s = [], q2 = [];
      a2 = parse9(a2), b2 = parse9(b2);
      translate(a2.translateX, a2.translateY, b2.translateX, b2.translateY, s, q2);
      rotate(a2.rotate, b2.rotate, s, q2);
      skewX(a2.skewX, b2.skewX, s, q2);
      scale(a2.scaleX, a2.scaleY, b2.scaleX, b2.scaleY, s, q2);
      a2 = b2 = null;
      return function(t) {
        var i2 = -1, n = q2.length, o;
        while (++i2 < n) s[(o = q2[i2]).i] = o.x(t);
        return s.join("");
      };
    };
  }
  var interpolateTransformCss = interpolateTransform(parseCss, "px, ", "px)", "deg)");
  var interpolateTransformSvg = interpolateTransform(parseSvg, ", ", ")", ")");

  // node_modules/d3-timer/src/timer.js
  var frame = 0;
  var timeout = 0;
  var interval = 0;
  var pokeDelay = 1e3;
  var taskHead;
  var taskTail;
  var clockLast = 0;
  var clockNow = 0;
  var clockSkew = 0;
  var clock = typeof performance === "object" && performance.now ? performance : Date;
  var setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) {
    setTimeout(f, 17);
  };
  function now2() {
    return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
  }
  function clearNow() {
    clockNow = 0;
  }
  function Timer() {
    this._call = this._time = this._next = null;
  }
  Timer.prototype = timer.prototype = {
    constructor: Timer,
    restart: function(callback, delay2, time3) {
      if (typeof callback !== "function") throw new TypeError("callback is not a function");
      time3 = (time3 == null ? now2() : +time3) + (delay2 == null ? 0 : +delay2);
      if (!this._next && taskTail !== this) {
        if (taskTail) taskTail._next = this;
        else taskHead = this;
        taskTail = this;
      }
      this._call = callback;
      this._time = time3;
      sleep();
    },
    stop: function() {
      if (this._call) {
        this._call = null;
        this._time = Infinity;
        sleep();
      }
    }
  };
  function timer(callback, delay2, time3) {
    var t = new Timer();
    t.restart(callback, delay2, time3);
    return t;
  }
  function timerFlush() {
    now2();
    ++frame;
    var t = taskHead, e;
    while (t) {
      if ((e = clockNow - t._time) >= 0) t._call.call(void 0, e);
      t = t._next;
    }
    --frame;
  }
  function wake() {
    clockNow = (clockLast = clock.now()) + clockSkew;
    frame = timeout = 0;
    try {
      timerFlush();
    } finally {
      frame = 0;
      nap();
      clockNow = 0;
    }
  }
  function poke3() {
    var now3 = clock.now(), delay2 = now3 - clockLast;
    if (delay2 > pokeDelay) clockSkew -= delay2, clockLast = now3;
  }
  function nap() {
    var t0, t1 = taskHead, t2, time3 = Infinity;
    while (t1) {
      if (t1._call) {
        if (time3 > t1._time) time3 = t1._time;
        t0 = t1, t1 = t1._next;
      } else {
        t2 = t1._next, t1._next = null;
        t1 = t0 ? t0._next = t2 : taskHead = t2;
      }
    }
    taskTail = t0;
    sleep(time3);
  }
  function sleep(time3) {
    if (frame) return;
    if (timeout) timeout = clearTimeout(timeout);
    var delay2 = time3 - clockNow;
    if (delay2 > 24) {
      if (time3 < Infinity) timeout = setTimeout(wake, time3 - clock.now() - clockSkew);
      if (interval) interval = clearInterval(interval);
    } else {
      if (!interval) clockLast = clock.now(), interval = setInterval(poke3, pokeDelay);
      frame = 1, setFrame(wake);
    }
  }

  // node_modules/d3-timer/src/timeout.js
  function timeout_default(callback, delay2, time3) {
    var t = new Timer();
    delay2 = delay2 == null ? 0 : +delay2;
    t.restart((elapsed) => {
      t.stop();
      callback(elapsed + delay2);
    }, delay2, time3);
    return t;
  }

  // node_modules/d3-transition/src/transition/schedule.js
  var emptyOn = dispatch_default("start", "end", "cancel", "interrupt");
  var emptyTween = [];
  var CREATED = 0;
  var SCHEDULED = 1;
  var STARTING = 2;
  var STARTED = 3;
  var RUNNING = 4;
  var ENDING = 5;
  var ENDED = 6;
  function schedule_default(node, name16, id5, index5, group4, timing) {
    var schedules = node.__transition;
    if (!schedules) node.__transition = {};
    else if (id5 in schedules) return;
    create4(node, id5, {
      name: name16,
      index: index5,
      // For context during callback.
      group: group4,
      // For context during callback.
      on: emptyOn,
      tween: emptyTween,
      time: timing.time,
      delay: timing.delay,
      duration: timing.duration,
      ease: timing.ease,
      timer: null,
      state: CREATED
    });
  }
  function init4(node, id5) {
    var schedule = get6(node, id5);
    if (schedule.state > CREATED) throw new Error("too late; already scheduled");
    return schedule;
  }
  function set4(node, id5) {
    var schedule = get6(node, id5);
    if (schedule.state > STARTED) throw new Error("too late; already running");
    return schedule;
  }
  function get6(node, id5) {
    var schedule = node.__transition;
    if (!schedule || !(schedule = schedule[id5])) throw new Error("transition not found");
    return schedule;
  }
  function create4(node, id5, self) {
    var schedules = node.__transition, tween;
    schedules[id5] = self;
    self.timer = timer(schedule, 0, self.time);
    function schedule(elapsed) {
      self.state = SCHEDULED;
      self.timer.restart(start7, self.delay, self.time);
      if (self.delay <= elapsed) start7(elapsed - self.delay);
    }
    function start7(elapsed) {
      var i2, j, n, o;
      if (self.state !== SCHEDULED) return stop4();
      for (i2 in schedules) {
        o = schedules[i2];
        if (o.name !== self.name) continue;
        if (o.state === STARTED) return timeout_default(start7);
        if (o.state === RUNNING) {
          o.state = ENDED;
          o.timer.stop();
          o.on.call("interrupt", node, node.__data__, o.index, o.group);
          delete schedules[i2];
        } else if (+i2 < id5) {
          o.state = ENDED;
          o.timer.stop();
          o.on.call("cancel", node, node.__data__, o.index, o.group);
          delete schedules[i2];
        }
      }
      timeout_default(function() {
        if (self.state === STARTED) {
          self.state = RUNNING;
          self.timer.restart(tick, self.delay, self.time);
          tick(elapsed);
        }
      });
      self.state = STARTING;
      self.on.call("start", node, node.__data__, self.index, self.group);
      if (self.state !== STARTING) return;
      self.state = STARTED;
      tween = new Array(n = self.tween.length);
      for (i2 = 0, j = -1; i2 < n; ++i2) {
        if (o = self.tween[i2].value.call(node, node.__data__, self.index, self.group)) {
          tween[++j] = o;
        }
      }
      tween.length = j + 1;
    }
    function tick(elapsed) {
      var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop4), self.state = ENDING, 1), i2 = -1, n = tween.length;
      while (++i2 < n) {
        tween[i2].call(node, t);
      }
      if (self.state === ENDING) {
        self.on.call("end", node, node.__data__, self.index, self.group);
        stop4();
      }
    }
    function stop4() {
      self.state = ENDED;
      self.timer.stop();
      delete schedules[id5];
      for (var i2 in schedules) return;
      delete node.__transition;
    }
  }

  // node_modules/d3-transition/src/interrupt.js
  function interrupt_default(node, name16) {
    var schedules = node.__transition, schedule, active, empty9 = true, i2;
    if (!schedules) return;
    name16 = name16 == null ? null : name16 + "";
    for (i2 in schedules) {
      if ((schedule = schedules[i2]).name !== name16) {
        empty9 = false;
        continue;
      }
      active = schedule.state > STARTING && schedule.state < ENDING;
      schedule.state = ENDED;
      schedule.timer.stop();
      schedule.on.call(active ? "interrupt" : "cancel", node, node.__data__, schedule.index, schedule.group);
      delete schedules[i2];
    }
    if (empty9) delete node.__transition;
  }

  // node_modules/d3-transition/src/selection/interrupt.js
  function interrupt_default2(name16) {
    return this.each(function() {
      interrupt_default(this, name16);
    });
  }

  // node_modules/d3-transition/src/transition/tween.js
  function tweenRemove(id5, name16) {
    var tween0, tween1;
    return function() {
      var schedule = set4(this, id5), tween = schedule.tween;
      if (tween !== tween0) {
        tween1 = tween0 = tween;
        for (var i2 = 0, n = tween1.length; i2 < n; ++i2) {
          if (tween1[i2].name === name16) {
            tween1 = tween1.slice();
            tween1.splice(i2, 1);
            break;
          }
        }
      }
      schedule.tween = tween1;
    };
  }
  function tweenFunction(id5, name16, value18) {
    var tween0, tween1;
    if (typeof value18 !== "function") throw new Error();
    return function() {
      var schedule = set4(this, id5), tween = schedule.tween;
      if (tween !== tween0) {
        tween1 = (tween0 = tween).slice();
        for (var t = { name: name16, value: value18 }, i2 = 0, n = tween1.length; i2 < n; ++i2) {
          if (tween1[i2].name === name16) {
            tween1[i2] = t;
            break;
          }
        }
        if (i2 === n) tween1.push(t);
      }
      schedule.tween = tween1;
    };
  }
  function tween_default(name16, value18) {
    var id5 = this._id;
    name16 += "";
    if (arguments.length < 2) {
      var tween = get6(this.node(), id5).tween;
      for (var i2 = 0, n = tween.length, t; i2 < n; ++i2) {
        if ((t = tween[i2]).name === name16) {
          return t.value;
        }
      }
      return null;
    }
    return this.each((value18 == null ? tweenRemove : tweenFunction)(id5, name16, value18));
  }
  function tweenValue(transition2, name16, value18) {
    var id5 = transition2._id;
    transition2.each(function() {
      var schedule = set4(this, id5);
      (schedule.value || (schedule.value = {}))[name16] = value18.apply(this, arguments);
    });
    return function(node) {
      return get6(node, id5).value[name16];
    };
  }

  // node_modules/d3-transition/src/transition/interpolate.js
  function interpolate_default(a2, b2) {
    var c;
    return (typeof b2 === "number" ? number_default : b2 instanceof color ? rgb_default : (c = color(b2)) ? (b2 = c, rgb_default) : string_default)(a2, b2);
  }

  // node_modules/d3-transition/src/transition/attr.js
  function attrRemove2(name16) {
    return function() {
      this.removeAttribute(name16);
    };
  }
  function attrRemoveNS2(fullname) {
    return function() {
      this.removeAttributeNS(fullname.space, fullname.local);
    };
  }
  function attrConstant2(name16, interpolate, value1) {
    var string00, string1 = value1 + "", interpolate0;
    return function() {
      var string0 = this.getAttribute(name16);
      return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
    };
  }
  function attrConstantNS2(fullname, interpolate, value1) {
    var string00, string1 = value1 + "", interpolate0;
    return function() {
      var string0 = this.getAttributeNS(fullname.space, fullname.local);
      return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
    };
  }
  function attrFunction2(name16, interpolate, value18) {
    var string00, string10, interpolate0;
    return function() {
      var string0, value1 = value18(this), string1;
      if (value1 == null) return void this.removeAttribute(name16);
      string0 = this.getAttribute(name16);
      string1 = value1 + "";
      return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
    };
  }
  function attrFunctionNS2(fullname, interpolate, value18) {
    var string00, string10, interpolate0;
    return function() {
      var string0, value1 = value18(this), string1;
      if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);
      string0 = this.getAttributeNS(fullname.space, fullname.local);
      string1 = value1 + "";
      return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
    };
  }
  function attr_default2(name16, value18) {
    var fullname = namespace_default(name16), i2 = fullname === "transform" ? interpolateTransformSvg : interpolate_default;
    return this.attrTween(name16, typeof value18 === "function" ? (fullname.local ? attrFunctionNS2 : attrFunction2)(fullname, i2, tweenValue(this, "attr." + name16, value18)) : value18 == null ? (fullname.local ? attrRemoveNS2 : attrRemove2)(fullname) : (fullname.local ? attrConstantNS2 : attrConstant2)(fullname, i2, value18));
  }

  // node_modules/d3-transition/src/transition/attrTween.js
  function attrInterpolate(name16, i2) {
    return function(t) {
      this.setAttribute(name16, i2.call(this, t));
    };
  }
  function attrInterpolateNS(fullname, i2) {
    return function(t) {
      this.setAttributeNS(fullname.space, fullname.local, i2.call(this, t));
    };
  }
  function attrTweenNS(fullname, value18) {
    var t0, i0;
    function tween() {
      var i2 = value18.apply(this, arguments);
      if (i2 !== i0) t0 = (i0 = i2) && attrInterpolateNS(fullname, i2);
      return t0;
    }
    tween._value = value18;
    return tween;
  }
  function attrTween(name16, value18) {
    var t0, i0;
    function tween() {
      var i2 = value18.apply(this, arguments);
      if (i2 !== i0) t0 = (i0 = i2) && attrInterpolate(name16, i2);
      return t0;
    }
    tween._value = value18;
    return tween;
  }
  function attrTween_default(name16, value18) {
    var key = "attr." + name16;
    if (arguments.length < 2) return (key = this.tween(key)) && key._value;
    if (value18 == null) return this.tween(key, null);
    if (typeof value18 !== "function") throw new Error();
    var fullname = namespace_default(name16);
    return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value18));
  }

  // node_modules/d3-transition/src/transition/delay.js
  function delayFunction(id5, value18) {
    return function() {
      init4(this, id5).delay = +value18.apply(this, arguments);
    };
  }
  function delayConstant(id5, value18) {
    return value18 = +value18, function() {
      init4(this, id5).delay = value18;
    };
  }
  function delay_default(value18) {
    var id5 = this._id;
    return arguments.length ? this.each((typeof value18 === "function" ? delayFunction : delayConstant)(id5, value18)) : get6(this.node(), id5).delay;
  }

  // node_modules/d3-transition/src/transition/duration.js
  function durationFunction(id5, value18) {
    return function() {
      set4(this, id5).duration = +value18.apply(this, arguments);
    };
  }
  function durationConstant(id5, value18) {
    return value18 = +value18, function() {
      set4(this, id5).duration = value18;
    };
  }
  function duration_default(value18) {
    var id5 = this._id;
    return arguments.length ? this.each((typeof value18 === "function" ? durationFunction : durationConstant)(id5, value18)) : get6(this.node(), id5).duration;
  }

  // node_modules/d3-transition/src/transition/ease.js
  function easeConstant(id5, value18) {
    if (typeof value18 !== "function") throw new Error();
    return function() {
      set4(this, id5).ease = value18;
    };
  }
  function ease_default(value18) {
    var id5 = this._id;
    return arguments.length ? this.each(easeConstant(id5, value18)) : get6(this.node(), id5).ease;
  }

  // node_modules/d3-transition/src/transition/easeVarying.js
  function easeVarying(id5, value18) {
    return function() {
      var v = value18.apply(this, arguments);
      if (typeof v !== "function") throw new Error();
      set4(this, id5).ease = v;
    };
  }
  function easeVarying_default(value18) {
    if (typeof value18 !== "function") throw new Error();
    return this.each(easeVarying(this._id, value18));
  }

  // node_modules/d3-transition/src/transition/filter.js
  function filter_default2(match2) {
    if (typeof match2 !== "function") match2 = matcher_default(match2);
    for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, subgroup = subgroups[j] = [], node, i2 = 0; i2 < n; ++i2) {
        if ((node = group4[i2]) && match2.call(node, node.__data__, i2, group4)) {
          subgroup.push(node);
        }
      }
    }
    return new Transition(subgroups, this._parents, this._name, this._id);
  }

  // node_modules/d3-transition/src/transition/merge.js
  function merge_default2(transition2) {
    if (transition2._id !== this._id) throw new Error();
    for (var groups0 = this._groups, groups1 = transition2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
      for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge3 = merges[j] = new Array(n), node, i2 = 0; i2 < n; ++i2) {
        if (node = group0[i2] || group1[i2]) {
          merge3[i2] = node;
        }
      }
    }
    for (; j < m0; ++j) {
      merges[j] = groups0[j];
    }
    return new Transition(merges, this._parents, this._name, this._id);
  }

  // node_modules/d3-transition/src/transition/on.js
  function start3(name16) {
    return (name16 + "").trim().split(/^|\s+/).every(function(t) {
      var i2 = t.indexOf(".");
      if (i2 >= 0) t = t.slice(0, i2);
      return !t || t === "start";
    });
  }
  function onFunction(id5, name16, listener) {
    var on0, on1, sit = start3(name16) ? init4 : set4;
    return function() {
      var schedule = sit(this, id5), on3 = schedule.on;
      if (on3 !== on0) (on1 = (on0 = on3).copy()).on(name16, listener);
      schedule.on = on1;
    };
  }
  function on_default2(name16, listener) {
    var id5 = this._id;
    return arguments.length < 2 ? get6(this.node(), id5).on.on(name16) : this.each(onFunction(id5, name16, listener));
  }

  // node_modules/d3-transition/src/transition/remove.js
  function removeFunction(id5) {
    return function() {
      var parent2 = this.parentNode;
      for (var i2 in this.__transition) if (+i2 !== id5) return;
      if (parent2) parent2.removeChild(this);
    };
  }
  function remove_default2() {
    return this.on("end.remove", removeFunction(this._id));
  }

  // node_modules/d3-transition/src/transition/select.js
  function select_default2(select8) {
    var name16 = this._name, id5 = this._id;
    if (typeof select8 !== "function") select8 = selector_default(select8);
    for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, subgroup = subgroups[j] = new Array(n), node, subnode, i2 = 0; i2 < n; ++i2) {
        if ((node = group4[i2]) && (subnode = select8.call(node, node.__data__, i2, group4))) {
          if ("__data__" in node) subnode.__data__ = node.__data__;
          subgroup[i2] = subnode;
          schedule_default(subgroup[i2], name16, id5, i2, subgroup, get6(node, id5));
        }
      }
    }
    return new Transition(subgroups, this._parents, name16, id5);
  }

  // node_modules/d3-transition/src/transition/selectAll.js
  function selectAll_default2(select8) {
    var name16 = this._name, id5 = this._id;
    if (typeof select8 !== "function") select8 = selectorAll_default(select8);
    for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, node, i2 = 0; i2 < n; ++i2) {
        if (node = group4[i2]) {
          for (var children3 = select8.call(node, node.__data__, i2, group4), child, inherit2 = get6(node, id5), k = 0, l = children3.length; k < l; ++k) {
            if (child = children3[k]) {
              schedule_default(child, name16, id5, k, children3, inherit2);
            }
          }
          subgroups.push(children3);
          parents.push(node);
        }
      }
    }
    return new Transition(subgroups, parents, name16, id5);
  }

  // node_modules/d3-transition/src/transition/selection.js
  var Selection2 = selection_default.prototype.constructor;
  function selection_default2() {
    return new Selection2(this._groups, this._parents);
  }

  // node_modules/d3-transition/src/transition/style.js
  function styleNull(name16, interpolate) {
    var string00, string10, interpolate0;
    return function() {
      var string0 = styleValue(this, name16), string1 = (this.style.removeProperty(name16), styleValue(this, name16));
      return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);
    };
  }
  function styleRemove2(name16) {
    return function() {
      this.style.removeProperty(name16);
    };
  }
  function styleConstant2(name16, interpolate, value1) {
    var string00, string1 = value1 + "", interpolate0;
    return function() {
      var string0 = styleValue(this, name16);
      return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
    };
  }
  function styleFunction2(name16, interpolate, value18) {
    var string00, string10, interpolate0;
    return function() {
      var string0 = styleValue(this, name16), value1 = value18(this), string1 = value1 + "";
      if (value1 == null) string1 = value1 = (this.style.removeProperty(name16), styleValue(this, name16));
      return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
    };
  }
  function styleMaybeRemove(id5, name16) {
    var on0, on1, listener0, key = "style." + name16, event = "end." + key, remove5;
    return function() {
      var schedule = set4(this, id5), on3 = schedule.on, listener = schedule.value[key] == null ? remove5 || (remove5 = styleRemove2(name16)) : void 0;
      if (on3 !== on0 || listener0 !== listener) (on1 = (on0 = on3).copy()).on(event, listener0 = listener);
      schedule.on = on1;
    };
  }
  function style_default2(name16, value18, priority) {
    var i2 = (name16 += "") === "transform" ? interpolateTransformCss : interpolate_default;
    return value18 == null ? this.styleTween(name16, styleNull(name16, i2)).on("end.style." + name16, styleRemove2(name16)) : typeof value18 === "function" ? this.styleTween(name16, styleFunction2(name16, i2, tweenValue(this, "style." + name16, value18))).each(styleMaybeRemove(this._id, name16)) : this.styleTween(name16, styleConstant2(name16, i2, value18), priority).on("end.style." + name16, null);
  }

  // node_modules/d3-transition/src/transition/styleTween.js
  function styleInterpolate(name16, i2, priority) {
    return function(t) {
      this.style.setProperty(name16, i2.call(this, t), priority);
    };
  }
  function styleTween(name16, value18, priority) {
    var t, i0;
    function tween() {
      var i2 = value18.apply(this, arguments);
      if (i2 !== i0) t = (i0 = i2) && styleInterpolate(name16, i2, priority);
      return t;
    }
    tween._value = value18;
    return tween;
  }
  function styleTween_default(name16, value18, priority) {
    var key = "style." + (name16 += "");
    if (arguments.length < 2) return (key = this.tween(key)) && key._value;
    if (value18 == null) return this.tween(key, null);
    if (typeof value18 !== "function") throw new Error();
    return this.tween(key, styleTween(name16, value18, priority == null ? "" : priority));
  }

  // node_modules/d3-transition/src/transition/text.js
  function textConstant2(value18) {
    return function() {
      this.textContent = value18;
    };
  }
  function textFunction2(value18) {
    return function() {
      var value1 = value18(this);
      this.textContent = value1 == null ? "" : value1;
    };
  }
  function text_default2(value18) {
    return this.tween("text", typeof value18 === "function" ? textFunction2(tweenValue(this, "text", value18)) : textConstant2(value18 == null ? "" : value18 + ""));
  }

  // node_modules/d3-transition/src/transition/textTween.js
  function textInterpolate(i2) {
    return function(t) {
      this.textContent = i2.call(this, t);
    };
  }
  function textTween(value18) {
    var t0, i0;
    function tween() {
      var i2 = value18.apply(this, arguments);
      if (i2 !== i0) t0 = (i0 = i2) && textInterpolate(i2);
      return t0;
    }
    tween._value = value18;
    return tween;
  }
  function textTween_default(value18) {
    var key = "text";
    if (arguments.length < 1) return (key = this.tween(key)) && key._value;
    if (value18 == null) return this.tween(key, null);
    if (typeof value18 !== "function") throw new Error();
    return this.tween(key, textTween(value18));
  }

  // node_modules/d3-transition/src/transition/transition.js
  function transition_default() {
    var name16 = this._name, id0 = this._id, id1 = newId();
    for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, node, i2 = 0; i2 < n; ++i2) {
        if (node = group4[i2]) {
          var inherit2 = get6(node, id0);
          schedule_default(node, name16, id1, i2, group4, {
            time: inherit2.time + inherit2.delay + inherit2.duration,
            delay: 0,
            duration: inherit2.duration,
            ease: inherit2.ease
          });
        }
      }
    }
    return new Transition(groups, this._parents, name16, id1);
  }

  // node_modules/d3-transition/src/transition/end.js
  function end_default() {
    var on0, on1, that = this, id5 = that._id, size6 = that.size();
    return new Promise(function(resolve, reject) {
      var cancel = { value: reject }, end2 = { value: function() {
        if (--size6 === 0) resolve();
      } };
      that.each(function() {
        var schedule = set4(this, id5), on3 = schedule.on;
        if (on3 !== on0) {
          on1 = (on0 = on3).copy();
          on1._.cancel.push(cancel);
          on1._.interrupt.push(cancel);
          on1._.end.push(end2);
        }
        schedule.on = on1;
      });
      if (size6 === 0) resolve();
    });
  }

  // node_modules/d3-transition/src/transition/index.js
  var id4 = 0;
  function Transition(groups, parents, name16, id5) {
    this._groups = groups;
    this._parents = parents;
    this._name = name16;
    this._id = id5;
  }
  function transition(name16) {
    return selection_default().transition(name16);
  }
  function newId() {
    return ++id4;
  }
  var selection_prototype = selection_default.prototype;
  Transition.prototype = transition.prototype = {
    constructor: Transition,
    select: select_default2,
    selectAll: selectAll_default2,
    selectChild: selection_prototype.selectChild,
    selectChildren: selection_prototype.selectChildren,
    filter: filter_default2,
    merge: merge_default2,
    selection: selection_default2,
    transition: transition_default,
    call: selection_prototype.call,
    nodes: selection_prototype.nodes,
    node: selection_prototype.node,
    size: selection_prototype.size,
    empty: selection_prototype.empty,
    each: selection_prototype.each,
    on: on_default2,
    attr: attr_default2,
    attrTween: attrTween_default,
    style: style_default2,
    styleTween: styleTween_default,
    text: text_default2,
    textTween: textTween_default,
    remove: remove_default2,
    tween: tween_default,
    delay: delay_default,
    duration: duration_default,
    ease: ease_default,
    easeVarying: easeVarying_default,
    end: end_default,
    [Symbol.iterator]: selection_prototype[Symbol.iterator]
  };

  // node_modules/d3-ease/src/cubic.js
  function cubicInOut(t) {
    return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
  }

  // node_modules/d3-transition/src/selection/transition.js
  var defaultTiming = {
    time: null,
    // Set on use.
    delay: 0,
    duration: 250,
    ease: cubicInOut
  };
  function inherit(node, id5) {
    var timing;
    while (!(timing = node.__transition) || !(timing = timing[id5])) {
      if (!(node = node.parentNode)) {
        throw new Error(`transition ${id5} not found`);
      }
    }
    return timing;
  }
  function transition_default2(name16) {
    var id5, timing;
    if (name16 instanceof Transition) {
      id5 = name16._id, name16 = name16._name;
    } else {
      id5 = newId(), (timing = defaultTiming).time = now2(), name16 = name16 == null ? null : name16 + "";
    }
    for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
      for (var group4 = groups[j], n = group4.length, node, i2 = 0; i2 < n; ++i2) {
        if (node = group4[i2]) {
          schedule_default(node, name16, id5, i2, group4, timing || inherit(node, id5));
        }
      }
    }
    return new Transition(groups, this._parents, name16, id5);
  }

  // node_modules/d3-transition/src/selection/index.js
  selection_default.prototype.interrupt = interrupt_default2;
  selection_default.prototype.transition = transition_default2;

  // node_modules/d3-brush/src/brush.js
  var { abs: abs3, max: max7, min: min6 } = Math;
  function number1(e) {
    return [+e[0], +e[1]];
  }
  function number22(e) {
    return [number1(e[0]), number1(e[1])];
  }
  var X = {
    name: "x",
    handles: ["w", "e"].map(type),
    input: function(x46, e) {
      return x46 == null ? null : [[+x46[0], e[0][1]], [+x46[1], e[1][1]]];
    },
    output: function(xy) {
      return xy && [xy[0][0], xy[1][0]];
    }
  };
  var Y = {
    name: "y",
    handles: ["n", "s"].map(type),
    input: function(y46, e) {
      return y46 == null ? null : [[e[0][0], +y46[0]], [e[1][0], +y46[1]]];
    },
    output: function(xy) {
      return xy && [xy[0][1], xy[1][1]];
    }
  };
  var XY = {
    name: "xy",
    handles: ["n", "w", "e", "s", "nw", "ne", "sw", "se"].map(type),
    input: function(xy) {
      return xy == null ? null : number22(xy);
    },
    output: function(xy) {
      return xy;
    }
  };
  function type(t) {
    return { type: t };
  }

  // node_modules/d3-path/src/path.js
  var pi2 = Math.PI;
  var tau = 2 * pi2;
  var epsilon2 = 1e-6;
  var tauEpsilon = tau - epsilon2;
  function Path3() {
    this._x0 = this._y0 = // start of current subpath
    this._x1 = this._y1 = null;
    this._ = "";
  }
  function path() {
    return new Path3();
  }
  Path3.prototype = path.prototype = {
    constructor: Path3,
    moveTo: function(x46, y46) {
      this._ += "M" + (this._x0 = this._x1 = +x46) + "," + (this._y0 = this._y1 = +y46);
    },
    closePath: function() {
      if (this._x1 !== null) {
        this._x1 = this._x0, this._y1 = this._y0;
        this._ += "Z";
      }
    },
    lineTo: function(x46, y46) {
      this._ += "L" + (this._x1 = +x46) + "," + (this._y1 = +y46);
    },
    quadraticCurveTo: function(x115, y113, x46, y46) {
      this._ += "Q" + +x115 + "," + +y113 + "," + (this._x1 = +x46) + "," + (this._y1 = +y46);
    },
    bezierCurveTo: function(x115, y113, x211, y211, x46, y46) {
      this._ += "C" + +x115 + "," + +y113 + "," + +x211 + "," + +y211 + "," + (this._x1 = +x46) + "," + (this._y1 = +y46);
    },
    arcTo: function(x115, y113, x211, y211, r) {
      x115 = +x115, y113 = +y113, x211 = +x211, y211 = +y211, r = +r;
      var x0 = this._x1, y0 = this._y1, x212 = x211 - x115, y212 = y211 - y113, x01 = x0 - x115, y01 = y0 - y113, l01_2 = x01 * x01 + y01 * y01;
      if (r < 0) throw new Error("negative radius: " + r);
      if (this._x1 === null) {
        this._ += "M" + (this._x1 = x115) + "," + (this._y1 = y113);
      } else if (!(l01_2 > epsilon2)) ;
      else if (!(Math.abs(y01 * x212 - y212 * x01) > epsilon2) || !r) {
        this._ += "L" + (this._x1 = x115) + "," + (this._y1 = y113);
      } else {
        var x202 = x211 - x0, y202 = y211 - y0, l21_2 = x212 * x212 + y212 * y212, l20_2 = x202 * x202 + y202 * y202, l21 = Math.sqrt(l21_2), l01 = Math.sqrt(l01_2), l = r * Math.tan((pi2 - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2), t01 = l / l01, t21 = l / l21;
        if (Math.abs(t01 - 1) > epsilon2) {
          this._ += "L" + (x115 + t01 * x01) + "," + (y113 + t01 * y01);
        }
        this._ += "A" + r + "," + r + ",0,0," + +(y01 * x202 > x01 * y202) + "," + (this._x1 = x115 + t21 * x212) + "," + (this._y1 = y113 + t21 * y212);
      }
    },
    arc: function(x46, y46, r, a0, a1, ccw) {
      x46 = +x46, y46 = +y46, r = +r, ccw = !!ccw;
      var dx = r * Math.cos(a0), dy4 = r * Math.sin(a0), x0 = x46 + dx, y0 = y46 + dy4, cw = 1 ^ ccw, da = ccw ? a0 - a1 : a1 - a0;
      if (r < 0) throw new Error("negative radius: " + r);
      if (this._x1 === null) {
        this._ += "M" + x0 + "," + y0;
      } else if (Math.abs(this._x1 - x0) > epsilon2 || Math.abs(this._y1 - y0) > epsilon2) {
        this._ += "L" + x0 + "," + y0;
      }
      if (!r) return;
      if (da < 0) da = da % tau + tau;
      if (da > tauEpsilon) {
        this._ += "A" + r + "," + r + ",0,1," + cw + "," + (x46 - dx) + "," + (y46 - dy4) + "A" + r + "," + r + ",0,1," + cw + "," + (this._x1 = x0) + "," + (this._y1 = y0);
      } else if (da > epsilon2) {
        this._ += "A" + r + "," + r + ",0," + +(da >= pi2) + "," + cw + "," + (this._x1 = x46 + r * Math.cos(a1)) + "," + (this._y1 = y46 + r * Math.sin(a1));
      }
    },
    rect: function(x46, y46, w, h) {
      this._ += "M" + (this._x0 = this._x1 = +x46) + "," + (this._y0 = this._y1 = +y46) + "h" + +w + "v" + +h + "h" + -w + "Z";
    },
    toString: function() {
      return this._;
    }
  };
  var path_default = path;

  // node_modules/d3-format/src/formatDecimal.js
  function formatDecimal_default(x46) {
    return Math.abs(x46 = Math.round(x46)) >= 1e21 ? x46.toLocaleString("en").replace(/,/g, "") : x46.toString(10);
  }
  function formatDecimalParts(x46, p2) {
    if ((i2 = (x46 = p2 ? x46.toExponential(p2 - 1) : x46.toExponential()).indexOf("e")) < 0) return null;
    var i2, coefficient = x46.slice(0, i2);
    return [
      coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
      +x46.slice(i2 + 1)
    ];
  }

  // node_modules/d3-format/src/exponent.js
  function exponent_default(x46) {
    return x46 = formatDecimalParts(Math.abs(x46)), x46 ? x46[1] : NaN;
  }

  // node_modules/d3-format/src/formatGroup.js
  function formatGroup_default(grouping, thousands) {
    return function(value18, width25) {
      var i2 = value18.length, t = [], j = 0, g = grouping[0], length10 = 0;
      while (i2 > 0 && g > 0) {
        if (length10 + g + 1 > width25) g = Math.max(1, width25 - length10);
        t.push(value18.substring(i2 -= g, i2 + g));
        if ((length10 += g + 1) > width25) break;
        g = grouping[j = (j + 1) % grouping.length];
      }
      return t.reverse().join(thousands);
    };
  }

  // node_modules/d3-format/src/formatNumerals.js
  function formatNumerals_default(numerals) {
    return function(value18) {
      return value18.replace(/[0-9]/g, function(i2) {
        return numerals[+i2];
      });
    };
  }

  // node_modules/d3-format/src/formatSpecifier.js
  var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
  function formatSpecifier(specifier) {
    if (!(match2 = re.exec(specifier))) throw new Error("invalid format: " + specifier);
    var match2;
    return new FormatSpecifier({
      fill: match2[1],
      align: match2[2],
      sign: match2[3],
      symbol: match2[4],
      zero: match2[5],
      width: match2[6],
      comma: match2[7],
      precision: match2[8] && match2[8].slice(1),
      trim: match2[9],
      type: match2[10]
    });
  }
  formatSpecifier.prototype = FormatSpecifier.prototype;
  function FormatSpecifier(specifier) {
    this.fill = specifier.fill === void 0 ? " " : specifier.fill + "";
    this.align = specifier.align === void 0 ? ">" : specifier.align + "";
    this.sign = specifier.sign === void 0 ? "-" : specifier.sign + "";
    this.symbol = specifier.symbol === void 0 ? "" : specifier.symbol + "";
    this.zero = !!specifier.zero;
    this.width = specifier.width === void 0 ? void 0 : +specifier.width;
    this.comma = !!specifier.comma;
    this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;
    this.trim = !!specifier.trim;
    this.type = specifier.type === void 0 ? "" : specifier.type + "";
  }
  FormatSpecifier.prototype.toString = function() {
    return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
  };

  // node_modules/d3-format/src/formatTrim.js
  function formatTrim_default(s) {
    out: for (var n = s.length, i2 = 1, i0 = -1, i1; i2 < n; ++i2) {
      switch (s[i2]) {
        case ".":
          i0 = i1 = i2;
          break;
        case "0":
          if (i0 === 0) i0 = i2;
          i1 = i2;
          break;
        default:
          if (!+s[i2]) break out;
          if (i0 > 0) i0 = 0;
          break;
      }
    }
    return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;
  }

  // node_modules/d3-format/src/formatPrefixAuto.js
  var prefixExponent;
  function formatPrefixAuto_default(x46, p2) {
    var d23 = formatDecimalParts(x46, p2);
    if (!d23) return x46 + "";
    var coefficient = d23[0], exponent = d23[1], i2 = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1, n = coefficient.length;
    return i2 === n ? coefficient : i2 > n ? coefficient + new Array(i2 - n + 1).join("0") : i2 > 0 ? coefficient.slice(0, i2) + "." + coefficient.slice(i2) : "0." + new Array(1 - i2).join("0") + formatDecimalParts(x46, Math.max(0, p2 + i2 - 1))[0];
  }

  // node_modules/d3-format/src/formatRounded.js
  function formatRounded_default(x46, p2) {
    var d23 = formatDecimalParts(x46, p2);
    if (!d23) return x46 + "";
    var coefficient = d23[0], exponent = d23[1];
    return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1) : coefficient + new Array(exponent - coefficient.length + 2).join("0");
  }

  // node_modules/d3-format/src/formatTypes.js
  var formatTypes_default = {
    "%": (x46, p2) => (x46 * 100).toFixed(p2),
    "b": (x46) => Math.round(x46).toString(2),
    "c": (x46) => x46 + "",
    "d": formatDecimal_default,
    "e": (x46, p2) => x46.toExponential(p2),
    "f": (x46, p2) => x46.toFixed(p2),
    "g": (x46, p2) => x46.toPrecision(p2),
    "o": (x46) => Math.round(x46).toString(8),
    "p": (x46, p2) => formatRounded_default(x46 * 100, p2),
    "r": formatRounded_default,
    "s": formatPrefixAuto_default,
    "X": (x46) => Math.round(x46).toString(16).toUpperCase(),
    "x": (x46) => Math.round(x46).toString(16)
  };

  // node_modules/d3-format/src/identity.js
  function identity_default2(x46) {
    return x46;
  }

  // node_modules/d3-format/src/locale.js
  var map47 = Array.prototype.map;
  var prefixes = ["y", "z", "a", "f", "p", "n", "\xB5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
  function locale_default(locale2) {
    var group4 = locale2.grouping === void 0 || locale2.thousands === void 0 ? identity_default2 : formatGroup_default(map47.call(locale2.grouping, Number), locale2.thousands + ""), currencyPrefix = locale2.currency === void 0 ? "" : locale2.currency[0] + "", currencySuffix = locale2.currency === void 0 ? "" : locale2.currency[1] + "", decimal = locale2.decimal === void 0 ? "." : locale2.decimal + "", numerals = locale2.numerals === void 0 ? identity_default2 : formatNumerals_default(map47.call(locale2.numerals, String)), percent = locale2.percent === void 0 ? "%" : locale2.percent + "", minus = locale2.minus === void 0 ? "\u2212" : locale2.minus + "", nan2 = locale2.nan === void 0 ? "NaN" : locale2.nan + "";
    function newFormat(specifier) {
      specifier = formatSpecifier(specifier);
      var fill45 = specifier.fill, align = specifier.align, sign2 = specifier.sign, symbol = specifier.symbol, zero4 = specifier.zero, width25 = specifier.width, comma = specifier.comma, precision = specifier.precision, trim2 = specifier.trim, type2 = specifier.type;
      if (type2 === "n") comma = true, type2 = "g";
      else if (!formatTypes_default[type2]) precision === void 0 && (precision = 12), trim2 = true, type2 = "g";
      if (zero4 || fill45 === "0" && align === "=") zero4 = true, fill45 = "0", align = "=";
      var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type2) ? "0" + type2.toLowerCase() : "", suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type2) ? percent : "";
      var formatType = formatTypes_default[type2], maybeSuffix = /[defgprs%]/.test(type2);
      precision = precision === void 0 ? 6 : /[gprs]/.test(type2) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));
      function format2(value18) {
        var valuePrefix = prefix, valueSuffix = suffix, i2, n, c;
        if (type2 === "c") {
          valueSuffix = formatType(value18) + valueSuffix;
          value18 = "";
        } else {
          value18 = +value18;
          var valueNegative = value18 < 0 || 1 / value18 < 0;
          value18 = isNaN(value18) ? nan2 : formatType(Math.abs(value18), precision);
          if (trim2) value18 = formatTrim_default(value18);
          if (valueNegative && +value18 === 0 && sign2 !== "+") valueNegative = false;
          valuePrefix = (valueNegative ? sign2 === "(" ? sign2 : minus : sign2 === "-" || sign2 === "(" ? "" : sign2) + valuePrefix;
          valueSuffix = (type2 === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign2 === "(" ? ")" : "");
          if (maybeSuffix) {
            i2 = -1, n = value18.length;
            while (++i2 < n) {
              if (c = value18.charCodeAt(i2), 48 > c || c > 57) {
                valueSuffix = (c === 46 ? decimal + value18.slice(i2 + 1) : value18.slice(i2)) + valueSuffix;
                value18 = value18.slice(0, i2);
                break;
              }
            }
          }
        }
        if (comma && !zero4) value18 = group4(value18, Infinity);
        var length10 = valuePrefix.length + value18.length + valueSuffix.length, padding = length10 < width25 ? new Array(width25 - length10 + 1).join(fill45) : "";
        if (comma && zero4) value18 = group4(padding + value18, padding.length ? width25 - valueSuffix.length : Infinity), padding = "";
        switch (align) {
          case "<":
            value18 = valuePrefix + value18 + valueSuffix + padding;
            break;
          case "=":
            value18 = valuePrefix + padding + value18 + valueSuffix;
            break;
          case "^":
            value18 = padding.slice(0, length10 = padding.length >> 1) + valuePrefix + value18 + valueSuffix + padding.slice(length10);
            break;
          default:
            value18 = padding + valuePrefix + value18 + valueSuffix;
            break;
        }
        return numerals(value18);
      }
      format2.toString = function() {
        return specifier + "";
      };
      return format2;
    }
    function formatPrefix2(specifier, value18) {
      var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)), e = Math.max(-8, Math.min(8, Math.floor(exponent_default(value18) / 3))) * 3, k = Math.pow(10, -e), prefix = prefixes[8 + e / 3];
      return function(value19) {
        return f(k * value19) + prefix;
      };
    }
    return {
      format: newFormat,
      formatPrefix: formatPrefix2
    };
  }

  // node_modules/d3-format/src/defaultLocale.js
  var locale;
  var format;
  var formatPrefix;
  defaultLocale({
    thousands: ",",
    grouping: [3],
    currency: ["$", ""]
  });
  function defaultLocale(definition) {
    locale = locale_default(definition);
    format = locale.format;
    formatPrefix = locale.formatPrefix;
    return locale;
  }

  // node_modules/d3-format/src/precisionFixed.js
  function precisionFixed_default(step4) {
    return Math.max(0, -exponent_default(Math.abs(step4)));
  }

  // node_modules/d3-format/src/precisionPrefix.js
  function precisionPrefix_default(step4, value18) {
    return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent_default(value18) / 3))) * 3 - exponent_default(Math.abs(step4)));
  }

  // node_modules/d3-format/src/precisionRound.js
  function precisionRound_default(step4, max20) {
    step4 = Math.abs(step4), max20 = Math.abs(max20) - step4;
    return Math.max(0, exponent_default(max20) - exponent_default(step4)) + 1;
  }

  // node_modules/d3-scale/src/init.js
  function initRange(domain, range3) {
    switch (arguments.length) {
      case 0:
        break;
      case 1:
        this.range(domain);
        break;
      default:
        this.range(range3).domain(domain);
        break;
    }
    return this;
  }

  // node_modules/d3-scale/src/constant.js
  function constants(x46) {
    return function() {
      return x46;
    };
  }

  // node_modules/d3-scale/src/number.js
  function number3(x46) {
    return +x46;
  }

  // node_modules/d3-scale/src/continuous.js
  var unit2 = [0, 1];
  function identity16(x46) {
    return x46;
  }
  function normalize2(a2, b2) {
    return (b2 -= a2 = +a2) ? function(x46) {
      return (x46 - a2) / b2;
    } : constants(isNaN(b2) ? NaN : 0.5);
  }
  function clamper(a2, b2) {
    var t;
    if (a2 > b2) t = a2, a2 = b2, b2 = t;
    return function(x46) {
      return Math.max(a2, Math.min(b2, x46));
    };
  }
  function bimap3(domain, range3, interpolate) {
    var d0 = domain[0], d1 = domain[1], r0 = range3[0], r1 = range3[1];
    if (d1 < d0) d0 = normalize2(d1, d0), r0 = interpolate(r1, r0);
    else d0 = normalize2(d0, d1), r0 = interpolate(r0, r1);
    return function(x46) {
      return r0(d0(x46));
    };
  }
  function polymap(domain, range3, interpolate) {
    var j = Math.min(domain.length, range3.length) - 1, d23 = new Array(j), r = new Array(j), i2 = -1;
    if (domain[j] < domain[0]) {
      domain = domain.slice().reverse();
      range3 = range3.slice().reverse();
    }
    while (++i2 < j) {
      d23[i2] = normalize2(domain[i2], domain[i2 + 1]);
      r[i2] = interpolate(range3[i2], range3[i2 + 1]);
    }
    return function(x46) {
      var i3 = bisect_default(domain, x46, 1, j) - 1;
      return r[i3](d23[i3](x46));
    };
  }
  function copy2(source2, target7) {
    return target7.domain(source2.domain()).range(source2.range()).interpolate(source2.interpolate()).clamp(source2.clamp()).unknown(source2.unknown());
  }
  function transformer() {
    var domain = unit2, range3 = unit2, interpolate = value_default, transform3, untransform, unknown, clamp2 = identity16, piecewise, output2, input3;
    function rescale() {
      var n = Math.min(domain.length, range3.length);
      if (clamp2 !== identity16) clamp2 = clamper(domain[0], domain[n - 1]);
      piecewise = n > 2 ? polymap : bimap3;
      output2 = input3 = null;
      return scale;
    }
    function scale(x46) {
      return x46 == null || isNaN(x46 = +x46) ? unknown : (output2 || (output2 = piecewise(domain.map(transform3), range3, interpolate)))(transform3(clamp2(x46)));
    }
    scale.invert = function(y46) {
      return clamp2(untransform((input3 || (input3 = piecewise(range3, domain.map(transform3), number_default)))(y46)));
    };
    scale.domain = function(_) {
      return arguments.length ? (domain = Array.from(_, number3), rescale()) : domain.slice();
    };
    scale.range = function(_) {
      return arguments.length ? (range3 = Array.from(_), rescale()) : range3.slice();
    };
    scale.rangeRound = function(_) {
      return range3 = Array.from(_), interpolate = round_default, rescale();
    };
    scale.clamp = function(_) {
      return arguments.length ? (clamp2 = _ ? true : identity16, rescale()) : clamp2 !== identity16;
    };
    scale.interpolate = function(_) {
      return arguments.length ? (interpolate = _, rescale()) : interpolate;
    };
    scale.unknown = function(_) {
      return arguments.length ? (unknown = _, scale) : unknown;
    };
    return function(t, u2) {
      transform3 = t, untransform = u2;
      return rescale();
    };
  }
  function continuous() {
    return transformer()(identity16, identity16);
  }

  // node_modules/d3-scale/src/tickFormat.js
  function tickFormat(start7, stop4, count, specifier) {
    var step4 = tickStep(start7, stop4, count), precision;
    specifier = formatSpecifier(specifier == null ? ",f" : specifier);
    switch (specifier.type) {
      case "s": {
        var value18 = Math.max(Math.abs(start7), Math.abs(stop4));
        if (specifier.precision == null && !isNaN(precision = precisionPrefix_default(step4, value18))) specifier.precision = precision;
        return formatPrefix(specifier, value18);
      }
      case "":
      case "e":
      case "g":
      case "p":
      case "r": {
        if (specifier.precision == null && !isNaN(precision = precisionRound_default(step4, Math.max(Math.abs(start7), Math.abs(stop4))))) specifier.precision = precision - (specifier.type === "e");
        break;
      }
      case "f":
      case "%": {
        if (specifier.precision == null && !isNaN(precision = precisionFixed_default(step4))) specifier.precision = precision - (specifier.type === "%") * 2;
        break;
      }
    }
    return format(specifier);
  }

  // node_modules/d3-scale/src/linear.js
  function linearish(scale) {
    var domain = scale.domain;
    scale.ticks = function(count) {
      var d23 = domain();
      return ticks(d23[0], d23[d23.length - 1], count == null ? 10 : count);
    };
    scale.tickFormat = function(count, specifier) {
      var d23 = domain();
      return tickFormat(d23[0], d23[d23.length - 1], count == null ? 10 : count, specifier);
    };
    scale.nice = function(count) {
      if (count == null) count = 10;
      var d23 = domain();
      var i0 = 0;
      var i1 = d23.length - 1;
      var start7 = d23[i0];
      var stop4 = d23[i1];
      var prestep;
      var step4;
      var maxIter = 10;
      if (stop4 < start7) {
        step4 = start7, start7 = stop4, stop4 = step4;
        step4 = i0, i0 = i1, i1 = step4;
      }
      while (maxIter-- > 0) {
        step4 = tickIncrement(start7, stop4, count);
        if (step4 === prestep) {
          d23[i0] = start7;
          d23[i1] = stop4;
          return domain(d23);
        } else if (step4 > 0) {
          start7 = Math.floor(start7 / step4) * step4;
          stop4 = Math.ceil(stop4 / step4) * step4;
        } else if (step4 < 0) {
          start7 = Math.ceil(start7 * step4) / step4;
          stop4 = Math.floor(stop4 * step4) / step4;
        } else {
          break;
        }
        prestep = step4;
      }
      return scale;
    };
    return scale;
  }
  function linear2() {
    var scale = continuous();
    scale.copy = function() {
      return copy2(scale, linear2());
    };
    initRange.apply(scale, arguments);
    return linearish(scale);
  }

  // node_modules/d3-shape/src/constant.js
  function constant_default4(x46) {
    return function constant2() {
      return x46;
    };
  }

  // node_modules/d3-shape/src/array.js
  var slice3 = Array.prototype.slice;
  function array_default(x46) {
    return typeof x46 === "object" && "length" in x46 ? x46 : Array.from(x46);
  }

  // node_modules/d3-shape/src/curve/linear.js
  function Linear(context) {
    this._context = context;
  }
  Linear.prototype = {
    areaStart: function() {
      this._line = 0;
    },
    areaEnd: function() {
      this._line = NaN;
    },
    lineStart: function() {
      this._point = 0;
    },
    lineEnd: function() {
      if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();
      this._line = 1 - this._line;
    },
    point: function(x46, y46) {
      x46 = +x46, y46 = +y46;
      switch (this._point) {
        case 0:
          this._point = 1;
          this._line ? this._context.lineTo(x46, y46) : this._context.moveTo(x46, y46);
          break;
        case 1:
          this._point = 2;
        // falls through
        default:
          this._context.lineTo(x46, y46);
          break;
      }
    }
  };
  function linear_default(context) {
    return new Linear(context);
  }

  // node_modules/d3-shape/src/point.js
  function x4(p2) {
    return p2[0];
  }
  function y4(p2) {
    return p2[1];
  }

  // node_modules/d3-shape/src/line.js
  function line_default(x46, y46) {
    var defined = constant_default4(true), context = null, curve = linear_default, output2 = null;
    x46 = typeof x46 === "function" ? x46 : x46 === void 0 ? x4 : constant_default4(x46);
    y46 = typeof y46 === "function" ? y46 : y46 === void 0 ? y4 : constant_default4(y46);
    function line(data) {
      var i2, n = (data = array_default(data)).length, d23, defined0 = false, buffer;
      if (context == null) output2 = curve(buffer = path_default());
      for (i2 = 0; i2 <= n; ++i2) {
        if (!(i2 < n && defined(d23 = data[i2], i2, data)) === defined0) {
          if (defined0 = !defined0) output2.lineStart();
          else output2.lineEnd();
        }
        if (defined0) output2.point(+x46(d23, i2, data), +y46(d23, i2, data));
      }
      if (buffer) return output2 = null, buffer + "" || null;
    }
    line.x = function(_) {
      return arguments.length ? (x46 = typeof _ === "function" ? _ : constant_default4(+_), line) : x46;
    };
    line.y = function(_) {
      return arguments.length ? (y46 = typeof _ === "function" ? _ : constant_default4(+_), line) : y46;
    };
    line.defined = function(_) {
      return arguments.length ? (defined = typeof _ === "function" ? _ : constant_default4(!!_), line) : defined;
    };
    line.curve = function(_) {
      return arguments.length ? (curve = _, context != null && (output2 = curve(context)), line) : curve;
    };
    line.context = function(_) {
      return arguments.length ? (_ == null ? context = output2 = null : output2 = curve(context = _), line) : context;
    };
    return line;
  }

  // node_modules/d3-zoom/src/transform.js
  function Transform(k, x46, y46) {
    this.k = k;
    this.x = x46;
    this.y = y46;
  }
  Transform.prototype = {
    constructor: Transform,
    scale: function(k) {
      return k === 1 ? this : new Transform(this.k * k, this.x, this.y);
    },
    translate: function(x46, y46) {
      return x46 === 0 & y46 === 0 ? this : new Transform(this.k, this.x + this.k * x46, this.y + this.k * y46);
    },
    apply: function(point) {
      return [point[0] * this.k + this.x, point[1] * this.k + this.y];
    },
    applyX: function(x46) {
      return x46 * this.k + this.x;
    },
    applyY: function(y46) {
      return y46 * this.k + this.y;
    },
    invert: function(location2) {
      return [(location2[0] - this.x) / this.k, (location2[1] - this.y) / this.k];
    },
    invertX: function(x46) {
      return (x46 - this.x) / this.k;
    },
    invertY: function(y46) {
      return (y46 - this.y) / this.k;
    },
    rescaleX: function(x46) {
      return x46.copy().domain(x46.range().map(this.invertX, this).map(x46.invert, x46));
    },
    rescaleY: function(y46) {
      return y46.copy().domain(y46.range().map(this.invertY, this).map(y46.invert, y46));
    },
    toString: function() {
      return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
    }
  };
  var identity17 = new Transform(1, 0, 0);
  transform2.prototype = Transform.prototype;
  function transform2(node) {
    while (!node.__zoom) if (!(node = node.parentNode)) return identity17;
    return node.__zoom;
  }

  // node_modules/d3-sankey/node_modules/d3-array/src/max.js
  function max8(values2, valueof) {
    let max20;
    if (valueof === void 0) {
      for (const value18 of values2) {
        if (value18 != null && (max20 < value18 || max20 === void 0 && value18 >= value18)) {
          max20 = value18;
        }
      }
    } else {
      let index5 = -1;
      for (let value18 of values2) {
        if ((value18 = valueof(value18, ++index5, values2)) != null && (max20 < value18 || max20 === void 0 && value18 >= value18)) {
          max20 = value18;
        }
      }
    }
    return max20;
  }

  // node_modules/d3-sankey/node_modules/d3-array/src/min.js
  function min7(values2, valueof) {
    let min12;
    if (valueof === void 0) {
      for (const value18 of values2) {
        if (value18 != null && (min12 > value18 || min12 === void 0 && value18 >= value18)) {
          min12 = value18;
        }
      }
    } else {
      let index5 = -1;
      for (let value18 of values2) {
        if ((value18 = valueof(value18, ++index5, values2)) != null && (min12 > value18 || min12 === void 0 && value18 >= value18)) {
          min12 = value18;
        }
      }
    }
    return min12;
  }

  // node_modules/d3-sankey/node_modules/d3-array/src/sum.js
  function sum3(values2, valueof) {
    let sum8 = 0;
    if (valueof === void 0) {
      for (let value18 of values2) {
        if (value18 = +value18) {
          sum8 += value18;
        }
      }
    } else {
      let index5 = -1;
      for (let value18 of values2) {
        if (value18 = +valueof(value18, ++index5, values2)) {
          sum8 += value18;
        }
      }
    }
    return sum8;
  }

  // node_modules/d3-sankey/src/align.js
  function justify(node, n) {
    return node.sourceLinks.length ? node.depth : n - 1;
  }

  // node_modules/d3-sankey/src/constant.js
  function constant(x46) {
    return function() {
      return x46;
    };
  }

  // node_modules/d3-sankey/src/sankey.js
  function ascendingSourceBreadth(a2, b2) {
    return ascendingBreadth(a2.source, b2.source) || a2.index - b2.index;
  }
  function ascendingTargetBreadth(a2, b2) {
    return ascendingBreadth(a2.target, b2.target) || a2.index - b2.index;
  }
  function ascendingBreadth(a2, b2) {
    return a2.y0 - b2.y0;
  }
  function value15(d23) {
    return d23.value;
  }
  function defaultId(d23) {
    return d23.index;
  }
  function defaultNodes(graph) {
    return graph.nodes;
  }
  function defaultLinks(graph) {
    return graph.links;
  }
  function find4(nodeById, id5) {
    const node = nodeById.get(id5);
    if (!node) throw new Error("missing: " + id5);
    return node;
  }
  function computeLinkBreadths({ nodes }) {
    for (const node of nodes) {
      let y0 = node.y0;
      let y113 = y0;
      for (const link4 of node.sourceLinks) {
        link4.y0 = y0 + link4.width / 2;
        y0 += link4.width;
      }
      for (const link4 of node.targetLinks) {
        link4.y1 = y113 + link4.width / 2;
        y113 += link4.width;
      }
    }
  }
  function Sankey() {
    let x0 = 0, y0 = 0, x115 = 1, y113 = 1;
    let dx = 24;
    let dy4 = 8, py;
    let id5 = defaultId;
    let align = justify;
    let sort2;
    let linkSort;
    let nodes = defaultNodes;
    let links = defaultLinks;
    let iterations = 6;
    function sankey() {
      const graph = { nodes: nodes.apply(null, arguments), links: links.apply(null, arguments) };
      computeNodeLinks(graph);
      computeNodeValues2(graph);
      computeNodeDepths2(graph);
      computeNodeHeights2(graph);
      computeNodeBreadths2(graph);
      computeLinkBreadths(graph);
      return graph;
    }
    sankey.update = function(graph) {
      computeLinkBreadths(graph);
      return graph;
    };
    sankey.nodeId = function(_) {
      return arguments.length ? (id5 = typeof _ === "function" ? _ : constant(_), sankey) : id5;
    };
    sankey.nodeAlign = function(_) {
      return arguments.length ? (align = typeof _ === "function" ? _ : constant(_), sankey) : align;
    };
    sankey.nodeSort = function(_) {
      return arguments.length ? (sort2 = _, sankey) : sort2;
    };
    sankey.nodeWidth = function(_) {
      return arguments.length ? (dx = +_, sankey) : dx;
    };
    sankey.nodePadding = function(_) {
      return arguments.length ? (dy4 = py = +_, sankey) : dy4;
    };
    sankey.nodes = function(_) {
      return arguments.length ? (nodes = typeof _ === "function" ? _ : constant(_), sankey) : nodes;
    };
    sankey.links = function(_) {
      return arguments.length ? (links = typeof _ === "function" ? _ : constant(_), sankey) : links;
    };
    sankey.linkSort = function(_) {
      return arguments.length ? (linkSort = _, sankey) : linkSort;
    };
    sankey.size = function(_) {
      return arguments.length ? (x0 = y0 = 0, x115 = +_[0], y113 = +_[1], sankey) : [x115 - x0, y113 - y0];
    };
    sankey.extent = function(_) {
      return arguments.length ? (x0 = +_[0][0], x115 = +_[1][0], y0 = +_[0][1], y113 = +_[1][1], sankey) : [[x0, y0], [x115, y113]];
    };
    sankey.iterations = function(_) {
      return arguments.length ? (iterations = +_, sankey) : iterations;
    };
    function computeNodeLinks({ nodes: nodes2, links: links2 }) {
      for (const [i2, node] of nodes2.entries()) {
        node.index = i2;
        node.sourceLinks = [];
        node.targetLinks = [];
      }
      const nodeById = new Map(nodes2.map((d23, i2) => [id5(d23, i2, nodes2), d23]));
      for (const [i2, link4] of links2.entries()) {
        link4.index = i2;
        let { source: source2, target: target7 } = link4;
        if (typeof source2 !== "object") source2 = link4.source = find4(nodeById, source2);
        if (typeof target7 !== "object") target7 = link4.target = find4(nodeById, target7);
        source2.sourceLinks.push(link4);
        target7.targetLinks.push(link4);
      }
      if (linkSort != null) {
        for (const { sourceLinks, targetLinks } of nodes2) {
          sourceLinks.sort(linkSort);
          targetLinks.sort(linkSort);
        }
      }
    }
    function computeNodeValues2({ nodes: nodes2 }) {
      for (const node of nodes2) {
        node.value = node.fixedValue === void 0 ? Math.max(sum3(node.sourceLinks, value15), sum3(node.targetLinks, value15)) : node.fixedValue;
      }
    }
    function computeNodeDepths2({ nodes: nodes2 }) {
      const n = nodes2.length;
      let current = new Set(nodes2);
      let next2 = /* @__PURE__ */ new Set();
      let x46 = 0;
      while (current.size) {
        for (const node of current) {
          node.depth = x46;
          for (const { target: target7 } of node.sourceLinks) {
            next2.add(target7);
          }
        }
        if (++x46 > n) throw new Error("circular link");
        current = next2;
        next2 = /* @__PURE__ */ new Set();
      }
    }
    function computeNodeHeights2({ nodes: nodes2 }) {
      const n = nodes2.length;
      let current = new Set(nodes2);
      let next2 = /* @__PURE__ */ new Set();
      let x46 = 0;
      while (current.size) {
        for (const node of current) {
          node.height = x46;
          for (const { source: source2 } of node.targetLinks) {
            next2.add(source2);
          }
        }
        if (++x46 > n) throw new Error("circular link");
        current = next2;
        next2 = /* @__PURE__ */ new Set();
      }
    }
    function computeNodeLayers2({ nodes: nodes2 }) {
      const x46 = max8(nodes2, (d23) => d23.depth) + 1;
      const kx = (x115 - x0 - dx) / (x46 - 1);
      const columns = new Array(x46);
      for (const node of nodes2) {
        const i2 = Math.max(0, Math.min(x46 - 1, Math.floor(align.call(null, node, x46))));
        node.layer = i2;
        node.x0 = x0 + i2 * kx;
        node.x1 = node.x0 + dx;
        if (columns[i2]) columns[i2].push(node);
        else columns[i2] = [node];
      }
      if (sort2) for (const column of columns) {
        column.sort(sort2);
      }
      return columns;
    }
    function initializeNodeBreadths2(columns) {
      const ky = min7(columns, (c) => (y113 - y0 - (c.length - 1) * py) / sum3(c, value15));
      for (const nodes2 of columns) {
        let y46 = y0;
        for (const node of nodes2) {
          node.y0 = y46;
          node.y1 = y46 + node.value * ky;
          y46 = node.y1 + py;
          for (const link4 of node.sourceLinks) {
            link4.width = link4.value * ky;
          }
        }
        y46 = (y113 - y46 + py) / (nodes2.length + 1);
        for (let i2 = 0; i2 < nodes2.length; ++i2) {
          const node = nodes2[i2];
          node.y0 += y46 * (i2 + 1);
          node.y1 += y46 * (i2 + 1);
        }
        reorderLinks(nodes2);
      }
    }
    function computeNodeBreadths2(graph) {
      const columns = computeNodeLayers2(graph);
      py = Math.min(dy4, (y113 - y0) / (max8(columns, (c) => c.length) - 1));
      initializeNodeBreadths2(columns);
      for (let i2 = 0; i2 < iterations; ++i2) {
        const alpha = Math.pow(0.99, i2);
        const beta = Math.max(1 - alpha, (i2 + 1) / iterations);
        relaxRightToLeft(columns, alpha, beta);
        relaxLeftToRight(columns, alpha, beta);
      }
    }
    function relaxLeftToRight(columns, alpha, beta) {
      for (let i2 = 1, n = columns.length; i2 < n; ++i2) {
        const column = columns[i2];
        for (const target7 of column) {
          let y46 = 0;
          let w = 0;
          for (const { source: source2, value: value18 } of target7.targetLinks) {
            let v = value18 * (target7.layer - source2.layer);
            y46 += targetTop(source2, target7) * v;
            w += v;
          }
          if (!(w > 0)) continue;
          let dy5 = (y46 / w - target7.y0) * alpha;
          target7.y0 += dy5;
          target7.y1 += dy5;
          reorderNodeLinks(target7);
        }
        if (sort2 === void 0) column.sort(ascendingBreadth);
        resolveCollisions(column, beta);
      }
    }
    function relaxRightToLeft(columns, alpha, beta) {
      for (let n = columns.length, i2 = n - 2; i2 >= 0; --i2) {
        const column = columns[i2];
        for (const source2 of column) {
          let y46 = 0;
          let w = 0;
          for (const { target: target7, value: value18 } of source2.sourceLinks) {
            let v = value18 * (target7.layer - source2.layer);
            y46 += sourceTop(source2, target7) * v;
            w += v;
          }
          if (!(w > 0)) continue;
          let dy5 = (y46 / w - source2.y0) * alpha;
          source2.y0 += dy5;
          source2.y1 += dy5;
          reorderNodeLinks(source2);
        }
        if (sort2 === void 0) column.sort(ascendingBreadth);
        resolveCollisions(column, beta);
      }
    }
    function resolveCollisions(nodes2, alpha) {
      const i2 = nodes2.length >> 1;
      const subject = nodes2[i2];
      resolveCollisionsBottomToTop(nodes2, subject.y0 - py, i2 - 1, alpha);
      resolveCollisionsTopToBottom(nodes2, subject.y1 + py, i2 + 1, alpha);
      resolveCollisionsBottomToTop(nodes2, y113, nodes2.length - 1, alpha);
      resolveCollisionsTopToBottom(nodes2, y0, 0, alpha);
    }
    function resolveCollisionsTopToBottom(nodes2, y46, i2, alpha) {
      for (; i2 < nodes2.length; ++i2) {
        const node = nodes2[i2];
        const dy5 = (y46 - node.y0) * alpha;
        if (dy5 > 1e-6) node.y0 += dy5, node.y1 += dy5;
        y46 = node.y1 + py;
      }
    }
    function resolveCollisionsBottomToTop(nodes2, y46, i2, alpha) {
      for (; i2 >= 0; --i2) {
        const node = nodes2[i2];
        const dy5 = (node.y1 - y46) * alpha;
        if (dy5 > 1e-6) node.y0 -= dy5, node.y1 -= dy5;
        y46 = node.y0 - py;
      }
    }
    function reorderNodeLinks({ sourceLinks, targetLinks }) {
      if (linkSort === void 0) {
        for (const { source: { sourceLinks: sourceLinks2 } } of targetLinks) {
          sourceLinks2.sort(ascendingTargetBreadth);
        }
        for (const { target: { targetLinks: targetLinks2 } } of sourceLinks) {
          targetLinks2.sort(ascendingSourceBreadth);
        }
      }
    }
    function reorderLinks(nodes2) {
      if (linkSort === void 0) {
        for (const { sourceLinks, targetLinks } of nodes2) {
          sourceLinks.sort(ascendingTargetBreadth);
          targetLinks.sort(ascendingSourceBreadth);
        }
      }
    }
    function targetTop(source2, target7) {
      let y46 = source2.y0 - (source2.sourceLinks.length - 1) * py / 2;
      for (const { target: node, width: width25 } of source2.sourceLinks) {
        if (node === target7) break;
        y46 += width25 + py;
      }
      for (const { source: node, width: width25 } of target7.targetLinks) {
        if (node === source2) break;
        y46 -= width25;
      }
      return y46;
    }
    function sourceTop(source2, target7) {
      let y46 = target7.y0 - (target7.targetLinks.length - 1) * py / 2;
      for (const { source: node, width: width25 } of target7.targetLinks) {
        if (node === source2) break;
        y46 += width25 + py;
      }
      for (const { target: node, width: width25 } of source2.sourceLinks) {
        if (node === target7) break;
        y46 -= width25;
      }
      return y46;
    }
    return sankey;
  }

  // node_modules/d3-sankey/node_modules/d3-path/src/path.js
  var pi3 = Math.PI;
  var tau2 = 2 * pi3;
  var epsilon3 = 1e-6;
  var tauEpsilon2 = tau2 - epsilon3;
  function Path4() {
    this._x0 = this._y0 = // start of current subpath
    this._x1 = this._y1 = null;
    this._ = "";
  }
  function path2() {
    return new Path4();
  }
  Path4.prototype = path2.prototype = {
    constructor: Path4,
    moveTo: function(x46, y46) {
      this._ += "M" + (this._x0 = this._x1 = +x46) + "," + (this._y0 = this._y1 = +y46);
    },
    closePath: function() {
      if (this._x1 !== null) {
        this._x1 = this._x0, this._y1 = this._y0;
        this._ += "Z";
      }
    },
    lineTo: function(x46, y46) {
      this._ += "L" + (this._x1 = +x46) + "," + (this._y1 = +y46);
    },
    quadraticCurveTo: function(x115, y113, x46, y46) {
      this._ += "Q" + +x115 + "," + +y113 + "," + (this._x1 = +x46) + "," + (this._y1 = +y46);
    },
    bezierCurveTo: function(x115, y113, x211, y211, x46, y46) {
      this._ += "C" + +x115 + "," + +y113 + "," + +x211 + "," + +y211 + "," + (this._x1 = +x46) + "," + (this._y1 = +y46);
    },
    arcTo: function(x115, y113, x211, y211, r) {
      x115 = +x115, y113 = +y113, x211 = +x211, y211 = +y211, r = +r;
      var x0 = this._x1, y0 = this._y1, x212 = x211 - x115, y212 = y211 - y113, x01 = x0 - x115, y01 = y0 - y113, l01_2 = x01 * x01 + y01 * y01;
      if (r < 0) throw new Error("negative radius: " + r);
      if (this._x1 === null) {
        this._ += "M" + (this._x1 = x115) + "," + (this._y1 = y113);
      } else if (!(l01_2 > epsilon3)) ;
      else if (!(Math.abs(y01 * x212 - y212 * x01) > epsilon3) || !r) {
        this._ += "L" + (this._x1 = x115) + "," + (this._y1 = y113);
      } else {
        var x202 = x211 - x0, y202 = y211 - y0, l21_2 = x212 * x212 + y212 * y212, l20_2 = x202 * x202 + y202 * y202, l21 = Math.sqrt(l21_2), l01 = Math.sqrt(l01_2), l = r * Math.tan((pi3 - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2), t01 = l / l01, t21 = l / l21;
        if (Math.abs(t01 - 1) > epsilon3) {
          this._ += "L" + (x115 + t01 * x01) + "," + (y113 + t01 * y01);
        }
        this._ += "A" + r + "," + r + ",0,0," + +(y01 * x202 > x01 * y202) + "," + (this._x1 = x115 + t21 * x212) + "," + (this._y1 = y113 + t21 * y212);
      }
    },
    arc: function(x46, y46, r, a0, a1, ccw) {
      x46 = +x46, y46 = +y46, r = +r, ccw = !!ccw;
      var dx = r * Math.cos(a0), dy4 = r * Math.sin(a0), x0 = x46 + dx, y0 = y46 + dy4, cw = 1 ^ ccw, da = ccw ? a0 - a1 : a1 - a0;
      if (r < 0) throw new Error("negative radius: " + r);
      if (this._x1 === null) {
        this._ += "M" + x0 + "," + y0;
      } else if (Math.abs(this._x1 - x0) > epsilon3 || Math.abs(this._y1 - y0) > epsilon3) {
        this._ += "L" + x0 + "," + y0;
      }
      if (!r) return;
      if (da < 0) da = da % tau2 + tau2;
      if (da > tauEpsilon2) {
        this._ += "A" + r + "," + r + ",0,1," + cw + "," + (x46 - dx) + "," + (y46 - dy4) + "A" + r + "," + r + ",0,1," + cw + "," + (this._x1 = x0) + "," + (this._y1 = y0);
      } else if (da > epsilon3) {
        this._ += "A" + r + "," + r + ",0," + +(da >= pi3) + "," + cw + "," + (this._x1 = x46 + r * Math.cos(a1)) + "," + (this._y1 = y46 + r * Math.sin(a1));
      }
    },
    rect: function(x46, y46, w, h) {
      this._ += "M" + (this._x0 = this._x1 = +x46) + "," + (this._y0 = this._y1 = +y46) + "h" + +w + "v" + +h + "h" + -w + "Z";
    },
    toString: function() {
      return this._;
    }
  };
  var path_default2 = path2;

  // node_modules/d3-sankey/node_modules/d3-shape/src/constant.js
  function constant_default6(x46) {
    return function constant2() {
      return x46;
    };
  }

  // node_modules/d3-sankey/node_modules/d3-shape/src/point.js
  function x5(p2) {
    return p2[0];
  }
  function y5(p2) {
    return p2[1];
  }

  // node_modules/d3-sankey/node_modules/d3-shape/src/array.js
  var slice4 = Array.prototype.slice;

  // node_modules/d3-sankey/node_modules/d3-shape/src/link/index.js
  function linkSource(d23) {
    return d23.source;
  }
  function linkTarget(d23) {
    return d23.target;
  }
  function link3(curve) {
    var source2 = linkSource, target7 = linkTarget, x46 = x5, y46 = y5, context = null;
    function link4() {
      var buffer, argv = slice4.call(arguments), s = source2.apply(this, argv), t = target7.apply(this, argv);
      if (!context) context = buffer = path_default2();
      curve(context, +x46.apply(this, (argv[0] = s, argv)), +y46.apply(this, argv), +x46.apply(this, (argv[0] = t, argv)), +y46.apply(this, argv));
      if (buffer) return context = null, buffer + "" || null;
    }
    link4.source = function(_) {
      return arguments.length ? (source2 = _, link4) : source2;
    };
    link4.target = function(_) {
      return arguments.length ? (target7 = _, link4) : target7;
    };
    link4.x = function(_) {
      return arguments.length ? (x46 = typeof _ === "function" ? _ : constant_default6(+_), link4) : x46;
    };
    link4.y = function(_) {
      return arguments.length ? (y46 = typeof _ === "function" ? _ : constant_default6(+_), link4) : y46;
    };
    link4.context = function(_) {
      return arguments.length ? (context = _ == null ? null : _, link4) : context;
    };
    return link4;
  }
  function curveHorizontal(context, x0, y0, x115, y113) {
    context.moveTo(x0, y0);
    context.bezierCurveTo(x0 = (x0 + x115) / 2, y0, x0, y113, x115, y113);
  }
  function linkHorizontal() {
    return link3(curveHorizontal);
  }

  // node_modules/d3-sankey/src/sankeyLinkHorizontal.js
  function horizontalSource(d23) {
    return [d23.source.x1, d23.y0];
  }
  function horizontalTarget(d23) {
    return [d23.target.x0, d23.y1];
  }
  function sankeyLinkHorizontal_default() {
    return linkHorizontal().source(horizontalSource).target(horizontalTarget);
  }

  // output/PSD3.Internal.Sankey.Functions/foreign.js
  var sankeyLinkPath_ = sankeyLinkHorizontal_default();

  // output/PSD3.Internal.Selection.Functions/index.js
  var spy2 = /* @__PURE__ */ spy();
  var show17 = /* @__PURE__ */ show(showElement);
  var foldl11 = /* @__PURE__ */ foldl(foldableArray);
  var discard7 = /* @__PURE__ */ discard(discardUnit);
  var selectionUpdateJoin = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(openSelection5) {
      return function(e) {
        return function(theData) {
          return function(keyFn) {
            var updateSelection = d3DataWithKeyFunction_(theData)(keyFn)(openSelection5);
            var exitSelection = d3GetExitSelection_(updateSelection);
            var enterSelection = d3GetEnterSelection_(updateSelection);
            return pure56({
              enter: enterSelection,
              exit: exitSelection,
              update: updateSelection
            });
          };
        };
      };
    };
  };
  var selectionSelectUnder = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(selection2) {
      return function(selector) {
        return pure56(d3SelectionSelectAll_(selector)(selection2));
      };
    };
  };
  var selectionOpenSelection = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(selection2) {
      return function(selector) {
        return pure56(d3SelectionSelectAll_(selector)(selection2));
      };
    };
  };
  var selectionOn = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(v) {
      return function(v1) {
        if (v1 instanceof Drag) {
          return pure56(unit);
        }
        ;
        if (v1 instanceof Zoom) {
          var v2 = (function() {
            if (v1.value0.extent instanceof DefaultZoomExtent) {
              return d3AttachZoomDefaultExtent_(v)({
                scaleExtent: [v1.value0.scale.value0, v1.value0.scale.value1],
                name: v1.value0.name,
                target: v1.value0.target
              });
            }
            ;
            if (v1.value0.extent instanceof ZoomExtent) {
              return d3AttachZoom_(v)({
                extent: [[v1.value0.extent.value0.left, v1.value0.extent.value0.top], [v1.value0.extent.value0.right, v1.value0.extent.value0.bottom]],
                scaleExtent: [v1.value0.scale.value0, v1.value0.scale.value1],
                name: v1.value0.name,
                target: v1.value0.target
              });
            }
            ;
            throw new Error("Failed pattern match at PSD3.Internal.Selection.Functions (line 98, column 9 - line 112, column 14): " + [v1.value0.extent.constructor.name]);
          })();
          return pure56(unit);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Internal.Selection.Functions (line 80, column 1 - line 80, column 112): " + [v.constructor.name, v1.constructor.name]);
      };
    };
  };
  var selectionNestedJoin = function(dictFoldable) {
    var fromFoldable48 = fromFoldable2(dictFoldable);
    return function(dictSelectionM) {
      var pure56 = pure(dictSelectionM.Monad0().Applicative0());
      return function(selection2) {
        return function(e) {
          return function(extractChildren) {
            return function(keyFn) {
              var extractFn = function($67) {
                return fromFoldable48(extractChildren($67));
              };
              var element3 = spy2("NestedJoin: ")(show17(e));
              var selectS = d3SelectionSelectAll_(element3)(selection2);
              var dataSelection = d3DataWithFunction_(extractFn)(keyFn)(selectS);
              var enterSelection = d3EnterAndAppend_(element3)(dataSelection);
              return pure56(enterSelection);
            };
          };
        };
      };
    };
  };
  var selectionModifySelection = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(selection_) {
      return function(attributes) {
        var v = foldl11(applySelectionAttributeD3)(selection_)(attributes);
        return pure56(unit);
      };
    };
  };
  var selectionMergeSelections = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(selectionA) {
      return function(selectionB) {
        return pure56(d3MergeSelectionWith_(selectionA)(selectionB));
      };
    };
  };
  var selectionJoin = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(selection2) {
      return function(e) {
        return function(theData) {
          return function(keyFn) {
            var element3 = spy2("Join: ")(show17(e));
            var selectS = d3SelectionSelectAll_(element3)(selection2);
            var dataSelection = d3DataWithKeyFunction_(theData)(keyFn)(selectS);
            var enterSelection = d3EnterAndAppend_(element3)(dataSelection);
            return pure56(enterSelection);
          };
        };
      };
    };
  };
  var selectionFilterSelection = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(selection_) {
      return function(selector) {
        return pure56(d3FilterSelection_(selection_)(selector));
      };
    };
  };
  var selectionAttach = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(selector) {
      return pure56(d3SelectAllInDOM_(selector));
    };
  };
  var selectionAppendElement = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var discard115 = discard7(Monad0.Bind1());
    var selectionModifySelection1 = selectionModifySelection(dictSelectionM);
    var pure56 = pure(Monad0.Applicative0());
    return function(selection_) {
      return function(element3) {
        return function(attributes) {
          var appended_ = d3Append_(show17(element3))(selection_);
          return discard115(selectionModifySelection1(appended_)(attributes))(function() {
            return pure56(appended_);
          });
        };
      };
    };
  };

  // output/PSD3.Internal.Simulation.Functions/index.js
  var _handle3 = /* @__PURE__ */ _handle(strongForget);
  var discard8 = /* @__PURE__ */ discard(discardUnit);
  var _forceLibrary3 = /* @__PURE__ */ _forceLibrary(strongFn);
  var _forceLibrary1 = /* @__PURE__ */ _forceLibrary(strongForget);
  var map48 = /* @__PURE__ */ map(functorMap);
  var _d3Simulation2 = /* @__PURE__ */ _d3Simulation(strongFn);
  var _alpha2 = /* @__PURE__ */ _alpha(strongFn);
  var _alphaTarget2 = /* @__PURE__ */ _alphaTarget(strongFn);
  var _alphaMin2 = /* @__PURE__ */ _alphaMin(strongFn);
  var _alphaDecay2 = /* @__PURE__ */ _alphaDecay(strongFn);
  var _velocityDecay2 = /* @__PURE__ */ _velocityDecay(strongFn);
  var fromFoldable21 = /* @__PURE__ */ fromFoldable2(foldableSet);
  var difference4 = /* @__PURE__ */ difference2(ordString);
  var fromFoldable110 = /* @__PURE__ */ fromFoldable6(foldableSet)(ordString);
  var intersection3 = /* @__PURE__ */ intersection2(ordString);
  var spy3 = /* @__PURE__ */ spy();
  var simulationStop = function(dictMonadState) {
    var Monad0 = dictMonadState.Monad0();
    var pure56 = pure(Monad0.Applicative0());
    return bind(Monad0.Bind1())(use(dictMonadState)(_handle3))(function(handle) {
      var v = stopSimulation_(handle);
      return pure56(unit);
    });
  };
  var simulationStart = function(dictMonadState) {
    var Monad0 = dictMonadState.Monad0();
    var Bind1 = Monad0.Bind1();
    var discard115 = discard8(Bind1);
    var modifying3 = modifying(dictMonadState);
    var pure56 = pure(Monad0.Applicative0());
    return bind(Bind1)(use(dictMonadState)(_handle3))(function(handle) {
      return discard115(modifying3(function($247) {
        return _d3Simulation2(_alpha2($247));
      })($$const(1)))(function() {
        return pure56(startSimulation_(handle));
      });
    });
  };
  var simulationSetVariable = function(dictMonadState) {
    var bind92 = bind(dictMonadState.Monad0().Bind1());
    var use4 = use(dictMonadState);
    var modifying3 = modifying(dictMonadState);
    return function(v) {
      return bind92(use4(_handle3))(function(handle) {
        if (v instanceof Alpha) {
          var v1 = setAlpha_(handle)(v.value0);
          return modifying3(function($248) {
            return _d3Simulation2(_alpha2($248));
          })($$const(v.value0));
        }
        ;
        if (v instanceof AlphaTarget) {
          var v1 = setAlphaTarget_(handle)(v.value0);
          return modifying3(function($249) {
            return _d3Simulation2(_alphaTarget2($249));
          })($$const(v.value0));
        }
        ;
        if (v instanceof AlphaMin) {
          var v1 = setAlphaMin_(handle)(v.value0);
          return modifying3(function($250) {
            return _d3Simulation2(_alphaMin2($250));
          })($$const(v.value0));
        }
        ;
        if (v instanceof AlphaDecay) {
          var v1 = setAlphaDecay_(handle)(v.value0);
          return modifying3(function($251) {
            return _d3Simulation2(_alphaDecay2($251));
          })($$const(v.value0));
        }
        ;
        if (v instanceof VelocityDecay) {
          var v1 = setVelocityDecay_(handle)(v.value0);
          return modifying3(function($252) {
            return _d3Simulation2(_velocityDecay2($252));
          })($$const(v.value0));
        }
        ;
        throw new Error("Failed pattern match at PSD3.Internal.Simulation.Functions (line 129, column 3 - line 144, column 52): " + [v.constructor.name]);
      });
    };
  };
  var simulationSetNodes = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadState) {
      var use4 = use(dictMonadState);
      var pure56 = pure(dictMonadState.Monad0().Applicative0());
      return function(nodes) {
        return bind92(use4(_handle3))(function(handle) {
          var v = setNodes_(handle)(nodes);
          var opaqueNodes = getNodes_(handle);
          return pure56(opaqueNodes);
        });
      };
    };
  };
  var simulationSetLinks = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadState) {
      var use4 = use(dictMonadState);
      var pure56 = pure(dictMonadState.Monad0().Applicative0());
      return function(links) {
        return function(nodes) {
          return function(keyFn) {
            return bind92(use4(_handle3))(function(handle) {
              var v = setLinks_(handle)(swizzleLinks_(links)(nodes)(keyFn));
              var swizzledLinks = getLinksFromSimulation_(handle);
              return pure56(swizzledLinks);
            });
          };
        };
      };
    };
  };
  var simulationEnableForcesByLabel = function(dictMonadState) {
    var bind92 = bind(dictMonadState.Monad0().Bind1());
    var use4 = use(dictMonadState);
    var modifying3 = modifying(dictMonadState);
    return function(labels9) {
      return bind92(use4(_handle3))(function(handle) {
        return bind92(use4(_forceLibrary1))(function(forces3) {
          return modifying3(_forceLibrary3)($$const(map48(enableByLabels(handle)(labels9))(forces3)));
        });
      });
    };
  };
  var simulationDisableForcesByLabel = function(dictMonadState) {
    var bind92 = bind(dictMonadState.Monad0().Bind1());
    var use4 = use(dictMonadState);
    var modifying3 = modifying(dictMonadState);
    return function(labels9) {
      return bind92(use4(_handle3))(function(handle) {
        return bind92(use4(_forceLibrary1))(function(forces3) {
          return modifying3(_forceLibrary3)($$const(map48(disableByLabels(handle)(labels9))(forces3)));
        });
      });
    };
  };
  var simulationActualizeForces = function(dictMonadState) {
    var Monad0 = dictMonadState.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind92 = bind(Bind1);
    var use4 = use(dictMonadState);
    var discard115 = discard8(Bind1);
    var simulationEnableForcesByLabel1 = simulationEnableForcesByLabel(dictMonadState);
    var simulationDisableForcesByLabel1 = simulationDisableForcesByLabel(dictMonadState);
    var pure56 = pure(Monad0.Applicative0());
    return function(activeForces) {
      return bind92(use4(_handle3))(function(handle) {
        return bind92(use4(_forceLibrary1))(function(library) {
          var allLabels = keys3(library);
          var disableLabels = fromFoldable21(difference4(fromFoldable110(allLabels))(activeForces));
          var enableLabels = fromFoldable21(intersection3(activeForces)(fromFoldable110(allLabels)));
          var v = spy3("\u{1F527} actualizeForces - enabling")(enableLabels);
          var v1 = spy3("\u{1F527} actualizeForces - disabling")(disableLabels);
          return discard115(simulationEnableForcesByLabel1(enableLabels))(function() {
            return discard115(simulationDisableForcesByLabel1(disableLabels))(function() {
              return bind92(use4(_forceLibrary1))(function(updatedLibrary) {
                var v2 = map48(updateForceInSimulation(handle))(updatedLibrary);
                return pure56(unit);
              });
            });
          });
        });
      });
    };
  };

  // output/PSD3.Interpreter.D3/index.js
  var monadEffectState2 = /* @__PURE__ */ monadEffectState(monadEffectEffect);
  var monadStateT2 = /* @__PURE__ */ monadStateT(monadEffect);
  var liftA12 = /* @__PURE__ */ liftA1(applicativeAff);
  var liftA11 = /* @__PURE__ */ liftA1(applicativeEffect);
  var discard9 = /* @__PURE__ */ discard(discardUnit);
  var bindStateT2 = /* @__PURE__ */ bindStateT(monadEffect);
  var _handle4 = /* @__PURE__ */ _handle(strongForget);
  var fromFoldable25 = /* @__PURE__ */ fromFoldable(ordString)(foldableArray);
  var mapFlipped6 = /* @__PURE__ */ mapFlipped(functorArray);
  var _name3 = /* @__PURE__ */ _name(strongForget);
  var _Newtype3 = /* @__PURE__ */ _Newtype()()(profunctorFn);
  var prop6 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "forceLibrary";
    }
  })()();
  var toUnfoldable6 = /* @__PURE__ */ toUnfoldable(unfoldableArray);
  var applicativeStateT2 = /* @__PURE__ */ applicativeStateT(monadEffect);
  var run_D3M_Simulation = function(simulation) {
    return function(v) {
      return runStateT(v)(simulation);
    };
  };
  var runD3M = function(v) {
    return runStateT(v)(unit);
  };
  var monadStateD3SimM = /* @__PURE__ */ monadStateStateT(monadAff);
  var use2 = /* @__PURE__ */ use(monadStateD3SimM);
  var modify_3 = /* @__PURE__ */ modify_(monadStateD3SimM);
  var simulationActualizeForces2 = /* @__PURE__ */ simulationActualizeForces(monadStateD3SimM);
  var simulationSetVariable2 = /* @__PURE__ */ simulationSetVariable(monadStateD3SimM);
  var monadEffD3SimM = /* @__PURE__ */ monadEffectState(monadEffectAff);
  var monadEffD3M = monadEffectState2;
  var monadD3SimM = /* @__PURE__ */ monadStateT(monadAff);
  var monadD3M = monadStateT2;
  var monadAffD3SimM = /* @__PURE__ */ monadAffState(monadAffAff);
  var functorD3SimM = /* @__PURE__ */ functorStateT(functorAff);
  var exec_D3M_Simulation = function(simulation) {
    return function(v) {
      return liftA12(snd)(runStateT(v)(simulation));
    };
  };
  var runWithD3_Simulation = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(dictMonadState) {
      var get17 = get(dictMonadState);
      var modify_1 = modify_(dictMonadState);
      return function(dictMonadAff) {
        var liftAff37 = liftAff(dictMonadAff);
        return function(state_T) {
          return bind121(get17)(function(state3) {
            return bind121(liftAff37(exec_D3M_Simulation(state3)(state_T)))(function(state$prime) {
              return modify_1(function(v) {
                return state$prime;
              });
            });
          });
        };
      };
    };
  };
  var eval_D3M = function(v) {
    return liftA11(fst)(runStateT(v)(unit));
  };
  var evalEffectSimulation = function(dictBind) {
    var bind121 = bind(dictBind);
    var discard216 = discard9(dictBind);
    return function(dictMonadState) {
      var get17 = get(dictMonadState);
      var modify_1 = modify_(dictMonadState);
      return function(dictMonadAff) {
        var liftAff37 = liftAff(dictMonadAff);
        var pure121 = pure(dictMonadAff.MonadEffect0().Monad0().Applicative0());
        return function(state_T) {
          return bind121(get17)(function(state3) {
            return bind121(liftAff37(run_D3M_Simulation(state3)(state_T)))(function(v) {
              return discard216(modify_1(function(v1) {
                return v.value1;
              }))(function() {
                return pure121(v.value0);
              });
            });
          });
        };
      };
    };
  };
  var d3TaglessD3M = {
    attach: function(selector) {
      return selectionAttach(d3TaglessD3M)(selector);
    },
    selectUnder: function(s_) {
      return selectionSelectUnder(d3TaglessD3M)(s_);
    },
    appendTo: function(s_) {
      return selectionAppendElement(d3TaglessD3M)(s_);
    },
    filterSelection: function(s_) {
      return selectionFilterSelection(d3TaglessD3M)(s_);
    },
    openSelection: function(s_) {
      return selectionOpenSelection(d3TaglessD3M)(s_);
    },
    mergeSelections: function(s_) {
      return selectionMergeSelections(d3TaglessD3M)(s_);
    },
    setAttributes: function(s_) {
      return selectionModifySelection(d3TaglessD3M)(s_);
    },
    simpleJoin: function(s_) {
      return selectionJoin(d3TaglessD3M)(s_);
    },
    nestedJoin: function(dictFoldable) {
      var selectionNestedJoin2 = selectionNestedJoin(dictFoldable);
      return function(s_) {
        return selectionNestedJoin2(d3TaglessD3M)(s_);
      };
    },
    updateJoin: function(s_) {
      return selectionUpdateJoin(d3TaglessD3M)(s_);
    },
    on: function(s_) {
      return selectionOn(d3TaglessD3M)(s_);
    },
    Monad0: function() {
      return monadD3M;
    }
  };
  var bindD3SimM = /* @__PURE__ */ bindStateT(monadAff);
  var bind11 = /* @__PURE__ */ bind(bindD3SimM);
  var discard12 = /* @__PURE__ */ discard9(bindD3SimM);
  var simulationSetNodes2 = /* @__PURE__ */ simulationSetNodes(bindD3SimM)(monadStateD3SimM);
  var simulationSetLinks2 = /* @__PURE__ */ simulationSetLinks(bindD3SimM)(monadStateD3SimM);
  var bindD3M = bindStateT2;
  var applicativeD3SimM = /* @__PURE__ */ applicativeStateT(monadAff);
  var pure19 = /* @__PURE__ */ pure(applicativeD3SimM);
  var sequence2 = /* @__PURE__ */ sequence(traversableArray)(applicativeD3SimM);
  var selectionMD3Selection_D3S1 = {
    appendTo: function(s_) {
      return selectionAppendElement(selectionMD3Selection_D3S1)(s_);
    },
    selectUnder: function(s_) {
      return selectionSelectUnder(selectionMD3Selection_D3S1)(s_);
    },
    attach: function(selector) {
      return selectionAttach(selectionMD3Selection_D3S1)(selector);
    },
    filterSelection: function(s_) {
      return selectionFilterSelection(selectionMD3Selection_D3S1)(s_);
    },
    mergeSelections: function(s_) {
      return selectionMergeSelections(selectionMD3Selection_D3S1)(s_);
    },
    setAttributes: function(s_) {
      return selectionModifySelection(selectionMD3Selection_D3S1)(s_);
    },
    on: function(s_) {
      return function(b2) {
        if (b2 instanceof Drag) {
          return bind11(use2(_handle4))(function(handle) {
            var v2 = (function() {
              if (b2.value0 instanceof DefaultDrag) {
                return simulationDrag_("default")(s_)(handle)(simdrag_);
              }
              ;
              if (b2.value0 instanceof NoDrag) {
                return disableDrag_(s_);
              }
              ;
              if (b2.value0 instanceof CustomDrag) {
                return simulationDrag_(b2.value0.value0)(s_)(handle)(b2.value0.value1);
              }
              ;
              throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 133, column 15 - line 136, column 90): " + [b2.value0.constructor.name]);
            })();
            return pure19(unit);
          });
        }
        ;
        if (b2 instanceof Zoom) {
          var v = (function() {
            if (b2.value0.extent instanceof DefaultZoomExtent) {
              return d3AttachZoomDefaultExtent_(s_)({
                scaleExtent: [b2.value0.scale.value0, b2.value0.scale.value1],
                name: b2.value0.name,
                target: b2.value0.target
              });
            }
            ;
            if (b2.value0.extent instanceof ZoomExtent) {
              return d3AttachZoom_(s_)({
                extent: [[b2.value0.extent.value0.left, b2.value0.extent.value0.top], [b2.value0.extent.value0.right, b2.value0.extent.value0.bottom]],
                scaleExtent: [b2.value0.scale.value0, b2.value0.scale.value1],
                name: b2.value0.name,
                target: b2.value0.target
              });
            }
            ;
            throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 140, column 15 - line 153, column 20): " + [b2.value0.extent.constructor.name]);
          })();
          return pure19(unit);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 130, column 24 - line 154, column 16): " + [b2.constructor.name]);
      };
    },
    openSelection: function(s_) {
      return selectionOpenSelection(selectionMD3Selection_D3S1)(s_);
    },
    simpleJoin: function(s_) {
      return selectionJoin(selectionMD3Selection_D3S1)(s_);
    },
    nestedJoin: function(dictFoldable) {
      var selectionNestedJoin2 = selectionNestedJoin(dictFoldable);
      return function(s_) {
        return selectionNestedJoin2(selectionMD3Selection_D3S1)(s_);
      };
    },
    updateJoin: function(s_) {
      return selectionUpdateJoin(selectionMD3Selection_D3S1)(s_);
    },
    Monad0: function() {
      return monadD3SimM;
    }
  };
  var simulationMD3Selection_D3 = {
    init: function(config) {
      var forcesMap = fromFoldable25(mapFlipped6(config.forces)(function(f) {
        return new Tuple(view(_name3)(f), f);
      }));
      return discard12(modify_3(function(state3) {
        var $164 = {};
        for (var $165 in state3) {
          if ({}.hasOwnProperty.call(state3, $165)) {
            $164[$165] = state3[$165];
          }
          ;
        }
        ;
        $164.simulation = set((function() {
          var $193 = prop6($$Proxy.value)(strongFn);
          return function($194) {
            return _Newtype3($193($194));
          };
        })())(forcesMap)(state3.simulation);
        return $164;
      }))(function() {
        return bind11(simulationSetNodes2(config.nodes))(function(nodesInSim) {
          return discard12(simulationActualizeForces2(config.activeForces))(function() {
            return bind11(simulationSetLinks2(config.links)(config.nodes)(config.keyFn))(function(linksInSim) {
              return discard12(simulationSetVariable2(new AlphaTarget(config.config.alphaTarget)))(function() {
                return discard12(simulationSetVariable2(new AlphaMin(config.config.alphaMin)))(function() {
                  return discard12(simulationSetVariable2(new AlphaDecay(config.config.alphaDecay)))(function() {
                    return discard12(simulationSetVariable2(new VelocityDecay(config.config.velocityDecay)))(function() {
                      return bind11(use2(_handle4))(function(handle) {
                        var addTick = function(label5) {
                          return function(step4) {
                            if (step4 instanceof StepTransformFFI) {
                              return pure19(unit);
                            }
                            ;
                            if (step4 instanceof Step3) {
                              var makeTick = function(v2) {
                                var v1 = mapFlipped6(step4.value1)(applySelectionAttributeD3(step4.value0));
                                return unit;
                              };
                              var v = onTick_(handle)(label5)(makeTick);
                              return pure19(unit);
                            }
                            ;
                            throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 190, column 30 - line 197, column 22): " + [step4.constructor.name]);
                          };
                        };
                        return bind11(sequence2(mapFlipped6(toUnfoldable6(config.ticks))(function(v) {
                          return addTick(v.value0)(v.value1);
                        })))(function() {
                          return pure19({
                            nodes: nodesInSim,
                            links: linksInSim
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    },
    start: /* @__PURE__ */ simulationStart(monadStateD3SimM),
    stop: /* @__PURE__ */ simulationStop(monadStateD3SimM),
    Monad0: function() {
      return monadD3SimM;
    },
    SelectionM1: function() {
      return selectionMD3Selection_D3S1;
    }
  };
  var simulationM2D3Selection_D = {
    update: function(config) {
      return bind11(use2(_handle4))(function(handle) {
        return bind11(pure19(getNodes_(handle)))(function(currentNodes) {
          return discard12((function() {
            if (config.config instanceof Nothing) {
              return pure19(unit);
            }
            ;
            if (config.config instanceof Just) {
              return discard12(simulationSetVariable2(new AlphaTarget(config.config.value0.alphaTarget)))(function() {
                return discard12(simulationSetVariable2(new AlphaMin(config.config.value0.alphaMin)))(function() {
                  return discard12(simulationSetVariable2(new AlphaDecay(config.config.value0.alphaDecay)))(function() {
                    return simulationSetVariable2(new VelocityDecay(config.config.value0.velocityDecay));
                  });
                });
              });
            }
            ;
            throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 219, column 5 - line 225, column 70): " + [config.config.constructor.name]);
          })())(function() {
            return bind11((function() {
              if (config.nodes instanceof Nothing) {
                return pure19(currentNodes);
              }
              ;
              if (config.nodes instanceof Just) {
                return pure19(config.nodes.value0);
              }
              ;
              throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 229, column 26 - line 231, column 37): " + [config.nodes.constructor.name]);
            })())(function(nodesBeforeFilter) {
              var nodesFiltered = (function() {
                if (config.nodeFilter instanceof Nothing) {
                  return nodesBeforeFilter;
                }
                ;
                if (config.nodeFilter instanceof Just) {
                  return filter(config.nodeFilter.value0)(nodesBeforeFilter);
                }
                ;
                throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 232, column 25 - line 234, column 69): " + [config.nodeFilter.constructor.name]);
              })();
              return bind11(simulationSetNodes2(nodesFiltered))(function(nodesInSim) {
                return discard12((function() {
                  if (config.activeForces instanceof Nothing) {
                    return pure19(unit);
                  }
                  ;
                  if (config.activeForces instanceof Just) {
                    return simulationActualizeForces2(config.activeForces.value0);
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 238, column 5 - line 240, column 54): " + [config.activeForces.constructor.name]);
                })())(function() {
                  return bind11((function() {
                    if (config.links instanceof Nothing) {
                      return pure19(getLinksFromSimulation_(handle));
                    }
                    ;
                    if (config.links instanceof Just) {
                      var linksFiltered = (function() {
                        if (config.linkFilter instanceof Nothing) {
                          return config.links.value0;
                        }
                        ;
                        if (config.linkFilter instanceof Just) {
                          return filter(config.linkFilter.value0)(config.links.value0);
                        }
                        ;
                        throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 247, column 29 - line 249, column 64): " + [config.linkFilter.constructor.name]);
                      })();
                      return simulationSetLinks2(linksFiltered)(nodesInSim)(config.keyFn);
                    }
                    ;
                    throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 243, column 19 - line 250, column 65): " + [config.links.constructor.name]);
                  })())(function(linksInSim) {
                    return pure19({
                      nodes: nodesInSim,
                      links: linksInSim
                    });
                  });
                });
              });
            });
          });
        });
      });
    },
    addTickFunction: function(v) {
      return function(v1) {
        if (v1 instanceof StepTransformFFI) {
          return pure19(unit);
        }
        ;
        if (v1 instanceof Step3) {
          return bind11(use2(_handle4))(function(handle) {
            var makeTick = function(v22) {
              var v3 = mapFlipped6(v1.value1)(applySelectionAttributeD3(v1.value0));
              return unit;
            };
            var v2 = onTick_(handle)(v)(makeTick);
            return pure19(unit);
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.Interpreter.D3 (line 212, column 1 - line 268, column 14): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    removeTickFunction: function(label5) {
      return bind11(use2(_handle4))(function(handle) {
        var v = disableTick_(handle)(label5);
        return pure19(unit);
      });
    },
    Monad0: function() {
      return monadD3SimM;
    },
    SimulationM1: function() {
      return simulationMD3Selection_D3;
    }
  };
  var applicativeD3M = applicativeStateT2;

  // output/PSD3.Simulation.SceneTransition/foreign.js
  function applyUpdateBehavior(selection2, behaviorType, transition2, targetById) {
    switch (behaviorType) {
      case "TransitionMove":
        selection2.transition(transition2).attr("transform", function(d23) {
          const target7 = targetById.get(d23.id);
          if (target7 && target7.fx !== null && target7.fx !== void 0 && target7.fy !== null && target7.fy !== void 0) {
            return `translate(${target7.fx},${target7.fy})`;
          } else if (target7) {
            return `translate(${target7.x || 0},${target7.y || 0})`;
          }
          return `translate(${d23.x || 0},${d23.y || 0})`;
        });
        break;
      case "InstantMove":
        selection2.attr("transform", function(d23) {
          const target7 = targetById.get(d23.id);
          if (target7 && target7.fx !== null && target7.fx !== void 0 && target7.fy !== null && target7.fy !== void 0) {
            return `translate(${target7.fx},${target7.fy})`;
          } else if (target7) {
            return `translate(${target7.x || 0},${target7.y || 0})`;
          }
          return `translate(${d23.x || 0},${d23.y || 0})`;
        });
        break;
      default:
        console.warn(`Unknown update behavior: ${behaviorType}`);
    }
  }
  var executeSceneTransition_Impl = (spec) => (nodeSelector) => (linkSelector) => (targetNodes) => (onComplete) => () => {
    const nodeSelection2 = d3.selectAll(nodeSelector);
    const linkSelection = d3.selectAll(linkSelector);
    if (nodeSelection2.empty()) {
      onComplete();
      return;
    }
    const t = d3.transition().duration(spec.duration);
    const targetById = new Map(targetNodes.map((n) => [n.id, n]));
    applyUpdateBehavior(nodeSelection2, spec.updateNodes, t, targetById);
    linkSelection.transition(t).attr("x1", function(d23) {
      const source2 = targetById.get(d23.source.id);
      if (source2) {
        return source2.fx !== null && source2.fx !== void 0 ? source2.fx : source2.x;
      }
      return d23.source.x;
    }).attr("y1", function(d23) {
      const source2 = targetById.get(d23.source.id);
      if (source2) {
        return source2.fy !== null && source2.fy !== void 0 ? source2.fy : source2.y;
      }
      return d23.source.y;
    }).attr("x2", function(d23) {
      const target7 = targetById.get(d23.target.id);
      if (target7) {
        return target7.fx !== null && target7.fx !== void 0 ? target7.fx : target7.x;
      }
      return d23.target.x;
    }).attr("y2", function(d23) {
      const target7 = targetById.get(d23.target.id);
      if (target7) {
        return target7.fy !== null && target7.fy !== void 0 ? target7.fy : target7.y;
      }
      return d23.target.y;
    });
    let completed = false;
    const lastNodeIndex = nodeSelection2.size() - 1;
    nodeSelection2.transition(t).on("end", function(d23, i2) {
      if (!completed && i2 === lastNodeIndex) {
        completed = true;
        nodeSelection2.each(function(d24) {
          const target7 = targetById.get(d24.id);
          if (target7) {
            d24.x = target7.x || 0;
            d24.y = target7.y || 0;
            if (spec.pinAfterTransition) {
              if (target7.fx !== null && target7.fx !== void 0) {
                d24.fx = target7.fx;
              } else {
                d24.fx = d24.x;
              }
              if (target7.fy !== null && target7.fy !== void 0) {
                d24.fy = target7.fy;
              } else {
                d24.fy = d24.y;
              }
            } else {
              if (target7.fx !== null && target7.fx !== void 0) {
                d24.fx = target7.fx;
              }
              if (target7.fy !== null && target7.fy !== void 0) {
                d24.fy = target7.fy;
              }
            }
          }
        });
        onComplete();
      }
    });
  };

  // output/PSD3.Simulation.SceneTransition/index.js
  var encodeTransitionSpec = function(spec) {
    return {
      duration: spec.duration,
      enterNodes: encodeEnterBehavior(spec.enterNodes),
      exitNodes: encodeExitBehavior(spec.exitNodes),
      updateNodes: encodeUpdateBehavior(spec.updateNodes)
    };
  };
  var executeSceneTransition_ = function(spec) {
    return executeSceneTransition_Impl(encodeTransitionSpec(spec));
  };

  // output/PSD3.Simulation.RunSimulation/index.js
  var discard10 = /* @__PURE__ */ discard(discardUnit);
  var foldl12 = /* @__PURE__ */ foldl(foldableArray);
  var runSimulation = function(dictMonadAff) {
    var discard216 = discard10(dictMonadAff.MonadEffect0().Monad0().Bind1());
    var liftAff37 = liftAff(dictMonadAff);
    return function(dictSimulationM) {
      var stop4 = stop(dictSimulationM);
      var start7 = start2(dictSimulationM);
      return function(selections) {
        return function(scene) {
          return function(allNodes3) {
            return function(allLinks) {
              return function(updateSimFn) {
                return discard216(stop4)(function() {
                  var targetNodes = foldl12(function(nodes) {
                    return function(fn) {
                      return fn(nodes);
                    };
                  })(allNodes3)(scene.nodeInitializerFunctions);
                  return discard216(updateSimFn({
                    allNodes: allNodes3,
                    allLinks,
                    scene
                  }))(function() {
                    if (scene.transitionConfig instanceof Nothing) {
                      return start7;
                    }
                    ;
                    if (scene.transitionConfig instanceof Just) {
                      return discard216(liftAff37(makeAff(function(callback) {
                        return function __do5() {
                          executeSceneTransition_(scene.transitionConfig.value0)("g.nodes > g")("g.links > line")(targetNodes)(callback(new Right(unit)))();
                          return nonCanceler;
                        };
                      })))(function() {
                        return start7;
                      });
                    }
                    ;
                    throw new Error("Failed pattern match at PSD3.Simulation.RunSimulation (line 89, column 3 - line 107, column 12): " + [scene.transitionConfig.constructor.name]);
                  });
                });
              };
            };
          };
        };
      };
    };
  };
  var runSimulationFromState = function(dictMonadAff) {
    var bind92 = bind(dictMonadAff.MonadEffect0().Monad0().Bind1());
    var runSimulation1 = runSimulation(dictMonadAff);
    return function(dictSimulationM) {
      var runSimulation22 = runSimulation1(dictSimulationM);
      return function(dictMonadState) {
        var get17 = get(dictMonadState);
        return function(getSelections) {
          return function(getScene) {
            return function(getNodes) {
              return function(getLinks) {
                return function(enhanceAttrs) {
                  return function(updateSimFn) {
                    return bind92(get17)(function(state3) {
                      var selections = getSelections(state3);
                      var scene = getScene(state3);
                      var enhancedAttrs = enhanceAttrs(scene.attributes)(state3);
                      var allModelNodes = getNodes(state3);
                      var allModelLinks = getLinks(state3);
                      return runSimulation22(selections)(scene)(allModelNodes)(allModelLinks)(function(v) {
                        return updateSimFn(selections)({
                          allNodes: v.allNodes,
                          allLinks: v.allLinks,
                          nodeFilter: v.scene.chooseNodes,
                          linkFilter: new Just(v.scene.linksShown),
                          nodeInitializers: v.scene.nodeInitializerFunctions,
                          activeForces: v.scene.activeForces,
                          linksWithForce: v.scene.linksActive
                        })(enhancedAttrs);
                      });
                    });
                  };
                };
              };
            };
          };
        };
      };
    };
  };

  // output/PSD3.CodeExplorer/index.js
  var liftEffect8 = /* @__PURE__ */ liftEffect(monadEffectEffect);
  var runSimulationFromState2 = /* @__PURE__ */ runSimulationFromState(monadAffD3SimM)(simulationMD3Selection_D3)(monadStateD3SimM);
  var x6 = /* @__PURE__ */ x(toAttrNumber);
  var updateSimulation2 = /* @__PURE__ */ updateSimulation(bindD3SimM)(monadEffD3SimM)(selectionMD3Selection_D3S1)(simulationM2D3Selection_D);
  var bind16 = /* @__PURE__ */ bind(bindHalogenM);
  var discard11 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var modify_4 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var evalEffectSimulation2 = /* @__PURE__ */ evalEffectSimulation(bindHalogenM)(monadStateHalogenM);
  var initialize3 = /* @__PURE__ */ initialize(bindD3SimM)(monadEffD3SimM)(simulationM2D3Selection_D)(selectionMD3Selection_D3S1);
  var $$void9 = /* @__PURE__ */ $$void(functorHalogenM);
  var pure20 = /* @__PURE__ */ pure(applicativeHalogenM);
  var runWithD3_Simulation2 = /* @__PURE__ */ runWithD3_Simulation(bindHalogenM)(monadStateHalogenM);
  var stop2 = /* @__PURE__ */ stop(simulationMD3Selection_D3);
  var start4 = /* @__PURE__ */ start2(simulationMD3Selection_D3);
  var get7 = /* @__PURE__ */ get(monadStateHalogenM);
  var simulationEvent = function(l) {
    return onMouseEventEffectful(MouseClick.value)(function(e) {
      return function(d23) {
        return function(t) {
          return liftEffect8(notify(l)(new EventFromVizualization(getVizEventFromClick(e)(d23)(t))));
        };
      };
    });
  };
  var runSimulation2 = function(dictMonadAff) {
    var runWithD3_Simulation1 = runWithD3_Simulation(dictMonadAff.MonadEffect0().Monad0().Bind1());
    return function(dictMonadState) {
      return runWithD3_Simulation1(dictMonadState)(dictMonadAff)(runSimulationFromState2(function(v) {
        return v.staging.selections;
      })(function(v) {
        return v.scene;
      })(getModelNodes)(getModelLinks)(function(attrs) {
        return function(state3) {
          var callback = (function() {
            if (state3.eventListener instanceof Just) {
              return simulationEvent(state3.eventListener.value0);
            }
            ;
            if (state3.eventListener instanceof Nothing) {
              return x6(0);
            }
            ;
            throw new Error("Failed pattern match at PSD3.CodeExplorer (line 396, column 22 - line 398, column 29): " + [state3.eventListener.constructor.name]);
          })();
          return {
            labels: attrs.labels,
            circles: cons(callback)(attrs.circles),
            tagMap: new Just(state3.tags)
          };
        };
      })(updateSimulation2));
    };
  };
  var handleAction3 = function(dictMonadAff) {
    var monadAffHalogenM2 = monadAffHalogenM(dictMonadAff);
    var liftAff37 = liftAff(monadAffHalogenM2);
    var evalEffectSimulation1 = evalEffectSimulation2(monadAffHalogenM2);
    var liftEffect112 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    var runSimulation1 = runSimulation2(monadAffHalogenM2)(monadStateHalogenM);
    var runWithD3_Simulation1 = runWithD3_Simulation2(monadAffHalogenM2);
    return function(v) {
      if (v instanceof Initialize4) {
        return bind16(liftAff37(readModelData))(function(v1) {
          return discard11(modify_4(function(v2) {
            var $74 = {};
            for (var $75 in v2) {
              if ({}.hasOwnProperty.call(v2, $75)) {
                $74[$75] = v2[$75];
              }
              ;
            }
            ;
            $74.model = v1;
            return $74;
          }))(function() {
            return bind16(evalEffectSimulation1(initialize3))(function(openSelections) {
              return discard11(modify_4(function(s) {
                var $80 = {};
                for (var $81 in s) {
                  if ({}.hasOwnProperty.call(s, $81)) {
                    $80[$81] = s[$81];
                  }
                  ;
                }
                ;
                $80.staging = (function() {
                  var $77 = {};
                  for (var $78 in s.staging) {
                    if ({}.hasOwnProperty.call(s.staging, $78)) {
                      $77[$78] = s["staging"][$78];
                    }
                    ;
                  }
                  ;
                  $77.selections = {
                    nodes: openSelections.nodes,
                    links: openSelections.links
                  };
                  return $77;
                })();
                return $80;
              }))(function() {
                return bind16(liftEffect112(create3))(function(v2) {
                  return discard11($$void9(subscribe2(v2.emitter)))(function() {
                    return discard11(modify_4(function(v3) {
                      var $84 = {};
                      for (var $85 in v3) {
                        if ({}.hasOwnProperty.call(v3, $85)) {
                          $84[$85] = v3[$85];
                        }
                        ;
                      }
                      ;
                      $84.eventListener = new Just(v2.listener);
                      return $84;
                    }))(function() {
                      return bind16(liftEffect112(create3))(function(v3) {
                        return discard11($$void9(subscribe2(v3.emitter)))(function() {
                          return discard11(modify_4(function(v4) {
                            var $88 = {};
                            for (var $89 in v4) {
                              if ({}.hasOwnProperty.call(v4, $89)) {
                                $88[$89] = v4[$89];
                              }
                              ;
                            }
                            ;
                            $88.transitionListener = new Just(v3.listener);
                            return $88;
                          }))(function() {
                            return pure20(unit);
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      }
      ;
      if (v instanceof Finalize2) {
        return pure20(unit);
      }
      ;
      if (v instanceof EventFromVizualization) {
        if (v.value0.value0 instanceof IsPackage) {
          return handleAction3(dictMonadAff)(new ToggleChildrenOfNode(v.value0.value1));
        }
        ;
        if (v.value0.value0 instanceof IsModule) {
          return handleAction3(dictMonadAff)(new SpotlightNode(v.value0.value1));
        }
        ;
        throw new Error("Failed pattern match at PSD3.CodeExplorer (line 197, column 5 - line 199, column 68): " + [v.value0.constructor.name]);
      }
      ;
      if (v instanceof ToggleChildrenOfNode) {
        return discard11(modify_4(setChooseNodes2(isPackageOrVisibleModule(v.value0))))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof UnToggleChildrenOfNode) {
        return discard11(modify_4(setChooseNodes2(isPackage)))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof SpotlightNode) {
        return runWithD3_Simulation1(stop2);
      }
      ;
      if (v instanceof Scene && v.value0 instanceof EmptyScene) {
        return pure20(unit);
      }
      ;
      if (v instanceof Scene && v.value0 instanceof PackageGrid) {
        return discard11(modify_4(applySceneWithTransition2(PackageGrid.value)(packageGridScene)))(function() {
          return discard11(runSimulation1)(function() {
            return modify_4(function(v1) {
              var $107 = {};
              for (var $108 in v1) {
                if ({}.hasOwnProperty.call(v1, $108)) {
                  $107[$108] = v1[$108];
                }
                ;
              }
              ;
              $107.currentScene = PackageGrid.value;
              return $107;
            });
          });
        });
      }
      ;
      if (v instanceof Scene && v.value0 instanceof PackageGraph) {
        return discard11(modify_4(applySceneWithTransition2(PackageGraph.value)(packageGraphScene)))(function() {
          return discard11(runSimulation1)(function() {
            return modify_4(function(v1) {
              var $111 = {};
              for (var $112 in v1) {
                if ({}.hasOwnProperty.call(v1, $112)) {
                  $111[$112] = v1[$112];
                }
                ;
              }
              ;
              $111.currentScene = PackageGraph.value;
              return $111;
            });
          });
        });
      }
      ;
      if (v instanceof Scene && v.value0 instanceof LayerSwarm) {
        return discard11(modify_4(applySceneWithTransition2(LayerSwarm.value)(layerSwarmScene)))(function() {
          return discard11(runSimulation1)(function() {
            return modify_4(function(v1) {
              var $115 = {};
              for (var $116 in v1) {
                if ({}.hasOwnProperty.call(v1, $116)) {
                  $115[$116] = v1[$116];
                }
                ;
              }
              ;
              $115.currentScene = LayerSwarm.value;
              return $115;
            });
          });
        });
      }
      ;
      if (v instanceof Scene && (v.value0 instanceof ModuleTree && v.value0.value0 instanceof Radial)) {
        return discard11(modify_4(applySceneWithTransition2(new ModuleTree(Radial.value))(radialTreeScene)))(function() {
          return discard11(runSimulation1)(function() {
            return modify_4(function(v1) {
              var $119 = {};
              for (var $120 in v1) {
                if ({}.hasOwnProperty.call(v1, $120)) {
                  $119[$120] = v1[$120];
                }
                ;
              }
              ;
              $119.currentScene = new ModuleTree(Radial.value);
              return $119;
            });
          });
        });
      }
      ;
      if (v instanceof Scene && (v.value0 instanceof ModuleTree && v.value0.value0 instanceof Horizontal)) {
        return discard11(modify_4(applySceneWithTransition2(new ModuleTree(Horizontal.value))(horizontalTreeScene)))(function() {
          return discard11(runSimulation1)(function() {
            return modify_4(function(v1) {
              var $124 = {};
              for (var $125 in v1) {
                if ({}.hasOwnProperty.call(v1, $125)) {
                  $124[$125] = v1[$125];
                }
                ;
              }
              ;
              $124.currentScene = new ModuleTree(Horizontal.value);
              return $124;
            });
          });
        });
      }
      ;
      if (v instanceof Scene && (v.value0 instanceof ModuleTree && v.value0.value0 instanceof Vertical)) {
        return discard11(modify_4(applySceneWithTransition2(new ModuleTree(Vertical.value))(verticalTreeScene)))(function() {
          return discard11(runSimulation1)(function() {
            return modify_4(function(v1) {
              var $129 = {};
              for (var $130 in v1) {
                if ({}.hasOwnProperty.call(v1, $130)) {
                  $129[$130] = v1[$130];
                }
                ;
              }
              ;
              $129.currentScene = new ModuleTree(Vertical.value);
              return $129;
            });
          });
        });
      }
      ;
      if (v instanceof ToggleForce) {
        return discard11(modify_4(toggleForce2(v.value0)))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof Filter && v.value0 instanceof LinkShowFilter) {
        return discard11(modify_4(setLinksShown2(v.value0.value0)))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof Filter && v.value0 instanceof LinkForceFilter) {
        return discard11(modify_4(setLinksActive2(v.value0.value0)))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof Filter && v.value0 instanceof NodeFilter) {
        return discard11(modify_4(setChooseNodes2(v.value0.value0)))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof ChangeStyling && v.value0 instanceof TopLevelCSS) {
        return modify_4(setCssClass2(v.value0.value0));
      }
      ;
      if (v instanceof ChangeStyling && v.value0 instanceof GraphStyle) {
        return discard11(modify_4(setSceneAttributes2(v.value0.value0)))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof ChangeSimConfig) {
        return pure20(unit);
      }
      ;
      if (v instanceof StartSim) {
        return runWithD3_Simulation1(start4);
      }
      ;
      if (v instanceof StopSim) {
        return runWithD3_Simulation1(stop2);
      }
      ;
      if (v instanceof TagHalogen) {
        return bind16(get7)(function(state3) {
          var isHalogenPackage = function(n) {
            if (n.nodetype instanceof IsPackage) {
              return contains("halogen")(toLower(n.name));
            }
            ;
            return false;
          };
          var allNodes3 = getModelNodes(state3);
          return discard11(modify_4(tagNodes2("halogen")(isHalogenPackage)(allNodes3)))(function() {
            return runSimulation1;
          });
        });
      }
      ;
      if (v instanceof ClearTags) {
        return discard11(modify_4(clearAllTags2))(function() {
          return runSimulation1;
        });
      }
      ;
      if (v instanceof DismissWelcome) {
        return modify_4(function(v1) {
          var $148 = {};
          for (var $149 in v1) {
            if ({}.hasOwnProperty.call(v1, $149)) {
              $148[$149] = v1[$149];
            }
            ;
          }
          ;
          $148.showWelcome = false;
          return $148;
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.CodeExplorer (line 162, column 16 - line 312, column 40): " + [v.constructor.name]);
    };
  };
  var defaultTransitionMatrix = /* @__PURE__ */ (function() {
    return fromFoldable(ordTuple(ordScene)(ordScene))(foldableArray)([new Tuple(new Tuple(PackageGrid.value, PackageGraph.value), smoothTransition), new Tuple(new Tuple(PackageGraph.value, PackageGrid.value), smoothTransition), new Tuple(new Tuple(PackageGrid.value, LayerSwarm.value), smoothTransition), new Tuple(new Tuple(LayerSwarm.value, PackageGrid.value), smoothTransition), new Tuple(new Tuple(PackageGraph.value, LayerSwarm.value), smoothTransition), new Tuple(new Tuple(LayerSwarm.value, PackageGraph.value), smoothTransition), new Tuple(new Tuple(PackageGrid.value, new ModuleTree(Radial.value)), smoothTransitionPinned), new Tuple(new Tuple(PackageGrid.value, new ModuleTree(Horizontal.value)), smoothTransitionPinned), new Tuple(new Tuple(PackageGrid.value, new ModuleTree(Vertical.value)), smoothTransitionPinned), new Tuple(new Tuple(PackageGraph.value, new ModuleTree(Radial.value)), smoothTransitionPinned), new Tuple(new Tuple(PackageGraph.value, new ModuleTree(Horizontal.value)), smoothTransitionPinned), new Tuple(new Tuple(PackageGraph.value, new ModuleTree(Vertical.value)), smoothTransitionPinned), new Tuple(new Tuple(LayerSwarm.value, new ModuleTree(Radial.value)), smoothTransitionPinned), new Tuple(new Tuple(LayerSwarm.value, new ModuleTree(Horizontal.value)), smoothTransitionPinned), new Tuple(new Tuple(LayerSwarm.value, new ModuleTree(Vertical.value)), smoothTransitionPinned), new Tuple(new Tuple(new ModuleTree(Radial.value), PackageGrid.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Radial.value), PackageGraph.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Radial.value), LayerSwarm.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Horizontal.value), PackageGrid.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Horizontal.value), PackageGraph.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Horizontal.value), LayerSwarm.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Vertical.value), PackageGrid.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Vertical.value), PackageGraph.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Vertical.value), LayerSwarm.value), smoothTransition), new Tuple(new Tuple(new ModuleTree(Radial.value), new ModuleTree(Horizontal.value)), smoothTransitionPinned), new Tuple(new Tuple(new ModuleTree(Radial.value), new ModuleTree(Vertical.value)), smoothTransitionPinned), new Tuple(new Tuple(new ModuleTree(Horizontal.value), new ModuleTree(Radial.value)), smoothTransitionPinned), new Tuple(new Tuple(new ModuleTree(Horizontal.value), new ModuleTree(Vertical.value)), smoothTransitionPinned), new Tuple(new Tuple(new ModuleTree(Vertical.value), new ModuleTree(Radial.value)), smoothTransitionPinned), new Tuple(new Tuple(new ModuleTree(Vertical.value), new ModuleTree(Horizontal.value)), smoothTransitionPinned)]);
  })();
  var component4 = function(dictMonadAff) {
    var initialState7 = {
      model: Nothing.value,
      staging: {
        selections: {
          nodes: Nothing.value,
          links: Nothing.value
        },
        linksWithForce: $$const(true),
        rawdata: {
          nodes: [],
          links: []
        }
      },
      simulation: initialSimulationState(forceLibrary),
      scene: initialScene(forceLibrary),
      currentScene: EmptyScene.value,
      transitionMatrix: defaultTransitionMatrix,
      eventListener: Nothing.value,
      transitionListener: Nothing.value,
      tags: empty2,
      showWelcome: true
    };
    return mkComponent({
      initialState: $$const(initialState7),
      render: render8,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        handleAction: handleAction3(dictMonadAff),
        initialize: new Just(Initialize4.value),
        finalize: new Just(Finalize2.value)
      })
    });
  };

  // output/PSD3.CodeExplorer.CodeExplorerWrapper/index.js
  var slot_3 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "spagoComponent";
    }
  })(ordUnit);
  var identity18 = /* @__PURE__ */ identity(categoryFn);
  var _spagoComponent = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render9 = function(dictMonadAff) {
    var component112 = component4(dictMonadAff);
    return function(v) {
      return div2([classes(["fullscreen-page-wrapper", "spago-page-wrapper"])])([slot_3(_spagoComponent)(unit)(component112)(unit)]);
    };
  };
  var component5 = function(dictMonadAff) {
    return mkComponent({
      initialState: identity18,
      render: render9(dictMonadAff),
      "eval": mkEval(defaultEval)
    });
  };

  // output/PSD3.Component.Example/foreign.js
  function stringify2(obj) {
    return JSON.stringify(obj, null, 2);
  }

  // output/D3.Viz.AnimatedRadialTree/index.js
  var updateToLayout = function(dictApplicative) {
    var pure56 = pure(dictApplicative);
    return function(v) {
      return function(v1) {
        return function(v2) {
          return function(v3) {
            return pure56(unit);
          };
        };
      };
    };
  };
  var rotateTree = function(dictApplicative) {
    var pure56 = pure(dictApplicative);
    return function(v) {
      return function(v1) {
        return function(v2) {
          return pure56(unit);
        };
      };
    };
  };
  var drawAnimatedRadialTree = function(dictApplicative) {
    var pure56 = pure(dictApplicative);
    return function(v) {
      return function(v1) {
        return function(v2) {
          return pure56(unit);
        };
      };
    };
  };

  // output/D3.Viz.FlareData/foreign.js
  var getName = (node) => node.name || "";
  var getValue = (node) => node.value || 0;
  var getChildren_ = (node) => {
    if (node.children && Array.isArray(node.children) && node.children.length > 0) {
      return node.children;
    }
    return null;
  };

  // output/D3.Viz.FlareData/index.js
  var getChildren = function($1) {
    return toMaybe(getChildren_($1));
  };

  // output/PSD3.Layout.Hierarchy.Cluster4/index.js
  var compare4 = /* @__PURE__ */ compare(ordInt);
  var map49 = /* @__PURE__ */ map(functorList);
  var fromFoldable26 = /* @__PURE__ */ fromFoldable2(foldableList);
  var fromFoldable111 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var fromFoldable27 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var map115 = /* @__PURE__ */ map(functorArray);
  var maximum3 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var minimum3 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum12 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var foldl13 = /* @__PURE__ */ foldl(foldableArray);
  var sortByHeight2 = function(v) {
    var compareByHeight = function(v1) {
      return function(v2) {
        return compare4(v2.value0.height)(v1.value0.height);
      };
    };
    var sortedGrandchildren = map49(sortByHeight2)(v.value1);
    var childArray = fromFoldable26(sortedGrandchildren);
    var sortedArray = sortBy(compareByHeight)(childArray);
    var sortedChildrenList = fromFoldable111(sortedArray);
    return new Node2(v.value0, sortedChildrenList);
  };
  var scaleToPixels2 = function(config) {
    return function(inputTree) {
      var allNodes3 = fromFoldable27(inputTree);
      var allX = map115(function(n) {
        return n.x;
      })(allNodes3);
      var maxX = fromMaybe(1)(maximum3(allX));
      var minX = fromMaybe(0)(minimum3(allX));
      var xRange = (function() {
        var $48 = maxX - minX === 0;
        if ($48) {
          return 1;
        }
        ;
        return maxX - minX;
      })();
      var scaleX2 = function(x46) {
        return (x46 - minX) / xRange * config.size.width;
      };
      var allHeights = map115(function(n) {
        return n.height;
      })(allNodes3);
      var maxHeight = fromMaybe(1)(maximum12(allHeights));
      var scaleY2 = function(height25) {
        return (1 - toNumber(height25) / toNumber(maxHeight)) * config.size.height;
      };
      var go2 = function(v) {
        return new Node2((function() {
          var $50 = {};
          for (var $51 in v.value0) {
            if ({}.hasOwnProperty.call(v.value0, $51)) {
              $50[$51] = v["value0"][$51];
            }
            ;
          }
          ;
          $50.x = scaleX2(v.value0.x);
          $50.y = scaleY2(v.value0.height);
          return $50;
        })(), map49(go2)(v.value1));
      };
      return go2(inputTree);
    };
  };
  var render10 = function(minSep) {
    return function(inputTree) {
      var foldl110 = function(f) {
        return function(init5) {
          return function(arr) {
            return foldl13(f)(init5)(arr);
          };
        };
      };
      var findExtent = function(v) {
        var v1 = fromFoldable26(v.value1);
        if (v1.length === 0) {
          return {
            minX: v.value0.x,
            maxX: v.value0.x
          };
        }
        ;
        var childExtents = map115(findExtent)(v1);
        var maxX = fromMaybe(v.value0.x)(maximum3(map115(function(e) {
          return e.maxX;
        })(childExtents)));
        var minX = fromMaybe(v.value0.x)(minimum3(map115(function(e) {
          return e.minX;
        })(childExtents)));
        return {
          minX,
          maxX
        };
      };
      var renderInternal = function(currentLeafX) {
        return function(v) {
          var v1 = fromFoldable26(v.value1);
          if (v1.length === 0) {
            var leafNode = new Node2((function() {
              var $62 = {};
              for (var $63 in v.value0) {
                if ({}.hasOwnProperty.call(v.value0, $63)) {
                  $62[$63] = v["value0"][$63];
                }
                ;
              }
              ;
              $62.x = currentLeafX;
              return $62;
            })(), Nil.value);
            return {
              tree: leafNode,
              lastLeafX: currentLeafX + minSep
            };
          }
          ;
          var processChildren = foldl110(function(acc) {
            return function(child) {
              var result = renderInternal(acc.lastLeafX)(child);
              return {
                trees: snoc(acc.trees)(result.tree),
                lastLeafX: result.lastLeafX
              };
            };
          })({
            trees: [],
            lastLeafX: currentLeafX
          })(v1);
          var childrenList = fromFoldable111(processChildren.trees);
          var allChildExtents = map115(findExtent)(processChildren.trees);
          var maxX = fromMaybe(0)(maximum3(map115(function(e) {
            return e.maxX;
          })(allChildExtents)));
          var minX = fromMaybe(0)(minimum3(map115(function(e) {
            return e.minX;
          })(allChildExtents)));
          var centerX = (minX + maxX) / 2;
          var internalNode = new Node2((function() {
            var $65 = {};
            for (var $66 in v.value0) {
              if ({}.hasOwnProperty.call(v.value0, $66)) {
                $65[$66] = v["value0"][$66];
              }
              ;
            }
            ;
            $65.x = centerX;
            return $65;
          })(), childrenList);
          return {
            tree: internalNode,
            lastLeafX: processChildren.lastLeafX
          };
        };
      };
      return renderInternal(0)(inputTree);
    };
  };
  var defaultClusterConfig = {
    size: {
      width: 800,
      height: 600
    },
    minSeparation: 1
  };
  var centerRoot = function(tree4) {
    var allNodes3 = fromFoldable27(tree4);
    var leaves = filter(function(n) {
      return n.height === 0;
    })(allNodes3);
    var firstLeaf = head(leaves);
    var minX = (function() {
      if (firstLeaf instanceof Just) {
        return firstLeaf.value0.x;
      }
      ;
      if (firstLeaf instanceof Nothing) {
        return 0;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Cluster4 (line 87, column 12 - line 89, column 21): " + [firstLeaf.constructor.name]);
    })();
    var lastLeaf = last(leaves);
    var maxX = (function() {
      if (lastLeaf instanceof Just) {
        return lastLeaf.value0.x;
      }
      ;
      if (lastLeaf instanceof Nothing) {
        return 0;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Cluster4 (line 91, column 12 - line 93, column 21): " + [lastLeaf.constructor.name]);
    })();
    var targetX = (minX + maxX) / 2;
    var offset = targetX - tree4.value0.x;
    var shiftTree = function(v) {
      return new Node2((function() {
        var $76 = {};
        for (var $77 in v.value0) {
          if ({}.hasOwnProperty.call(v.value0, $77)) {
            $76[$77] = v["value0"][$77];
          }
          ;
        }
        ;
        $76.x = v.value0.x + offset;
        return $76;
      })(), map49(shiftTree)(v.value1));
    };
    return shiftTree(tree4);
  };
  var addYCoordinates = function(v) {
    var nodeY = toNumber(v.value0.height);
    var childrenWithY = map49(addYCoordinates)(v.value1);
    return new Node2((function() {
      var $84 = {};
      for (var $85 in v.value0) {
        if ({}.hasOwnProperty.call(v.value0, $85)) {
          $84[$85] = v["value0"][$85];
        }
        ;
      }
      ;
      $84.y = nodeY;
      return $84;
    })(), childrenWithY);
  };
  var addHeight = function(v) {
    var childrenWithHeight = map49(addHeight)(v.value1);
    var nodeHeight = (function() {
      var v1 = fromFoldable26(childrenWithHeight);
      if (v1.length === 0) {
        return 0;
      }
      ;
      var childHeights = map115(function(v2) {
        return v2.value0.height;
      })(v1);
      var maxChildHeight = fromMaybe(0)(maximum12(childHeights));
      return 1 + maxChildHeight | 0;
    })();
    return new Node2((function() {
      var $94 = {};
      for (var $95 in v.value0) {
        if ({}.hasOwnProperty.call(v.value0, $95)) {
          $94[$95] = v["value0"][$95];
        }
        ;
      }
      ;
      $94.height = nodeHeight;
      return $94;
    })(), childrenWithHeight);
  };
  var cluster = function(config) {
    return function(inputTree) {
      var withHeight = addHeight(inputTree);
      var sorted = sortByHeight2(withHeight);
      var rendered = render10(config.minSeparation)(sorted);
      var centered = centerRoot(rendered.tree);
      var withCoords = addYCoordinates(centered);
      var scaled = scaleToPixels2(config)(withCoords);
      return scaled;
    };
  };

  // output/D3.Viz.AnimatedTree4Cluster4/index.js
  var show18 = /* @__PURE__ */ show(showNumber);
  var bind17 = /* @__PURE__ */ bind(bindArray);
  var fromFoldable28 = /* @__PURE__ */ fromFoldable2(foldableList);
  var append18 = /* @__PURE__ */ append(semigroupArray);
  var fromFoldable112 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map50 = /* @__PURE__ */ map(functorArray);
  var classed5 = /* @__PURE__ */ classed(toAttrString);
  var discard13 = /* @__PURE__ */ discard(discardUnit);
  var fill3 = /* @__PURE__ */ fill(toAttrString);
  var strokeColor4 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth3 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var d2 = /* @__PURE__ */ d(toAttrStringFn);
  var radius3 = /* @__PURE__ */ radius(toAttrNumber);
  var cx2 = /* @__PURE__ */ cx(toAttrNumberFn);
  var cy2 = /* @__PURE__ */ cy(toAttrNumberFn);
  var TreeLayout = /* @__PURE__ */ (function() {
    function TreeLayout3() {
    }
    ;
    TreeLayout3.value = new TreeLayout3();
    return TreeLayout3;
  })();
  var ClusterLayout = /* @__PURE__ */ (function() {
    function ClusterLayout3() {
    }
    ;
    ClusterLayout3.value = new ClusterLayout3();
    return ClusterLayout3;
  })();
  var verticalLinkPath = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          var midY = (y113 + y211) / 2;
          return "M" + (show18(x115) + ("," + (show18(y113) + (" C" + (show18(x115) + ("," + (show18(midY) + (" " + (show18(x211) + ("," + (show18(midY) + (" " + (show18(x211) + ("," + show18(y211)))))))))))))));
        };
      };
    };
  };
  var toggleLayout = function(v) {
    if (v instanceof TreeLayout) {
      return ClusterLayout.value;
    }
    ;
    if (v instanceof ClusterLayout) {
      return TreeLayout.value;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.AnimatedTree4Cluster4 (line 34, column 1 - line 34, column 41): " + [v.constructor.name]);
  };
  var nodeKey = function(node) {
    return node.name;
  };
  var makeLinks = function(v) {
    var grandchildLinks = bind17(fromFoldable28(v.value1))(makeLinks);
    var childLinks = bind17(fromFoldable28(v.value1))(function(v1) {
      return [{
        source: {
          name: v.value0.name,
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          name: v1.value0.name,
          x: v1.value0.x,
          y: v1.value0.y
        }
      }];
    });
    return append18(childLinks)(grandchildLinks);
  };
  var linkKey = function(link4) {
    return link4.source.name + ("->" + link4.target.name);
  };
  var hierDataToTree = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable112(map50(hierDataToTree)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.AnimatedTree4Cluster4 (line 45, column 20 - line 47, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      depth: 0,
      height: 0
    }, childrenList);
  };
  var flattenTree = /* @__PURE__ */ fromFoldable2(foldableTree);
  var draw = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var bind121 = bind(Monad0.Bind1());
    var pure56 = pure(Monad0.Applicative0());
    return function(dictSelectionM) {
      var attach6 = attach(dictSelectionM);
      var appendTo6 = appendTo(dictSelectionM);
      return function(flareData) {
        return function(selector) {
          var dataTree = hierDataToTree(flareData);
          return bind121(attach6(selector))(function(root$prime) {
            return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1200)(900), classed5("animated-tree4-cluster4")]))(function(svg2) {
              return bind121(appendTo6(svg2)(Group.value)([classed5("links")]))(function(linksGroup) {
                return bind121(appendTo6(svg2)(Group.value)([classed5("nodes")]))(function(nodesGroup) {
                  return pure56({
                    dataTree,
                    linksGroup,
                    nodesGroup,
                    chartWidth: 1200,
                    chartHeight: 900
                  });
                });
              });
            });
          });
        };
      };
    };
  };
  var animationStep = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind121 = bind(Bind1);
    var discard115 = discard13(Bind1);
    var pure56 = pure(Monad0.Applicative0());
    return function(dictSelectionM) {
      var openSelection5 = openSelection(dictSelectionM);
      var updateJoin5 = updateJoin(dictSelectionM);
      var setAttributes5 = setAttributes(dictSelectionM);
      var appendTo6 = appendTo(dictSelectionM);
      return function(dataTree) {
        return function(linksGroup) {
          return function(nodesGroup) {
            return function(chartWidth) {
              return function(chartHeight) {
                return function(currentLayout) {
                  var positioned = (function() {
                    if (currentLayout instanceof TreeLayout) {
                      var config = {
                        minSeparation: defaultTreeConfig.minSeparation,
                        size: {
                          width: chartWidth,
                          height: chartHeight
                        }
                      };
                      return treeWithSorting(config)(dataTree);
                    }
                    ;
                    if (currentLayout instanceof ClusterLayout) {
                      var config = {
                        minSeparation: defaultClusterConfig.minSeparation,
                        size: {
                          width: chartWidth,
                          height: chartHeight
                        }
                      };
                      return cluster(config)(dataTree);
                    }
                    ;
                    throw new Error("Failed pattern match at D3.Viz.AnimatedTree4Cluster4 (line 128, column 20 - line 134, column 37): " + [currentLayout.constructor.name]);
                  })();
                  var nodes = flattenTree(positioned);
                  var links = makeLinks(positioned);
                  return bind121(openSelection5(linksGroup)("path"))(function(linksSelection) {
                    return bind121(updateJoin5(linksSelection)(Path2.value)(links)(linkKey))(function(linkJoin) {
                      return discard115(setAttributes5(linkJoin.exit)([remove]))(function() {
                        return bind121(appendTo6(linkJoin.enter)(Path2.value)([]))(function(newEnterLinks) {
                          var linkPathFn = function(link4) {
                            return verticalLinkPath(link4.source.x)(link4.source.y)(link4.target.x)(link4.target.y);
                          };
                          return bind121(setAttributes5(newEnterLinks)([fill3("none"), strokeColor4("#555"), strokeWidth3(1.5), classed5("link")]))(function() {
                            return bind121(setAttributes5(newEnterLinks)([d2(linkPathFn)]))(function() {
                              return bind121(setAttributes5(linkJoin.update)([fill3("none"), strokeColor4("#555"), strokeWidth3(1.5), classed5("link")]))(function() {
                                return discard115(setAttributes5(linkJoin.update)(to(transitionWithDuration(1500))([d2(linkPathFn)])))(function() {
                                  return bind121(openSelection5(nodesGroup)("circle"))(function(nodesSelection) {
                                    return bind121(updateJoin5(nodesSelection)(Circle.value)(nodes)(nodeKey))(function(nodeJoin) {
                                      return bind121(setAttributes5(nodeJoin.exit)([remove]))(function() {
                                        return bind121(appendTo6(nodeJoin.enter)(Circle.value)([]))(function(newEnterNodes) {
                                          return bind121(setAttributes5(newEnterNodes)([radius3(4), fill3("#999"), strokeColor4("#555"), strokeWidth3(1.5), classed5("node")]))(function() {
                                            return bind121(setAttributes5(newEnterNodes)([cx2(function(v) {
                                              return v.x;
                                            }), cy2(function(v) {
                                              return v.y;
                                            })]))(function() {
                                              return bind121(setAttributes5(nodeJoin.update)([radius3(4), fill3("#999"), strokeColor4("#555"), strokeWidth3(1.5), classed5("node")]))(function() {
                                                return bind121(setAttributes5(nodeJoin.update)(to(transitionWithDuration(1500))([cx2(function(v) {
                                                  return v.x;
                                                }), cy2(function(v) {
                                                  return v.y;
                                                })])))(function() {
                                                  return pure56(unit);
                                                });
                                              });
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                };
              };
            };
          };
        };
      };
    };
  };

  // output/PSD3.Layout.Hierarchy.Cluster/index.js
  var map51 = /* @__PURE__ */ map(functorArray);
  var foldl14 = /* @__PURE__ */ foldl(foldableArray);
  var max9 = /* @__PURE__ */ max(ordNumber);
  var map116 = /* @__PURE__ */ map(functorMaybe);
  var secondWalkSize = function(v) {
    return function(x0) {
      return function(x115) {
        return function(rootY) {
          return function(dx) {
            return function(dy4) {
              var normalizedY = (1 - (function() {
                var $36 = rootY === 0;
                if ($36) {
                  return 1;
                }
                ;
                return v.y / rootY;
              })()) * dy4;
              var normalizedX = (v.x - x0) / (x115 - x0) * dx;
              var normalizedChildren = map51(function(child) {
                return secondWalkSize(child)(x0)(x115)(rootY)(dx)(dy4);
              })(v.children);
              return {
                data_: v.data_,
                depth: v.depth,
                x: normalizedX,
                y: normalizedY,
                children: normalizedChildren
              };
            };
          };
        };
      };
    };
  };
  var secondWalkNodeSize = function(v) {
    return function(rootX) {
      return function(rootY) {
        return function(dx) {
          return function(dy4) {
            var normalizedY = (rootY - v.y) * dy4;
            var normalizedX = (v.x - rootX) * dx;
            var normalizedChildren = map51(function(child) {
              return secondWalkNodeSize(child)(rootX)(rootY)(dx)(dy4);
            })(v.children);
            return {
              data_: v.data_,
              depth: v.depth,
              x: normalizedX,
              y: normalizedY,
              children: normalizedChildren
            };
          };
        };
      };
    };
  };
  var leafRight = function($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v) {
      var v1 = last(v.children);
      if (v1 instanceof Nothing) {
        $tco_done = true;
        return v;
      }
      ;
      if (v1 instanceof Just) {
        $copy_v = v1.value0;
        return;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Cluster (line 196, column 3 - line 198, column 34): " + [v1.constructor.name]);
    }
    ;
    while (!$tco_done) {
      $tco_result = $tco_loop($copy_v);
    }
    ;
    return $tco_result;
  };
  var leafLeft = function($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v) {
      var v1 = head(v.children);
      if (v1 instanceof Nothing) {
        $tco_done = true;
        return v;
      }
      ;
      if (v1 instanceof Just) {
        $copy_v = v1.value0;
        return;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Cluster (line 189, column 3 - line 191, column 33): " + [v1.constructor.name]);
    }
    ;
    while (!$tco_done) {
      $tco_result = $tco_loop($copy_v);
    }
    ;
    return $tco_result;
  };
  var firstWalkInternal = function(config) {
    return function(v) {
      return function(parentId) {
        return function(myId) {
          return function(previousLeaf) {
            var $55 = length3(v.value0.children) === 0;
            if ($55) {
              var x46 = (function() {
                if (previousLeaf instanceof Nothing) {
                  return 0;
                }
                ;
                if (previousLeaf instanceof Just) {
                  var sameParent = (function() {
                    if (previousLeaf.value0.parent instanceof Just && parentId instanceof Just) {
                      return previousLeaf.value0.parent.value0 === parentId.value0;
                    }
                    ;
                    return false;
                  })();
                  var sep = (function() {
                    if (sameParent) {
                      return 1;
                    }
                    ;
                    return 2;
                  })();
                  return previousLeaf.value0.node.x + sep;
                }
                ;
                throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Cluster (line 129, column 11 - line 140, column 26): " + [previousLeaf.constructor.name]);
              })();
              var leafNode = {
                data_: v.value0.data_,
                depth: v.value0.depth,
                x: x46,
                y: 0,
                children: []
              };
              var internal = {
                node: leafNode,
                parent: parentId,
                nodeId: myId
              };
              return {
                tree: leafNode,
                lastLeaf: new Just(internal),
                nextId: myId + 1 | 0
              };
            }
            ;
            var processChildren = foldl14(function(acc) {
              return function(child) {
                var result = firstWalkInternal(config)(child)(new Just(myId))(acc.nextId)(acc.lastLeaf);
                return {
                  children: snoc(acc.children)(result.tree),
                  lastLeaf: result.lastLeaf,
                  nextId: result.nextId
                };
              };
            })({
              children: [],
              lastLeaf: previousLeaf,
              nextId: myId + 1 | 0
            })(v.value0.children);
            var maxY = 1 + foldl14(function(m) {
              return function(v1) {
                return max9(m)(v1.y);
              };
            })(0)(processChildren.children);
            var meanX = foldl14(function(sum8) {
              return function(v1) {
                return sum8 + v1.x;
              };
            })(0)(processChildren.children) / toNumber(length3(processChildren.children));
            var internalNode = {
              data_: v.value0.data_,
              depth: v.value0.depth,
              x: meanX,
              y: maxY,
              children: processChildren.children
            };
            return {
              tree: internalNode,
              lastLeaf: processChildren.lastLeaf,
              nextId: processChildren.nextId
            };
          };
        };
      };
    };
  };
  var firstWalk = function(config) {
    return function(root3) {
      var result = firstWalkInternal(config)(root3)(Nothing.value)(0)(Nothing.value);
      return {
        tree: result.tree,
        lastLeaf: map116(function(v) {
          return v.node;
        })(result.lastLeaf)
      };
    };
  };
  var defaultSeparation = function(v) {
    return function(v1) {
      var $69 = v.depth === v1.depth;
      if ($69) {
        return 1;
      }
      ;
      return 2;
    };
  };
  var defaultClusterConfig2 = /* @__PURE__ */ (function() {
    return {
      size: {
        width: 1,
        height: 1
      },
      separation: defaultSeparation,
      nodeSize: Nothing.value
    };
  })();
  var cluster2 = function(config) {
    return function(root3) {
      var v = firstWalk(config)(root3);
      var right4 = leafRight(v.tree);
      var left4 = leafLeft(v.tree);
      var x115 = right4.x + config.separation(right4)(left4) / 2;
      var x0 = left4.x - config.separation(left4)(right4) / 2;
      var normalizedTree = (function() {
        if (config.nodeSize instanceof Just) {
          return secondWalkNodeSize(v.tree)(v.tree.x)(v.tree.y)(config.nodeSize.value0.width)(config.nodeSize.value0.height);
        }
        ;
        if (config.nodeSize instanceof Nothing) {
          return secondWalkSize(v.tree)(x0)(x115)(v.tree.y)(config.size.width)(config.size.height);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Cluster (line 86, column 22 - line 92, column 89): " + [config.nodeSize.constructor.name]);
      })();
      return normalizedTree;
    };
  };

  // output/PSD3.Layout.Hierarchy.Types/index.js
  var VNode = /* @__PURE__ */ (function() {
    function VNode2(value0) {
      this.value0 = value0;
    }
    ;
    VNode2.create = function(value0) {
      return new VNode2(value0);
    };
    return VNode2;
  })();
  var HNode = /* @__PURE__ */ (function() {
    function HNode2(value0) {
      this.value0 = value0;
    }
    ;
    HNode2.create = function(value0) {
      return new HNode2(value0);
    };
    return HNode2;
  })();
  var getValue2 = function(v) {
    return v.value0.value;
  };

  // output/PSD3.Layout.Hierarchy.Core/index.js
  var map52 = /* @__PURE__ */ map(functorArray);
  var foldl15 = /* @__PURE__ */ foldl(foldableArray);
  var maximum4 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var sum4 = function(v) {
    return function(valueAccessor) {
      var $22 = $$null2(v.value0.children);
      if ($22) {
        return new VNode({
          data_: v.value0.data_,
          depth: v.value0.depth,
          height: v.value0.height,
          parent: Nothing.value,
          children: [],
          value: valueAccessor(v.value0.data_)
        });
      }
      ;
      var ownValue = valueAccessor(v.value0.data_);
      var childrenValued = map52(function(child) {
        return sum4(child)(valueAccessor);
      })(v.value0.children);
      var childrenSum = foldl15(function(acc) {
        return function(child) {
          return acc + getValue2(child);
        };
      })(0)(childrenValued);
      var totalValue = ownValue + childrenSum;
      return new VNode({
        data_: v.value0.data_,
        depth: v.value0.depth,
        height: v.value0.height,
        parent: Nothing.value,
        children: childrenValued,
        value: totalValue
      });
    };
  };
  var getHeight = function(v) {
    return v.value0.height;
  };
  var hierarchy = function(rootData) {
    return function(childrenAccessor) {
      var computeHeights = function(v) {
        var $31 = $$null2(v.value0.children);
        if ($31) {
          return new HNode({
            data_: v.value0.data_,
            depth: v.value0.depth,
            parent: v.value0.parent,
            children: v.value0.children,
            height: 0
          });
        }
        ;
        var childrenWithHeights = map52(computeHeights)(v.value0.children);
        var childHeights = map52(getHeight)(childrenWithHeights);
        var maxChildHeight = fromMaybe(0)(maximum4(childHeights));
        return new HNode({
          data_: v.value0.data_,
          depth: v.value0.depth,
          parent: v.value0.parent,
          children: childrenWithHeights,
          height: maxChildHeight + 1 | 0
        });
      };
      var buildNode = function(parentRef) {
        return function(currentDepth) {
          return function(nodeData) {
            var v = childrenAccessor(nodeData);
            if (v instanceof Nothing) {
              return new HNode({
                data_: nodeData,
                depth: currentDepth,
                height: 0,
                parent: parentRef,
                children: []
              });
            }
            ;
            if (v instanceof Just) {
              var thisNode = new HNode({
                data_: nodeData,
                depth: currentDepth,
                height: 0,
                parent: parentRef,
                children: []
              });
              var builtChildren = map52(buildNode(new Just(thisNode))(currentDepth + 1 | 0))(v.value0);
              var nodeWithChildren = new HNode({
                data_: nodeData,
                depth: currentDepth,
                height: 0,
                parent: parentRef,
                children: builtChildren
              });
              return nodeWithChildren;
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Core (line 25, column 7 - line 60, column 29): " + [v.constructor.name]);
          };
        };
      };
      return computeHeights(buildNode(Nothing.value)(0)(rootData));
    };
  };

  // output/PSD3.Layout.Hierarchy.Projection/index.js
  var show19 = /* @__PURE__ */ show(showNumber);
  var verticalY = function(v) {
    return v.y;
  };
  var verticalX = function(v) {
    return v.x;
  };
  var verticalLinkPath2 = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          var midY = (y113 + y211) / 2;
          return "M" + (show19(x115) + ("," + (show19(y113) + (" C" + (show19(x115) + ("," + (show19(midY) + (" " + (show19(x211) + ("," + (show19(midY) + (" " + (show19(x211) + ("," + show19(y211)))))))))))))));
        };
      };
    };
  };
  var radialY = function(v) {
    return v.y * sin(v.x);
  };
  var radialX = function(v) {
    return v.y * cos(v.x);
  };
  var radialLinkPath = function(angle1) {
    return function(radius1) {
      return function(angle2) {
        return function(radius210) {
          var y211 = radius210 * sin(angle2);
          var y113 = radius1 * sin(angle1);
          var x211 = radius210 * cos(angle2);
          var x115 = radius1 * cos(angle1);
          var midRadius = (radius1 + radius210) / 2;
          var cy210 = midRadius * sin(angle2);
          var cy110 = midRadius * sin(angle1);
          var cx210 = midRadius * cos(angle2);
          var cx110 = midRadius * cos(angle1);
          return "M" + (show19(x115) + ("," + (show19(y113) + (" C" + (show19(cx110) + ("," + (show19(cy110) + (" " + (show19(cx210) + ("," + (show19(cy210) + (" " + (show19(x211) + ("," + show19(y211)))))))))))))));
        };
      };
    };
  };
  var isometricY = function(v) {
    return (v.x + v.y) * sin(pi / 6);
  };
  var isometricX = function(v) {
    return (v.y - v.x) * cos(pi / 6);
  };
  var isometricTreeLinkPath = function(parent2) {
    return function(child) {
      var y211 = isometricY(child);
      var y113 = isometricY(parent2);
      var x211 = isometricX(child);
      var x115 = isometricX(parent2);
      var distance2 = abs2(x211 - x115) + abs2(y211 - y113);
      var parentOffset = distance2 * 0.1;
      var cy110 = y113 + parentOffset;
      var cx110 = x115 + parentOffset;
      var childOffset = distance2 * 0.25;
      var cx210 = x211 - childOffset;
      var cy210 = y211 - childOffset;
      return "M" + (show19(x115) + ("," + (show19(y113) + (" C" + (show19(cx110) + ("," + (show19(cy110) + (" " + (show19(cx210) + ("," + (show19(cy210) + (" " + (show19(x211) + ("," + show19(y211)))))))))))))));
    };
  };
  var isometricScale = /* @__PURE__ */ sqrt(2);
  var isometricLinkPath = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          var midX = (x115 + x211) / 2;
          return "M" + (show19(x115) + ("," + (show19(y113) + (" C" + (show19(midX) + ("," + (show19(y113) + (" " + (show19(midX) + ("," + (show19(y211) + (" " + (show19(x211) + ("," + show19(y211)))))))))))))));
        };
      };
    };
  };
  var horizontalY = function(v) {
    return v.x;
  };
  var horizontalX = function(v) {
    return v.y;
  };
  var horizontalLinkPath = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          var midX = (x115 + x211) / 2;
          return "M" + (show19(x115) + ("," + (show19(y113) + (" C" + (show19(midX) + ("," + (show19(y113) + (" " + (show19(midX) + ("," + (show19(y211) + (" " + (show19(x211) + ("," + show19(y211)))))))))))))));
        };
      };
    };
  };
  var clusterVerticalY = function(v) {
    return v.y;
  };
  var clusterVerticalX = function(v) {
    return v.x;
  };
  var clusterRadialY = function(v) {
    return v.y * sin(v.x);
  };
  var clusterRadialX = function(v) {
    return v.y * cos(v.x);
  };
  var clusterIsometricY = function(v) {
    return (v.x + v.y) * sin(pi / 6);
  };
  var clusterIsometricX = function(v) {
    return (v.y - v.x) * cos(pi / 6);
  };
  var isometricClusterLinkPath = function(parent2) {
    return function(child) {
      var y211 = clusterIsometricY(child);
      var y113 = clusterIsometricY(parent2);
      var x211 = clusterIsometricX(child);
      var x115 = clusterIsometricX(parent2);
      var distance2 = abs2(x211 - x115) + abs2(y211 - y113);
      var parentOffset = distance2 * 0.1;
      var cy110 = y113 + parentOffset;
      var cx110 = x115 + parentOffset;
      var childOffset = distance2 * 0.25;
      var cx210 = x211 - childOffset;
      var cy210 = y211 - childOffset;
      return "M" + (show19(x115) + ("," + (show19(y113) + (" C" + (show19(cx110) + ("," + (show19(cy110) + (" " + (show19(cx210) + ("," + (show19(cy210) + (" " + (show19(x211) + ("," + show19(y211)))))))))))))));
    };
  };
  var clusterHorizontalY = function(v) {
    return v.x;
  };
  var clusterHorizontalX = function(v) {
    return v.y;
  };

  // output/PSD3.Layout.Hierarchy.Tree/foreign.js
  var unsafeCrashWith2 = function(msg) {
    throw new Error(msg);
  };

  // output/PSD3.Layout.Hierarchy.Tree/index.js
  var map53 = /* @__PURE__ */ map(functorArray);
  var insert10 = /* @__PURE__ */ insert(ordInt);
  var lookup13 = /* @__PURE__ */ lookup(ordInt);
  var show20 = /* @__PURE__ */ show(showInt);
  var foldl16 = /* @__PURE__ */ foldl(foldableList);
  var max10 = /* @__PURE__ */ max(ordInt);
  var foldl17 = /* @__PURE__ */ foldl(foldableArray);
  var updateNode = function(nodes) {
    return function(id5) {
      return function(newNode) {
        return insert10(id5)(newNode)(nodes);
      };
    };
  };
  var unsafeGetNode = function(nodes) {
    return function(id5) {
      var v = lookup13(id5)(nodes);
      if (v instanceof Just) {
        return v.value0;
      }
      ;
      if (v instanceof Nothing) {
        return unsafeCrashWith2("Node ID " + (show20(id5) + " not found in map"));
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 156, column 26 - line 158, column 76): " + [v.constructor.name]);
    };
  };
  var secondWalk = function(config) {
    return function(nodes) {
      return function(nodeId) {
        var v = unsafeGetNode(nodes)(nodeId);
        var parentM = (function() {
          if (v.parent instanceof Nothing) {
            return v.m;
          }
          ;
          if (v.parent instanceof Just) {
            return unsafeGetNode(nodes)(v.parent.value0).m;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 465, column 15 - line 467, column 46): " + [v.parent.constructor.name]);
        })();
        var newM = v.m + parentM;
        var maxD = toNumber(foldl16(function(acc) {
          return function(n) {
            return max10(acc)(n.node.depth);
          };
        })(0)(values(nodes)));
        var finalY = toNumber(v.node.depth) * (config.size.height / (function() {
          var $62 = maxD === 0;
          if ($62) {
            return 1;
          }
          ;
          return maxD;
        })());
        var finalX = v.z + parentM;
        var updatedTreeNode = {
          data_: v.node.data_,
          depth: v.node.depth,
          children: v.node.children,
          x: finalX,
          y: finalY
        };
        var updated = {
          a: v.a,
          c: v.c,
          children: v.children,
          i: v.i,
          nodeId: v.nodeId,
          parent: v.parent,
          s: v.s,
          t: v.t,
          z: v.z,
          node: updatedTreeNode,
          m: newM
        };
        return updateNode(nodes)(nodeId)(updated);
      };
    };
  };
  var scaleNode = function(tx) {
    return function(kx) {
      return function(ky) {
        return function(v) {
          return {
            data_: v.data_,
            depth: v.depth,
            x: (v.x + tx) * kx,
            y: toNumber(v.depth) * ky,
            children: map53(scaleNode(tx)(kx)(ky))(v.children)
          };
        };
      };
    };
  };
  var nextRight = function(nodes) {
    return function(nodeId) {
      var node = unsafeGetNode(nodes)(nodeId);
      var lastIdx = length3(node.children) - 1 | 0;
      var $67 = lastIdx >= 0;
      if ($67) {
        return index2(node.children)(lastIdx);
      }
      ;
      return node.t;
    };
  };
  var nextLeft = function(nodes) {
    return function(nodeId) {
      var node = unsafeGetNode(nodes)(nodeId);
      var $68 = length3(node.children) > 0;
      if ($68) {
        return index2(node.children)(0);
      }
      ;
      return node.t;
    };
  };
  var nextAncestor = function(nodes) {
    return function(vimId) {
      return function(vId) {
        return function(defaultAncestor) {
          var vim = unsafeGetNode(nodes)(vimId);
          var vimAncestor = unsafeGetNode(nodes)(vim.a);
          var v = unsafeGetNode(nodes)(vId);
          if (vimAncestor.parent instanceof Just && v.parent instanceof Just) {
            var $71 = vimAncestor.parent.value0 === v.parent.value0;
            if ($71) {
              return vim.a;
            }
            ;
            return defaultAncestor;
          }
          ;
          return defaultAncestor;
        };
      };
    };
  };
  var moveSubtree = function(nodes) {
    return function(wmId) {
      return function(wpId) {
        return function(shift) {
          var wp = unsafeGetNode(nodes)(wpId);
          var wm = unsafeGetNode(nodes)(wmId);
          var change2 = shift / toNumber(wp.i - wm.i | 0);
          var wmUpdated = {
            a: wm.a,
            children: wm.children,
            i: wm.i,
            m: wm.m,
            node: wm.node,
            nodeId: wm.nodeId,
            parent: wm.parent,
            s: wm.s,
            t: wm.t,
            z: wm.z,
            c: wm.c + change2
          };
          var wpUpdated = {
            a: wp.a,
            children: wp.children,
            i: wp.i,
            node: wp.node,
            nodeId: wp.nodeId,
            parent: wp.parent,
            t: wp.t,
            c: wp.c - change2,
            s: wp.s + shift,
            z: wp.z + shift,
            m: wp.m + shift
          };
          var nodes1 = updateNode(nodes)(wpId)(wpUpdated);
          return updateNode(nodes1)(wmId)(wmUpdated);
        };
      };
    };
  };
  var hierarchyToTreeNode = function(v) {
    return {
      data_: v.value0.data_,
      depth: v.value0.depth,
      x: 0,
      y: 0,
      children: map53(hierarchyToTreeNode)(v.value0.children)
    };
  };
  var findExtents = function(left4) {
    return function(right4) {
      return function(bottom4) {
        return function(v) {
          var newRight = (function() {
            var $83 = v.x > right4.x;
            if ($83) {
              return v;
            }
            ;
            return right4;
          })();
          var newLeft = (function() {
            var $84 = v.x < left4.x;
            if ($84) {
              return v;
            }
            ;
            return left4;
          })();
          var newBottom = (function() {
            var $85 = v.depth > bottom4.depth;
            if ($85) {
              return v;
            }
            ;
            return bottom4;
          })();
          return foldl17(function(acc) {
            return function(child) {
              return findExtents(acc.left)(acc.right)(acc.bottom)(child);
            };
          })({
            left: newLeft,
            right: newRight,
            bottom: newBottom
          })(v.children);
        };
      };
    };
  };
  var scaleToFit = function(config) {
    return function(tree1) {
      if (config.nodeSize instanceof Just) {
        return tree1;
      }
      ;
      if (config.nodeSize instanceof Nothing) {
        var extents = findExtents(tree1)(tree1)(tree1)(tree1);
        var s = (function() {
          var $91 = extents.left.x === extents.right.x;
          if ($91) {
            return 1;
          }
          ;
          return config.separation(extents.left)(extents.right) / 2;
        })();
        var tx = s - extents.left.x;
        var ky = config.size.height / (function() {
          var $92 = extents.bottom.depth === 0;
          if ($92) {
            return 1;
          }
          ;
          return toNumber(extents.bottom.depth);
        })();
        var kx = config.size.width / (extents.right.x + s + tx);
        return scaleNode(tx)(kx)(ky)(tree1);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 519, column 3 - line 541, column 33): " + [config.nodeSize.constructor.name]);
    };
  };
  var extractTreeNode = function(nodes) {
    return function(nodeId) {
      var internal = unsafeGetNode(nodes)(nodeId);
      var childTrees = map53(extractTreeNode(nodes))(internal.children);
      return {
        data_: internal.node.data_,
        depth: internal.node.depth,
        x: internal.node.x,
        y: internal.node.y,
        children: childTrees
      };
    };
  };
  var executeShifts = function(nodes) {
    return function(nodeId) {
      var v = unsafeGetNode(nodes)(nodeId);
      var go2 = function($copy_shift) {
        return function($copy_change) {
          return function($copy_i) {
            return function($copy_ns) {
              var $tco_var_shift = $copy_shift;
              var $tco_var_change = $copy_change;
              var $tco_var_i = $copy_i;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(shift, change2, i2, ns) {
                if (i2 < 0) {
                  $tco_done = true;
                  return ns;
                }
                ;
                if (otherwise) {
                  var v1 = index2(v.children)(i2);
                  if (v1 instanceof Nothing) {
                    $tco_done = true;
                    return ns;
                  }
                  ;
                  if (v1 instanceof Just) {
                    var w = unsafeGetNode(ns)(v1.value0);
                    var newZ = w.z + shift;
                    var newShift = shift + w.s + (change2 + w.c);
                    var newM = w.m + shift;
                    var updated = {
                      a: w.a,
                      c: w.c,
                      children: w.children,
                      i: w.i,
                      node: w.node,
                      nodeId: w.nodeId,
                      parent: w.parent,
                      s: w.s,
                      t: w.t,
                      z: newZ,
                      m: newM
                    };
                    var ns11 = updateNode(ns)(v1.value0)(updated);
                    var newChange = change2 + w.c;
                    $tco_var_shift = newShift;
                    $tco_var_change = newChange;
                    $tco_var_i = i2 - 1 | 0;
                    $copy_ns = ns11;
                    return;
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 287, column 13 - line 297, column 53): " + [v1.constructor.name]);
                }
                ;
                throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 284, column 7 - line 297, column 53): " + [shift.constructor.name, change2.constructor.name, i2.constructor.name, ns.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_shift, $tco_var_change, $tco_var_i, $copy_ns);
              }
              ;
              return $tco_result;
            };
          };
        };
      };
      return go2(0)(0)(length3(v.children) - 1 | 0)(nodes);
    };
  };
  var eachBefore = function(nodes) {
    return function(nodeId) {
      return function(fn) {
        var nodes1 = fn(nodes)(nodeId);
        var node = unsafeGetNode(nodes1)(nodeId);
        return foldl17(function(ns) {
          return function(childId) {
            return eachBefore(ns)(childId)(fn);
          };
        })(nodes1)(node.children);
      };
    };
  };
  var secondWalkAll = function(config) {
    return function(nodes) {
      return function(rootId) {
        return eachBefore(nodes)(rootId)(function(ns) {
          return function(nid) {
            return secondWalk(config)(ns)(nid);
          };
        });
      };
    };
  };
  var eachAfter = function(nodes) {
    return function(nodeId) {
      return function(fn) {
        var node = unsafeGetNode(nodes)(nodeId);
        var nodesAfterChildren = foldl17(function(ns) {
          return function(childId) {
            return eachAfter(ns)(childId)(fn);
          };
        })(nodes)(node.children);
        return fn(nodesAfterChildren)(nodeId);
      };
    };
  };
  var defaultSeparation2 = function(v) {
    return function(v1) {
      return 1;
    };
  };
  var defaultTreeConfig2 = /* @__PURE__ */ (function() {
    return {
      size: {
        width: 1,
        height: 1
      },
      separation: defaultSeparation2,
      nodeSize: Nothing.value
    };
  })();
  var buildInternalTree = function(treeRoot) {
    var buildNodesPass = function(parent2) {
      return function(siblingIndex) {
        return function(v) {
          return function(state3) {
            var childrenWithIndex = mapWithIndex3(Tuple.create)(v.children);
            var v1 = foldl17(function(acc) {
              return function(v2) {
                var childResult = buildNodesPass(new Just(state3.nextId))(v2.value0)(v2.value1)(acc.state);
                return {
                  childIds: snoc(acc.childIds)(acc.state.nextId),
                  state: childResult
                };
              };
            })({
              childIds: [],
              state: {
                nodes: state3.nodes,
                nextId: state3.nextId + 1 | 0
              }
            })(childrenWithIndex);
            var internal = {
              node: v,
              parent: parent2,
              children: v1.childIds,
              nodeId: state3.nextId,
              z: 0,
              m: 0,
              a: state3.nextId,
              t: Nothing.value,
              c: 0,
              s: 0,
              i: siblingIndex
            };
            var nodesWithThis = insert10(state3.nextId)(internal)(v1.state.nodes);
            return {
              nodes: nodesWithThis,
              nextId: v1.state.nextId
            };
          };
        };
      };
    };
    var result = buildNodesPass(Nothing.value)(0)(treeRoot)({
      nodes: empty2,
      nextId: 0
    });
    return {
      nodes: result.nodes,
      root: 0
    };
  };
  var apportion = function(config) {
    return function(nodes) {
      return function(vId) {
        return function(wMaybe) {
          return function(ancestor) {
            var walkContours = function($copy_ns) {
              return function($copy_vip) {
                return function($copy_vop) {
                  return function($copy_vim) {
                    return function($copy_vom) {
                      return function($copy_ancestor$prime) {
                        return function($copy_sip) {
                          return function($copy_sop) {
                            return function($copy_sim) {
                              return function($copy_som) {
                                return function($copy_currentAncestor) {
                                  var $tco_var_ns = $copy_ns;
                                  var $tco_var_vip = $copy_vip;
                                  var $tco_var_vop = $copy_vop;
                                  var $tco_var_vim = $copy_vim;
                                  var $tco_var_vom = $copy_vom;
                                  var $tco_var_ancestor$prime = $copy_ancestor$prime;
                                  var $tco_var_sip = $copy_sip;
                                  var $tco_var_sop = $copy_sop;
                                  var $tco_var_sim = $copy_sim;
                                  var $tco_var_som = $copy_som;
                                  var $tco_done = false;
                                  var $tco_result;
                                  function $tco_loop(ns, vip, vop, vim, vom2, ancestor$prime, sip, sop, sim, som, currentAncestor) {
                                    var vipNext = nextLeft(ns)(vip);
                                    var vimNext = nextRight(ns)(vim);
                                    if (vimNext instanceof Just && vipNext instanceof Just) {
                                      var vopNext = nextRight(ns)(vop);
                                      var vop$prime = fromMaybe(vop)(vopNext);
                                      var vopNode = unsafeGetNode(ns)(vop$prime);
                                      var vopUpdated = {
                                        c: vopNode.c,
                                        children: vopNode.children,
                                        i: vopNode.i,
                                        m: vopNode.m,
                                        node: vopNode.node,
                                        nodeId: vopNode.nodeId,
                                        parent: vopNode.parent,
                                        s: vopNode.s,
                                        t: vopNode.t,
                                        z: vopNode.z,
                                        a: ancestor$prime
                                      };
                                      var vomNext = nextLeft(ns)(vom2);
                                      var vom$prime = fromMaybe(vom2)(vomNext);
                                      var ns1 = updateNode(ns)(vop$prime)(vopUpdated);
                                      var vimNode = unsafeGetNode(ns1)(vimNext.value0);
                                      var sim$prime = sim + vimNode.m;
                                      var vipNode = unsafeGetNode(ns1)(vipNext.value0);
                                      var sep = config.separation(vimNode.node)(vipNode.node);
                                      var shift = vimNode.z + sim - vipNode.z - sip + sep;
                                      var ns2 = (function() {
                                        var $112 = shift > 0;
                                        if ($112) {
                                          var anc = nextAncestor(ns1)(vimNext.value0)(ancestor$prime)(currentAncestor);
                                          return moveSubtree(ns1)(anc)(ancestor$prime)(shift);
                                        }
                                        ;
                                        return ns1;
                                      })();
                                      var som$prime = som + unsafeGetNode(ns2)(vom$prime).m;
                                      var sip$prime = (function() {
                                        var $113 = shift > 0;
                                        if ($113) {
                                          return sip + shift;
                                        }
                                        ;
                                        return sip;
                                      })();
                                      var sop$prime = (function() {
                                        var $114 = shift > 0;
                                        if ($114) {
                                          return sop + shift;
                                        }
                                        ;
                                        return sop;
                                      })();
                                      var sop$prime$prime = sop$prime + unsafeGetNode(ns2)(vop$prime).m;
                                      var sip$prime$prime = sip$prime + vipNode.m;
                                      $tco_var_ns = ns2;
                                      $tco_var_vip = vipNext.value0;
                                      $tco_var_vop = vop$prime;
                                      $tco_var_vim = vimNext.value0;
                                      $tco_var_vom = vom$prime;
                                      $tco_var_ancestor$prime = ancestor$prime;
                                      $tco_var_sip = sip$prime$prime;
                                      $tco_var_sop = sop$prime$prime;
                                      $tco_var_sim = sim$prime;
                                      $tco_var_som = som$prime;
                                      $copy_currentAncestor = currentAncestor;
                                      return;
                                    }
                                    ;
                                    $tco_done = true;
                                    return {
                                      nodes: ns,
                                      vim: vimNext,
                                      vip: vipNext,
                                      vop,
                                      vom: vom2,
                                      sim,
                                      sip,
                                      sop,
                                      som
                                    };
                                  }
                                  ;
                                  while (!$tco_done) {
                                    $tco_result = $tco_loop($tco_var_ns, $tco_var_vip, $tco_var_vop, $tco_var_vim, $tco_var_vom, $tco_var_ancestor$prime, $tco_var_sip, $tco_var_sop, $tco_var_sim, $tco_var_som, $copy_currentAncestor);
                                  }
                                  ;
                                  return $tco_result;
                                };
                              };
                            };
                          };
                        };
                      };
                    };
                  };
                };
              };
            };
            if (wMaybe instanceof Nothing) {
              return nodes;
            }
            ;
            if (wMaybe instanceof Just) {
              var v = unsafeGetNode(nodes)(vId);
              var parentNode3 = (function() {
                if (v.parent instanceof Just) {
                  return unsafeGetNode(nodes)(v.parent.value0);
                }
                ;
                if (v.parent instanceof Nothing) {
                  return v;
                }
                ;
                throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 308, column 22 - line 310, column 23): " + [v.parent.constructor.name]);
              })();
              var vom = fromMaybe(0)(index2(parentNode3.children)(0));
              var result = walkContours(nodes)(vId)(vId)(wMaybe.value0)(vom)(vId)(v.m)(v.m)(unsafeGetNode(nodes)(wMaybe.value0).m)(unsafeGetNode(nodes)(vom).m)(ancestor);
              var nodes2 = (function() {
                if (result.vim instanceof Just) {
                  var vopNode = unsafeGetNode(result.nodes)(result.vop);
                  var vimNode = unsafeGetNode(result.nodes)(result.vim.value0);
                  var v1 = nextRight(result.nodes)(result.vop);
                  if (v1 instanceof Nothing) {
                    var vopUpdated = {
                      a: vopNode.a,
                      c: vopNode.c,
                      children: vopNode.children,
                      i: vopNode.i,
                      node: vopNode.node,
                      nodeId: vopNode.nodeId,
                      parent: vopNode.parent,
                      s: vopNode.s,
                      z: vopNode.z,
                      t: new Just(result.vim.value0),
                      m: vopNode.m + result.sim - result.sop
                    };
                    return updateNode(result.nodes)(result.vop)(vopUpdated);
                  }
                  ;
                  if (v1 instanceof Just) {
                    return result.nodes;
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 330, column 16 - line 334, column 34): " + [v1.constructor.name]);
                }
                ;
                if (result.vim instanceof Nothing) {
                  return result.nodes;
                }
                ;
                throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 326, column 18 - line 335, column 28): " + [result.vim.constructor.name]);
              })();
              var nodes3 = (function() {
                if (result.vip instanceof Just) {
                  var vomNode$prime = unsafeGetNode(nodes2)(result.vom);
                  var v1 = nextLeft(nodes2)(result.vom);
                  if (v1 instanceof Nothing) {
                    var vomUpdated = {
                      a: vomNode$prime.a,
                      c: vomNode$prime.c,
                      children: vomNode$prime.children,
                      i: vomNode$prime.i,
                      node: vomNode$prime.node,
                      nodeId: vomNode$prime.nodeId,
                      parent: vomNode$prime.parent,
                      s: vomNode$prime.s,
                      z: vomNode$prime.z,
                      t: new Just(result.vip.value0),
                      m: vomNode$prime.m + result.sip - result.som
                    };
                    var nodes$prime = updateNode(nodes2)(result.vom)(vomUpdated);
                    var vNode = unsafeGetNode(nodes$prime)(vId);
                    var vUpdated = {
                      c: vNode.c,
                      children: vNode.children,
                      i: vNode.i,
                      m: vNode.m,
                      node: vNode.node,
                      nodeId: vNode.nodeId,
                      parent: vNode.parent,
                      s: vNode.s,
                      t: vNode.t,
                      z: vNode.z,
                      a: vId
                    };
                    return updateNode(nodes$prime)(vId)(vUpdated);
                  }
                  ;
                  if (v1 instanceof Just) {
                    return nodes2;
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 340, column 16 - line 347, column 34): " + [v1.constructor.name]);
                }
                ;
                if (result.vip instanceof Nothing) {
                  return nodes2;
                }
                ;
                throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 337, column 18 - line 348, column 28): " + [result.vip.constructor.name]);
              })();
              return nodes3;
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 303, column 3 - line 350, column 16): " + [wMaybe.constructor.name]);
          };
        };
      };
    };
  };
  var firstWalk2 = function(config) {
    return function(nodes) {
      return function(nodeId) {
        var v = unsafeGetNode(nodes)(nodeId);
        var parentNode3 = (function() {
          if (v.parent instanceof Nothing) {
            return v;
          }
          ;
          if (v.parent instanceof Just) {
            return unsafeGetNode(nodes)(v.parent.value0);
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 193, column 18 - line 195, column 42): " + [v.parent.constructor.name]);
        })();
        var siblings = (function() {
          if (v.parent instanceof Nothing) {
            return [nodeId];
          }
          ;
          if (v.parent instanceof Just) {
            return parentNode3.children;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 196, column 16 - line 198, column 36): " + [v.parent.constructor.name]);
        })();
        var w = (function() {
          var $133 = v.i > 0;
          if ($133) {
            return index2(siblings)(v.i - 1 | 0);
          }
          ;
          return Nothing.value;
        })();
        var $134 = length3(v.children) > 0;
        if ($134) {
          var nodes1 = executeShifts(nodes)(nodeId);
          var v1 = unsafeGetNode(nodes1)(nodeId);
          var lastChildId = fromMaybe(0)(index2(v.children)(length3(v.children) - 1 | 0));
          var lastChild = unsafeGetNode(nodes1)(lastChildId);
          var firstChildId = fromMaybe(0)(index2(v.children)(0));
          var firstChild = unsafeGetNode(nodes1)(firstChildId);
          var midpoint = (firstChild.z + lastChild.z) / 2;
          var nodes2 = (function() {
            if (w instanceof Just) {
              var wNode2 = unsafeGetNode(nodes1)(w.value0);
              var sep2 = config.separation(v1.node)(wNode2.node);
              var newZ2 = wNode2.z + sep2;
              var newM = newZ2 - midpoint;
              var updated2 = {
                a: v1.a,
                c: v1.c,
                children: v1.children,
                i: v1.i,
                node: v1.node,
                nodeId: v1.nodeId,
                parent: v1.parent,
                s: v1.s,
                t: v1.t,
                z: newZ2,
                m: newM
              };
              return updateNode(nodes1)(nodeId)(updated2);
            }
            ;
            if (w instanceof Nothing) {
              var updated2 = {
                a: v1.a,
                c: v1.c,
                children: v1.children,
                i: v1.i,
                m: v1.m,
                node: v1.node,
                nodeId: v1.nodeId,
                parent: v1.parent,
                s: v1.s,
                t: v1.t,
                z: midpoint
              };
              return updateNode(nodes1)(nodeId)(updated2);
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 217, column 18 - line 227, column 48): " + [w.constructor.name]);
          })();
          var ancestor = fromMaybe(nodeId)(index2(siblings)(0));
          var nodes3 = apportion(config)(nodes2)(nodeId)(w)(ancestor);
          var v3 = unsafeGetNode(nodes3)(nodeId);
          var nodes4 = (function() {
            if (v3.parent instanceof Just) {
              var pNode = unsafeGetNode(nodes3)(v3.parent.value0);
              var pUpdated = {
                c: pNode.c,
                children: pNode.children,
                i: pNode.i,
                m: pNode.m,
                node: pNode.node,
                nodeId: pNode.nodeId,
                parent: pNode.parent,
                s: pNode.s,
                t: pNode.t,
                z: pNode.z,
                a: v3.a
              };
              return updateNode(nodes3)(v3.parent.value0)(pUpdated);
            }
            ;
            if (v3.parent instanceof Nothing) {
              return nodes3;
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 235, column 18 - line 240, column 28): " + [v3.parent.constructor.name]);
          })();
          return nodes4;
        }
        ;
        if (w instanceof Just) {
          var wNode = unsafeGetNode(nodes)(w.value0);
          var sep = config.separation(v.node)(wNode.node);
          var newZ = wNode.z + sep;
          var updated = {
            a: v.a,
            c: v.c,
            children: v.children,
            i: v.i,
            m: v.m,
            node: v.node,
            nodeId: v.nodeId,
            parent: v.parent,
            s: v.s,
            t: v.t,
            z: newZ
          };
          var nodes1 = updateNode(nodes)(nodeId)(updated);
          var ancestor = fromMaybe(nodeId)(index2(siblings)(0));
          var nodes2 = apportion(config)(nodes1)(nodeId)(w)(ancestor);
          var v2 = unsafeGetNode(nodes2)(nodeId);
          var nodes3 = (function() {
            if (v2.parent instanceof Just) {
              var pNode = unsafeGetNode(nodes2)(v2.parent.value0);
              var pUpdated = {
                c: pNode.c,
                children: pNode.children,
                i: pNode.i,
                m: pNode.m,
                node: pNode.node,
                nodeId: pNode.nodeId,
                parent: pNode.parent,
                s: pNode.s,
                t: pNode.t,
                z: pNode.z,
                a: v2.a
              };
              return updateNode(nodes2)(v2.parent.value0)(pUpdated);
            }
            ;
            if (v2.parent instanceof Nothing) {
              return nodes2;
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 259, column 24 - line 264, column 34): " + [v2.parent.constructor.name]);
          })();
          return nodes3;
        }
        ;
        if (w instanceof Nothing) {
          var ancestor = fromMaybe(nodeId)(index2(siblings)(0));
          var nodes1 = apportion(config)(nodes)(nodeId)(Nothing.value)(ancestor);
          var v1 = unsafeGetNode(nodes1)(nodeId);
          var nodes2 = (function() {
            if (v1.parent instanceof Just) {
              var pNode = unsafeGetNode(nodes1)(v1.parent.value0);
              var pUpdated = {
                c: pNode.c,
                children: pNode.children,
                i: pNode.i,
                m: pNode.m,
                node: pNode.node,
                nodeId: pNode.nodeId,
                parent: pNode.parent,
                s: pNode.s,
                t: pNode.t,
                z: pNode.z,
                a: v1.a
              };
              return updateNode(nodes1)(v1.parent.value0)(pUpdated);
            }
            ;
            if (v1.parent instanceof Nothing) {
              return nodes1;
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 271, column 24 - line 276, column 34): " + [v1.parent.constructor.name]);
          })();
          return nodes2;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Tree (line 245, column 7 - line 277, column 20): " + [w.constructor.name]);
      };
    };
  };
  var firstWalkAll = function(config) {
    return function(nodes) {
      return function(rootId) {
        return eachAfter(nodes)(rootId)(function(ns) {
          return function(nid) {
            return firstWalk2(config)(ns)(nid);
          };
        });
      };
    };
  };
  var tree3 = function(config) {
    return function(root3) {
      var treeRoot = hierarchyToTreeNode(root3);
      var v = buildInternalTree(treeRoot);
      var afterFirstWalk = firstWalkAll(config)(v.nodes)(v.root);
      var finalNodes = secondWalkAll(config)(afterFirstWalk)(v.root);
      var resultTree = extractTreeNode(finalNodes)(v.root);
      var scaledTree = scaleToFit(config)(resultTree);
      return scaledTree;
    };
  };

  // output/D3.Viz.AnimatedTreeCluster/index.js
  var map54 = /* @__PURE__ */ map(functorArray);
  var compare5 = /* @__PURE__ */ compare(ordInt);
  var compare12 = /* @__PURE__ */ compare(ordNumber);
  var bind18 = /* @__PURE__ */ bind(bindArray);
  var append19 = /* @__PURE__ */ append(semigroupArray);
  var discard14 = /* @__PURE__ */ discard(discardUnit);
  var fill4 = /* @__PURE__ */ fill(toAttrString);
  var strokeColor5 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth4 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var fillOpacity2 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var d4 = /* @__PURE__ */ d(toAttrStringFn);
  var show21 = /* @__PURE__ */ show(showNumber);
  var identity19 = /* @__PURE__ */ identity(categoryFn);
  var show110 = /* @__PURE__ */ show(showInt);
  var classed6 = /* @__PURE__ */ classed(toAttrString);
  var x7 = /* @__PURE__ */ x(toAttrNumber);
  var y6 = /* @__PURE__ */ y(toAttrNumber);
  var fontSize2 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text8 = /* @__PURE__ */ text6(toAttrString);
  var radius4 = /* @__PURE__ */ radius(toAttrNumberFn);
  var TreeLayout2 = /* @__PURE__ */ (function() {
    function TreeLayout3() {
    }
    ;
    TreeLayout3.value = new TreeLayout3();
    return TreeLayout3;
  })();
  var ClusterLayout2 = /* @__PURE__ */ (function() {
    function ClusterLayout3() {
    }
    ;
    ClusterLayout3.value = new ClusterLayout3();
    return ClusterLayout3;
  })();
  var showLayoutType = {
    show: function(v) {
      if (v instanceof TreeLayout2) {
        return "Tree";
      }
      ;
      if (v instanceof ClusterLayout2) {
        return "Cluster";
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.AnimatedTreeCluster (line 36, column 1 - line 38, column 33): " + [v.constructor.name]);
    }
  };
  var show22 = /* @__PURE__ */ show(showLayoutType);
  var valuedToHierarchy = function(v) {
    return new HNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      parent: Nothing.value,
      children: map54(valuedToHierarchy)(v.value0.children)
    });
  };
  var toggleLayout2 = function(v) {
    if (v instanceof TreeLayout2) {
      return ClusterLayout2.value;
    }
    ;
    if (v instanceof ClusterLayout2) {
      return TreeLayout2.value;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.AnimatedTreeCluster (line 41, column 1 - line 41, column 41): " + [v.constructor.name]);
  };
  var sortValuedByHeightAndValue = function(v) {
    var comparator = function(v1) {
      return function(v2) {
        var v3 = compare5(v2.value0.height)(v1.value0.height);
        if (v3 instanceof EQ) {
          return compare12(v2.value0.value)(v1.value0.value);
        }
        ;
        return v3;
      };
    };
    var $95 = length3(v.value0.children) === 0;
    if ($95) {
      return new VNode(v.value0);
    }
    ;
    var sortedGrandchildren = map54(sortValuedByHeightAndValue)(v.value0.children);
    var sortedChildren = sortBy(comparator)(sortedGrandchildren);
    return new VNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      parent: v.value0.parent,
      value: v.value0.value,
      children: sortedChildren
    });
  };
  var nodeKey2 = function(d1) {
    return getName(d1.data_);
  };
  var makeLinks2 = function(getChildren$prime) {
    return function(getData$prime) {
      return function(root3) {
        var go2 = function(parent2) {
          return bind18(getChildren$prime(parent2))(function(child) {
            var parentData = getData$prime(parent2);
            var childData = getData$prime(child);
            return append19([{
              source: parentData,
              target: childData
            }])(go2(child));
          });
        };
        return go2(root3);
      };
    };
  };
  var linkKey2 = function(d1) {
    return getName(d1.source.data_) + (" -> " + getName(d1.target.data_));
  };
  var updateVisualization = function(dictBind) {
    var bind121 = bind(dictBind);
    var discard115 = discard14(dictBind);
    return function(dictMonadEffect) {
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var updateJoin5 = updateJoin(dictSelectionM);
        var mergeSelections3 = mergeSelections(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(nodesData) {
          return function(linksData) {
            return function(linksSelection) {
              return function(nodesSelection) {
                return bind121(updateJoin5(linksSelection)(Path2.value)(linksData)(linkKey2))(function(linksJoin) {
                  return bind121(mergeSelections3(linksJoin.enter)(linksJoin.update))(function(linksAll) {
                    return discard115(setAttributes5(linksAll)([fill4("none"), strokeColor5("#555"), strokeWidth4(1.5), fillOpacity2(0.4)]))(function() {
                      var linkPathFn = function(datum2) {
                        return verticalLinkPath2(datum2.source.x)(datum2.source.y)(datum2.target.x)(datum2.target.y);
                      };
                      return discard115(setAttributes5(linksAll)(to(transitionWithDuration(750))([d4(linkPathFn)])))(function() {
                        return bind121(updateJoin5(nodesSelection)(Group.value)(nodesData)(nodeKey2))(function(nodesJoin) {
                          return bind121(mergeSelections3(nodesJoin.enter)(nodesJoin.update))(function(nodeGroupsAll) {
                            var translateFn = function(d1) {
                              return "translate(" + (show21(d1.x) + ("," + (show21(d1.y) + ")")));
                            };
                            return discard115(setAttributes5(nodeGroupsAll)(to(transitionWithDuration(750))([transform([function(d1) {
                              return translateFn(d1);
                            }])])))(function() {
                              return pure56(unit);
                            });
                          });
                        });
                      });
                    });
                  });
                });
              };
            };
          };
        };
      };
    };
  };
  var getAllTreeNodes = function(v) {
    var $104 = length3(v.children) === 0;
    if ($104) {
      return [v];
    }
    ;
    return append19([v])(bind18(v.children)(getAllTreeNodes));
  };
  var getAllClusterNodes = function(v) {
    var $106 = length3(v.children) === 0;
    if ($106) {
      return [v];
    }
    ;
    return append19([v])(bind18(v.children)(getAllClusterNodes));
  };
  var updateLayout = function(dictBind) {
    var discard115 = discard14(dictBind);
    var updateVisualization1 = updateVisualization(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var updateVisualization2 = updateVisualization1(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var updateVisualization3 = updateVisualization2(dictSelectionM);
        return function(currentLayout) {
          return function(hierarchyRoot) {
            return function(linksGroup) {
              return function(nodesGroup) {
                var newLayout = toggleLayout2(currentLayout);
                return discard115(liftEffect53(log2("AnimatedTreeCluster: Transitioning from " + (show22(currentLayout) + (" to " + show22(newLayout))))))(function() {
                  return discard115((function() {
                    if (newLayout instanceof TreeLayout2) {
                      var config = {
                        nodeSize: defaultTreeConfig2.nodeSize,
                        separation: defaultTreeConfig2.separation,
                        size: {
                          width: 1600,
                          height: 1200
                        }
                      };
                      var treeLayout = tree3(config)(hierarchyRoot);
                      var nodes = getAllTreeNodes(treeLayout);
                      var links = makeLinks2(function(v) {
                        return v.children;
                      })(identity19)(treeLayout);
                      return updateVisualization3(nodes)(links)(linksGroup)(nodesGroup);
                    }
                    ;
                    if (newLayout instanceof ClusterLayout2) {
                      var valued = sum4(hierarchyRoot)(getValue);
                      var sortedValued = sortValuedByHeightAndValue(valued);
                      var sorted = valuedToHierarchy(sortedValued);
                      var config = {
                        nodeSize: defaultClusterConfig2.nodeSize,
                        separation: defaultClusterConfig2.separation,
                        size: {
                          width: 1600,
                          height: 1200
                        }
                      };
                      var clusterLayout = cluster2(config)(sorted);
                      var nodes = getAllClusterNodes(clusterLayout);
                      var links = makeLinks2(function(v) {
                        return v.children;
                      })(identity19)(clusterLayout);
                      return updateVisualization3(nodes)(links)(linksGroup)(nodesGroup);
                    }
                    ;
                    throw new Error("Failed pattern match at D3.Viz.AnimatedTreeCluster (line 223, column 3 - line 249, column 68): " + [newLayout.constructor.name]);
                  })())(function() {
                    return pure56(newLayout);
                  });
                });
              };
            };
          };
        };
      };
    };
  };
  var draw2 = function(dictBind) {
    var discard115 = discard14(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return discard115(liftEffect53(log2("AnimatedTreeCluster: Initial draw (Tree layout)")))(function() {
              var hierarchyRoot = hierarchy(flareData)(getChildren);
              var config = {
                nodeSize: defaultTreeConfig2.nodeSize,
                separation: defaultTreeConfig2.separation,
                size: {
                  width: 1600,
                  height: 1200
                }
              };
              var treeLayout = tree3(config)(hierarchyRoot);
              var nodesData = getAllTreeNodes(treeLayout);
              var linksData = makeLinks2(function(v) {
                return v.children;
              })(identity19)(treeLayout);
              return discard115(liftEffect53(log2("Initial: " + (show110(length3(nodesData)) + (" nodes, " + (show110(length3(linksData)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed6("animated-tree-cluster")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x7(10), y6(20), fill4("#333"), fontSize2(16), text8("Tree Layout (Reingold-Tilford)"), classed6("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed6("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed6("nodes")]))(function(nodesGroup) {
                          return bind121(simpleJoin4(linksGroup)(Path2.value)(linksData)(linkKey2))(function(linkSelection) {
                            return discard115(setAttributes5(linkSelection)([d4(function(v) {
                              return verticalLinkPath2(v.source.x)(v.source.y)(v.target.x)(v.target.y);
                            }), fill4("none"), strokeColor5("#555"), strokeWidth4(1.5), fillOpacity2(0.4)]))(function() {
                              return bind121(simpleJoin4(nodesGroup)(Group.value)(nodesData)(nodeKey2))(function(nodeGroupsSelection) {
                                var translateFn = function(d1) {
                                  return "translate(" + (show21(d1.x) + ("," + (show21(d1.y) + ")")));
                                };
                                return discard115(setAttributes5(nodeGroupsSelection)([transform([function(d1) {
                                  return translateFn(d1);
                                }])]))(function() {
                                  return bind121(appendTo6(nodeGroupsSelection)(Circle.value)([radius4(function(v) {
                                    var $116 = length3(v.children) === 0;
                                    if ($116) {
                                      return 3;
                                    }
                                    ;
                                    return 4;
                                  }), fill4("#999"), strokeColor5("#555"), strokeWidth4(1.5)]))(function() {
                                    return pure56({
                                      hierarchyRoot,
                                      links: linkSelection,
                                      nodes: nodeGroupsSelection
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/PSD3.Internal.Axes/foreign.js
  function axisBottom_(scale) {
    return axisBottom(scale);
  }
  function axisLeft_(scale) {
    return axisLeft(scale);
  }
  function callAxis_(selection2) {
    return (axis2) => () => {
      selection2.call(axis2);
    };
  }

  // output/PSD3.Internal.Scales.Linear/foreign.js
  function createLinearScale_(config) {
    return () => {
      return linear2().domain(config.domain).range(config.range);
    };
  }
  function applyScale_(scale) {
    return (value18) => scale(value18);
  }

  // output/PSD3.Shared.ChartDimensions/index.js
  var innerWidth2 = function(dims) {
    return dims.width - dims.margin.left - dims.margin.right;
  };
  var innerHeight2 = function(dims) {
    return dims.height - dims.margin.top - dims.margin.bottom;
  };
  var defaultDimensions = {
    width: 800,
    height: 400,
    margin: {
      top: 20,
      right: 30,
      bottom: 30,
      left: 40
    }
  };

  // output/D3.Viz.BarChart/index.js
  var map55 = /* @__PURE__ */ map(functorArray);
  var minimum4 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum5 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var classed7 = /* @__PURE__ */ classed(toAttrString);
  var width10 = /* @__PURE__ */ width8(toAttrNumber);
  var height10 = /* @__PURE__ */ height8(toAttrNumber);
  var show23 = /* @__PURE__ */ show(showNumber);
  var x8 = /* @__PURE__ */ x(toAttrNumber);
  var y7 = /* @__PURE__ */ y(toAttrNumber);
  var fill5 = /* @__PURE__ */ fill(toAttrString);
  var strokeColor6 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth5 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var draw3 = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure56 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(dataPoints) {
          return function(selector) {
            var iWidth = innerWidth2(defaultDimensions);
            var iHeight = innerHeight2(defaultDimensions);
            var xValues = map55(function(v) {
              return v.x;
            })(dataPoints);
            var yValues = map55(function(v) {
              return v.y;
            })(dataPoints);
            var minX = fromMaybe(0)(minimum4(xValues));
            var maxX = fromMaybe(100)(maximum5(xValues));
            var maxY = fromMaybe(100)(maximum5(yValues));
            return bind92(attach6(selector))(function(v) {
              return bind92(appendTo6(v)(Svg.value)([viewBox(0)(0)(defaultDimensions.width)(defaultDimensions.height), classed7("bar-chart"), width10(defaultDimensions.width), height10(defaultDimensions.height)]))(function(svg2) {
                var numBars = length3(dataPoints);
                var barWidth = (function() {
                  var $39 = numBars > 0;
                  if ($39) {
                    return iWidth / toNumber(numBars) * 0.8;
                  }
                  ;
                  return 0;
                })();
                return bind92(appendTo6(svg2)(Group.value)([transform([function(v1) {
                  return "translate(" + (show23(defaultDimensions.margin.left) + ("," + (show23(defaultDimensions.margin.top) + ")")));
                }])]))(function(chartGroup) {
                  return bind92(liftEffect53(createLinearScale_({
                    domain: [minX, maxX],
                    range: [0, iWidth]
                  })))(function(xScale) {
                    return bind92(liftEffect53(createLinearScale_({
                      domain: [0, maxY],
                      range: [iHeight, 0]
                    })))(function(yScale) {
                      return bind92(appendTo6(chartGroup)(Group.value)([classed7("x-axis"), transform([function(v1) {
                        return "translate(0," + (show23(iHeight) + ")");
                      }])]))(function(xAxisGroup) {
                        return bind92(appendTo6(chartGroup)(Group.value)([classed7("y-axis"), transform([function(v1) {
                          return "translate(" + (show23(barWidth / 2 * -1 - 5) + ",0)");
                        }])]))(function(yAxisGroup) {
                          return bind92(liftEffect53(callAxis_(xAxisGroup)(axisBottom_(xScale))))(function() {
                            return bind92(liftEffect53(callAxis_(yAxisGroup)(axisLeft_(yScale))))(function() {
                              var addBar = function(point) {
                                var xPos = applyScale_(xScale)(point.x) - barWidth / 2;
                                var yPos = applyScale_(yScale)(point.y);
                                var barHeight = iHeight - yPos;
                                return bind92(appendTo6(chartGroup)(Rect.value)([x8(xPos), y7(yPos), width10(barWidth), height10(barHeight), fill5("#4a90e2"), strokeColor6("#357abd"), strokeWidth5(1), classed7("bar")]))(function() {
                                  return pure56(unit);
                                });
                              };
                              return bind92(traverse_16(addBar)(dataPoints))(function() {
                                return pure56(unit);
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.Charts.Model/index.js
  var sineWaveData = [{
    x: 0,
    y: 100
  }, {
    x: 5,
    y: 125
  }, {
    x: 10,
    y: 145
  }, {
    x: 15,
    y: 150
  }, {
    x: 20,
    y: 145
  }, {
    x: 25,
    y: 125
  }, {
    x: 30,
    y: 100
  }, {
    x: 35,
    y: 75
  }, {
    x: 40,
    y: 55
  }, {
    x: 45,
    y: 50
  }, {
    x: 50,
    y: 55
  }, {
    x: 55,
    y: 75
  }, {
    x: 60,
    y: 100
  }];
  var multiLineData = [{
    series: "San Francisco",
    date: "2000-01",
    value: 3.5
  }, {
    series: "San Francisco",
    date: "2002-01",
    value: 5.2
  }, {
    series: "San Francisco",
    date: "2004-01",
    value: 4.8
  }, {
    series: "San Francisco",
    date: "2006-01",
    value: 3.9
  }, {
    series: "San Francisco",
    date: "2008-01",
    value: 4.2
  }, {
    series: "San Francisco",
    date: "2010-01",
    value: 9.8
  }, {
    series: "San Francisco",
    date: "2012-01",
    value: 7.5
  }, {
    series: "San Francisco",
    date: "2013-01",
    value: 6.2
  }, {
    series: "New York",
    date: "2000-01",
    value: 5.3
  }, {
    series: "New York",
    date: "2002-01",
    value: 7.1
  }, {
    series: "New York",
    date: "2004-01",
    value: 6.2
  }, {
    series: "New York",
    date: "2006-01",
    value: 4.9
  }, {
    series: "New York",
    date: "2008-01",
    value: 5.4
  }, {
    series: "New York",
    date: "2010-01",
    value: 9.4
  }, {
    series: "New York",
    date: "2012-01",
    value: 8.8
  }, {
    series: "New York",
    date: "2013-01",
    value: 8.2
  }, {
    series: "Detroit",
    date: "2000-01",
    value: 4.2
  }, {
    series: "Detroit",
    date: "2002-01",
    value: 6.8
  }, {
    series: "Detroit",
    date: "2004-01",
    value: 7.5
  }, {
    series: "Detroit",
    date: "2006-01",
    value: 7.2
  }, {
    series: "Detroit",
    date: "2008-01",
    value: 7.9
  }, {
    series: "Detroit",
    date: "2010-01",
    value: 14.3
  }, {
    series: "Detroit",
    date: "2012-01",
    value: 11.1
  }, {
    series: "Detroit",
    date: "2013-01",
    value: 9.9
  }, {
    series: "Miami",
    date: "2000-01",
    value: 5.7
  }, {
    series: "Miami",
    date: "2002-01",
    value: 7.3
  }, {
    series: "Miami",
    date: "2004-01",
    value: 5.9
  }, {
    series: "Miami",
    date: "2006-01",
    value: 4.1
  }, {
    series: "Miami",
    date: "2008-01",
    value: 6.2
  }, {
    series: "Miami",
    date: "2010-01",
    value: 11.8
  }, {
    series: "Miami",
    date: "2012-01",
    value: 9.6
  }, {
    series: "Miami",
    date: "2013-01",
    value: 8.1
  }];
  var monthlySales = [{
    x: 0,
    y: 30
  }, {
    x: 1,
    y: 45
  }, {
    x: 2,
    y: 60
  }, {
    x: 3,
    y: 55
  }, {
    x: 4,
    y: 70
  }, {
    x: 5,
    y: 65
  }, {
    x: 6,
    y: 80
  }, {
    x: 7,
    y: 75
  }, {
    x: 8,
    y: 90
  }, {
    x: 9,
    y: 85
  }, {
    x: 10,
    y: 95
  }, {
    x: 11,
    y: 100
  }];
  var groupedBarData = [{
    state: "CA",
    age: "<10",
    population: 5038433
  }, {
    state: "CA",
    age: "10-19",
    population: 5055706
  }, {
    state: "CA",
    age: "20-29",
    population: 5656118
  }, {
    state: "CA",
    age: "30-39",
    population: 5485729
  }, {
    state: "CA",
    age: "40-49",
    population: 4897920
  }, {
    state: "CA",
    age: "50-59",
    population: 4826838
  }, {
    state: "CA",
    age: "60-69",
    population: 3561336
  }, {
    state: "CA",
    age: "70-79",
    population: 2087132
  }, {
    state: "CA",
    age: "\u226580",
    population: 1322344
  }, {
    state: "TX",
    age: "<10",
    population: 4131018
  }, {
    state: "TX",
    age: "10-19",
    population: 3870247
  }, {
    state: "TX",
    age: "20-29",
    population: 4057645
  }, {
    state: "TX",
    age: "30-39",
    population: 4038722
  }, {
    state: "TX",
    age: "40-49",
    population: 3605075
  }, {
    state: "TX",
    age: "50-59",
    population: 3439143
  }, {
    state: "TX",
    age: "60-69",
    population: 2454512
  }, {
    state: "TX",
    age: "70-79",
    population: 1390737
  }, {
    state: "TX",
    age: "\u226580",
    population: 883990
  }, {
    state: "FL",
    age: "<10",
    population: 2223676
  }, {
    state: "FL",
    age: "10-19",
    population: 2264020
  }, {
    state: "FL",
    age: "20-29",
    population: 2655856
  }, {
    state: "FL",
    age: "30-39",
    population: 2673043
  }, {
    state: "FL",
    age: "40-49",
    population: 2677768
  }, {
    state: "FL",
    age: "50-59",
    population: 2891117
  }, {
    state: "FL",
    age: "60-69",
    population: 2721540
  }, {
    state: "FL",
    age: "70-79",
    population: 1787456
  }, {
    state: "FL",
    age: "\u226580",
    population: 1215746
  }, {
    state: "NY",
    age: "<10",
    population: 2302097
  }, {
    state: "NY",
    age: "10-19",
    population: 2427916
  }, {
    state: "NY",
    age: "20-29",
    population: 2886270
  }, {
    state: "NY",
    age: "30-39",
    population: 2820345
  }, {
    state: "NY",
    age: "40-49",
    population: 2502932
  }, {
    state: "NY",
    age: "50-59",
    population: 2671684
  }, {
    state: "NY",
    age: "60-69",
    population: 2015910
  }, {
    state: "NY",
    age: "70-79",
    population: 1163431
  }, {
    state: "NY",
    age: "\u226580",
    population: 805237
  }, {
    state: "PA",
    age: "<10",
    population: 1431845
  }, {
    state: "PA",
    age: "10-19",
    population: 1538087
  }, {
    state: "PA",
    age: "20-29",
    population: 1729085
  }, {
    state: "PA",
    age: "30-39",
    population: 1582018
  }, {
    state: "PA",
    age: "40-49",
    population: 1609509
  }, {
    state: "PA",
    age: "50-59",
    population: 1808373
  }, {
    state: "PA",
    age: "60-69",
    population: 1565529
  }, {
    state: "PA",
    age: "70-79",
    population: 993225
  }, {
    state: "PA",
    age: "\u226580",
    population: 702076
  }, {
    state: "IL",
    age: "<10",
    population: 1575308
  }, {
    state: "IL",
    age: "10-19",
    population: 1724580
  }, {
    state: "IL",
    age: "20-29",
    population: 1880143
  }, {
    state: "IL",
    age: "30-39",
    population: 1750121
  }, {
    state: "IL",
    age: "40-49",
    population: 1587652
  }, {
    state: "IL",
    age: "50-59",
    population: 1724730
  }, {
    state: "IL",
    age: "60-69",
    population: 1308208
  }, {
    state: "IL",
    age: "70-79",
    population: 760186
  }, {
    state: "IL",
    age: "\u226580",
    population: 505635
  }];
  var anscombesQuartet = {
    dataset1: [{
      x: 10,
      y: 8.04
    }, {
      x: 8,
      y: 6.95
    }, {
      x: 13,
      y: 7.58
    }, {
      x: 9,
      y: 8.81
    }, {
      x: 11,
      y: 8.33
    }, {
      x: 14,
      y: 9.96
    }, {
      x: 6,
      y: 7.24
    }, {
      x: 4,
      y: 4.26
    }, {
      x: 12,
      y: 10.84
    }, {
      x: 7,
      y: 4.82
    }, {
      x: 5,
      y: 5.68
    }],
    dataset2: [{
      x: 10,
      y: 9.14
    }, {
      x: 8,
      y: 8.14
    }, {
      x: 13,
      y: 8.74
    }, {
      x: 9,
      y: 8.77
    }, {
      x: 11,
      y: 9.26
    }, {
      x: 14,
      y: 8.1
    }, {
      x: 6,
      y: 6.13
    }, {
      x: 4,
      y: 3.1
    }, {
      x: 12,
      y: 9.13
    }, {
      x: 7,
      y: 7.26
    }, {
      x: 5,
      y: 4.74
    }],
    dataset3: [{
      x: 10,
      y: 7.46
    }, {
      x: 8,
      y: 6.77
    }, {
      x: 13,
      y: 12.74
    }, {
      x: 9,
      y: 7.11
    }, {
      x: 11,
      y: 7.81
    }, {
      x: 14,
      y: 8.84
    }, {
      x: 6,
      y: 6.08
    }, {
      x: 4,
      y: 5.39
    }, {
      x: 12,
      y: 8.15
    }, {
      x: 7,
      y: 6.42
    }, {
      x: 5,
      y: 5.73
    }],
    dataset4: [{
      x: 8,
      y: 6.58
    }, {
      x: 8,
      y: 5.76
    }, {
      x: 8,
      y: 7.71
    }, {
      x: 8,
      y: 8.84
    }, {
      x: 8,
      y: 8.47
    }, {
      x: 8,
      y: 7.04
    }, {
      x: 8,
      y: 5.25
    }, {
      x: 19,
      y: 12.5
    }, {
      x: 8,
      y: 5.56
    }, {
      x: 8,
      y: 7.91
    }, {
      x: 8,
      y: 6.89
    }]
  };

  // output/D3.Viz.ChordDiagram/index.js
  var classed8 = /* @__PURE__ */ classed(toAttrString);
  var width11 = /* @__PURE__ */ width8(toAttrNumber);
  var height11 = /* @__PURE__ */ height8(toAttrNumber);
  var show24 = /* @__PURE__ */ show(showNumber);
  var d5 = /* @__PURE__ */ d(toAttrString);
  var fill6 = /* @__PURE__ */ fill(toAttrString);
  var fillOpacity3 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeColor7 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth6 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var getSourceIndex = function(d1) {
    return d1.source.index;
  };
  var exampleMatrix = [[0, 5, 3, 2, 1], [5, 0, 4, 1, 2], [3, 4, 0, 3, 4], [2, 1, 3, 0, 5], [1, 2, 4, 5, 0]];
  var exampleLabels = ["Data Structures", "Algorithms", "Patterns", "Testing", "Architecture"];
  var colors = ["#e74c3c", "#3498db", "#2ecc71", "#f39c12", "#9b59b6"];
  var draw4 = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadEffect) {
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure56 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        return function(matrix) {
          return function(v) {
            return function(selector) {
              var dims = {
                width: 800,
                height: 800
              };
              var centerX = dims.width / 2;
              var centerY = dims.height / 2;
              return bind92(attach6(selector))(function(v1) {
                return bind92(appendTo6(v1)(Svg.value)([viewBox(0)(0)(dims.width)(dims.height), classed8("chord-diagram"), width11(dims.width), height11(dims.height)]))(function(svg2) {
                  return bind92(appendTo6(svg2)(Group.value)([transform([function(v2) {
                    return "translate(" + (show24(centerX) + ("," + (show24(centerY) + ")")));
                  }]), classed8("chord-group")]))(function(centerGroup) {
                    var chordData = chordLayout_(matrix);
                    var groups = chordGroups_(chordData);
                    var chords = chordArray_(chordData);
                    var ribbonGen0 = ribbonGenerator_(unit);
                    var ribbonGen = setRibbonRadius_(ribbonGen0)(290);
                    var arcGen0 = arcGenerator_(unit);
                    var arcGen1 = setArcInnerRadius_(arcGen0)(290);
                    var arcGen = setArcOuterRadius_(arcGen1)(300);
                    return bind92(appendTo6(centerGroup)(Group.value)([classed8("ribbons")]))(function(ribbonsGroup) {
                      var drawRibbon = function(chord) {
                        var sourceIdx = getSourceIndex(chord);
                        var color2 = (function() {
                          var v2 = index2(colors)(sourceIdx);
                          if (v2 instanceof Just) {
                            return v2.value0;
                          }
                          ;
                          if (v2 instanceof Nothing) {
                            return "#999999";
                          }
                          ;
                          throw new Error("Failed pattern match at D3.Viz.ChordDiagram (line 102, column 21 - line 104, column 43): " + [v2.constructor.name]);
                        })();
                        var pathData = ribbonPath_(ribbonGen)(chord);
                        return bind92(appendTo6(ribbonsGroup)(Path2.value)([d5(pathData), fill6(color2), fillOpacity3(0.67), strokeColor7("#000000"), strokeWidth6(0.5), classed8("ribbon")]))(function() {
                          return pure56(unit);
                        });
                      };
                      return bind92(traverse_16(drawRibbon)(chords))(function() {
                        return bind92(appendTo6(centerGroup)(Group.value)([classed8("arcs")]))(function(arcsGroup) {
                          return bind92(simpleJoin4(arcsGroup)(Group.value)(groups)(keyIsID_))(function(groupsJoin) {
                            var drawArc = function(idx) {
                              return function(group4) {
                                var color2 = (function() {
                                  var v2 = index2(colors)(idx);
                                  if (v2 instanceof Just) {
                                    return v2.value0;
                                  }
                                  ;
                                  if (v2 instanceof Nothing) {
                                    return "#999999";
                                  }
                                  ;
                                  throw new Error("Failed pattern match at D3.Viz.ChordDiagram (line 125, column 21 - line 127, column 43): " + [v2.constructor.name]);
                                })();
                                var pathData = arcPath_(arcGen)(group4);
                                return bind92(appendTo6(groupsJoin)(Path2.value)([d5(pathData), fill6(color2), strokeColor7("#ffffff"), strokeWidth6(2), classed8("arc")]))(function() {
                                  return pure56(unit);
                                });
                              };
                            };
                            return bind92(traverse_16(function(idx) {
                              var v2 = index2(groups)(idx);
                              if (v2 instanceof Just) {
                                return drawArc(idx)(v2.value0);
                              }
                              ;
                              if (v2 instanceof Nothing) {
                                return pure56(unit);
                              }
                              ;
                              throw new Error("Failed pattern match at D3.Viz.ChordDiagram (line 138, column 27 - line 140, column 48): " + [v2.constructor.name]);
                            })(range2(0)(length3(groups) - 1 | 0)))(function() {
                              return pure56(unit);
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            };
          };
        };
      };
    };
  };

  // output/D3.Viz.ClusterViz/index.js
  var map56 = /* @__PURE__ */ map(functorArray);
  var compare6 = /* @__PURE__ */ compare(ordInt);
  var compare13 = /* @__PURE__ */ compare(ordNumber);
  var show25 = /* @__PURE__ */ show(showInt);
  var discard15 = /* @__PURE__ */ discard(discardUnit);
  var show111 = /* @__PURE__ */ show(showNumber);
  var traverse_7 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var pure21 = /* @__PURE__ */ pure(applicativeEffect);
  var foldl18 = /* @__PURE__ */ foldl(foldableArray);
  var max11 = /* @__PURE__ */ max(ordInt);
  var append110 = /* @__PURE__ */ append(semigroupArray);
  var bind19 = /* @__PURE__ */ bind(bindArray);
  var sum5 = /* @__PURE__ */ sum(foldableArray)(semiringInt);
  var classed9 = /* @__PURE__ */ classed(toAttrString);
  var x9 = /* @__PURE__ */ x(toAttrNumber);
  var y8 = /* @__PURE__ */ y(toAttrNumber);
  var fill7 = /* @__PURE__ */ fill(toAttrString);
  var fontSize3 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text9 = /* @__PURE__ */ text6(toAttrString);
  var d6 = /* @__PURE__ */ d(toAttrString);
  var strokeColor8 = /* @__PURE__ */ strokeColor(toAttrString);
  var fillOpacity4 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeWidth7 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx3 = /* @__PURE__ */ cx(toAttrNumber);
  var cy3 = /* @__PURE__ */ cy(toAttrNumber);
  var radius5 = /* @__PURE__ */ radius(toAttrNumber);
  var valuedToHierarchy2 = function(v) {
    return new HNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      parent: Nothing.value,
      children: map56(valuedToHierarchy2)(v.value0.children)
    });
  };
  var sortValuedByHeightAndValue2 = function(v) {
    var comparator = function(v1) {
      return function(v2) {
        var v3 = compare6(v2.value0.height)(v1.value0.height);
        if (v3 instanceof EQ) {
          return compare13(v2.value0.value)(v1.value0.value);
        }
        ;
        return v3;
      };
    };
    var $76 = length3(v.value0.children) === 0;
    if ($76) {
      return new VNode(v.value0);
    }
    ;
    var sortedGrandchildren = map56(sortValuedByHeightAndValue2)(v.value0.children);
    var sortedChildren = sortBy(comparator)(sortedGrandchildren);
    return new VNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      parent: v.value0.parent,
      value: v.value0.value,
      children: sortedChildren
    });
  };
  var printClusterStructure = function(currentDepth) {
    return function(maxDepth2) {
      return function(indent) {
        return function(v) {
          var $82 = currentDepth <= maxDepth2;
          if ($82) {
            var nodeType = (function() {
              var $83 = length3(v.children) === 0;
              if ($83) {
                return "leaf";
              }
              ;
              return "internal(" + (show25(length3(v.children)) + " children)");
            })();
            var nodeName3 = getName(v.data_);
            return function __do5() {
              log2(indent + (nodeName3 + (" [" + (nodeType + ("]: x=" + (show111(v.x) + (", y=" + (show111(v.y) + (", depth=" + show25(v.depth))))))))))();
              var $84 = currentDepth < maxDepth2;
              if ($84) {
                return traverse_7(printClusterStructure(currentDepth + 1 | 0)(maxDepth2)(indent + "  "))(v.children)();
              }
              ;
              return unit;
            };
          }
          ;
          return pure21(unit);
        };
      };
    };
  };
  var getMaxHeight = function(v) {
    var $86 = length3(v.children) === 0;
    if ($86) {
      return 0;
    }
    ;
    return 1 + foldl18(max11)(0)(map56(getMaxHeight)(v.children)) | 0;
  };
  var getAllNodes = function(v) {
    var $88 = length3(v.children) === 0;
    if ($88) {
      return [v];
    }
    ;
    return append110([v])(bind19(v.children)(getAllNodes));
  };
  var countNodes = function(v) {
    return 1 + sum5(map56(countNodes)(v.children)) | 0;
  };
  var draw5 = function(dictBind) {
    var bind121 = bind(dictBind);
    var discard216 = discard15(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      var pure121 = pure(Applicative0);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return bind121(liftEffect53(log2("Loaded JSON - root name: " + getName(flareData))))(function() {
              var root3 = hierarchy(flareData)(getChildren);
              var valued = sum4(root3)(getValue);
              var sortedValued = sortValuedByHeightAndValue2(valued);
              var sorted = valuedToHierarchy2(sortedValued);
              var config = {
                nodeSize: defaultClusterConfig2.nodeSize,
                separation: defaultClusterConfig2.separation,
                size: {
                  width: 1600,
                  height: 1200
                }
              };
              var layout = cluster2(config)(sorted);
              var nodes = getAllNodes(layout);
              var maxDepth2 = layout.depth + getMaxHeight(layout) | 0;
              var levelSpacing = 1200 / toNumber(maxDepth2);
              return bind121(liftEffect53((function() {
                var rootName = getName(layout.data_);
                return function __do5() {
                  log2("\n=== VISUALIZATION POSITIONS ===")();
                  log2("Root (" + (rootName + ("): x=" + show111(layout.x))))();
                  var v = head(layout.children);
                  if (v instanceof Nothing) {
                    return log2("No children!")();
                  }
                  ;
                  if (v instanceof Just) {
                    var fcName = getName(v.value0.data_);
                    log2("First child (" + (fcName + ("): x=" + show111(v.value0.x))))();
                    log2("First child's children:")();
                    return flip(traverse_7)(v.value0.children)(function(child) {
                      var cName = getName(child.data_);
                      return log2("  " + (cName + (": x=" + show111(child.x))));
                    })();
                  }
                  ;
                  throw new Error("Failed pattern match at D3.Viz.ClusterViz (line 155, column 13 - line 165, column 60): " + [v.constructor.name]);
                };
              })()))(function() {
                var leaves = filter(function(v) {
                  return length3(v.children) === 0;
                })(nodes);
                return bind121(liftEffect53(log2("\nFirst 10 leaves from visualization:")))(function() {
                  return bind121(liftEffect53(flip(traverse_7)(take(10)(leaves))(function(v) {
                    var nodeName3 = getName(v.data_);
                    return log2(nodeName3 + (": x=" + show111(v.x)));
                  })))(function() {
                    return bind121(liftEffect53(log2("\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557")))(function() {
                      return bind121(liftEffect53(log2("\u2551   CLUSTER VISUALIZATION: FULL FLARE HIERARCHY (DENDROGRAM)   \u2551")))(function() {
                        return bind121(liftEffect53(log2("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D\n")))(function() {
                          return bind121(liftEffect53(printClusterStructure(0)(3)("")(layout)))(function() {
                            return bind121(liftEffect53(log2("\nRendering " + (show25(length3(nodes)) + " nodes (full hierarchy)"))))(function() {
                              return bind121(liftEffect53(log2("Total node count: " + show25(countNodes(layout)))))(function() {
                                return bind121(attach6(selector))(function(root$prime) {
                                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed9("cluster")]))(function(svg2) {
                                    return bind121(appendTo6(svg2)(Text2.value)([x9(10), y8(20), fill7("#333"), fontSize3(16), text9("Cluster Layout (Dendrogram)"), classed9("title")]))(function() {
                                      return bind121(appendTo6(svg2)(Group.value)([classed9("links")]))(function(linksGroup) {
                                        return bind121(appendTo6(svg2)(Group.value)([classed9("nodes")]))(function(nodesGroup) {
                                          var renderLinks = function(v) {
                                            return discard216(traverse_16(function(child) {
                                              return bind121(appendTo6(linksGroup)(Path2.value)([d6(verticalLinkPath2(clusterVerticalX(v))(clusterVerticalY(v))(clusterVerticalX(child))(clusterVerticalY(child))), fill7("none"), strokeColor8("#555"), fillOpacity4(0.4), strokeWidth7(1.5), classed9("link")]))(function() {
                                                return pure121(unit);
                                              });
                                            })(v.children))(function() {
                                              return traverse_16(renderLinks)(v.children);
                                            });
                                          };
                                          var renderNode = function(v) {
                                            var nodeName3 = getName(v.data_);
                                            var isLeaf = length3(v.children) === 0;
                                            var nodeRadius2 = (function() {
                                              if (isLeaf) {
                                                return 3;
                                              }
                                              ;
                                              return 4;
                                            })();
                                            return bind121(appendTo6(nodesGroup)(Circle.value)([cx3(clusterVerticalX(v)), cy3(clusterVerticalY(v)), radius5(nodeRadius2), fill7("#999"), strokeColor8("#555"), strokeWidth7(1.5), classed9("node"), classed9("depth-" + show25(v.depth)), classed9((function() {
                                              if (isLeaf) {
                                                return "leaf";
                                              }
                                              ;
                                              return "internal";
                                            })())]))(function() {
                                              return discard216((function() {
                                                var $102 = !isLeaf;
                                                if ($102) {
                                                  return bind121(appendTo6(nodesGroup)(Text2.value)([x9(clusterVerticalX(v) + 8), y8(clusterVerticalY(v)), fill7("#333"), fontSize3(10), text9(nodeName3), classed9("label")]))(function() {
                                                    return pure121(unit);
                                                  });
                                                }
                                                ;
                                                return pure121(unit);
                                              })())(function() {
                                                return traverse_16(renderNode)(v.children);
                                              });
                                            });
                                          };
                                          return bind121(renderLinks(layout))(function() {
                                            return bind121(renderNode(layout))(function() {
                                              return pure121(unit);
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.ClusterViz4/index.js
  var bind20 = /* @__PURE__ */ bind(bindList);
  var append20 = /* @__PURE__ */ append(semigroupList);
  var show26 = /* @__PURE__ */ show(showNumber);
  var fromFoldable29 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map57 = /* @__PURE__ */ map(functorArray);
  var discard16 = /* @__PURE__ */ discard(discardUnit);
  var fromFoldable113 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var compare7 = /* @__PURE__ */ compare(ordNumber);
  var show112 = /* @__PURE__ */ show(showInt);
  var classed10 = /* @__PURE__ */ classed(toAttrString);
  var x10 = /* @__PURE__ */ x(toAttrNumber);
  var y9 = /* @__PURE__ */ y(toAttrNumber);
  var fill8 = /* @__PURE__ */ fill(toAttrString);
  var fontSize4 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text10 = /* @__PURE__ */ text6(toAttrString);
  var d7 = /* @__PURE__ */ d(toAttrString);
  var strokeColor9 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth8 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx4 = /* @__PURE__ */ cx(toAttrNumber);
  var cy4 = /* @__PURE__ */ cy(toAttrNumber);
  var radius6 = /* @__PURE__ */ radius(toAttrNumber);
  var makeLinksAsList = function(v) {
    var grandchildLinks = bind20(v.value1)(makeLinksAsList);
    var childLinks = bind20(v.value1)(function(v1) {
      return new Cons({
        source: {
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          x: v1.value0.x,
          y: v1.value0.y
        }
      }, Nil.value);
    });
    return append20(childLinks)(grandchildLinks);
  };
  var makeLinks3 = /* @__PURE__ */ (function() {
    var $52 = fromFoldable2(foldableList);
    return function($53) {
      return $52(makeLinksAsList($53));
    };
  })();
  var linkPath = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          var midY = (y113 + y211) / 2;
          return "M" + (show26(x115) + ("," + (show26(y113) + (" C" + (show26(x115) + ("," + (show26(midY) + (" " + (show26(x211) + ("," + (show26(midY) + (" " + (show26(x211) + ("," + show26(y211)))))))))))))));
        };
      };
    };
  };
  var hierDataToTree2 = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable29(map57(hierDataToTree2)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.ClusterViz4 (line 25, column 20 - line 27, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      height: 0
    }, childrenList);
  };
  var draw6 = function(dictBind) {
    var discard115 = discard16(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      var pure56 = pure(Applicative0);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return discard115(liftEffect53(log2("ClusterViz4: Using Cluster4 (dendrogram with Data.Tree)")))(function() {
              var dataTree = hierDataToTree2(flareData);
              var config = {
                minSeparation: defaultClusterConfig.minSeparation,
                size: {
                  width: 1600 - 2 * 40,
                  height: 1200 - 2 * 40
                }
              };
              var positioned = cluster(config)(dataTree);
              var unsortedNodes = fromFoldable113(positioned);
              var nodes = sortBy(function(a2) {
                return function(b2) {
                  return compare7(a2.x)(b2.x);
                };
              })(unsortedNodes);
              var links = makeLinks3(positioned);
              return discard115(liftEffect53(log2("ClusterViz4: Rendering " + (show112(length3(nodes)) + (" nodes, " + (show112(length3(links)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed10("cluster")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x10(10), y9(20), fill8("#333"), fontSize4(16), text10("Cluster Layout (Dendrogram - equal leaf depth)"), classed10("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed10("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed10("nodes")]))(function(nodesGroup) {
                          return bind121(traverse_16(function(link4) {
                            return appendTo6(linksGroup)(Path2.value)([d7(linkPath(link4.source.x + 40)(link4.source.y + 40)(link4.target.x + 40)(link4.target.y + 40)), fill8("none"), strokeColor9("#555"), strokeWidth8(1.5), classed10("link")]);
                          })(links))(function() {
                            return bind121(traverse_16(function(node) {
                              return appendTo6(nodesGroup)(Circle.value)([cx4(node.x + 40), cy4(node.y + 40), radius6(4), fill8("#999"), strokeColor9("#555"), strokeWidth8(1.5), classed10("node")]);
                            })(nodes))(function() {
                              return discard115(liftEffect53(log2("ClusterViz4: Rendering complete!")))(function() {
                                return pure56(unit);
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/Effect.Random/foreign.js
  var random = Math.random;

  // output/D3.Viz.FpFtw.MapQuartet/index.js
  var traverse3 = /* @__PURE__ */ traverse(traversableArray);
  var traverse12 = /* @__PURE__ */ traverse3(applicativeEffect);
  var fromFoldable30 = /* @__PURE__ */ fromFoldable(ordNumber)(foldableArray);
  var classed11 = /* @__PURE__ */ classed(toAttrString);
  var width12 = /* @__PURE__ */ width8(toAttrNumber);
  var height12 = /* @__PURE__ */ height8(toAttrNumber);
  var show27 = /* @__PURE__ */ show(showNumber);
  var x11 = /* @__PURE__ */ x(toAttrNumber);
  var y10 = /* @__PURE__ */ y(toAttrNumber);
  var text11 = /* @__PURE__ */ text6(toAttrString);
  var textAnchor3 = /* @__PURE__ */ textAnchor(toAttrString);
  var fontSize5 = /* @__PURE__ */ fontSize(toAttrNumber);
  var toUnfoldable7 = /* @__PURE__ */ toUnfoldable(unfoldableArray);
  var cx5 = /* @__PURE__ */ cx(toAttrNumber);
  var cy5 = /* @__PURE__ */ cy(toAttrNumber);
  var radius7 = /* @__PURE__ */ radius(toAttrNumber);
  var fill9 = /* @__PURE__ */ fill(toAttrString);
  var strokeColor10 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth9 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var randomY = function(x115) {
    return function __do5() {
      var noise = random();
      var baseY = 10 + 0.5 * x115 + (noise - 0.5) * 20;
      return baseY;
    };
  };
  var generateSparseKeys = function(count) {
    return traverse12(function(v) {
      return function __do5() {
        var r = random();
        return r * 200;
      };
    })(range2(1)(count));
  };
  var generateRandomMap = function(xValues) {
    return function __do5() {
      var tuples = traverse12(function(xVal2) {
        return function __do6() {
          var yVal2 = randomY(xVal2)();
          return new Tuple(xVal2, yVal2);
        };
      })(xValues)();
      return fromFoldable30(tuples);
    };
  };
  var generateMapQuartet = function __do3() {
    var xValues1 = generateSparseKeys(15)();
    var xValues2 = generateSparseKeys(15)();
    var xValues3 = generateSparseKeys(15)();
    var xValues4 = generateSparseKeys(15)();
    var map130 = generateRandomMap(xValues1)();
    var map211 = generateRandomMap(xValues2)();
    var map310 = generateRandomMap(xValues3)();
    var map410 = generateRandomMap(xValues4)();
    return {
      dataset1: map130,
      dataset2: map211,
      dataset3: map310,
      dataset4: map410
    };
  };
  var drawMapQuartet = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure121 = pure(Applicative0);
      var traverse22 = traverse3(Applicative0);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(quartet) {
          return function(selector) {
            var plotWidth = (900 - 60 * 3) / 2;
            var plotHeight = (700 - 60 * 3) / 2;
            var margin = {
              top: 30,
              right: 20,
              bottom: 40,
              left: 50
            };
            var iWidth = plotWidth - margin.left - margin.right;
            var iHeight = plotHeight - margin.top - margin.bottom;
            var xDomain = [0, 200];
            var yDomain = [0, 120];
            return bind121(attach6(selector))(function(v) {
              return bind121(appendTo6(v)(Svg.value)([viewBox(0)(0)(900)(700), classed11("map-quartet"), width12(900), height12(700)]))(function(svg2) {
                var drawSubplot = function(title4) {
                  return function(dataMap) {
                    return function(xOffset) {
                      return function(yOffset) {
                        return bind121(appendTo6(svg2)(Group.value)([classed11("subplot"), transform([function(v1) {
                          return "translate(" + (show27(xOffset + margin.left) + ("," + (show27(yOffset + margin.top) + ")")));
                        }])]))(function(subplotGroup) {
                          return bind121(appendTo6(svg2)(Text2.value)([x11(xOffset + plotWidth / 2), y10(yOffset + 15), text11(title4), textAnchor3("middle"), fontSize5(16), classed11("subplot-title")]))(function() {
                            return bind121(liftEffect53(createLinearScale_({
                              domain: xDomain,
                              range: [0, iWidth]
                            })))(function(xScale) {
                              return bind121(liftEffect53(createLinearScale_({
                                domain: yDomain,
                                range: [iHeight, 0]
                              })))(function(yScale) {
                                return bind121(appendTo6(subplotGroup)(Group.value)([classed11("x-axis"), transform([function(v1) {
                                  return "translate(0," + (show27(iHeight) + ")");
                                }])]))(function(xAxisGroup) {
                                  return bind121(appendTo6(subplotGroup)(Group.value)([classed11("y-axis")]))(function(yAxisGroup) {
                                    return bind121(liftEffect53(callAxis_(xAxisGroup)(axisBottom_(xScale))))(function() {
                                      return bind121(liftEffect53(callAxis_(yAxisGroup)(axisLeft_(yScale))))(function() {
                                        var dataPoints = toUnfoldable7(dataMap);
                                        var addPoint = function(v1) {
                                          var xPos = applyScale_(xScale)(v1.value0);
                                          var yPos = applyScale_(yScale)(v1.value1);
                                          return bind121(appendTo6(subplotGroup)(Circle.value)([cx5(xPos), cy5(yPos), radius7(4), fill9("#9b59b6"), strokeColor10("#8e44ad"), strokeWidth9(1.5), classed11("scatter-point")]))(function() {
                                            return pure121(unit);
                                          });
                                        };
                                        return bind121(traverse22(addPoint)(dataPoints))(function() {
                                          return pure121(unit);
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      };
                    };
                  };
                };
                return bind121(drawSubplot("Map 1 (15/200)")(quartet.dataset1)(60)(60))(function() {
                  return bind121(drawSubplot("Map 2 (15/200)")(quartet.dataset2)(60 + plotWidth + 60)(60))(function() {
                    return bind121(drawSubplot("Map 3 (15/200)")(quartet.dataset3)(60)(60 + plotHeight + 60))(function() {
                      return bind121(drawSubplot("Map 4 (15/200)")(quartet.dataset4)(60 + plotWidth + 60)(60 + plotHeight + 60))(function() {
                        return pure121(unit);
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.FpFtw.TopologicalSort/foreign.js
  var readLesMisJSON_ = function(jsonString) {
    return JSON.parse(jsonString);
  };

  // output/PSD3.Shared.ZoomableViewbox/index.js
  var classed13 = /* @__PURE__ */ classed(toAttrString);
  var zoomableSVG = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var bind92 = bind(Monad0.Bind1());
    var pure56 = pure(Monad0.Applicative0());
    return function(dictSelectionM) {
      var appendTo6 = appendTo(dictSelectionM);
      var on3 = on2(dictSelectionM);
      return function(root3) {
        return function(config) {
          return bind92(appendTo6(root3)(Svg.value)([viewBox(config.minX)(config.minY)(config.width)(config.height), classed13(config.svgClass)]))(function(svg2) {
            return bind92(appendTo6(svg2)(Group.value)([classed13(config.innerClass)]))(function(zoomGroup) {
              return bind92(on3(zoomGroup)(new Drag(DefaultDrag.value)))(function() {
                return bind92(on3(svg2)(new Zoom({
                  extent: DefaultZoomExtent.value,
                  scale: new ScaleExtent(config.scaleMin, config.scaleMax),
                  name: "zoom",
                  target: zoomGroup
                })))(function() {
                  return pure56({
                    svg: svg2,
                    zoomGroup
                  });
                });
              });
            });
          });
        };
      };
    };
  };

  // output/D3.Viz.FpFtw.TopologicalSort/index.js
  var mapFlipped7 = /* @__PURE__ */ mapFlipped(functorArray);
  var maximum6 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var map58 = /* @__PURE__ */ map(functorArray);
  var pure23 = /* @__PURE__ */ pure(applicativeAff);
  var insertWith2 = /* @__PURE__ */ insertWith(ordString);
  var append111 = /* @__PURE__ */ append(semigroupArray);
  var foldl19 = /* @__PURE__ */ foldl(foldableArray);
  var lookup14 = /* @__PURE__ */ lookup(ordString);
  var insert11 = /* @__PURE__ */ insert(ordString);
  var fromFoldable31 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var topologicalSort2 = /* @__PURE__ */ topologicalSort(ordString);
  var fromFoldable114 = /* @__PURE__ */ fromFoldable(ordString)(foldableArray);
  var toUnfoldable8 = /* @__PURE__ */ toUnfoldable2(unfoldableArray);
  var fromFoldable210 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordString);
  var discard17 = /* @__PURE__ */ discard(discardUnit);
  var strokeColor11 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth10 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var classed14 = /* @__PURE__ */ classed(toAttrString);
  var radius8 = /* @__PURE__ */ radius(toAttrNumber);
  var fill10 = /* @__PURE__ */ fill(toAttrStringFn);
  var textAnchor4 = /* @__PURE__ */ textAnchor(toAttrString);
  var fontSize6 = /* @__PURE__ */ fontSize(toAttrNumber);
  var fill1 = /* @__PURE__ */ fill(toAttrString);
  var x13 = /* @__PURE__ */ x1(toAttrNumberDatumFn);
  var y13 = /* @__PURE__ */ y1(toAttrNumberDatumFn);
  var x23 = /* @__PURE__ */ x2(toAttrNumberDatumFn);
  var y23 = /* @__PURE__ */ y2(toAttrNumberDatumFn);
  var cx6 = /* @__PURE__ */ cx(toAttrNumberFn);
  var cy6 = /* @__PURE__ */ cy(toAttrNumberFn);
  var x14 = /* @__PURE__ */ x(toAttrNumberFn);
  var y11 = /* @__PURE__ */ y(toAttrNumberFn);
  var text12 = /* @__PURE__ */ text6(toAttrStringFn);
  var x32 = /* @__PURE__ */ x(toAttrNumber);
  var y32 = /* @__PURE__ */ y(toAttrNumber);
  var text1 = /* @__PURE__ */ text6(toAttrString);
  var show28 = /* @__PURE__ */ show(showInt);
  var width13 = /* @__PURE__ */ width8(toAttrNumber);
  var height13 = /* @__PURE__ */ height8(toAttrNumber);
  var x112 = /* @__PURE__ */ x1(toAttrNumber);
  var y112 = /* @__PURE__ */ y1(toAttrNumber);
  var x21 = /* @__PURE__ */ x2(toAttrNumber);
  var y21 = /* @__PURE__ */ y2(toAttrNumber);
  var cx1 = /* @__PURE__ */ cx(toAttrNumber);
  var cy1 = /* @__PURE__ */ cy(toAttrNumber);
  var tasksToSimNodes = function(totalWidth) {
    return function(totalHeight) {
      return function(layeredTasks) {
        var layerValues = mapFlipped7(layeredTasks)(function(v) {
          return v.layer;
        });
        var maxLayer = fromMaybe(0)(maximum6(layerValues));
        var layerHeight = (function() {
          var $113 = maxLayer > 0;
          if ($113) {
            return (totalHeight - 100) / toNumber(maxLayer);
          }
          ;
          return 100;
        })();
        var taskToNode = function(task) {
          return function(indexInLayer) {
            var yPos = toNumber(task.layer) * layerHeight - totalHeight / 2 + 50;
            var tasksInLayer = filter(function(t) {
              return t.layer === task.layer;
            })(layeredTasks);
            var layerWidth = totalWidth - 100;
            var layerCount = length3(tasksInLayer);
            var xPos = (function() {
              var $114 = layerCount > 1;
              if ($114) {
                return toNumber(indexInLayer) * layerWidth / toNumber(layerCount - 1 | 0) - layerWidth / 2;
              }
              ;
              return 0;
            })();
            return {
              id: task.id,
              name: task.name,
              layer: task.layer,
              group: task.group,
              x: xPos,
              y: yPos,
              vx: 0,
              vy: 0,
              fx: nullImpl,
              fy: notNull(yPos)
            };
          };
        };
        return concat(map58(function(layer) {
          var tasksInLayer = filter(function(t) {
            return t.layer === layer;
          })(layeredTasks);
          return mapWithIndex3(function(idx) {
            return function(task) {
              return taskToNode(task)(idx);
            };
          })(tasksInLayer);
        })(range2(0)(maxLayer)));
      };
    };
  };
  var packTaskLink = unsafeCoerce2;
  var tasksToLinks = function(tasks) {
    return concat(mapFlipped7(tasks)(function(task) {
      return mapFlipped7(task.depends)(function(depId) {
        return packTaskLink({
          source: depId,
          target: task.id,
          id: depId + ("->" + task.id)
        });
      });
    }));
  };
  var loadLesMisGraph = /* @__PURE__ */ bind(bindAff)(/* @__PURE__ */ get4(string)("data/miserables.json"))(function(result) {
    return pure23((function() {
      if (result instanceof Left) {
        return new Left("Failed to load: " + printError(result.value0));
      }
      ;
      if (result instanceof Right) {
        return new Right(readLesMisJSON_(result.value0.body));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.FpFtw.TopologicalSort (line 111, column 10 - line 113, column 60): " + [result.constructor.name]);
    })());
  });
  var lesMisToTasks = function(graph) {
    var dependenciesMap = (function() {
      var addLink = function(acc) {
        return function(link4) {
          return insertWith2(append111)(link4.target)([link4.source])(acc);
        };
      };
      return foldl19(addLink)(empty2)(graph.links);
    })();
    var nodeToTask = function(node) {
      return {
        id: node.id,
        name: node.id,
        depends: fromMaybe([])(lookup14(node.id)(dependenciesMap)),
        group: new Just(node.group)
      };
    };
    return map58(nodeToTask)(graph.nodes);
  };
  var buildTaskGraph = function(tasks) {
    var addTask = function(acc) {
      return function(task) {
        return insert11(task.id)(new Tuple(task, fromFoldable31(task.depends)))(acc);
      };
    };
    var graphMap = foldl19(addTask)(empty2)(tasks);
    return fromMap(graphMap);
  };
  var getTopologicalOrder = function(tasks) {
    var graph = buildTaskGraph(tasks);
    return topologicalSort2(graph);
  };
  var computeLayers = function(tasks) {
    var taskMap = fromFoldable114(mapFlipped7(tasks)(function(t) {
      return new Tuple(t.id, t);
    }));
    var sortedIds = reverse2(getTopologicalOrder(tasks));
    var processTask = function(accLayers) {
      return function(taskId) {
        var v = lookup14(taskId)(taskMap);
        if (v instanceof Nothing) {
          return accLayers;
        }
        ;
        if (v instanceof Just) {
          var layer = (function() {
            var $119 = $$null2(v.value0.depends);
            if ($119) {
              return 0;
            }
            ;
            var depLayers = mapFlipped7(v.value0.depends)(function(depId) {
              return fromMaybe(0)(lookup14(depId)(accLayers));
            });
            var v1 = maximum6(depLayers);
            if (v1 instanceof Just) {
              return v1.value0 + 1 | 0;
            }
            ;
            if (v1 instanceof Nothing) {
              return 0;
            }
            ;
            throw new Error("Failed pattern match at D3.Viz.FpFtw.TopologicalSort (line 188, column 24 - line 190, column 38): " + [v1.constructor.name]);
          })();
          return insert11(taskId)(layer)(accLayers);
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.FpFtw.TopologicalSort (line 177, column 7 - line 191, column 47): " + [v.constructor.name]);
      };
    };
    return foldl19(processTask)(empty2)(toUnfoldable8(sortedIds));
  };
  var buildPipelineTasks = /* @__PURE__ */ (function() {
    return [{
      id: "clone",
      name: "Clone Repository",
      depends: [],
      group: Nothing.value
    }, {
      id: "install",
      name: "Install Dependencies",
      depends: ["clone"],
      group: Nothing.value
    }, {
      id: "lint",
      name: "Run Linter",
      depends: ["install"],
      group: Nothing.value
    }, {
      id: "test",
      name: "Run Tests",
      depends: ["install"],
      group: Nothing.value
    }, {
      id: "build",
      name: "Build Project",
      depends: ["lint", "test"],
      group: Nothing.value
    }, {
      id: "docker",
      name: "Build Docker Image",
      depends: ["build"],
      group: Nothing.value
    }, {
      id: "deploy",
      name: "Deploy to Production",
      depends: ["docker"],
      group: Nothing.value
    }];
  })();
  var addLayers = function(tasks) {
    var layers = computeLayers(tasks);
    return mapFlipped7(tasks)(function(t) {
      return {
        id: t.id,
        name: t.name,
        layer: fromMaybe(0)(lookup14(t.id)(layers)),
        depends: t.depends,
        group: t.group
      };
    });
  };
  var drawTopologicalForceDirected = function(dictBind) {
    var bind92 = bind(dictBind);
    var discard115 = discard17(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var zoomableSVG2 = zoomableSVG(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      var pure121 = pure(Applicative0);
      return function(dictMonadState) {
        return function(dictSimulationM2) {
          var SimulationM1 = dictSimulationM2.SimulationM1();
          var SelectionM1 = SimulationM1.SelectionM1();
          var attach6 = attach(SelectionM1);
          var zoomableSVG1 = zoomableSVG2(SelectionM1);
          var appendTo6 = appendTo(SelectionM1);
          var init5 = init3(SimulationM1);
          var simpleJoin4 = simpleJoin(SelectionM1);
          var setAttributes5 = setAttributes(SelectionM1);
          var addTickFunction2 = addTickFunction(dictSimulationM2);
          var start7 = start2(SimulationM1);
          return function(tasks) {
            return function(selector) {
              return bind92(liftEffect53(getWindowWidthHeight))(function(v) {
                var layeredTasks = addLayers(tasks);
                var layerValues = mapFlipped7(layeredTasks)(function(v1) {
                  return v1.layer;
                });
                var maxLayer = fromMaybe(0)(maximum6(layerValues));
                var layerHeight = (function() {
                  var $124 = maxLayer > 0;
                  if ($124) {
                    return (v.value1 - 100) / toNumber(maxLayer);
                  }
                  ;
                  return 100;
                })();
                var simNodes = tasksToSimNodes(v.value0)(v.value1)(layeredTasks);
                var simLinks = tasksToLinks(layeredTasks);
                var forcesArray = [createForce("many body weak")(new RegularForce(ForceManyBody.value))(allNodes)([strengthVal(-15)]), createForce("collision")(new RegularForce(ForceCollide.value))(allNodes)([radiusVal(7)]), createLinkForce(Nothing.value)([distanceVal(80)])];
                var activeForces = fromFoldable210(["many body weak", "collision", "links"]);
                return bind92(attach6(selector))(function(rootSel) {
                  return bind92(zoomableSVG1(rootSel)({
                    minX: -v.value0 / 2,
                    minY: -v.value1 / 2,
                    width: v.value0,
                    height: v.value1,
                    svgClass: "topological-force",
                    innerClass: "zoom-group",
                    innerWidth: v.value0,
                    innerHeight: v.value1,
                    scaleMin: 0.5,
                    scaleMax: 4
                  }))(function(v1) {
                    return bind92(appendTo6(v1.zoomGroup)(Group.value)([]))(function(container) {
                      return bind92(init5({
                        nodes: simNodes,
                        links: simLinks,
                        forces: forcesArray,
                        activeForces,
                        config: {
                          alpha: 1,
                          alphaTarget: 0,
                          alphaMin: 1e-3,
                          alphaDecay: 0.0228,
                          velocityDecay: 0.4
                        },
                        keyFn: keyIsID_,
                        ticks: fromFoldable114([])
                      }))(function(v2) {
                        return bind92(simpleJoin4(container)(Line.value)(v2.links)(keyIsID_))(function(linksSelection) {
                          return discard115(setAttributes5(linksSelection)([strokeColor11("#bbb"), strokeWidth10(2), classed14("dependency-link")]))(function() {
                            return bind92(simpleJoin4(container)(Circle.value)(v2.nodes)(keyIsID_))(function(nodesSelection) {
                              return discard115(setAttributes5(nodesSelection)([radius8(5), fill10(function(v3) {
                                if (v3.group instanceof Just) {
                                  return d3SchemeCategory10N_(toNumber(v3.group.value0));
                                }
                                ;
                                if (v3.group instanceof Nothing) {
                                  return "#4CAF50";
                                }
                                ;
                                throw new Error("Failed pattern match at D3.Viz.FpFtw.TopologicalSort (line 468, column 38 - line 470, column 60): " + [v3.group.constructor.name]);
                              }), strokeColor11("#fff"), strokeWidth10(1.5), classed14("task-node")]))(function() {
                                return bind92(simpleJoin4(container)(Text2.value)(v2.nodes)(keyIsID_))(function(labelsSelection) {
                                  return discard115(setAttributes5(labelsSelection)([textAnchor4("middle"), fontSize6(10), fill1("#333"), classed14("task-label")]))(function() {
                                    return discard115(addTickFunction2("links")(new Step3(linksSelection, [x13(function(d23) {
                                      return d23.source.x;
                                    }), y13(function(d23) {
                                      return d23.source.y;
                                    }), x23(function(d23) {
                                      return d23.target.x;
                                    }), y23(function(d23) {
                                      return d23.target.y;
                                    })])))(function() {
                                      return discard115(addTickFunction2("nodes")(new Step3(nodesSelection, [cx6(function(v3) {
                                        return v3.x;
                                      }), cy6(function(v3) {
                                        return v3.y;
                                      })])))(function() {
                                        return discard115(addTickFunction2("labels")(new Step3(labelsSelection, [x14(function(v3) {
                                          return v3.x;
                                        }), y11(function(v3) {
                                          return v3.y + 20;
                                        }), text12(function(v3) {
                                          return v3.name;
                                        })])))(function() {
                                          return bind92(traverse_16(function(layer) {
                                            return appendTo6(container)(Text2.value)([x32(-(v.value0 / 2) + 10), y32(toNumber(layer) * layerHeight - v.value1 / 2 + 50 + 5), text1("Layer " + show28(layer)), textAnchor4("start"), fontSize6(12), fill1("#999"), classed14("layer-label")]);
                                          })(range2(0)(maxLayer)))(function() {
                                            return discard115(start7)(function() {
                                              return pure121(unit);
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            };
          };
        };
      };
    };
  };
  var drawTopologicalSort = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadEffect) {
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure121 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(tasks) {
          return function(selector) {
            var layeredTasks = addLayers(tasks);
            var layerValues = mapFlipped7(layeredTasks)(function(v) {
              return v.layer;
            });
            var maxLayer = fromMaybe(0)(maximum6(layerValues));
            var layerHeight = (function() {
              var $141 = maxLayer > 0;
              if ($141) {
                return (600 - 100) / toNumber(maxLayer);
              }
              ;
              return 100;
            })();
            return bind92(attach6(selector))(function(v) {
              return bind92(appendTo6(v)(Svg.value)([viewBox(0)(0)(900)(600), classed14("topological-sort"), width13(900), height13(600)]))(function(svg2) {
                return bind92(appendTo6(svg2)(Group.value)([transform([function(v1) {
                  return "translate(50, 50)";
                }])]))(function(container) {
                  var drawLink = function(task) {
                    return function(depId) {
                      var v1 = find2(function(t) {
                        return t.id === depId;
                      })(layeredTasks);
                      if (v1 instanceof Nothing) {
                        return pure121(unit);
                      }
                      ;
                      if (v1 instanceof Just) {
                        var sourceY = toNumber(task.layer) * layerHeight;
                        var targetY = toNumber(v1.value0.layer) * layerHeight;
                        var tasksInSourceLayer = filter(function(t) {
                          return t.layer === task.layer;
                        })(layeredTasks);
                        var tasksInTargetLayer = filter(function(t) {
                          return t.layer === v1.value0.layer;
                        })(layeredTasks);
                        var sourceIndex = fromMaybe(0)(findIndex(function(t) {
                          return t.id === task.id;
                        })(tasksInSourceLayer));
                        var targetIndex = fromMaybe(0)(findIndex(function(t) {
                          return t.id === v1.value0.id;
                        })(tasksInTargetLayer));
                        var layerWidth = 900 - 100;
                        var sourceCount = length3(tasksInSourceLayer);
                        var targetCount = length3(tasksInTargetLayer);
                        var sourceX = (function() {
                          var $144 = sourceCount > 1;
                          if ($144) {
                            return toNumber(sourceIndex) * layerWidth / toNumber(sourceCount - 1 | 0);
                          }
                          ;
                          return layerWidth / 2;
                        })();
                        var targetX = (function() {
                          var $145 = targetCount > 1;
                          if ($145) {
                            return toNumber(targetIndex) * layerWidth / toNumber(targetCount - 1 | 0);
                          }
                          ;
                          return layerWidth / 2;
                        })();
                        return bind92(appendTo6(container)(Line.value)([x112(targetX), y112(targetY), x21(sourceX), y21(sourceY), strokeColor11("#bbb"), strokeWidth10(2), classed14("dependency-link")]))(function() {
                          return pure121(unit);
                        });
                      }
                      ;
                      throw new Error("Failed pattern match at D3.Viz.FpFtw.TopologicalSort (line 294, column 9 - line 322, column 22): " + [v1.constructor.name]);
                    };
                  };
                  return bind92(traverse_16(function(task) {
                    return traverse_16(drawLink(task))(task.depends);
                  })(layeredTasks))(function() {
                    var drawTask = function(task) {
                      return function(indexInLayer) {
                        var yPos = toNumber(task.layer) * layerHeight;
                        var tasksInLayer = filter(function(t) {
                          return t.layer === task.layer;
                        })(layeredTasks);
                        var layerCount = length3(tasksInLayer);
                        var layerWidth = 900 - 100;
                        var xPos = (function() {
                          var $147 = layerCount > 1;
                          if ($147) {
                            return toNumber(indexInLayer) * layerWidth / toNumber(layerCount - 1 | 0);
                          }
                          ;
                          return layerWidth / 2;
                        })();
                        return bind92(appendTo6(container)(Circle.value)([cx1(xPos), cy1(yPos), radius8(30), fill1("#4CAF50"), strokeColor11("#2E7D32"), strokeWidth10(2), classed14("task-node")]))(function() {
                          return bind92(appendTo6(container)(Text2.value)([x32(xPos), y32(yPos + 5), text1(task.name), textAnchor4("middle"), fontSize6(12), fill1("#fff"), classed14("task-label")]))(function() {
                            return pure121(unit);
                          });
                        });
                      };
                    };
                    return bind92(traverse_16(function(layer) {
                      var tasksInLayer = filter(function(t) {
                        return t.layer === layer;
                      })(layeredTasks);
                      return traverse_16(function(v1) {
                        return drawTask(v1.value)(v1.idx);
                      })(mapWithIndex3(function(idx) {
                        return function(task) {
                          return {
                            idx,
                            value: task
                          };
                        };
                      })(tasksInLayer));
                    })(range2(0)(maxLayer)))(function() {
                      return bind92(traverse_16(function(layer) {
                        return appendTo6(container)(Text2.value)([x32(-30), y32(toNumber(layer) * layerHeight + 5), text1("Layer " + show28(layer)), textAnchor4("end"), fontSize6(14), fill1("#666"), classed14("layer-label")]);
                      })(range2(0)(maxLayer)))(function() {
                        return pure121(unit);
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.GUP.Unsafe/index.js
  var coerceIndexToNumber = unsafeCoerce2;
  var charToKey = singleton7;

  // output/D3.Viz.GUP/index.js
  var andThen2 = /* @__PURE__ */ andThen(semigroupArray);
  var classed15 = /* @__PURE__ */ classed(toAttrString);
  var fill11 = /* @__PURE__ */ fill(toAttrString);
  var y14 = /* @__PURE__ */ y(toAttrNumber);
  var x15 = /* @__PURE__ */ x(toAttrNumberFnI);
  var text13 = /* @__PURE__ */ text6(toAttrStringFn);
  var fontSize7 = /* @__PURE__ */ fontSize(toAttrNumber);
  var discard18 = /* @__PURE__ */ discard(discardUnit);
  var exGeneralUpdatePattern = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind92 = bind(Bind1);
    var attach6 = attach(dictSelectionM);
    var appendTo6 = appendTo(dictSelectionM);
    var pure56 = pure(Monad0.Applicative0());
    var openSelection5 = openSelection(dictSelectionM);
    var updateJoin5 = updateJoin(dictSelectionM);
    var discard115 = discard18(Bind1);
    var setAttributes5 = setAttributes(dictSelectionM);
    return function(selector) {
      var xFromIndex = function(v) {
        return function(i2) {
          return 50 + coerceIndexToNumber(i2) * 48;
        };
      };
      var transition2 = transitionWithDuration(2e3);
      var update4 = andThen2([classed15("update"), fill11("gray"), y14(200)])(to(transition2)([x15(xFromIndex)]));
      var exit = andThen2([classed15("exit"), fill11("brown")])(to(transition2)([y14(400), remove]));
      var enter = andThen2([classed15("enter"), fill11("green"), x15(xFromIndex), y14(0), text13(singleton7), fontSize7(60)])(to(transition2)([y14(200)]));
      return bind92(attach6(selector))(function(root3) {
        return bind92(appendTo6(root3)(Svg.value)([viewBox(0)(100)(800)(350), classed15("d3svg gup")]))(function(svg2) {
          return bind92(appendTo6(svg2)(Group.value)([]))(function(letterGroup) {
            return pure56(function(letters) {
              return bind92(openSelection5(letterGroup)("text"))(function(enterSelection) {
                return bind92(updateJoin5(enterSelection)(Text2.value)(letters)(charToKey))(function(updateSelections) {
                  return discard115(setAttributes5(updateSelections.exit)(exit))(function() {
                    return discard115(setAttributes5(updateSelections.update)(update4))(function() {
                      return bind92(appendTo6(updateSelections.enter)(Text2.value)([]))(function(newlyEntered) {
                        return discard115(setAttributes5(newlyEntered)(enter))(function() {
                          return pure56(newlyEntered);
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    };
  };

  // output/Data.Number.Format/foreign.js
  function wrap3(method2) {
    return function(d23) {
      return function(num) {
        return method2.apply(num, [d23]);
      };
    };
  }
  var toPrecisionNative = wrap3(Number.prototype.toPrecision);
  var toFixedNative = wrap3(Number.prototype.toFixed);
  var toExponentialNative = wrap3(Number.prototype.toExponential);
  function toString(num) {
    return num.toString();
  }

  // output/D3.Viz.GroupedBarChart/index.js
  var bind21 = /* @__PURE__ */ bind(bindMaybe);
  var readProp3 = /* @__PURE__ */ readProp(monadIdentity);
  var readString3 = /* @__PURE__ */ readString(monadIdentity);
  var readNumber2 = /* @__PURE__ */ readNumber(monadIdentity);
  var pure24 = /* @__PURE__ */ pure(applicativeMaybe);
  var map59 = /* @__PURE__ */ map(functorArray);
  var nub3 = /* @__PURE__ */ nub(ordString);
  var maximum7 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var map117 = /* @__PURE__ */ map(functorMaybe);
  var classed16 = /* @__PURE__ */ classed(toAttrString);
  var width14 = /* @__PURE__ */ width8(toAttrNumber);
  var height14 = /* @__PURE__ */ height8(toAttrNumber);
  var show29 = /* @__PURE__ */ show(showNumber);
  var x16 = /* @__PURE__ */ x(toAttrNumber);
  var y15 = /* @__PURE__ */ y(toAttrNumber);
  var fill12 = /* @__PURE__ */ fill(toAttrString);
  var strokeColor12 = /* @__PURE__ */ strokeColor(toAttrString);
  var text14 = /* @__PURE__ */ text6(toAttrString);
  var textAnchor5 = /* @__PURE__ */ textAnchor(toAttrString);
  var parseCSVRow = function(row) {
    return bind21(hush(runExcept(readProp3("State")(row))))(function(stateF) {
      return bind21(hush(runExcept(readString3(stateF))))(function(state3) {
        var ageColumns = [{
          name: "Under 5 Years",
          label: "Under 5"
        }, {
          name: "5 to 13 Years",
          label: "5 to 13"
        }, {
          name: "14 to 17 Years",
          label: "14 to 17"
        }, {
          name: "18 to 24 Years",
          label: "18 to 24"
        }, {
          name: "25 to 44 Years",
          label: "25 to 44"
        }, {
          name: "45 to 64 Years",
          label: "45 to 64"
        }, {
          name: "65 Years and Over",
          label: "65+"
        }];
        var parseAge = function(col2) {
          return bind21(hush(runExcept(readProp3(col2.name)(row))))(function(valF) {
            return bind21((function() {
              var v = hush(runExcept(readNumber2(valF)));
              if (v instanceof Just) {
                return new Just(v.value0);
              }
              ;
              if (v instanceof Nothing) {
                return bind21(hush(runExcept(readString3(valF))))(function(str2) {
                  return fromString(str2);
                });
              }
              ;
              throw new Error("Failed pattern match at D3.Viz.GroupedBarChart (line 63, column 23 - line 67, column 27): " + [v.constructor.name]);
            })())(function(population) {
              return pure24({
                state: state3,
                age: col2.label,
                population
              });
            });
          });
        };
        return pure24(catMaybes(map59(parseAge)(ageColumns)));
      });
    });
  };
  var parsePopulationCSV = function(rows4) {
    return concat(catMaybes(map59(parseCSVRow)(rows4)));
  };
  var getStates = /* @__PURE__ */ (function() {
    var $52 = map59(function(v) {
      return v.state;
    });
    return function($53) {
      return nub3($52($53));
    };
  })();
  var getAges = /* @__PURE__ */ (function() {
    var $54 = map59(function(v) {
      return v.age;
    });
    return function($55) {
      return nub3($54($55));
    };
  })();
  var formatSI = function(n) {
    var $50 = n >= 1e6;
    if ($50) {
      return toString(n / 1e6) + "M";
    }
    ;
    return toString(n);
  };
  var draw7 = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure121 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(data$prime) {
          return function(selector) {
            var dims = {
              width: 928,
              height: 600,
              marginTop: 10,
              marginRight: 10,
              marginBottom: 20,
              marginLeft: 40
            };
            var chartWidth = dims.width - dims.marginLeft - dims.marginRight;
            var chartHeight = dims.height - dims.marginTop - dims.marginBottom;
            var states = getStates(data$prime);
            var ages = getAges(data$prime);
            var maxPop = fromMaybe(0)(maximum7(map59(function(v) {
              return v.population;
            })(data$prime)));
            var stateCount = toNumber(length3(states));
            var ageCount = toNumber(length3(ages));
            var stateWidth = chartWidth / (stateCount + 0.1 * (stateCount - 1));
            var barWidth = stateWidth * (1 - 0.1) / (ageCount + 0.05 * (ageCount - 1));
            var stateSpacing = stateWidth * (1 + 0.1);
            var getStateX = function(state$prime) {
              return fromMaybe(0)(map117(function(i2) {
                return toNumber(i2) * stateSpacing;
              })(findIndex(function(s) {
                return s === state$prime;
              })(states)));
            };
            var getAgeOffset = function(age$prime) {
              var barSpacing = barWidth * (1 + 0.05);
              return fromMaybe(0)(map117(function(i2) {
                return toNumber(i2) * barSpacing;
              })(findIndex(function(a2) {
                return a2 === age$prime;
              })(ages)));
            };
            var ageColors = ["#9e0142", "#d53e4f", "#f46d43", "#fdae61", "#fee08b", "#e6f598", "#abdda4", "#66c2a5", "#3288bd"];
            var getAgeColor = function(age$prime) {
              return fromMaybe("#999999")(bind21(findIndex(function(a2) {
                return a2 === age$prime;
              })(ages))(function(i2) {
                return index2(ageColors)(i2);
              }));
            };
            return bind121(attach6(selector))(function(v) {
              return bind121(appendTo6(v)(Svg.value)([classed16("grouped-bar-chart"), width14(dims.width), height14(dims.height), viewBox(0)(0)(dims.width)(dims.height)]))(function(svg2) {
                return bind121(appendTo6(svg2)(Group.value)([transform([function(v1) {
                  return "translate(" + (show29(dims.marginLeft) + ("," + (show29(dims.marginTop) + ")")));
                }]), classed16("chart")]))(function(chartGroup) {
                  var drawBar = function(d23) {
                    var barHeight = d23.population / maxPop * chartHeight;
                    var barX = getStateX(d23.state) + getAgeOffset(d23.age);
                    var barY = chartHeight - barHeight;
                    return bind121(appendTo6(chartGroup)(Rect.value)([x16(barX), y15(barY), width14(barWidth), height14(barHeight), fill12(getAgeColor(d23.age)), strokeColor12("white"), classed16("bar")]))(function() {
                      return pure121(unit);
                    });
                  };
                  return bind121(traverse_16(drawBar)(data$prime))(function() {
                    return bind121(appendTo6(chartGroup)(Group.value)([transform([function(v1) {
                      return "translate(0," + (show29(chartHeight) + ")");
                    }]), classed16("x-axis")]))(function(xAxis) {
                      var drawStateLabel = function(state$prime) {
                        var labelX = getStateX(state$prime) + stateWidth / 2;
                        return bind121(appendTo6(xAxis)(Text2.value)([x16(labelX), y15(20), text14(state$prime), textAnchor5("middle"), classed16("axis-label")]))(function() {
                          return pure121(unit);
                        });
                      };
                      return bind121(traverse_16(drawStateLabel)(states))(function() {
                        return bind121(appendTo6(chartGroup)(Group.value)([classed16("y-axis")]))(function(yAxis) {
                          var yTicks2 = [0, maxPop / 4, maxPop / 2, 3 * maxPop / 4, maxPop];
                          var drawYTick = function(value18) {
                            var tickY = chartHeight - value18 / maxPop * chartHeight;
                            return bind121(appendTo6(yAxis)(Text2.value)([x16(-10), y15(tickY + 4), text14(formatSI(value18)), textAnchor5("end"), classed16("axis-label")]))(function() {
                              return pure121(unit);
                            });
                          };
                          return bind121(traverse_16(drawYTick)(yTicks2))(function() {
                            return pure121(unit);
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.HorizontalClusterViz/index.js
  var bind22 = /* @__PURE__ */ bind(bindList);
  var append21 = /* @__PURE__ */ append(semigroupList);
  var show30 = /* @__PURE__ */ show(showNumber);
  var fromFoldable33 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map60 = /* @__PURE__ */ map(functorArray);
  var discard19 = /* @__PURE__ */ discard(discardUnit);
  var map118 = /* @__PURE__ */ map(functorList);
  var fromFoldable115 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var compare8 = /* @__PURE__ */ compare(ordNumber);
  var show113 = /* @__PURE__ */ show(showInt);
  var classed17 = /* @__PURE__ */ classed(toAttrString);
  var x17 = /* @__PURE__ */ x(toAttrNumber);
  var y16 = /* @__PURE__ */ y(toAttrNumber);
  var fill13 = /* @__PURE__ */ fill(toAttrString);
  var fontSize8 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text15 = /* @__PURE__ */ text6(toAttrString);
  var d8 = /* @__PURE__ */ d(toAttrStringFnI);
  var strokeColor13 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth11 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx7 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy7 = /* @__PURE__ */ cy(toAttrNumberFnI);
  var radius9 = /* @__PURE__ */ radius(toAttrNumber);
  var makeLinksAsList2 = function(v) {
    var grandchildLinks = bind22(v.value1)(makeLinksAsList2);
    var childLinks = bind22(v.value1)(function(v1) {
      return new Cons({
        source: {
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          x: v1.value0.x,
          y: v1.value0.y
        }
      }, Nil.value);
    });
    return append21(childLinks)(grandchildLinks);
  };
  var makeLinks4 = /* @__PURE__ */ (function() {
    var $70 = fromFoldable2(foldableList);
    return function($71) {
      return $70(makeLinksAsList2($71));
    };
  })();
  var horizontalLinkPath2 = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          var midX = (x115 + x211) / 2;
          return "M" + (show30(x115) + ("," + (show30(y113) + (" C" + (show30(midX) + ("," + (show30(y113) + (" " + (show30(midX) + ("," + (show30(y211) + (" " + (show30(x211) + ("," + show30(y211)))))))))))))));
        };
      };
    };
  };
  var hierDataToTree3 = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable33(map60(hierDataToTree3)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.HorizontalClusterViz (line 26, column 20 - line 28, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      height: 0
    }, childrenList);
  };
  var draw8 = function(dictBind) {
    var discard115 = discard19(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return discard115(liftEffect53(log2("HorizontalClusterViz: Using Cluster4 with horizontal projection")))(function() {
              var dataTree = hierDataToTree3(flareData);
              var config = {
                minSeparation: defaultClusterConfig.minSeparation,
                size: {
                  width: 1200 - 2 * 40,
                  height: 1600 - 2 * 40
                }
              };
              var positioned = cluster(config)(dataTree);
              var projectNode = function(v) {
                var projectedChildren = map118(projectNode)(v.value1);
                return new Node2((function() {
                  var $62 = {};
                  for (var $63 in v.value0) {
                    if ({}.hasOwnProperty.call(v.value0, $63)) {
                      $62[$63] = v["value0"][$63];
                    }
                    ;
                  }
                  ;
                  $62.x = v.value0.y;
                  $62.y = v.value0.x;
                  return $62;
                })(), projectedChildren);
              };
              var horizontalCluster = projectNode(positioned);
              var unsortedNodes = fromFoldable115(horizontalCluster);
              var nodes = sortBy(function(a2) {
                return function(b2) {
                  return compare8(a2.y)(b2.y);
                };
              })(unsortedNodes);
              var links = makeLinks4(horizontalCluster);
              return discard115(liftEffect53(log2("HorizontalClusterViz: Rendering " + (show113(length3(nodes)) + (" nodes, " + (show113(length3(links)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed17("horizontal-cluster-viz")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x17(10), y16(20), fill13("#333"), fontSize8(16), text15("Horizontal Cluster Layout (Dendrogram)"), classed17("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed17("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed17("nodes")]))(function(nodesGroup) {
                          return bind121(simpleJoin4(linksGroup)(Path2.value)(links)(keyIsID_))(function(linkElements) {
                            return discard115(setAttributes5(linkElements)([d8(function(v) {
                              return function(v1) {
                                return horizontalLinkPath2(v.source.x + 40)(v.source.y + 40)(v.target.x + 40)(v.target.y + 40);
                              };
                            }), fill13("none"), strokeColor13("#555"), strokeWidth11(1.5), classed17("link")]))(function() {
                              return bind121(simpleJoin4(nodesGroup)(Circle.value)(nodes)(keyIsID_))(function(nodeElements) {
                                return discard115(setAttributes5(nodeElements)([cx7(function(v) {
                                  return function(v1) {
                                    return v.x + 40;
                                  };
                                }), cy7(function(v) {
                                  return function(v1) {
                                    return v.y + 40;
                                  };
                                }), radius9(4), fill13("#999"), strokeColor13("#555"), strokeWidth11(1.5), classed17("node")]))(function() {
                                  return discard115(liftEffect53(log2("HorizontalClusterViz: Rendering complete!")))(function() {
                                    return pure56(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.HorizontalTreeD3/foreign.js
  var d3Tree_ = () => d3.tree();
  var d3Cluster_ = () => d3.cluster();

  // output/PSD3.Internal.Hierarchical/foreign.js
  function readJSON_(filecontents) {
    return JSON.parse(filecontents);
  }
  function hierarchyFromJSON_(json2) {
    return d3.hierarchy(json2);
  }
  function descendants_(tree4) {
    return tree4.descendants();
  }
  function links_(tree4) {
    return tree4.links();
  }
  function runLayoutFn_(layout) {
    return (root3) => layout(root3);
  }
  function treeSetNodeSize_(tree4) {
    return (widthHeight) => tree4.nodeSize(widthHeight);
  }
  function treeMinMax_(root3) {
    let max_x = -Infinity;
    let min_x = Infinity;
    let max_y = -Infinity;
    let min_y = Infinity;
    root3.each((d23) => {
      if (d23.x > max_x) max_x = d23.x;
      if (d23.y > max_y) max_y = d23.y;
      if (d23.x < min_x) min_x = d23.x;
      if (d23.y < min_y) min_y = d23.y;
    });
    return { xMin: min_x, xMax: max_x, yMin: min_y, yMax: max_y };
  }
  function hNodeHeight_(node) {
    return node.height;
  }
  var horizontalLink = d3.linkHorizontal().x((d23) => d23.y).y((d23) => d23.x);

  // output/PSD3.Internal.Hierarchical/index.js
  var bind23 = /* @__PURE__ */ bind(bindAff);
  var pure25 = /* @__PURE__ */ pure(applicativeAff);
  var rmap4 = /* @__PURE__ */ rmap(bifunctorEither);
  var getTreeViaAJAX = function(url) {
    return bind23(get4(string)(url))(function(result) {
      return pure25(rmap4(function(v) {
        return readJSON_(v.body);
      })(result));
    });
  };

  // output/PSD3.Shared.TreeHelpers/foreign.js
  var unsafeFieldImpl = (field) => (obj) => obj[field];
  var unsafeCoerceImpl = (x46) => x46;
  var hasChildren_ = (node) => {
    return node.children && node.children.length > 0;
  };

  // output/PSD3.Shared.TreeHelpers/index.js
  var treeDatum_ = {
    hasChildren: function(d23) {
      return hasChildren_(unsafeCoerceImpl(d23));
    },
    name: function(d23) {
      return unsafeFieldImpl("data")(d23).name;
    },
    x: function(d23) {
      return unsafeFieldImpl("x")(d23);
    },
    y: function(d23) {
      return unsafeFieldImpl("y")(d23);
    }
  };

  // output/D3.Viz.HorizontalTreeD3/index.js
  var show31 = /* @__PURE__ */ show(showNumber);
  var show114 = /* @__PURE__ */ show(showTreeType);
  var classed18 = /* @__PURE__ */ classed(toAttrString);
  var fontFamily2 = /* @__PURE__ */ fontFamily(toAttrString);
  var fontSize9 = /* @__PURE__ */ fontSize(toAttrNumber);
  var discard20 = /* @__PURE__ */ discard(discardUnit);
  var strokeWidth12 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var strokeColor14 = /* @__PURE__ */ strokeColor(toAttrString);
  var fill14 = /* @__PURE__ */ fill(toAttrString);
  var d9 = /* @__PURE__ */ d(toAttrStringDatumFn);
  var radius10 = /* @__PURE__ */ radius(toAttrNumber);
  var dy2 = /* @__PURE__ */ dy(toAttrNumber);
  var x18 = /* @__PURE__ */ x(toAttrNumberDatumFn);
  var textAnchor6 = /* @__PURE__ */ textAnchor(toAttrStringDatumFn);
  var text16 = /* @__PURE__ */ text6(toAttrStringDatumFn);
  var positionXYreflected = function(d1) {
    return "translate(" + (show31(treeDatum_.y(d1)) + ("," + (show31(treeDatum_.x(d1)) + ")")));
  };
  var getLayout2 = function(v) {
    if (v instanceof TidyTree) {
      return d3Tree_(unit);
    }
    ;
    if (v instanceof Dendrogram) {
      return d3Cluster_(unit);
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.HorizontalTreeD3 (line 24, column 1 - line 24, column 39): " + [v.constructor.name]);
  };
  var drawHorizontalTree = function(dictBind) {
    var bind92 = bind(dictBind);
    var discard115 = discard20(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var zoomableSVG2 = zoomableSVG(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var zoomableSVG1 = zoomableSVG2(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(treeType) {
          return function(json2) {
            return function(selector) {
              return bind92(liftEffect53(log2("HorizontalTreeD3: Drawing with TreeType = " + show114(treeType))))(function() {
                return bind92(liftEffect53(getWindowWidthHeight))(function(v) {
                  var root3 = hierarchyFromJSON_(json2);
                  var numberOfLevels = hNodeHeight_(root3) + 1;
                  var spacing = {
                    interChild: 10,
                    interLevel: v.value0 / numberOfLevels
                  };
                  var layout = treeSetNodeSize_(getLayout2(treeType))([spacing.interChild, spacing.interLevel]);
                  var laidOutRoot = runLayoutFn_(layout)(root3);
                  var v1 = treeMinMax_(laidOutRoot);
                  var yExtent = abs2(v1.yMax - v1.yMin);
                  var xExtent = abs2(v1.xMax - v1.xMin);
                  var pad = function(n) {
                    return n * 1.2;
                  };
                  return bind92(attach6(selector))(function(rootSel) {
                    var zoomConfig = {
                      minX: -xExtent * 0.1,
                      minY: pad(v1.xMin),
                      width: pad(yExtent),
                      height: pad(xExtent),
                      svgClass: "tree horizontal-tree",
                      innerClass: "tree-container",
                      innerWidth: v.value0,
                      innerHeight: v.value1,
                      scaleMin: 0.1,
                      scaleMax: 4
                    };
                    return bind92(zoomableSVG1(rootSel)(zoomConfig))(function(v2) {
                      return bind92(appendTo6(v2.zoomGroup)(Group.value)([classed18("links"), fontFamily2("sans-serif"), fontSize9(10)]))(function(linksGroup) {
                        return bind92(appendTo6(v2.zoomGroup)(Group.value)([classed18("nodes"), fontFamily2("sans-serif"), fontSize9(10)]))(function(nodesGroup) {
                          return bind92(simpleJoin4(linksGroup)(Path2.value)(links_(laidOutRoot))(keyIsID_))(function(theLinks) {
                            return discard115(setAttributes5(theLinks)([strokeWidth12(1.5), strokeColor14("#555"), fill14("none"), d9(horizontalLink)]))(function() {
                              return bind92(simpleJoin4(nodesGroup)(Group.value)(descendants_(laidOutRoot))(keyIsID_))(function(nodeGroups) {
                                return discard115(setAttributes5(nodeGroups)([transform([unwrapDatumFn(positionXYreflected)])]))(function() {
                                  return bind92(appendTo6(nodeGroups)(Circle.value)([fill14("#999"), radius10(4), strokeColor14("#555"), strokeWidth12(1.5)]))(function() {
                                    return bind92(appendTo6(nodeGroups)(Text2.value)([dy2(0.31), x18(function(d1) {
                                      var $44 = treeDatum_.hasChildren(d1);
                                      if ($44) {
                                        return 8;
                                      }
                                      ;
                                      return -8;
                                    }), textAnchor6(function(d1) {
                                      var $45 = treeDatum_.hasChildren(d1);
                                      if ($45) {
                                        return "start";
                                      }
                                      ;
                                      return "end";
                                    }), text16(treeDatum_.name), fill14("#333"), fontSize9(11)]))(function() {
                                      return pure56(v2.svg);
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            };
          };
        };
      };
    };
  };

  // output/D3.Viz.HorizontalTreeViz/index.js
  var bind24 = /* @__PURE__ */ bind(bindList);
  var append22 = /* @__PURE__ */ append(semigroupList);
  var show32 = /* @__PURE__ */ show(showNumber);
  var fromFoldable34 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map61 = /* @__PURE__ */ map(functorArray);
  var discard21 = /* @__PURE__ */ discard(discardUnit);
  var map119 = /* @__PURE__ */ map(functorList);
  var fromFoldable116 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var show115 = /* @__PURE__ */ show(showInt);
  var classed19 = /* @__PURE__ */ classed(toAttrString);
  var x19 = /* @__PURE__ */ x(toAttrNumber);
  var y17 = /* @__PURE__ */ y(toAttrNumber);
  var fill15 = /* @__PURE__ */ fill(toAttrString);
  var fontSize10 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text17 = /* @__PURE__ */ text6(toAttrString);
  var d10 = /* @__PURE__ */ d(toAttrStringFnI);
  var strokeColor15 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth13 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx8 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy8 = /* @__PURE__ */ cy(toAttrNumberFnI);
  var radius11 = /* @__PURE__ */ radius(toAttrNumber);
  var makeLinksAsList3 = function(v) {
    var grandchildLinks = bind24(v.value1)(makeLinksAsList3);
    var childLinks = bind24(v.value1)(function(v1) {
      return new Cons({
        source: {
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          x: v1.value0.x,
          y: v1.value0.y
        }
      }, Nil.value);
    });
    return append22(childLinks)(grandchildLinks);
  };
  var makeLinks5 = /* @__PURE__ */ (function() {
    var $69 = fromFoldable2(foldableList);
    return function($70) {
      return $69(makeLinksAsList3($70));
    };
  })();
  var horizontalLinkPath3 = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          return "M" + (show32(x115) + ("," + (show32(y113) + ("C" + (show32((x115 + x211) / 2) + ("," + (show32(y113) + (" " + (show32((x115 + x211) / 2) + ("," + (show32(y211) + (" " + (show32(x211) + ("," + show32(y211)))))))))))))));
        };
      };
    };
  };
  var hierDataToTree4 = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable34(map61(hierDataToTree4)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.HorizontalTreeViz (line 26, column 20 - line 28, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      depth: 0
    }, childrenList);
  };
  var draw9 = function(dictBind) {
    var discard115 = discard21(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return discard115(liftEffect53(log2("HorizontalTreeViz: Using Tree4 with horizontal projection")))(function() {
              var dataTree = hierDataToTree4(flareData);
              var config = {
                minSeparation: defaultTreeConfig.minSeparation,
                size: {
                  width: 1200 - 2 * 40,
                  height: 1600 - 2 * 40
                }
              };
              var positioned = tree2(config)(dataTree);
              var projectNode = function(v) {
                var projectedChildren = map119(projectNode)(v.value1);
                return new Node2((function() {
                  var $61 = {};
                  for (var $62 in v.value0) {
                    if ({}.hasOwnProperty.call(v.value0, $62)) {
                      $61[$62] = v["value0"][$62];
                    }
                    ;
                  }
                  ;
                  $61.x = v.value0.y;
                  $61.y = v.value0.x;
                  return $61;
                })(), projectedChildren);
              };
              var horizontalTree = projectNode(positioned);
              var nodes = fromFoldable116(horizontalTree);
              var links = makeLinks5(horizontalTree);
              return discard115(liftEffect53(log2("HorizontalTreeViz: Rendering " + (show115(length3(nodes)) + (" nodes, " + (show115(length3(links)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed19("horizontal-tree-viz")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x19(10), y17(20), fill15("#333"), fontSize10(16), text17("Horizontal Tree Layout (Reingold-Tilford)"), classed19("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed19("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed19("nodes")]))(function(nodesGroup) {
                          return bind121(simpleJoin4(linksGroup)(Path2.value)(links)(keyIsID_))(function(linkElements) {
                            return discard115(setAttributes5(linkElements)([d10(function(v) {
                              return function(v1) {
                                return horizontalLinkPath3(v.source.x + 40)(v.source.y + 40)(v.target.x + 40)(v.target.y + 40);
                              };
                            }), fill15("none"), strokeColor15("#555"), strokeWidth13(1.5), classed19("link")]))(function() {
                              return bind121(simpleJoin4(nodesGroup)(Circle.value)(nodes)(keyIsID_))(function(nodeElements) {
                                return discard115(setAttributes5(nodeElements)([cx8(function(v) {
                                  return function(v1) {
                                    return v.x + 40;
                                  };
                                }), cy8(function(v) {
                                  return function(v1) {
                                    return v.y + 40;
                                  };
                                }), radius11(4), fill15("#999"), strokeColor15("#555"), strokeWidth13(1.5), classed19("node")]))(function() {
                                  return discard115(liftEffect53(log2("HorizontalTreeViz: Rendering complete!")))(function() {
                                    return pure56(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.LesMiserables/index.js
  var classed20 = /* @__PURE__ */ classed(toAttrString);
  var strokeColor16 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeOpacity2 = /* @__PURE__ */ strokeOpacity(toAttrNumber);
  var fromFoldable35 = /* @__PURE__ */ fromFoldable(ordString)(foldableArray);
  var discard23 = /* @__PURE__ */ discard(discardUnit);
  var radius12 = /* @__PURE__ */ radius(toAttrNumber);
  var fill16 = /* @__PURE__ */ fill(toAttrStringFn);
  var strokeWidth14 = /* @__PURE__ */ strokeWidth(toAttrNumberDatumFn);
  var strokeColor1 = /* @__PURE__ */ strokeColor(toAttrStringDatumFn);
  var cx9 = /* @__PURE__ */ cx(toAttrNumberFn);
  var cy9 = /* @__PURE__ */ cy(toAttrNumberFn);
  var x110 = /* @__PURE__ */ x1(toAttrNumberDatumFn);
  var y18 = /* @__PURE__ */ y1(toAttrNumberDatumFn);
  var x24 = /* @__PURE__ */ x2(toAttrNumberDatumFn);
  var y24 = /* @__PURE__ */ y2(toAttrNumberDatumFn);
  var drawSimplified = function(dictBind) {
    var bind92 = bind(dictBind);
    var discard115 = discard23(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var zoomableSVG2 = zoomableSVG(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictMonadState) {
        return function(dictSimulationM2) {
          var SimulationM1 = dictSimulationM2.SimulationM1();
          var SelectionM1 = SimulationM1.SelectionM1();
          var attach6 = attach(SelectionM1);
          var zoomableSVG1 = zoomableSVG2(SelectionM1);
          var appendTo6 = appendTo(SelectionM1);
          var init5 = init3(SimulationM1);
          var simpleJoin4 = simpleJoin(SelectionM1);
          var setAttributes5 = setAttributes(SelectionM1);
          var addTickFunction2 = addTickFunction(dictSimulationM2);
          var on3 = on2(SelectionM1);
          var start7 = start2(SimulationM1);
          return function(forceLibrary5) {
            return function(activeForces) {
              return function(model) {
                return function(selector) {
                  return bind92(liftEffect53(getWindowWidthHeight))(function(v) {
                    return bind92(attach6(selector))(function(rootSel) {
                      return bind92(zoomableSVG1(rootSel)({
                        minX: -v.value0 / 2,
                        minY: -v.value1 / 2,
                        width: v.value0,
                        height: v.value1,
                        svgClass: "lesmis",
                        innerClass: "zoom-group",
                        innerWidth: v.value0,
                        innerHeight: v.value1,
                        scaleMin: 1,
                        scaleMax: 4
                      }))(function(v1) {
                        return bind92(appendTo6(v1.zoomGroup)(Group.value)([classed20("link"), strokeColor16("#999"), strokeOpacity2(0.6)]))(function(linksGroup) {
                          return bind92(appendTo6(v1.zoomGroup)(Group.value)([classed20("node"), strokeColor16("#fff"), strokeOpacity2(1.5)]))(function(nodesGroup) {
                            return bind92(init5({
                              nodes: model.nodes,
                              links: model.links,
                              forces: forceLibrary5,
                              activeForces,
                              config: {
                                alpha: 1,
                                alphaTarget: 0,
                                alphaMin: 1e-3,
                                alphaDecay: 0.0228,
                                velocityDecay: 0.4
                              },
                              keyFn: keyIsID_,
                              ticks: fromFoldable35([])
                            }))(function(v2) {
                              return bind92(simpleJoin4(nodesGroup)(Circle.value)(v2.nodes)(keyIsID_))(function(nodesSelection) {
                                return discard115(setAttributes5(nodesSelection)([radius12(5), fill16(function(v3) {
                                  return d3SchemeCategory10N_(toNumber(v3.group));
                                })]))(function() {
                                  return bind92(simpleJoin4(linksGroup)(Line.value)(v2.links)(keyIsID_))(function(linksSelection) {
                                    return discard115(setAttributes5(linksSelection)([strokeWidth14(function(d23) {
                                      return sqrt(d23.value);
                                    }), strokeColor1(function(d23) {
                                      return d3SchemeCategory10N_(toNumber(d23.target.group));
                                    })]))(function() {
                                      return discard115(addTickFunction2("nodes")(new Step3(nodesSelection, [cx9(function(v3) {
                                        return v3.x;
                                      }), cy9(function(v3) {
                                        return v3.y;
                                      })])))(function() {
                                        return discard115(addTickFunction2("links")(new Step3(linksSelection, [x110(function(d23) {
                                          return d23.source.x;
                                        }), y18(function(d23) {
                                          return d23.source.y;
                                        }), x24(function(d23) {
                                          return d23.target.x;
                                        }), y24(function(d23) {
                                          return d23.target.y;
                                        })])))(function() {
                                          return bind92(on3(nodesSelection)(new Drag(new CustomDrag("lesmis", simdrag_))))(function() {
                                            return discard115(start7)(function() {
                                              return pure56(unit);
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                };
              };
            };
          };
        };
      };
    };
  };

  // output/D3.Viz.LesMiserables.File/foreign.js
  function readJSONJS_(filecontents) {
    return decodeFile(filecontents);
  }
  var decodeFile = function(filecontents) {
    const json2 = JSON.parse(filecontents);
    const links = json2.links.map((d23) => Object.create(d23));
    const nodes = json2.nodes.map((d23) => ({
      id: d23.id,
      group: d23.group,
      x: 0,
      y: 0,
      vx: 0,
      vy: 0,
      fx: null,
      fy: null
    }));
    return { links, nodes };
  };

  // output/D3.Viz.LesMiserables.File/index.js
  var readGraphFromFileContents = function(v) {
    if (v instanceof Right) {
      return readJSONJS_(v.value0.body);
    }
    ;
    if (v instanceof Left) {
      return {
        links: [],
        nodes: []
      };
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.LesMiserables.File (line 10, column 1 - line 10, column 92): " + [v.constructor.name]);
  };

  // output/D3.Viz.LesMiserablesGUP/foreign.js
  function unsafeStringify(obj) {
    return JSON.stringify(obj, null, 2);
  }
  function setFxFy(obj) {
    return function(fx) {
      return function(fy) {
        obj.fx = fx;
        obj.fy = fy;
        return obj;
      };
    };
  }
  function clearFxFy(obj) {
    obj.fx = null;
    obj.fy = null;
    return obj;
  }
  var transitionNodesToGridPositions_ = (svgClass) => (nodeClass2) => (linkClass2) => (gridNodes) => (onComplete) => () => {
    console.log(`Starting grid transition for ${gridNodes.length} nodes`);
    console.log(`SVG selector: ${svgClass}, Node selector: ${nodeClass2}, Link selector: ${linkClass2}`);
    const svg2 = d3.select(svgClass);
    const nodes = svg2.selectAll(nodeClass2);
    if (nodes.empty()) {
      console.error(`Could not find ${nodeClass2} elements to transition`);
      onComplete();
      return;
    }
    console.log(`Found ${nodes.size()} nodes to transition`);
    const links = svg2.selectAll(linkClass2);
    console.log(`Found ${links.size()} links to transition`);
    const t = d3.transition().duration(1500);
    nodes.transition(t).attr("cx", (d23, i2) => {
      const gridNode = gridNodes[i2];
      if (gridNode && gridNode.fx !== null && gridNode.fx !== void 0) {
        return gridNode.fx;
      }
      return d23.x;
    }).attr("cy", (d23, i2) => {
      const gridNode = gridNodes[i2];
      if (gridNode && gridNode.fy !== null && gridNode.fy !== void 0) {
        return gridNode.fy;
      }
      return d23.y;
    }).on("end", function(d23, i2) {
      if (i2 === gridNodes.length - 1) {
        console.log("Grid transition complete, calling callback");
        onComplete();
      }
    });
    links.transition(t).attr("x1", function(d23) {
      const sourceIndex = gridNodes.findIndex((n) => n.id === d23.source.id);
      if (sourceIndex >= 0 && gridNodes[sourceIndex].fx !== null) {
        return gridNodes[sourceIndex].fx;
      }
      return d23.source.x;
    }).attr("y1", function(d23) {
      const sourceIndex = gridNodes.findIndex((n) => n.id === d23.source.id);
      if (sourceIndex >= 0 && gridNodes[sourceIndex].fy !== null) {
        return gridNodes[sourceIndex].fy;
      }
      return d23.source.y;
    }).attr("x2", function(d23) {
      const targetIndex = gridNodes.findIndex((n) => n.id === d23.source.id);
      if (targetIndex >= 0 && gridNodes[targetIndex].fx !== null) {
        return gridNodes[targetIndex].fx;
      }
      return d23.target.x;
    }).attr("y2", function(d23) {
      const targetIndex = gridNodes.findIndex((n) => n.id === d23.target.id);
      if (targetIndex >= 0 && gridNodes[targetIndex].fy !== null) {
        return gridNodes[targetIndex].fy;
      }
      return d23.target.y;
    });
  };

  // output/D3.Viz.LesMiserablesGUP.Render/index.js
  var radius13 = /* @__PURE__ */ radius(toAttrNumber);
  var fill17 = /* @__PURE__ */ fill(toAttrStringDatumFn);
  var strokeColor17 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeOpacity3 = /* @__PURE__ */ strokeOpacity(toAttrNumber);
  var classed21 = /* @__PURE__ */ classed(toAttrString);
  var strokeWidth15 = /* @__PURE__ */ strokeWidth(toAttrNumberDatumFn);
  var strokeColor18 = /* @__PURE__ */ strokeColor(toAttrStringDatumFn);
  var cx10 = /* @__PURE__ */ cx(toAttrNumberDatumFn);
  var cy10 = /* @__PURE__ */ cy(toAttrNumberDatumFn);
  var x111 = /* @__PURE__ */ x1(toAttrNumberDatumFn);
  var y19 = /* @__PURE__ */ y1(toAttrNumberDatumFn);
  var x25 = /* @__PURE__ */ x2(toAttrNumberDatumFn);
  var y25 = /* @__PURE__ */ y2(toAttrNumberDatumFn);
  var lesMisRenderCallbacks = function(dictMonad) {
    var bind92 = bind(dictMonad.Bind1());
    var pure56 = pure(dictMonad.Applicative0());
    return function(dictSelectionM) {
      var appendTo6 = appendTo(dictSelectionM);
      var on3 = on2(dictSelectionM);
      var setAttributes5 = setAttributes(dictSelectionM);
      return {
        onNodeEnter: function(enterSel) {
          return function(attrs) {
            return bind92(appendTo6(enterSel)(Circle.value)([radius13(attrs.nodeRadius), fill17(function(d23) {
              return d3SchemeCategory10N_(toNumber(d23.group));
            }), strokeColor17(attrs.nodeStrokeColor), strokeOpacity3(attrs.nodeStrokeWidth), classed21("enter")]))(function(nodeEnter) {
              return bind92(on3(nodeEnter)(new Drag(new CustomDrag("lesmis", simdrag_))))(function() {
                return pure56(nodeEnter);
              });
            });
          };
        },
        onNodeUpdate: function(updateSel) {
          return function(attrs) {
            return setAttributes5(updateSel)([fill17(function(d23) {
              return d3SchemeCategory10N_(toNumber(d23.group));
            }), classed21("update")]);
          };
        },
        onNodeExit: function(exitSel) {
          return setAttributes5(exitSel)([remove]);
        },
        onLinkEnter: function(enterSel) {
          return function(_attrs) {
            return bind92(appendTo6(enterSel)(Line.value)([strokeWidth15(function(d23) {
              return sqrt(d23.value);
            }), strokeColor18(function(d23) {
              return d3SchemeCategory10N_(toNumber(d23.target.group));
            }), classed21("enter")]))(function(linkEnter) {
              return pure56(linkEnter);
            });
          };
        },
        onLinkUpdate: function(updateSel) {
          return function(_attrs) {
            return setAttributes5(updateSel)([classed21("update")]);
          };
        },
        onLinkExit: function(exitSel) {
          return setAttributes5(exitSel)([remove]);
        },
        nodeTickAttrs: function(_attrs) {
          return [cx10(function(d23) {
            return d23.x;
          }), cy10(function(d23) {
            return d23.y;
          })];
        },
        linkTickAttrs: [x111(function(d23) {
          return d23.source.x;
        }), y19(function(d23) {
          return d23.source.y;
        }), x25(function(d23) {
          return d23.target.x;
        }), y25(function(d23) {
          return d23.target.y;
        })]
      };
    };
  };
  var defaultLesMisAttributes = {
    nodeRadius: 5,
    nodeStrokeColor: "#fff",
    nodeStrokeWidth: 1.5
  };

  // output/D3.Viz.LesMiserablesGUP/index.js
  var map62 = /* @__PURE__ */ map(functorArray);
  var classed23 = /* @__PURE__ */ classed(toAttrString);
  var strokeColor19 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeOpacity4 = /* @__PURE__ */ strokeOpacity(toAttrNumber);
  var fromFoldable36 = /* @__PURE__ */ fromFoldable(ordString)(foldableArray);
  var discard24 = /* @__PURE__ */ discard(discardUnit);
  var radius14 = /* @__PURE__ */ radius(toAttrNumber);
  var fill18 = /* @__PURE__ */ fill(toAttrStringFn);
  var strokeWidth16 = /* @__PURE__ */ strokeWidth(toAttrNumberDatumFn);
  var strokeColor110 = /* @__PURE__ */ strokeColor(toAttrStringDatumFn);
  var cx11 = /* @__PURE__ */ cx(toAttrNumberFn);
  var cy11 = /* @__PURE__ */ cy(toAttrNumberFn);
  var x113 = /* @__PURE__ */ x1(toAttrNumberDatumFn);
  var y110 = /* @__PURE__ */ y1(toAttrNumberDatumFn);
  var x26 = /* @__PURE__ */ x2(toAttrNumberDatumFn);
  var y26 = /* @__PURE__ */ y2(toAttrNumberDatumFn);
  var updateSimulation3 = function(dictBind) {
    return function(dictMonadEffect) {
      var Monad0 = dictMonadEffect.Monad0();
      var genericUpdateSimulation2 = genericUpdateSimulation(Monad0);
      var lesMisRenderCallbacks2 = lesMisRenderCallbacks(Monad0);
      return function(dictMonadState) {
        return function(dictSelectionM) {
          var genericUpdateSimulation1 = genericUpdateSimulation2(dictSelectionM);
          var lesMisRenderCallbacks1 = lesMisRenderCallbacks2(dictSelectionM);
          return function(dictSimulationM2) {
            var genericUpdateSimulation22 = genericUpdateSimulation1(dictSimulationM2);
            return function(selections) {
              return function(dataConfig) {
                return genericUpdateSimulation22(selections)(Circle.value)(Line.value)({
                  allNodes: dataConfig.allNodes,
                  allLinks: dataConfig.allLinks,
                  nodeFilter: dataConfig.nodeFilter,
                  linkFilter: Nothing.value,
                  nodeInitializers: [],
                  activeForces: new Just(dataConfig.activeForces),
                  config: Nothing.value
                })(keyIsID_)(keyIsID_)(defaultLesMisAttributes)(lesMisRenderCallbacks1);
              };
            };
          };
        };
      };
    };
  };
  var unpinAllNodes2 = function(nodes) {
    return map62(clearFxFy)(nodes);
  };
  var scaleAndOffset = function(scaleX2) {
    return function(scaleY2) {
      return function(offsetX) {
        return function(offsetY) {
          return function(v) {
            return {
              x: v.x * scaleX2 + offsetX,
              y: v.y * scaleY2 + offsetY
            };
          };
        };
      };
    };
  };
  var numberToGridPoint2 = function(columns) {
    return function(i2) {
      var d23 = toNumber(i2);
      var c = toNumber(columns);
      var x46 = remainder(d23)(c);
      var y46 = floor(d23 / c);
      return {
        x: x46,
        y: y46
      };
    };
  };
  var nodesToGridLayout = function(nodes) {
    return function(gridSpacing) {
      return function(_windowSize) {
        var nodeCount = length3(nodes);
        var columns = floor2(ceil(sqrt(toNumber(nodeCount))));
        var offset = -(toNumber(columns) * gridSpacing) / 2;
        var setGridPosition = function(i2) {
          return function(node) {
            var gridPt = numberToGridPoint2(columns)(i2);
            var finalPt = scaleAndOffset(gridSpacing)(gridSpacing)(offset)(offset)(gridPt);
            return setFxFy(node)(finalPt.x)(finalPt.y);
          };
        };
        return mapWithIndex3(setGridPosition)(nodes);
      };
    };
  };
  var drawSimplified2 = function(dictBind) {
    var bind92 = bind(dictBind);
    var discard115 = discard24(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var zoomableSVG2 = zoomableSVG(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictMonadState) {
        return function(dictSimulationM2) {
          var SimulationM1 = dictSimulationM2.SimulationM1();
          var SelectionM1 = SimulationM1.SelectionM1();
          var attach6 = attach(SelectionM1);
          var zoomableSVG1 = zoomableSVG2(SelectionM1);
          var appendTo6 = appendTo(SelectionM1);
          var init5 = init3(SimulationM1);
          var simpleJoin4 = simpleJoin(SelectionM1);
          var setAttributes5 = setAttributes(SelectionM1);
          var addTickFunction2 = addTickFunction(dictSimulationM2);
          var on3 = on2(SelectionM1);
          var start7 = start2(SimulationM1);
          return function(forceLibrary5) {
            return function(activeForces) {
              return function(model) {
                return function(selector) {
                  return bind92(liftEffect53(getWindowWidthHeight))(function(v) {
                    return bind92(attach6(selector))(function(rootSel) {
                      return bind92(zoomableSVG1(rootSel)({
                        minX: -v.value0 / 2,
                        minY: -v.value1 / 2,
                        width: v.value0,
                        height: v.value1,
                        svgClass: "lesmis",
                        innerClass: "zoom-group",
                        innerWidth: v.value0,
                        innerHeight: v.value1,
                        scaleMin: 1,
                        scaleMax: 4
                      }))(function(v1) {
                        return bind92(appendTo6(v1.zoomGroup)(Group.value)([classed23("link"), strokeColor19("#999"), strokeOpacity4(0.6)]))(function(linksGroup) {
                          return bind92(appendTo6(v1.zoomGroup)(Group.value)([classed23("node"), strokeColor19("#fff"), strokeOpacity4(1.5)]))(function(nodesGroup) {
                            return bind92(init5({
                              nodes: model.nodes,
                              links: model.links,
                              forces: forceLibrary5,
                              activeForces,
                              config: {
                                alpha: 1,
                                alphaTarget: 0,
                                alphaMin: 1e-3,
                                alphaDecay: 0.0228,
                                velocityDecay: 0.4
                              },
                              keyFn: keyIsID_,
                              ticks: fromFoldable36([])
                            }))(function(v2) {
                              return discard115((function() {
                                var v3 = head(v2.nodes);
                                if (v3 instanceof Just) {
                                  return liftEffect53(log2("AFTER SIMULATION (Myriel): " + unsafeStringify(v3.value0)));
                                }
                                ;
                                if (v3 instanceof Nothing) {
                                  return pure56(unit);
                                }
                                ;
                                throw new Error("Failed pattern match at D3.Viz.LesMiserablesGUP (line 113, column 3 - line 115, column 25): " + [v3.constructor.name]);
                              })())(function() {
                                return bind92(simpleJoin4(nodesGroup)(Circle.value)(v2.nodes)(keyIsID_))(function(nodesSelection) {
                                  return discard115(setAttributes5(nodesSelection)([radius14(5), fill18(function(v3) {
                                    return d3SchemeCategory10N_(toNumber(v3.group));
                                  })]))(function() {
                                    return bind92(simpleJoin4(linksGroup)(Line.value)(v2.links)(keyIsID_))(function(linksSelection) {
                                      return discard115(setAttributes5(linksSelection)([strokeWidth16(function(d23) {
                                        return sqrt(d23.value);
                                      }), strokeColor110(function(d23) {
                                        return d3SchemeCategory10N_(toNumber(d23.target.group));
                                      })]))(function() {
                                        return discard115(addTickFunction2("nodes")(new Step3(nodesSelection, [cx11(function(v3) {
                                          return v3.x;
                                        }), cy11(function(v3) {
                                          return v3.y;
                                        })])))(function() {
                                          return discard115(addTickFunction2("links")(new Step3(linksSelection, [x113(function(d23) {
                                            return d23.source.x;
                                          }), y110(function(d23) {
                                            return d23.source.y;
                                          }), x26(function(d23) {
                                            return d23.target.x;
                                          }), y26(function(d23) {
                                            return d23.target.y;
                                          })])))(function() {
                                            return bind92(on3(nodesSelection)(new Drag(new CustomDrag("lesmis", simdrag_))))(function() {
                                              return discard115(start7)(function() {
                                                return pure56({
                                                  nodes: new Just(nodesGroup),
                                                  links: new Just(linksGroup)
                                                });
                                              });
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                };
              };
            };
          };
        };
      };
    };
  };

  // output/PSD3.Internal.Generators.Line/foreign.js
  function createLineGenerator_(config) {
    return () => {
      return line_default().x((d23) => config.xScale(d23.x)).y((d23) => config.yScale(d23.y));
    };
  }
  function generateLinePath_(generator) {
    return (data) => generator(data);
  }

  // output/D3.Viz.LineChart/index.js
  var map63 = /* @__PURE__ */ map(functorArray);
  var minimum5 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum8 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var classed24 = /* @__PURE__ */ classed(toAttrString);
  var width15 = /* @__PURE__ */ width8(toAttrNumber);
  var height15 = /* @__PURE__ */ height8(toAttrNumber);
  var show33 = /* @__PURE__ */ show(showNumber);
  var d11 = /* @__PURE__ */ d(toAttrString);
  var fill19 = /* @__PURE__ */ fill(toAttrString);
  var strokeColor20 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth17 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var draw10 = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(dataPoints) {
          return function(selector) {
            var iWidth = innerWidth2(defaultDimensions);
            var iHeight = innerHeight2(defaultDimensions);
            var xValues = map63(function(v) {
              return v.x;
            })(dataPoints);
            var yValues = map63(function(v) {
              return v.y;
            })(dataPoints);
            var minX = fromMaybe(0)(minimum5(xValues));
            var maxX = fromMaybe(100)(maximum8(xValues));
            var minY = fromMaybe(0)(minimum5(yValues));
            var maxY = fromMaybe(100)(maximum8(yValues));
            return bind92(attach6(selector))(function(v) {
              return bind92(appendTo6(v)(Svg.value)([viewBox(0)(0)(defaultDimensions.width)(defaultDimensions.height), classed24("line-chart"), width15(defaultDimensions.width), height15(defaultDimensions.height)]))(function(svg2) {
                return bind92(appendTo6(svg2)(Group.value)([transform([function(v1) {
                  return "translate(" + (show33(defaultDimensions.margin.left) + ("," + (show33(defaultDimensions.margin.top) + ")")));
                }])]))(function(chartGroup) {
                  return bind92(liftEffect53(createLinearScale_({
                    domain: [minX, maxX],
                    range: [0, iWidth]
                  })))(function(xScale) {
                    return bind92(liftEffect53(createLinearScale_({
                      domain: [minY, maxY],
                      range: [iHeight, 0]
                    })))(function(yScale) {
                      return bind92(appendTo6(chartGroup)(Group.value)([classed24("x-axis"), transform([function(v1) {
                        return "translate(0," + (show33(iHeight) + ")");
                      }])]))(function(xAxisGroup) {
                        return bind92(appendTo6(chartGroup)(Group.value)([classed24("y-axis")]))(function(yAxisGroup) {
                          return bind92(liftEffect53(callAxis_(xAxisGroup)(axisBottom_(xScale))))(function() {
                            return bind92(liftEffect53(callAxis_(yAxisGroup)(axisLeft_(yScale))))(function() {
                              return bind92(liftEffect53(createLineGenerator_({
                                xScale,
                                yScale
                              })))(function(lineGen) {
                                var pathData = generateLinePath_(lineGen)(dataPoints);
                                return bind92(appendTo6(chartGroup)(Path2.value)([d11(pathData), fill19("none"), strokeColor20("#4a90e2"), strokeWidth17(2), classed24("line")]))(function() {
                                  return pure56(unit);
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.MultiLineChart/index.js
  var bind25 = /* @__PURE__ */ bind(bindMaybe);
  var readProp4 = /* @__PURE__ */ readProp(monadIdentity);
  var readString4 = /* @__PURE__ */ readString(monadIdentity);
  var pure26 = /* @__PURE__ */ pure(applicativeMaybe);
  var foldlWithIndex3 = /* @__PURE__ */ foldlWithIndex(foldableWithIndexArray);
  var nub4 = /* @__PURE__ */ nub(ordString);
  var map64 = /* @__PURE__ */ map(functorArray);
  var maximum9 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var minimum6 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var classed25 = /* @__PURE__ */ classed(toAttrString);
  var width16 = /* @__PURE__ */ width8(toAttrNumber);
  var height16 = /* @__PURE__ */ height8(toAttrNumber);
  var show34 = /* @__PURE__ */ show(showNumber);
  var d12 = /* @__PURE__ */ d(toAttrString);
  var strokeColor21 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth18 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var fill20 = /* @__PURE__ */ fill(toAttrString);
  var x20 = /* @__PURE__ */ x(toAttrNumber);
  var y20 = /* @__PURE__ */ y(toAttrNumber);
  var text18 = /* @__PURE__ */ text6(toAttrString);
  var textAnchor7 = /* @__PURE__ */ textAnchor(toAttrString);
  var compare9 = /* @__PURE__ */ compare(ordString);
  var parseCSVRow2 = function(row) {
    return bind25(hush(runExcept(readProp4("division")(row))))(function(divisionF) {
      return bind25(hush(runExcept(readString4(divisionF))))(function(division) {
        return bind25(hush(runExcept(readProp4("date")(row))))(function(dateF) {
          return bind25(hush(runExcept(readString4(dateF))))(function(date) {
            return bind25(hush(runExcept(readProp4("unemployment")(row))))(function(unemploymentF) {
              return bind25(hush(runExcept(readString4(unemploymentF))))(function(unemploymentStr) {
                return bind25(fromString(unemploymentStr))(function(unemployment) {
                  return pure26({
                    series: division,
                    date,
                    value: unemployment
                  });
                });
              });
            });
          });
        });
      });
    });
  };
  var linePath = function(chartWidth) {
    return function(chartHeight) {
      return function(maxValue) {
        return function(minValue) {
          return function(points) {
            var yScale = function(v) {
              return chartHeight - (v - minValue) / (maxValue - minValue) * chartHeight;
            };
            var dateCount = toNumber(length3(points));
            var xScale = function(i2) {
              return toNumber(i2) * (chartWidth / (dateCount - 1));
            };
            var pointToString = function(i2) {
              return function(pt) {
                var yPos = yScale(pt.value);
                var xPos = xScale(i2);
                var $63 = i2 === 0;
                if ($63) {
                  return "M " + (toString(xPos) + (" " + toString(yPos)));
                }
                ;
                return " L " + (toString(xPos) + (" " + toString(yPos)));
              };
            };
            if (points.length === 0) {
              return "";
            }
            ;
            return foldlWithIndex3(function(i2) {
              return function(acc) {
                return function(pt) {
                  return acc + pointToString(i2)(pt);
                };
              };
            })("")(points);
          };
        };
      };
    };
  };
  var groupBySeries = function(data$prime) {
    var series = nub4(map64(function(v) {
      return v.series;
    })(data$prime));
    var getSeriesData = function(s) {
      return filter(function(d1) {
        return d1.series === s;
      })(data$prime);
    };
    return map64(getSeriesData)(series);
  };
  var getYear = function(dateStr) {
    var v = take3(4)(dateStr);
    if (length5(v) === 4) {
      return new Just(v);
    }
    ;
    return Nothing.value;
  };
  var getDates = /* @__PURE__ */ (function() {
    var $78 = map64(function(v) {
      return v.date;
    });
    return function($79) {
      return nub4($78($79));
    };
  })();
  var draw11 = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure121 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(data$prime) {
          return function(selector) {
            var dims = {
              width: 928,
              height: 600,
              marginTop: 20,
              marginRight: 20,
              marginBottom: 30,
              marginLeft: 30
            };
            var chartWidth = dims.width - dims.marginLeft - dims.marginRight;
            var chartHeight = dims.height - dims.marginTop - dims.marginBottom;
            var allValues = map64(function(v) {
              return v.value;
            })(data$prime);
            var maxValue = fromMaybe(0)(maximum9(allValues));
            var minValue = fromMaybe(0)(minimum6(allValues));
            return bind121(attach6(selector))(function(v) {
              return bind121(appendTo6(v)(Svg.value)([classed25("multi-line-chart"), width16(dims.width), height16(dims.height), viewBox(0)(0)(dims.width)(dims.height)]))(function(svg2) {
                return bind121(appendTo6(svg2)(Group.value)([transform([function(v1) {
                  return "translate(" + (show34(dims.marginLeft) + ("," + (show34(dims.marginTop) + ")")));
                }]), classed25("chart")]))(function(chartGroup) {
                  var drawLine = function(points) {
                    var v1 = head(points);
                    if (v1 instanceof Nothing) {
                      return pure121(unit);
                    }
                    ;
                    if (v1 instanceof Just) {
                      var pathData = linePath(chartWidth)(chartHeight)(maxValue)(minValue)(points);
                      return bind121(appendTo6(chartGroup)(Path2.value)([d12(pathData), strokeColor21("#4682b4"), strokeWidth18(1.5), fill20("none"), classed25("line series-" + v1.value0.series)]))(function() {
                        return pure121(unit);
                      });
                    }
                    ;
                    throw new Error("Failed pattern match at D3.Viz.MultiLineChart (line 125, column 25 - line 137, column 20): " + [v1.constructor.name]);
                  };
                  var groupedData = groupBySeries(data$prime);
                  return bind121(traverse_16(drawLine)(groupedData))(function() {
                    return bind121(appendTo6(chartGroup)(Group.value)([classed25("y-axis")]))(function(yAxis) {
                      var yTicks2 = [0, 5, 10, 15];
                      var yScale = function(v1) {
                        return chartHeight - (v1 - minValue) / (maxValue - minValue) * chartHeight;
                      };
                      var drawYTick = function(value18) {
                        var tickY = yScale(value18);
                        return bind121(appendTo6(yAxis)(Text2.value)([x20(-5), y20(tickY + 4), text18(toString(value18) + "%"), textAnchor7("end"), classed25("axis-label")]))(function() {
                          return pure121(unit);
                        });
                      };
                      return bind121(traverse_16(drawYTick)(yTicks2))(function() {
                        return bind121(appendTo6(chartGroup)(Group.value)([transform([function(v1) {
                          return "translate(0," + (show34(chartHeight) + ")");
                        }]), classed25("x-axis")]))(function(xAxis) {
                          var allDates = sortBy(compare9)(getDates(data$prime));
                          var dateCount = toNumber(length3(allDates));
                          var xScale = function(i2) {
                            return toNumber(i2) * (chartWidth / (dateCount - 1));
                          };
                          var yearsToShow = ["2000", "2002", "2004", "2006", "2008", "2010", "2012"];
                          var drawXTick = function(year) {
                            var v1 = filter(function(d1) {
                              var v22 = getYear(d1);
                              if (v22 instanceof Just) {
                                return v22.value0 === year;
                              }
                              ;
                              if (v22 instanceof Nothing) {
                                return false;
                              }
                              ;
                              throw new Error("Failed pattern match at D3.Viz.MultiLineChart (line 179, column 28 - line 181, column 45): " + [v22.constructor.name]);
                            })(allDates);
                            if (v1.length === 0) {
                              return pure121(unit);
                            }
                            ;
                            var v2 = head(v1);
                            if (v2 instanceof Nothing) {
                              return pure121(unit);
                            }
                            ;
                            if (v2 instanceof Just) {
                              var v3 = findIndex(function(d1) {
                                return d1 === v2.value0;
                              })(allDates);
                              if (v3 instanceof Nothing) {
                                return pure121(unit);
                              }
                              ;
                              if (v3 instanceof Just) {
                                var tickX = xScale(v3.value0);
                                return bind121(appendTo6(xAxis)(Text2.value)([x20(tickX), y20(20), text18(year), textAnchor7("middle"), classed25("axis-label")]))(function() {
                                  return pure121(unit);
                                });
                              }
                              ;
                              throw new Error("Failed pattern match at D3.Viz.MultiLineChart (line 186, column 15 - line 197, column 28): " + [v3.constructor.name]);
                            }
                            ;
                            throw new Error("Failed pattern match at D3.Viz.MultiLineChart (line 183, column 20 - line 197, column 28): " + [v2.constructor.name]);
                          };
                          return bind121(traverse_16(drawXTick)(yearsToShow))(function() {
                            return pure121(unit);
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };
  var drawFromCSV = function(dictBind) {
    var draw116 = draw11(dictBind);
    return function(dictMonadEffect) {
      var draw210 = draw116(dictMonadEffect);
      return function(dictSelectionM) {
        var draw35 = draw210(dictSelectionM);
        return function(csvData) {
          return function(selector) {
            return draw35(mapMaybe(parseCSVRow2)(csvData))(selector);
          };
        };
      };
    };
  };

  // output/PSD3.Layout.Hierarchy.Pack/index.js
  var show35 = /* @__PURE__ */ show(showInt);
  var show116 = /* @__PURE__ */ show(showNumber);
  var elemIndex2 = /* @__PURE__ */ elemIndex(eqInt);
  var append112 = /* @__PURE__ */ append(semigroupArray);
  var map65 = /* @__PURE__ */ map(functorArray);
  var min8 = /* @__PURE__ */ min(ordNumber);
  var max12 = /* @__PURE__ */ max(ordNumber);
  var insert13 = /* @__PURE__ */ insert(ordInt);
  var fromFoldable37 = /* @__PURE__ */ fromFoldable(ordInt)(foldableArray);
  var sortWith2 = /* @__PURE__ */ sortWith(ordNumber);
  var foldl20 = /* @__PURE__ */ foldl(foldableArray);
  var max1 = /* @__PURE__ */ max(ordInt);
  var mod2 = /* @__PURE__ */ mod(euclideanRingInt);
  var lookup15 = /* @__PURE__ */ lookup(ordInt);
  var show210 = /* @__PURE__ */ show(/* @__PURE__ */ showArray(showInt));
  var map120 = /* @__PURE__ */ map(functorMaybe);
  var apply4 = /* @__PURE__ */ apply(applyMaybe);
  var bind26 = /* @__PURE__ */ bind(bindMaybe);
  var pure27 = /* @__PURE__ */ pure(applicativeMaybe);
  var minimumBy2 = /* @__PURE__ */ minimumBy(foldableArray);
  var comparing2 = /* @__PURE__ */ comparing(ordNumber);
  var PackNode = /* @__PURE__ */ (function() {
    function PackNode2(value0) {
      this.value0 = value0;
    }
    ;
    PackNode2.create = function(value0) {
      return new PackNode2(value0);
    };
    return PackNode2;
  })();
  var NoCollision = /* @__PURE__ */ (function() {
    function NoCollision2() {
    }
    ;
    NoCollision2.value = new NoCollision2();
    return NoCollision2;
  })();
  var CollisionAt = /* @__PURE__ */ (function() {
    function CollisionAt2(value0) {
      this.value0 = value0;
    }
    ;
    CollisionAt2.create = function(value0) {
      return new CollisionAt2(value0);
    };
    return CollisionAt2;
  })();
  var shortenChainOnly = function(aId) {
    return function(jId) {
      return function(chain) {
        var v = elemIndex2(jId)(chain);
        var v1 = elemIndex2(aId)(chain);
        if (v1 instanceof Just && v instanceof Just) {
          var $123 = v.value0 > v1.value0;
          if ($123) {
            var before = take(v1.value0 + 1 | 0)(chain);
            var after = drop(v.value0)(chain);
            return append112(before)(after);
          }
          ;
          var $124 = v.value0 < v1.value0;
          if ($124) {
            return slice(v.value0)(v1.value0 + 1 | 0)(chain);
          }
          ;
          return chain;
        }
        ;
        return chain;
      };
    };
  };
  var scaleToSize = function(config) {
    return function(v) {
      var scaleNode2 = function(scale) {
        return function(parentX) {
          return function(parentY) {
            return function(v1) {
              var scaledY = parentY + scale * v1.value0.y;
              var scaledX = parentX + scale * v1.value0.x;
              var scaledR = scale * v1.value0.r;
              return new PackNode({
                data_: v1.value0.data_,
                depth: v1.value0.depth,
                height: v1.value0.height,
                value: v1.value0.value,
                x: scaledX,
                y: scaledY,
                r: scaledR,
                children: map65(scaleNode2(scale)(scaledX)(scaledY))(v1.value0.children)
              });
            };
          };
        };
      };
      var k = min8(config.size.width)(config.size.height) / (2 * v.value0.r);
      var scaledRootR = k * v.value0.r;
      var centerY = config.size.height / 2;
      var centerX = config.size.width / 2;
      return new PackNode({
        data_: v.value0.data_,
        depth: v.value0.depth,
        height: v.value0.height,
        value: v.value0.value,
        x: centerX,
        y: centerY,
        r: scaledRootR,
        children: map65(scaleNode2(k)(centerX)(centerY))(v.value0.children)
      });
    };
  };
  var place = function(b2) {
    return function(a2) {
      return function(c) {
        var dy4 = b2.y - a2.y;
        var dx = b2.x - a2.x;
        var d23 = dx * dx + dy4 * dy4;
        var $139 = d23 !== 0;
        if ($139) {
          var b22 = (b2.r + c.r) * (b2.r + c.r);
          var a22 = (a2.r + c.r) * (a2.r + c.r);
          var $140 = a22 > b22;
          if ($140) {
            var x46 = (d23 + b22 - a22) / (2 * d23);
            var y46 = sqrt(max12(0)(b22 / d23 - x46 * x46));
            return {
              x: b2.x - x46 * dx - y46 * dy4,
              y: b2.y - x46 * dy4 + y46 * dx,
              r: c.r
            };
          }
          ;
          var x46 = (d23 + a22 - b22) / (2 * d23);
          var y46 = sqrt(max12(0)(a22 / d23 - x46 * x46));
          return {
            x: a2.x + x46 * dx - y46 * dy4,
            y: a2.y + x46 * dy4 + y46 * dx,
            r: c.r
          };
        }
        ;
        return {
          x: a2.x + c.r,
          y: a2.y,
          r: c.r
        };
      };
    };
  };
  var insertInChain = function(aId) {
    return function(_bId) {
      return function(newId2) {
        return function(chain) {
          var v = elemIndex2(aId)(chain);
          if (v instanceof Nothing) {
            return chain;
          }
          ;
          if (v instanceof Just) {
            return fromMaybe(chain)(insertAt(v.value0 + 1 | 0)(newId2)(chain));
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 160, column 3 - line 164, column 62): " + [v.constructor.name]);
        };
      };
    };
  };
  var insertBetween = function(aId) {
    return function(bId) {
      return function(newCircle) {
        return function(state3) {
          var newCircles = insert13(state3.nextId)(newCircle)(state3.circles);
          var newChain = insertInChain(aId)(bId)(state3.nextId)(state3.frontChain);
          return {
            circles: newCircles,
            frontChain: newChain,
            nextId: state3.nextId + 1 | 0
          };
        };
      };
    };
  };
  var initState = function(c0) {
    return function(c1) {
      return function(c2) {
        var c1$prime = {
          r: c1.r,
          x: c0.r,
          y: 0
        };
        var c0$prime = {
          r: c0.r,
          x: -c1.r,
          y: 0
        };
        var c2$prime = place(c1$prime)(c0$prime)(c2);
        var circles = fromFoldable37([new Tuple(0, c0$prime), new Tuple(1, c1$prime), new Tuple(2, c2$prime)]);
        return {
          circles,
          frontChain: [0, 2, 1],
          nextId: 3
        };
      };
    };
  };
  var hierarchy2 = function(v) {
    var go2 = function(node) {
      return function(depth) {
        if (node.children instanceof Nothing) {
          return new PackNode({
            data_: node.data_,
            depth,
            height: 0,
            value: fromMaybe(0)(node.value),
            children: [],
            x: 0,
            y: 0,
            r: 0
          });
        }
        ;
        if (node.children instanceof Just) {
          var childNodes2 = map65(function(v1) {
            return go2(v1)(depth + 1 | 0);
          })(node.children.value0);
          var sortedChildren = sortWith2(function(v1) {
            return -v1.value0.value;
          })(childNodes2);
          var sumValue = foldl20(function(acc) {
            return function(v1) {
              return acc + v1.value0.value;
            };
          })(0)(sortedChildren);
          var childHeights = map65(function(v1) {
            return v1.value0.height;
          })(sortedChildren);
          var maxChildHeight = foldl20(max1)(0)(childHeights);
          return new PackNode({
            data_: node.data_,
            depth,
            height: maxChildHeight + 1 | 0,
            value: sumValue,
            children: sortedChildren,
            x: 0,
            y: 0,
            r: 0
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 653, column 7 - line 685, column 16): " + [node.children.constructor.name]);
      };
    };
    return go2(v)(0);
  };
  var getNextId = function(nodeId) {
    return function(chain) {
      var v = elemIndex2(nodeId)(chain);
      if (v instanceof Nothing) {
        return Nothing.value;
      }
      ;
      if (v instanceof Just) {
        var nextIdx = mod2(v.value0 + 1 | 0)(length3(chain));
        return index2(chain)(nextIdx);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 126, column 3 - line 130, column 35): " + [v.constructor.name]);
    };
  };
  var getChainSegmentFrom = function(startId) {
    return function(chain) {
      var v = elemIndex2(startId)(chain);
      if (v instanceof Nothing) {
        return [];
      }
      ;
      if (v instanceof Just) {
        var before = take(v.value0)(chain);
        var after = drop(v.value0 + 1 | 0)(chain);
        return append112(after)(before);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 213, column 3 - line 221, column 24): " + [v.constructor.name]);
    };
  };
  var epsilon6 = 1e-6;
  var intersects = function(a2) {
    return function(b2) {
      var dy4 = b2.y - a2.y;
      var dx = b2.x - a2.x;
      var dr = a2.r + b2.r - epsilon6;
      return dr > 0 && dr * dr > dx * dx + dy4 * dy4;
    };
  };
  var findFirstCollision = function(idsToCheck) {
    return function(newCircle) {
      return function(circles) {
        return findMap(function(id5) {
          var v = lookup15(id5)(circles);
          if (v instanceof Just) {
            var $162 = intersects(v.value0)(newCircle);
            if ($162) {
              return new Just(id5);
            }
            ;
            return Nothing.value;
          }
          ;
          if (v instanceof Nothing) {
            return Nothing.value;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 227, column 5 - line 232, column 25): " + [v.constructor.name]);
        })(idsToCheck);
      };
    };
  };
  var walkChainForCollision = function(startId) {
    return function(newCircle) {
      return function(state3) {
        var idsToCheck = getChainSegmentFrom(startId)(state3.frontChain);
        var v = findFirstCollision(idsToCheck)(newCircle)(state3.circles);
        if (v instanceof Just) {
          return new CollisionAt(v.value0);
        }
        ;
        if (v instanceof Nothing) {
          return NoCollision.value;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 243, column 5 - line 245, column 29): " + [v.constructor.name]);
      };
    };
  };
  var tryPlaceCircleWithLimit = function($copy_maxRetries) {
    return function($copy_newCircle) {
      return function($copy_aId) {
        return function($copy_bId) {
          return function($copy_state) {
            var $tco_var_maxRetries = $copy_maxRetries;
            var $tco_var_newCircle = $copy_newCircle;
            var $tco_var_aId = $copy_aId;
            var $tco_var_bId = $copy_bId;
            var $tco_done = false;
            var $tco_result;
            function $tco_loop(maxRetries, newCircle, aId, bId, state3) {
              if (maxRetries <= 0) {
                var v = unsafePerformEffect(log2("\u274C RETRY LIMIT HIT! Failed to place circle r=" + show116(newCircle.r)));
                $tco_done = true;
                return insertBetween(aId)(bId)(newCircle)(state3);
              }
              ;
              if (otherwise) {
                var v = lookup15(bId)(state3.circles);
                var v1 = lookup15(aId)(state3.circles);
                if (v1 instanceof Just && v instanceof Just) {
                  var positioned = place(v.value0)(v1.value0)(newCircle);
                  var v2 = unsafePerformEffect(log2("  Try r=" + (show116(newCircle.r) + (" at (" + (show35(aId) + ("," + (show35(bId) + (")" + (" -> pos=(" + (show116(positioned.x) + ("," + (show116(positioned.y) + (")" + (" [retries left: " + (show35(maxRetries) + "]")))))))))))))));
                  var collisionResult = walkChainForCollision(bId)(positioned)(state3);
                  if (collisionResult instanceof NoCollision) {
                    var v3 = unsafePerformEffect(log2("    \u2705 NO COLLISION - placed successfully"));
                    $tco_done = true;
                    return insertBetween(aId)(bId)(positioned)(state3);
                  }
                  ;
                  if (collisionResult instanceof CollisionAt) {
                    var v3 = unsafePerformEffect(log2("    \u274C COLLISION at circle " + (show35(collisionResult.value0) + (" - shortening chain and retrying with (" + (show35(aId) + ("," + (show35(collisionResult.value0) + ")")))))));
                    var shortenedChain = shortenChainOnly(aId)(collisionResult.value0)(state3.frontChain);
                    var v4 = unsafePerformEffect(log2("       Chain before: " + show210(state3.frontChain)));
                    var v5 = unsafePerformEffect(log2("       Chain after:  " + show210(shortenedChain)));
                    var stateWithShortenedChain = {
                      circles: state3.circles,
                      nextId: state3.nextId,
                      frontChain: shortenedChain
                    };
                    $tco_var_maxRetries = maxRetries - 1 | 0;
                    $tco_var_newCircle = newCircle;
                    $tco_var_aId = aId;
                    $tco_var_bId = collisionResult.value0;
                    $copy_state = stateWithShortenedChain;
                    return;
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 345, column 13 - line 364, column 101): " + [collisionResult.constructor.name]);
                }
                ;
                $tco_done = true;
                return state3;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 321, column 1 - line 321, column 91): " + [maxRetries.constructor.name, newCircle.constructor.name, aId.constructor.name, bId.constructor.name, state3.constructor.name]);
            }
            ;
            while (!$tco_done) {
              $tco_result = $tco_loop($tco_var_maxRetries, $tco_var_newCircle, $tco_var_aId, $tco_var_bId, $copy_state);
            }
            ;
            return $tco_result;
          };
        };
      };
    };
  };
  var tryPlaceCircle = /* @__PURE__ */ tryPlaceCircleWithLimit(100);
  var epsilon4 = 1e-9;
  var enclosesWeak = function(a2) {
    return function(b2) {
      var dy4 = b2.y - a2.y;
      var dx = b2.x - a2.x;
      var dr = a2.r - b2.r + max12(a2.r)(max12(b2.r)(1)) * epsilon4;
      return dr > 0 && dr * dr > dx * dx + dy4 * dy4;
    };
  };
  var enclosesWeakAll = function(a2) {
    return function(bs) {
      return all2(enclosesWeak(a2))(bs);
    };
  };
  var enclosesNot = function(a2) {
    return function(b2) {
      var dy4 = b2.y - a2.y;
      var dx = b2.x - a2.x;
      var dr = a2.r - b2.r;
      return dr < 0 || dr * dr < dx * dx + dy4 * dy4;
    };
  };
  var encloseBasis3 = function(a2) {
    return function(b2) {
      return function(c) {
        var d1 = a2.x * a2.x + a2.y * a2.y - a2.r * a2.r;
        var d23 = d1 - b2.x * b2.x - b2.y * b2.y + b2.r * b2.r;
        var d32 = d1 - c.x * c.x - c.y * c.y + c.r * c.r;
        var c3 = c.r - a2.r;
        var c2 = b2.r - a2.r;
        var b3 = a2.y - c.y;
        var b22 = a2.y - b2.y;
        var a3 = a2.x - c.x;
        var a22 = a2.x - b2.x;
        var ab = a3 * b22 - a22 * b3;
        var xa = (b22 * d32 - b3 * d23) / (ab * 2) - a2.x;
        var xb = (b3 * c2 - b22 * c3) / ab;
        var ya = (a3 * d23 - a22 * d32) / (ab * 2) - a2.y;
        var bigC = xa * xa + ya * ya - a2.r * a2.r;
        var yb = (a22 * c3 - a3 * c2) / ab;
        var bigA = xb * xb + yb * yb - 1;
        var bigB = 2 * (a2.r + xa * xb + ya * yb);
        var r = (function() {
          var $177 = abs2(bigA) > epsilon6;
          if ($177) {
            return -(bigB + sqrt(bigB * bigB - 4 * bigA * bigC)) / (2 * bigA);
          }
          ;
          return -bigC / bigB;
        })();
        return {
          x: a2.x + xa + xb * r,
          y: a2.y + ya + yb * r,
          r
        };
      };
    };
  };
  var encloseBasis2 = function(a2) {
    return function(b2) {
      var y212 = b2.y - a2.y;
      var x212 = b2.x - a2.x;
      var r21 = b2.r - a2.r;
      var l = sqrt(x212 * x212 + y212 * y212);
      return {
        x: (a2.x + b2.x + x212 / l * r21) / 2,
        y: (a2.y + b2.y + y212 / l * r21) / 2,
        r: (l + a2.r + b2.r) / 2
      };
    };
  };
  var extendBasis = function(basis2) {
    return function(p2) {
      if (enclosesWeakAll(p2)(basis2)) {
        return [p2];
      }
      ;
      if (otherwise) {
        var n = length3(basis2);
        var findTwoCircleBasis = function($copy_i) {
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(i2) {
            if (i2 >= n) {
              $tco_done = true;
              return Nothing.value;
            }
            ;
            if (otherwise) {
              var v2 = index2(basis2)(i2);
              if (v2 instanceof Just) {
                var candidate = encloseBasis2(v2.value0)(p2);
                var $182 = enclosesNot(p2)(v2.value0) && enclosesWeakAll(candidate)(basis2);
                if ($182) {
                  $tco_done = true;
                  return new Just([v2.value0, p2]);
                }
                ;
                $copy_i = i2 + 1 | 0;
                return;
              }
              ;
              if (v2 instanceof Nothing) {
                $copy_i = i2 + 1 | 0;
                return;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 538, column 11 - line 544, column 50): " + [v2.constructor.name]);
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 534, column 5 - line 534, column 54): " + [i2.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($copy_i);
          }
          ;
          return $tco_result;
        };
        var findInnerPair = function($copy_i) {
          return function($copy_j) {
            var $tco_var_i = $copy_i;
            var $tco_done1 = false;
            var $tco_result;
            function $tco_loop(i2, j) {
              if (j >= n) {
                $tco_done1 = true;
                return Nothing.value;
              }
              ;
              if (otherwise) {
                var v2 = index2(basis2)(j);
                var v12 = index2(basis2)(i2);
                if (v12 instanceof Just && v2 instanceof Just) {
                  var cjp = encloseBasis2(v2.value0)(p2);
                  var cip = encloseBasis2(v12.value0)(p2);
                  var cij = encloseBasis2(v12.value0)(v2.value0);
                  var candidate = encloseBasis3(v12.value0)(v2.value0)(p2);
                  var $188 = enclosesNot(cij)(p2) && (enclosesNot(cip)(v2.value0) && (enclosesNot(cjp)(v12.value0) && enclosesWeakAll(candidate)(basis2)));
                  if ($188) {
                    $tco_done1 = true;
                    return new Just([v12.value0, v2.value0, p2]);
                  }
                  ;
                  $tco_var_i = i2;
                  $copy_j = j + 1 | 0;
                  return;
                }
                ;
                $tco_var_i = i2;
                $copy_j = j + 1 | 0;
                return;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 554, column 5 - line 554, column 56): " + [i2.constructor.name, j.constructor.name]);
            }
            ;
            while (!$tco_done1) {
              $tco_result = $tco_loop($tco_var_i, $copy_j);
            }
            ;
            return $tco_result;
          };
        };
        var findThreeCircleBasis = function($copy_i) {
          var $tco_done2 = false;
          var $tco_result;
          function $tco_loop(i2) {
            if (i2 >= (n - 1 | 0)) {
              $tco_done2 = true;
              return Nothing.value;
            }
            ;
            if (otherwise) {
              var v2 = findInnerPair(i2)(i2 + 1 | 0);
              if (v2 instanceof Just) {
                $tco_done2 = true;
                return new Just(v2.value0);
              }
              ;
              if (v2 instanceof Nothing) {
                $copy_i = i2 + 1 | 0;
                return;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 550, column 11 - line 552, column 52): " + [v2.constructor.name]);
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 546, column 5 - line 546, column 56): " + [i2.constructor.name]);
          }
          ;
          while (!$tco_done2) {
            $tco_result = $tco_loop($copy_i);
          }
          ;
          return $tco_result;
        };
        var v = findTwoCircleBasis(0);
        if (v instanceof Just) {
          return v.value0;
        }
        ;
        if (v instanceof Nothing) {
          var v1 = findThreeCircleBasis(0);
          if (v1 instanceof Just) {
            return v1.value0;
          }
          ;
          if (v1 instanceof Nothing) {
            return basis2;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 528, column 11 - line 530, column 29): " + [v1.constructor.name]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 525, column 7 - line 530, column 29): " + [v.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 521, column 1 - line 521, column 54): " + [basis2.constructor.name, p2.constructor.name]);
    };
  };
  var encloseBasis1 = function(a2) {
    return {
      x: a2.x,
      y: a2.y,
      r: a2.r
    };
  };
  var encloseBasis = function(basis2) {
    var v = length3(basis2);
    if (v === 1) {
      return fromMaybe({
        x: 0,
        y: 0,
        r: 0
      })(map120(encloseBasis1)(index2(basis2)(0)));
    }
    ;
    if (v === 2) {
      return fromMaybe({
        x: 0,
        y: 0,
        r: 0
      })(apply4(map120(encloseBasis2)(index2(basis2)(0)))(index2(basis2)(1)));
    }
    ;
    if (v === 3) {
      return fromMaybe({
        x: 0,
        y: 0,
        r: 0
      })(apply4(apply4(map120(encloseBasis3)(index2(basis2)(0)))(index2(basis2)(1)))(index2(basis2)(2)));
    }
    ;
    return {
      x: 0,
      y: 0,
      r: 0
    };
  };
  var packEnclose = function(circles) {
    var n = length3(circles);
    var go2 = function($copy_i) {
      return function($copy_basis) {
        return function($copy_maybeE) {
          var $tco_var_i = $copy_i;
          var $tco_var_basis = $copy_basis;
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(i2, basis2, maybeE) {
            if (i2 >= n) {
              if (maybeE instanceof Just) {
                $tco_done = true;
                return maybeE.value0;
              }
              ;
              if (maybeE instanceof Nothing) {
                $tco_done = true;
                return {
                  x: 0,
                  y: 0,
                  r: 0
                };
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 579, column 11 - line 581, column 48): " + [maybeE.constructor.name]);
            }
            ;
            if (otherwise) {
              var v = index2(circles)(i2);
              if (v instanceof Nothing) {
                $tco_var_i = i2 + 1 | 0;
                $tco_var_basis = basis2;
                $copy_maybeE = maybeE;
                return;
              }
              ;
              if (v instanceof Just) {
                if (maybeE instanceof Just && enclosesWeak(maybeE.value0)(v.value0)) {
                  $tco_var_i = i2 + 1 | 0;
                  $tco_var_basis = basis2;
                  $copy_maybeE = maybeE;
                  return;
                }
                ;
                var newBasis = extendBasis(basis2)(v.value0);
                var newE = encloseBasis(newBasis);
                $tco_var_i = 0;
                $tco_var_basis = newBasis;
                $copy_maybeE = new Just(newE);
                return;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 583, column 11 - line 592, column 47): " + [v.constructor.name]);
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 576, column 5 - line 576, column 56): " + [i2.constructor.name, basis2.constructor.name, maybeE.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($tco_var_i, $tco_var_basis, $copy_maybeE);
          }
          ;
          return $tco_result;
        };
      };
    };
    return go2(0)([])(Nothing.value);
  };
  var defaultPackConfig = /* @__PURE__ */ (function() {
    return {
      size: {
        width: 1,
        height: 1
      },
      padding: 0,
      radius: Nothing.value
    };
  })();
  var calculateScore = function(a2) {
    return function(b2) {
      var ab = a2.r + b2.r;
      var dx = (a2.x * b2.r + b2.x * a2.r) / ab;
      var dy4 = (a2.y * b2.r + b2.y * a2.r) / ab;
      return dx * dx + dy4 * dy4;
    };
  };
  var scoreNode = function(nodeId) {
    return function(state3) {
      return bind26(lookup15(nodeId)(state3.circles))(function(node) {
        return bind26(getNextId(nodeId)(state3.frontChain))(function(nextId) {
          return bind26(lookup15(nextId)(state3.circles))(function(next2) {
            return pure27({
              nodeId,
              score: calculateScore(node)(next2)
            });
          });
        });
      });
    };
  };
  var findBestPair = function(state3) {
    var scored = mapMaybe(function(nodeId) {
      return scoreNode(nodeId)(state3);
    })(state3.frontChain);
    var bestNode = minimumBy2(comparing2(function(v) {
      return v.score;
    }))(scored);
    if (bestNode instanceof Nothing) {
      return Nothing.value;
    }
    ;
    if (bestNode instanceof Just) {
      return bind26(getNextId(bestNode.value0.nodeId)(state3.frontChain))(function(nextId) {
        return pure27(new Tuple(bestNode.value0.nodeId, nextId));
      });
    }
    ;
    throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 151, column 5 - line 155, column 40): " + [bestNode.constructor.name]);
  };
  var assignRadii = function(config) {
    return function(v) {
      if (v.value0.children.length === 0) {
        var r = (function() {
          if (config.radius instanceof Just) {
            return config.radius.value0(v.value0.data_);
          }
          ;
          if (config.radius instanceof Nothing) {
            return sqrt(v.value0.value);
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 719, column 15 - line 721, column 39): " + [config.radius.constructor.name]);
        })();
        return new PackNode({
          data_: v.value0.data_,
          depth: v.value0.depth,
          height: v.value0.height,
          value: v.value0.value,
          children: v.value0.children,
          x: v.value0.x,
          y: v.value0.y,
          r: max12(0)(r)
        });
      }
      ;
      return new PackNode({
        data_: v.value0.data_,
        depth: v.value0.depth,
        height: v.value0.height,
        value: v.value0.value,
        x: v.value0.x,
        y: v.value0.y,
        r: v.value0.r,
        children: map65(assignRadii(config))(v.value0.children)
      });
    };
  };
  var addCircle = function(newCircle) {
    return function(state3) {
      var v = unsafePerformEffect(log2("\n\u27A4 Adding circle r=" + (show116(newCircle.r) + (" (total circles so far: " + (show35(size3(state3.circles)) + ")")))));
      var v1 = unsafePerformEffect(log2("  Current front chain: " + show210(state3.frontChain)));
      var v2 = findBestPair(state3);
      if (v2 instanceof Nothing) {
        return state3;
      }
      ;
      if (v2 instanceof Just) {
        var v3 = unsafePerformEffect(log2("  Best pair: (" + (show35(v2.value0.value0) + ("," + (show35(v2.value0.value1) + ")")))));
        var result = tryPlaceCircle(newCircle)(v2.value0.value0)(v2.value0.value1)(state3);
        return result;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 379, column 5 - line 386, column 18): " + [v2.constructor.name]);
    };
  };
  var packSiblingsMap = function(inputCircles) {
    var n = length3(inputCircles);
    var $222 = n === 0;
    if ($222) {
      return {
        circles: [],
        radius: 0
      };
    }
    ;
    var $223 = n === 1;
    if ($223) {
      var v = index2(inputCircles)(0);
      if (v instanceof Just) {
        return {
          circles: [{
            r: v.value0.r,
            x: 0,
            y: 0
          }],
          radius: v.value0.r
        };
      }
      ;
      if (v instanceof Nothing) {
        return {
          circles: [],
          radius: 0
        };
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Pack (line 396, column 7 - line 398, column 48): " + [v.constructor.name]);
    }
    ;
    var $226 = n === 2;
    if ($226) {
      var v = index2(inputCircles)(1);
      var v1 = index2(inputCircles)(0);
      if (v1 instanceof Just && v instanceof Just) {
        var c1$prime = {
          r: v.value0.r,
          x: v1.value0.r,
          y: 0
        };
        var c0$prime = {
          r: v1.value0.r,
          x: -v.value0.r,
          y: 0
        };
        return {
          circles: [c0$prime, c1$prime],
          radius: v1.value0.r + v.value0.r
        };
      }
      ;
      return {
        circles: [],
        radius: 0
      };
    }
    ;
    var v = index2(inputCircles)(2);
    var v1 = index2(inputCircles)(1);
    var v2 = index2(inputCircles)(0);
    if (v2 instanceof Just && (v1 instanceof Just && v instanceof Just)) {
      var remaining = drop(3)(inputCircles);
      var initialState7 = initState(v2.value0)(v1.value0)(v.value0);
      var finalState = foldl20(flip(addCircle))(initialState7)(remaining);
      var positioned = mapMaybe(function(i2) {
        return lookup15(i2)(finalState.circles);
      })(range2(0)(n - 1 | 0));
      var enclosing = packEnclose(positioned);
      var translated = map65(function(c) {
        return {
          r: c.r,
          x: c.x - enclosing.x,
          y: c.y - enclosing.y
        };
      })(positioned);
      return {
        circles: translated,
        radius: enclosing.r
      };
    }
    ;
    return {
      circles: [],
      radius: 0
    };
  };
  var packChildren = function(k) {
    return function(config) {
      return function(v) {
        var updateNodePosition = function(v1) {
          return function(c) {
            return new PackNode({
              data_: v1.value0.data_,
              depth: v1.value0.depth,
              height: v1.value0.height,
              value: v1.value0.value,
              children: v1.value0.children,
              r: v1.value0.r,
              x: c.x,
              y: c.y
            });
          };
        };
        var removePadding = function(p2) {
          return function(c) {
            return {
              x: c.x,
              y: c.y,
              r: c.r - p2
            };
          };
        };
        var nodeToCircle = function(v1) {
          return {
            x: v1.value0.x,
            y: v1.value0.y,
            r: v1.value0.r
          };
        };
        var addPadding = function(p2) {
          return function(c) {
            return {
              x: c.x,
              y: c.y,
              r: c.r + p2
            };
          };
        };
        if (v.value0.children.length === 0) {
          return new PackNode(v.value0);
        }
        ;
        var paddingScaled = config.padding * k;
        var packedKids = map65(packChildren(k)(config))(v.value0.children);
        var inputCircles = map65((function() {
          var $249 = addPadding(paddingScaled);
          return function($250) {
            return $249(nodeToCircle($250));
          };
        })())(packedKids);
        var packed = packSiblingsMap(inputCircles);
        var circlesWithoutPadding = map65(removePadding(paddingScaled))(packed.circles);
        var updatedKids = zipWith(updateNodePosition)(packedKids)(circlesWithoutPadding);
        var nodeWithR = {
          data_: v.value0.data_,
          depth: v.value0.depth,
          height: v.value0.height,
          value: v.value0.value,
          x: v.value0.x,
          y: v.value0.y,
          r: packed.radius + paddingScaled,
          children: updatedKids
        };
        return new PackNode(nodeWithR);
      };
    };
  };
  var pack = function(config) {
    return function(root3) {
      var withRadii = assignRadii(config)(root3);
      var firstPack = packChildren(1)({
        size: config.size,
        radius: config.radius,
        padding: 0
      })(withRadii);
      var k = firstPack.value0.r / min8(config.size.width)(config.size.height);
      var packed = packChildren(k)(config)(withRadii);
      var scaled = scaleToSize(config)(packed);
      return scaled;
    };
  };

  // output/D3.Viz.PackViz/index.js
  var map66 = /* @__PURE__ */ map(functorMaybe);
  var map121 = /* @__PURE__ */ map(functorArray);
  var show36 = /* @__PURE__ */ show(showInt);
  var discard25 = /* @__PURE__ */ discard(discardUnit);
  var show117 = /* @__PURE__ */ show(showNumber);
  var traverse_8 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var pure28 = /* @__PURE__ */ pure(applicativeEffect);
  var append113 = /* @__PURE__ */ append(semigroupArray);
  var bind27 = /* @__PURE__ */ bind(bindArray);
  var mod3 = /* @__PURE__ */ mod(euclideanRingInt);
  var discard26 = /* @__PURE__ */ discard25(bindArray);
  var guard2 = /* @__PURE__ */ guard(alternativeArray);
  var pure110 = /* @__PURE__ */ pure(applicativeArray);
  var join3 = /* @__PURE__ */ join(bindArray);
  var classed26 = /* @__PURE__ */ classed(toAttrString);
  var x27 = /* @__PURE__ */ x(toAttrNumber);
  var y27 = /* @__PURE__ */ y(toAttrNumber);
  var fill21 = /* @__PURE__ */ fill(toAttrString);
  var fontSize11 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text19 = /* @__PURE__ */ text6(toAttrString);
  var cx12 = /* @__PURE__ */ cx(toAttrNumber);
  var cy12 = /* @__PURE__ */ cy(toAttrNumber);
  var radius15 = /* @__PURE__ */ radius(toAttrNumber);
  var fillOpacity5 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeColor22 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth19 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var textAnchor8 = /* @__PURE__ */ textAnchor(toAttrString);
  var toHierarchyData = function(node) {
    return {
      data_: getName(node),
      value: new Just(getValue(node)),
      children: map66(map121(toHierarchyData))(getChildren(node))
    };
  };
  var printPackTree = function(dictShow) {
    var show216 = show(dictShow);
    return function(currentDepth) {
      return function(maxDepth2) {
        return function(indent) {
          return function(v) {
            var $82 = currentDepth <= maxDepth2;
            if ($82) {
              var nodeType = (function() {
                var $83 = length3(v.value0.children) === 0;
                if ($83) {
                  return "leaf";
                }
                ;
                return "internal(" + (show36(length3(v.value0.children)) + " children)");
              })();
              return function __do5() {
                log2(indent + (show216(v.value0.data_) + (" [" + (nodeType + ("]: r=" + (show117(v.value0.r) + (", x=" + (show117(v.value0.x) + (", y=" + (show117(v.value0.y) + (", depth=" + show36(v.value0.depth))))))))))))();
                var $84 = currentDepth < maxDepth2;
                if ($84) {
                  return traverse_8(printPackTree(dictShow)(currentDepth + 1 | 0)(maxDepth2)(indent + "  "))(v.value0.children)();
                }
                ;
                return unit;
              };
            }
            ;
            return pure28(unit);
          };
        };
      };
    };
  };
  var printPackTree1 = /* @__PURE__ */ printPackTree(showString);
  var getAllNodes2 = function(v) {
    var $92 = length3(v.value0.children) === 0;
    if ($92) {
      return [v];
    }
    ;
    return append113([v])(bind27(v.value0.children)(getAllNodes2));
  };
  var distance = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          var dy4 = y211 - y113;
          var dx = x211 - x115;
          return sqrt(dx * dx + dy4 * dy4);
        };
      };
    };
  };
  var colors2 = ["#e7ba52", "#c7c7c7", "#aec7e8", "#1f77b4", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];
  var getColor = function(depth) {
    var idx = mod3(depth)(length3(colors2));
    var v = index2(colors2)(idx);
    if (v instanceof Just) {
      return v.value0;
    }
    ;
    if (v instanceof Nothing) {
      return "#cccccc";
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.PackViz (line 40, column 6 - line 42, column 28): " + [v.constructor.name]);
  };
  var circlesOverlap = function(x115) {
    return function(y113) {
      return function(r1) {
        return function(x211) {
          return function(y211) {
            return function(r2) {
              var minDist = r1 + r2;
              var d23 = distance(x115)(y113)(x211)(y211);
              return d23 < minDist - 0.01;
            };
          };
        };
      };
    };
  };
  var checkSiblingOverlaps = function(dictShow) {
    var show216 = show(dictShow);
    return function(parentName) {
      return function(children3) {
        var pairs = bind27(range2(0)(length3(children3) - 2 | 0))(function(i2) {
          return bind27(range2(i2 + 1 | 0)(length3(children3) - 1 | 0))(function(j) {
            return discard26(guard2(i2 !== j))(function() {
              var v = index2(children3)(j);
              var v1 = index2(children3)(i2);
              if (v1 instanceof Just && v instanceof Just) {
                var $98 = circlesOverlap(v1.value0.value0.x)(v1.value0.value0.y)(v1.value0.value0.r)(v.value0.value0.x)(v.value0.value0.y)(v.value0.value0.r);
                if ($98) {
                  var d23 = distance(v1.value0.value0.x)(v1.value0.value0.y)(v.value0.value0.x)(v.value0.value0.y);
                  var overlap = v1.value0.value0.r + v.value0.value0.r - d23;
                  return pure110([{
                    c1: v1.value0.value0,
                    c2: v.value0.value0,
                    overlap
                  }]);
                }
                ;
                return pure110([]);
              }
              ;
              return pure110([]);
            });
          });
        });
        var overlaps = join3(pairs);
        return function __do5() {
          traverse_8(function(o) {
            return log2("\u26A0\uFE0F  OVERLAP in " + (parentName + (': "' + (show216(o.c1.data_) + ('" and "' + (show216(o.c2.data_) + ('" overlap by ' + (show117(o.overlap) + "px"))))))));
          })(overlaps)();
          return length3(overlaps);
        };
      };
    };
  };
  var checkSiblingOverlaps1 = /* @__PURE__ */ checkSiblingOverlaps(showString);
  var draw12 = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure211 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return bind121(liftEffect53(log2("Loaded JSON - root name: " + getName(flareData))))(function() {
              var hierData = toHierarchyData(flareData);
              var root3 = hierarchy2(hierData);
              var config = {
                radius: defaultPackConfig.radius,
                size: {
                  width: 800,
                  height: 600
                },
                padding: 2
              };
              var layout = pack(config)(root3);
              var nodes = getAllNodes2(layout);
              return bind121(liftEffect53(log2("\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557")))(function() {
                return bind121(liftEffect53(log2("\u2551   PACK VISUALIZATION: FULL FLARE HIERARCHY                    \u2551")))(function() {
                  return bind121(liftEffect53(log2("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D\n")))(function() {
                    return bind121(liftEffect53(printPackTree1(0)(4)("")(layout)))(function() {
                      return bind121(liftEffect53(log2("\nRendering " + (show36(length3(nodes)) + " nodes (full hierarchy)"))))(function() {
                        return bind121(liftEffect53(log2("\nChecking for overlaps among root's children:")))(function() {
                          return bind121(liftEffect53(checkSiblingOverlaps1("root")(layout.value0.children)))(function(rootOverlaps) {
                            return bind121(liftEffect53((function() {
                              var $104 = rootOverlaps === 0;
                              if ($104) {
                                return log2("\u2705 NO OVERLAPS at root level");
                              }
                              ;
                              return log2("\u274C FOUND " + (show36(rootOverlaps) + " OVERLAPS at root level"));
                            })()))(function() {
                              return bind121(attach6(selector))(function(root$prime) {
                                return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(800)(600), classed26("pack")]))(function(svg2) {
                                  return bind121(appendTo6(svg2)(Text2.value)([x27(10), y27(20), fill21("#333"), fontSize11(16), text19("Pack Layout (Circle Packing)"), classed26("title")]))(function() {
                                    var renderNode = function(v) {
                                      var color2 = getColor(v.value0.depth);
                                      var isLeaf = length3(v.value0.children) === 0;
                                      return bind121(appendTo6(svg2)(Circle.value)([cx12(v.value0.x), cy12(v.value0.y), radius15(v.value0.r), fill21(color2), fillOpacity5(0.3), strokeColor22("#333"), strokeWidth19(1), classed26("node"), classed26("depth-" + show36(v.value0.depth)), classed26((function() {
                                        if (isLeaf) {
                                          return "leaf";
                                        }
                                        ;
                                        return "internal";
                                      })())]))(function() {
                                        var $107 = isLeaf && v.value0.r > 10;
                                        if ($107) {
                                          return bind121(appendTo6(svg2)(Text2.value)([x27(v.value0.x), y27(v.value0.y + 4), fill21("#333"), fontSize11(10), text19(v.value0.data_), textAnchor8("middle"), classed26("label")]))(function() {
                                            return pure211(unit);
                                          });
                                        }
                                        ;
                                        return pure211(unit);
                                      });
                                    };
                                    return bind121(traverse_16(renderNode)(nodes))(function() {
                                      return pure211(unit);
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.Parabola/index.js
  var classed27 = /* @__PURE__ */ classed(toAttrString);
  var discard27 = /* @__PURE__ */ discard(discardUnit);
  var strokeColor23 = /* @__PURE__ */ strokeColor(toAttrStringFn);
  var strokeWidth20 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var fill22 = /* @__PURE__ */ fill(toAttrString);
  var cx13 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy13 = /* @__PURE__ */ cy(toAttrNumberFn);
  var radius16 = /* @__PURE__ */ radius(toAttrNumber);
  var drawWithData = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind92 = bind(Bind1);
    var attach6 = attach(dictSelectionM);
    var appendTo6 = appendTo(dictSelectionM);
    var simpleJoin4 = simpleJoin(dictSelectionM);
    var discard115 = discard27(Bind1);
    var setAttributes5 = setAttributes(dictSelectionM);
    var pure56 = pure(Monad0.Applicative0());
    return function(circleData) {
      return function(selector) {
        return bind92(attach6(selector))(function(root3) {
          return bind92(appendTo6(root3)(Svg.value)([viewBox(-10)(-100)(320)(160), classed27("d3svg gup")]))(function(svg2) {
            return bind92(appendTo6(svg2)(Group.value)([]))(function(circleGroup) {
              return bind92(simpleJoin4(circleGroup)(Circle.value)(circleData)(keyIsID_))(function(circles) {
                return discard115(setAttributes5(circles)([strokeColor23(function(v) {
                  return d3SchemePairedN_(toNumber(v) / 100);
                }), strokeWidth20(3), fill22("none"), cx13(function(v) {
                  return function(v1) {
                    return index_ToNumber(v1) * 20;
                  };
                }), cy13(function(v) {
                  return 100 - toNumber(v) / 5;
                }), radius16(10)]))(function() {
                  return pure56(circles);
                });
              });
            });
          });
        });
      };
    };
  };

  // output/PSD3.Layout.Hierarchy.Partition/index.js
  var map67 = /* @__PURE__ */ map(functorArray);
  var add3 = /* @__PURE__ */ add(semiringNumber);
  var map122 = /* @__PURE__ */ map(functorMaybe);
  var max13 = /* @__PURE__ */ max(ordInt);
  var PartNode = /* @__PURE__ */ (function() {
    function PartNode2(value0) {
      this.value0 = value0;
    }
    ;
    PartNode2.create = function(value0) {
      return new PartNode2(value0);
    };
    return PartNode2;
  })();
  var roundNode = function(v) {
    return new PartNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      value: v.value0.value,
      x0: floor(v.value0.x0),
      y0: floor(v.value0.y0),
      x1: ceil(v.value0.x1),
      y1: ceil(v.value0.y1),
      children: map67(roundNode)(v.value0.children)
    });
  };
  var positionChild = function(k) {
    return function(y0) {
      return function(y113) {
        return function(acc) {
          return function(v) {
            var x1$prime = acc.currentX + v.value0.value * k;
            var positioned = new PartNode({
              data_: v.value0.data_,
              depth: v.value0.depth,
              height: v.value0.height,
              value: v.value0.value,
              children: v.value0.children,
              x0: acc.currentX,
              y0,
              x1: x1$prime,
              y1: y113
            });
            return {
              positioned: snoc(acc.positioned)(positioned),
              currentX: x1$prime
            };
          };
        };
      };
    };
  };
  var hierarchy3 = /* @__PURE__ */ (function() {
    var go2 = function(depth) {
      return function(v) {
        var kids = fromMaybe([])(map122(map67(go2(depth + 1 | 0)))(v.children));
        var childValues = map67(function(v1) {
          return v1.value0.value;
        })(kids);
        var sumChildValues = foldl3(add3)(0)(childValues);
        var nodeValue = (function() {
          if (v.value instanceof Just) {
            return v.value.value0;
          }
          ;
          if (v.value instanceof Nothing) {
            var $66 = $$null2(kids);
            if ($66) {
              return 0;
            }
            ;
            return sumChildValues;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Partition (line 93, column 21 - line 95, column 69): " + [v.value.constructor.name]);
        })();
        var childHeights = map67(function(v1) {
          return v1.value0.height;
        })(kids);
        var maxChildHeight = foldl3(max13)(0)(childHeights);
        var nodeHeight = (function() {
          var $69 = $$null2(kids);
          if ($69) {
            return 0;
          }
          ;
          return maxChildHeight + 1 | 0;
        })();
        return new PartNode({
          data_: v.data_,
          depth,
          height: nodeHeight,
          value: nodeValue,
          children: kids,
          x0: 0,
          y0: 0,
          x1: 0,
          y1: 0
        });
      };
    };
    return go2(0);
  })();
  var dice = function(children3) {
    return function(x0) {
      return function(y0) {
        return function(x115) {
          return function(y113) {
            var totalValue = foldl3(function(acc) {
              return function(v) {
                return acc + v.value0.value;
              };
            })(0)(children3);
            var k = (function() {
              var $72 = totalValue > 0;
              if ($72) {
                return (x115 - x0) / totalValue;
              }
              ;
              return 0;
            })();
            var result = foldl3(positionChild(k)(y0)(y113))({
              positioned: [],
              currentX: x0
            })(children3);
            return result.positioned;
          };
        };
      };
    };
  };
  var positionNode = function(config) {
    return function(dy4) {
      return function(n) {
        return function(v) {
          var y1$prime = v.value0.y1 - config.padding;
          var x1$prime = v.value0.x1 - config.padding;
          var positionedChildren = (function() {
            var $77 = $$null2(v.value0.children);
            if ($77) {
              return v.value0.children;
            }
            ;
            var childY1 = dy4 * toNumber(v.value0.depth + 2 | 0) / toNumber(n);
            var childY0 = dy4 * toNumber(v.value0.depth + 1 | 0) / toNumber(n);
            var dicedChildren = dice(v.value0.children)(v.value0.x0)(childY0)(v.value0.x1)(childY1);
            var recursed = map67(positionNode(config)(dy4)(n))(dicedChildren);
            return recursed;
          })();
          var v1 = (function() {
            var $78 = x1$prime < v.value0.x0;
            if ($78) {
              return {
                x0: (v.value0.x0 + x1$prime) / 2,
                x1: (v.value0.x0 + x1$prime) / 2
              };
            }
            ;
            return {
              x0: v.value0.x0,
              x1: x1$prime
            };
          })();
          var v2 = (function() {
            var $80 = y1$prime < v.value0.y0;
            if ($80) {
              return {
                y0: (v.value0.y0 + y1$prime) / 2,
                y1: (v.value0.y0 + y1$prime) / 2
              };
            }
            ;
            return {
              y0: v.value0.y0,
              y1: y1$prime
            };
          })();
          return new PartNode({
            data_: v.value0.data_,
            depth: v.value0.depth,
            height: v.value0.height,
            value: v.value0.value,
            children: positionedChildren,
            x0: v1.x0,
            y0: v2.y0,
            x1: v1.x1,
            y1: v2.y1
          });
        };
      };
    };
  };
  var partition3 = function(config) {
    return function(root3) {
      var n = root3.value0.height + 1 | 0;
      var initialRoot = new PartNode({
        data_: root3.value0.data_,
        depth: root3.value0.depth,
        height: root3.value0.height,
        value: root3.value0.value,
        children: root3.value0.children,
        x0: config.padding,
        y0: config.padding,
        x1: config.size.width,
        y1: config.size.height / toNumber(n)
      });
      var positioned = positionNode(config)(config.size.height)(n)(initialRoot);
      var rounded = (function() {
        if (config.round) {
          return roundNode(positioned);
        }
        ;
        return positioned;
      })();
      return rounded;
    };
  };
  var defaultPartitionConfig = {
    size: {
      width: 1,
      height: 1
    },
    padding: 0,
    round: false
  };

  // output/D3.Viz.PartitionViz/index.js
  var map68 = /* @__PURE__ */ map(functorMaybe);
  var map123 = /* @__PURE__ */ map(functorArray);
  var show37 = /* @__PURE__ */ show(showInt);
  var discard28 = /* @__PURE__ */ discard(discardUnit);
  var show118 = /* @__PURE__ */ show(showNumber);
  var traverse_9 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var pure29 = /* @__PURE__ */ pure(applicativeEffect);
  var append114 = /* @__PURE__ */ append(semigroupArray);
  var bind28 = /* @__PURE__ */ bind(bindArray);
  var sum6 = /* @__PURE__ */ sum(foldableArray)(semiringInt);
  var mod4 = /* @__PURE__ */ mod(euclideanRingInt);
  var classed28 = /* @__PURE__ */ classed(toAttrString);
  var x28 = /* @__PURE__ */ x(toAttrNumber);
  var y28 = /* @__PURE__ */ y(toAttrNumber);
  var fill23 = /* @__PURE__ */ fill(toAttrString);
  var fontSize12 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text20 = /* @__PURE__ */ text6(toAttrString);
  var width17 = /* @__PURE__ */ width8(toAttrNumber);
  var height17 = /* @__PURE__ */ height8(toAttrNumber);
  var strokeColor24 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth21 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var fillOpacity6 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var toHierarchyData2 = function(node) {
    return {
      data_: node,
      value: (function() {
        var v = getChildren(node);
        if (v instanceof Nothing) {
          return new Just(getValue(node));
        }
        ;
        if (v instanceof Just) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.PartitionViz (line 71, column 7 - line 73, column 26): " + [v.constructor.name]);
      })(),
      children: map68(map123(toHierarchyData2))(getChildren(node))
    };
  };
  var printPartitionStructure = function(currentDepth) {
    return function(maxDepth2) {
      return function(indent) {
        return function(v) {
          var $61 = currentDepth <= maxDepth2;
          if ($61) {
            var nodeType = (function() {
              var $62 = length3(v.value0.children) === 0;
              if ($62) {
                return "leaf";
              }
              ;
              return "internal(" + (show37(length3(v.value0.children)) + " children)");
            })();
            var nodeName3 = getName(v.value0.data_);
            return function __do5() {
              log2(indent + (nodeName3 + (" [" + (nodeType + ("]: x0=" + (show118(v.value0.x0) + (", y0=" + (show118(v.value0.y0) + (", x1=" + (show118(v.value0.x1) + (", y1=" + (show118(v.value0.y1) + (", depth=" + show37(v.value0.depth))))))))))))))();
              var $63 = currentDepth < maxDepth2;
              if ($63) {
                return traverse_9(printPartitionStructure(currentDepth + 1 | 0)(maxDepth2)(indent + "  "))(v.value0.children)();
              }
              ;
              return unit;
            };
          }
          ;
          return pure29(unit);
        };
      };
    };
  };
  var getAllNodes3 = function(v) {
    var $66 = length3(v.value0.children) === 0;
    if ($66) {
      return [v];
    }
    ;
    return append114([v])(bind28(v.value0.children)(getAllNodes3));
  };
  var countNodes2 = function(v) {
    return 1 + sum6(map123(countNodes2)(v.value0.children)) | 0;
  };
  var colors3 = ["#e7ba52", "#c7c7c7", "#aec7e8", "#1f77b4", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];
  var getColor2 = function(depth) {
    var idx = mod4(depth)(length3(colors3));
    var v = index2(colors3)(idx);
    if (v instanceof Just) {
      return v.value0;
    }
    ;
    if (v instanceof Nothing) {
      return "#cccccc";
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.PartitionViz (line 35, column 6 - line 37, column 28): " + [v.constructor.name]);
  };
  var draw13 = function(dictBind) {
    var bind121 = bind(dictBind);
    var discard216 = discard28(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure121 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return bind121(liftEffect53(log2("Loaded JSON - root name: " + getName(flareData))))(function() {
              var hierData = toHierarchyData2(flareData);
              var root3 = hierarchy3(hierData);
              var config = {
                padding: defaultPartitionConfig.padding,
                round: defaultPartitionConfig.round,
                size: {
                  width: 1600,
                  height: 1200
                }
              };
              var layout = partition3(config)(root3);
              var nodes = getAllNodes3(layout);
              return bind121(liftEffect53(log2("\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557")))(function() {
                return bind121(liftEffect53(log2("\u2551   PARTITION VISUALIZATION: FULL FLARE HIERARCHY (ICICLE)     \u2551")))(function() {
                  return bind121(liftEffect53(log2("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D\n")))(function() {
                    return bind121(liftEffect53(printPartitionStructure(0)(2)("")(layout)))(function() {
                      return bind121(liftEffect53(log2("\nRendering " + (show37(length3(nodes)) + " nodes (full hierarchy)"))))(function() {
                        return bind121(liftEffect53(log2("Total node count: " + show37(countNodes2(layout)))))(function() {
                          return bind121(attach6(selector))(function(root$prime) {
                            return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed28("partition")]))(function(svg2) {
                              return bind121(appendTo6(svg2)(Text2.value)([x28(10), y28(20), fill23("#333"), fontSize12(16), text20("Partition Layout (Icicle)"), classed28("title")]))(function() {
                                return bind121(appendTo6(svg2)(Group.value)([classed28("rectangles")]))(function(rectsGroup) {
                                  var renderNode = function(v) {
                                    var nodeName3 = getName(v.value0.data_);
                                    var rectWidth = v.value0.x1 - v.value0.x0;
                                    var rectHeight = v.value0.y1 - v.value0.y0;
                                    return discard216((function() {
                                      var $73 = rectWidth > 0.5 && rectHeight > 0.5;
                                      if ($73) {
                                        return bind121(appendTo6(rectsGroup)(Rect.value)([x28(v.value0.x0), y28(v.value0.y0), width17(rectWidth), height17(rectHeight), fill23(getColor2(v.value0.depth)), strokeColor24("#fff"), strokeWidth21(1), fillOpacity6(0.7), classed28("node"), classed28("depth-" + show37(v.value0.depth))]))(function() {
                                          return discard216((function() {
                                            var $74 = rectWidth > 50 && rectHeight > 15;
                                            if ($74) {
                                              return bind121(appendTo6(rectsGroup)(Text2.value)([x28(v.value0.x0 + 4), y28(v.value0.y0 + rectHeight / 2 + 4), fill23("#333"), fontSize12(10), text20(nodeName3), classed28("label")]))(function() {
                                                return pure121(unit);
                                              });
                                            }
                                            ;
                                            return pure121(unit);
                                          })())(function() {
                                            return pure121(unit);
                                          });
                                        });
                                      }
                                      ;
                                      return pure121(unit);
                                    })())(function() {
                                      return traverse_16(renderNode)(v.value0.children);
                                    });
                                  };
                                  return bind121(renderNode(layout))(function() {
                                    return pure121(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.RadialClusterViz/index.js
  var show38 = /* @__PURE__ */ show(showNumber);
  var bind29 = /* @__PURE__ */ bind(bindList);
  var append115 = /* @__PURE__ */ append(semigroupList);
  var fromFoldable38 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map69 = /* @__PURE__ */ map(functorArray);
  var discard29 = /* @__PURE__ */ discard(discardUnit);
  var fromFoldable117 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var compare10 = /* @__PURE__ */ compare(ordNumber);
  var map124 = /* @__PURE__ */ map(functorList);
  var show119 = /* @__PURE__ */ show(showInt);
  var classed29 = /* @__PURE__ */ classed(toAttrString);
  var x29 = /* @__PURE__ */ x(toAttrNumber);
  var y29 = /* @__PURE__ */ y(toAttrNumber);
  var fill24 = /* @__PURE__ */ fill(toAttrString);
  var fontSize13 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text21 = /* @__PURE__ */ text6(toAttrString);
  var d13 = /* @__PURE__ */ d(toAttrStringFnI);
  var strokeColor25 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth22 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx14 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy14 = /* @__PURE__ */ cy(toAttrNumberFnI);
  var radius17 = /* @__PURE__ */ radius(toAttrNumber);
  var radialPoint = function(node) {
    return function(width25) {
      return function(height25) {
        var minDim = (function() {
          var $55 = width25 < height25;
          if ($55) {
            return width25;
          }
          ;
          return height25;
        })();
        var radius1 = node.y / height25 * (minDim / 2) * 0.85;
        var angle = node.x / width25 * 2 * pi - pi / 2;
        return {
          x: radius1 * cos(angle),
          y: radius1 * sin(angle)
        };
      };
    };
  };
  var radialLinkPath2 = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          return function(centerX) {
            return function(centerY) {
              var radius210 = sqrt(x211 * x211 + y211 * y211);
              var radius1 = sqrt(x115 * x115 + y113 * y113);
              var midRadius = (radius1 + radius210) / 2;
              var angle2 = atan2(y211)(x211);
              var cp2x = midRadius * cos(angle2);
              var cp2y = midRadius * sin(angle2);
              var angle1 = atan2(y113)(x115);
              var cp1x = midRadius * cos(angle1);
              var cp1y = midRadius * sin(angle1);
              return "M" + (show38(x115 + centerX) + ("," + (show38(y113 + centerY) + ("C" + (show38(cp1x + centerX) + ("," + (show38(cp1y + centerY) + (" " + (show38(cp2x + centerX) + ("," + (show38(cp2y + centerY) + (" " + (show38(x211 + centerX) + ("," + show38(y211 + centerY)))))))))))))));
            };
          };
        };
      };
    };
  };
  var makeLinksAsList4 = function(v) {
    var grandchildLinks = bind29(v.value1)(makeLinksAsList4);
    var childLinks = bind29(v.value1)(function(v1) {
      return new Cons({
        source: {
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          x: v1.value0.x,
          y: v1.value0.y
        }
      }, Nil.value);
    });
    return append115(childLinks)(grandchildLinks);
  };
  var makeLinks6 = /* @__PURE__ */ (function() {
    var $70 = fromFoldable2(foldableList);
    return function($71) {
      return $70(makeLinksAsList4($71));
    };
  })();
  var hierDataToTree5 = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable38(map69(hierDataToTree5)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.RadialClusterViz (line 27, column 20 - line 29, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      height: 0
    }, childrenList);
  };
  var draw14 = function(dictBind) {
    var discard115 = discard29(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            var centerX = 1600 / 2;
            var centerY = 1600 / 2;
            return discard115(liftEffect53(log2("RadialClusterViz: Using Cluster4 with radial projection")))(function() {
              var dataTree = hierDataToTree5(flareData);
              var config = {
                minSeparation: defaultClusterConfig.minSeparation,
                size: {
                  width: 1600,
                  height: 1600
                }
              };
              var positioned = cluster(config)(dataTree);
              var nodesBeforeProjection = fromFoldable117(positioned);
              var sortedNodes = sortBy(function(a2) {
                return function(b2) {
                  return compare10(a2.x)(b2.x);
                };
              })(nodesBeforeProjection);
              var projectNode = function(v) {
                var projectedChildren = map124(projectNode)(v.value1);
                var projected = radialPoint(v.value0)(1600)(1600);
                return new Node2({
                  height: v.value0.height,
                  name: v.value0.name,
                  value: v.value0.value,
                  x: projected.x,
                  y: projected.y
                }, projectedChildren);
              };
              var radialCluster = projectNode(positioned);
              var projectSingleNode = function(node) {
                var projected = radialPoint(node)(1600)(1600);
                return {
                  height: node.height,
                  name: node.name,
                  value: node.value,
                  x: projected.x,
                  y: projected.y
                };
              };
              var nodes = map69(projectSingleNode)(sortedNodes);
              var links = makeLinks6(radialCluster);
              return discard115(liftEffect53(log2("RadialClusterViz: Rendering " + (show119(length3(nodes)) + (" nodes, " + (show119(length3(links)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1600), classed29("radial-cluster-viz")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x29(10), y29(20), fill24("#333"), fontSize13(16), text21("Radial Cluster Layout (Dendrogram)"), classed29("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed29("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed29("nodes")]))(function(nodesGroup) {
                          return bind121(simpleJoin4(linksGroup)(Path2.value)(links)(keyIsID_))(function(linkElements) {
                            return discard115(setAttributes5(linkElements)([d13(function(v) {
                              return function(v1) {
                                return radialLinkPath2(v.source.x)(v.source.y)(v.target.x)(v.target.y)(centerX)(centerY);
                              };
                            }), fill24("none"), strokeColor25("#555"), strokeWidth22(1.5), classed29("link")]))(function() {
                              return bind121(simpleJoin4(nodesGroup)(Circle.value)(nodes)(keyIsID_))(function(nodeElements) {
                                return discard115(setAttributes5(nodeElements)([cx14(function(v) {
                                  return function(v1) {
                                    return v.x + centerX;
                                  };
                                }), cy14(function(v) {
                                  return function(v1) {
                                    return v.y + centerY;
                                  };
                                }), radius17(3), fill24("#999"), strokeColor25("#555"), strokeWidth22(1.5), classed29("node")]))(function() {
                                  return discard115(liftEffect53(log2("RadialClusterViz: Rendering complete!")))(function() {
                                    return pure56(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.RadialStackedBar/index.js
  var append23 = /* @__PURE__ */ append(semigroupArray);
  var foldl21 = /* @__PURE__ */ foldl(foldableArray);
  var nub5 = /* @__PURE__ */ nub(ordString);
  var map70 = /* @__PURE__ */ map(functorArray);
  var compare11 = /* @__PURE__ */ compare(ordString);
  var maximum10 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var bind30 = /* @__PURE__ */ bind(bindMaybe);
  var classed30 = /* @__PURE__ */ classed(toAttrString);
  var width18 = /* @__PURE__ */ width8(toAttrNumber);
  var height18 = /* @__PURE__ */ height8(toAttrNumber);
  var d14 = /* @__PURE__ */ d(toAttrString);
  var fill25 = /* @__PURE__ */ fill(toAttrString);
  var fillOpacity7 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeColor26 = /* @__PURE__ */ strokeColor(toAttrString);
  var textAnchor9 = /* @__PURE__ */ textAnchor(toAttrString);
  var y30 = /* @__PURE__ */ y(toAttrNumber);
  var dy3 = /* @__PURE__ */ dy(toAttrNumber);
  var text22 = /* @__PURE__ */ text6(toAttrString);
  var radius18 = /* @__PURE__ */ radius(toAttrNumber);
  var strokeOpacity5 = /* @__PURE__ */ strokeOpacity(toAttrNumber);
  var strokeWidth23 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var x30 = /* @__PURE__ */ x(toAttrNumber);
  var stackData = function(values2) {
    var folder = function(acc) {
      return function(v) {
        if (acc.last instanceof Nothing) {
          return {
            stack: [{
              start: 0,
              end: v,
              value: v
            }],
            last: new Just(v)
          };
        }
        ;
        if (acc.last instanceof Just) {
          var next2 = acc.last.value0 + v;
          return {
            stack: append23(acc.stack)([{
              start: acc.last.value0,
              end: next2,
              value: v
            }]),
            last: new Just(next2)
          };
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.RadialStackedBar (line 41, column 9 - line 45, column 95): " + [acc.last.constructor.name]);
      };
    };
    var result = foldl21(folder)({
      stack: [],
      last: Nothing.value
    })(values2);
    return result.stack;
  };
  var getStates2 = /* @__PURE__ */ (function() {
    var $59 = map70(function(v) {
      return v.state;
    });
    return function($60) {
      return nub5($59($60));
    };
  })();
  var getStateData = function(state$prime) {
    return function(data$prime) {
      return sortBy(function(a2) {
        return function(b2) {
          return compare11(a2.age)(b2.age);
        };
      })(filter(function(d1) {
        return d1.state === state$prime;
      })(data$prime));
    };
  };
  var getAges2 = /* @__PURE__ */ (function() {
    var $61 = map70(function(v) {
      return v.age;
    });
    return function($62) {
      return nub5($61($62));
    };
  })();
  var formatSI2 = function(n) {
    var $54 = n >= 1e6;
    if ($54) {
      return toString(n / 1e6) + "M";
    }
    ;
    return toString(n);
  };
  var arcPath = function(innerRadius) {
    return function(outerRadius) {
      return function(startAngle) {
        return function(endAngle) {
          var y311 = innerRadius * sin(endAngle);
          var y211 = outerRadius * sin(endAngle);
          var y113 = outerRadius * sin(startAngle);
          var y0 = innerRadius * sin(startAngle);
          var x311 = innerRadius * cos(endAngle);
          var x211 = outerRadius * cos(endAngle);
          var x115 = outerRadius * cos(startAngle);
          var x0 = innerRadius * cos(startAngle);
          var largeArc = (function() {
            var $55 = endAngle - startAngle > pi;
            if ($55) {
              return "1";
            }
            ;
            return "0";
          })();
          return "M " + (toString(x0) + (" " + (toString(y0) + (" L " + (toString(x115) + (" " + (toString(y113) + (" A " + (toString(outerRadius) + (" " + (toString(outerRadius) + (" 0 " + (largeArc + (" 1 " + (toString(x211) + (" " + (toString(y211) + (" L " + (toString(x311) + (" " + (toString(y311) + (" A " + (toString(innerRadius) + (" " + (toString(innerRadius) + (" 0 " + (largeArc + (" 0 " + (toString(x0) + (" " + (toString(y0) + " Z")))))))))))))))))))))))))))))));
        };
      };
    };
  };
  var draw15 = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure56 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(data$prime) {
          return function(selector) {
            var dims = {
              width: 928,
              height: 928,
              innerRadius: 180,
              outerRadius: 400
            };
            var centerX = dims.width / 2;
            var centerY = dims.height / 2;
            var states = getStates2(data$prime);
            var ages = getAges2(data$prime);
            var stateCount = toNumber(length3(states));
            var getStateTotal = function(state$prime) {
              return foldl21(function(acc) {
                return function(d1) {
                  return acc + d1.population;
                };
              })(0)(getStateData(state$prime)(data$prime));
            };
            var maxTotal = fromMaybe(0)(maximum10(map70(getStateTotal)(states)));
            var anglePerState = 2 * pi / stateCount;
            var anglepadding = 0.02 * anglePerState;
            var ageColors = ["#9e0142", "#d53e4f", "#f46d43", "#fdae61", "#fee08b", "#e6f598", "#abdda4", "#66c2a5", "#3288bd"];
            var getAgeColor = function(age$prime) {
              return fromMaybe("#999999")(bind30(findIndex(function(a2) {
                return a2 === age$prime;
              })(ages))(function(i2) {
                return index2(ageColors)(i2);
              }));
            };
            return bind121(attach6(selector))(function(v) {
              return bind121(appendTo6(v)(Svg.value)([classed30("radial-stacked-bar"), width18(dims.width), height18(dims.height), viewBox(-centerX)(-centerY)(dims.width)(dims.height)]))(function(svg2) {
                return bind121(appendTo6(svg2)(Group.value)([classed30("chart")]))(function(chartGroup) {
                  var drawStateBar = function(stateIdx) {
                    return function(state$prime) {
                      var stateData = getStateData(state$prime)(data$prime);
                      var values2 = map70(function(v1) {
                        return v1.population;
                      })(stateData);
                      var stacked = stackData(values2);
                      var startAngle = toNumber(stateIdx) * anglePerState + anglepadding;
                      var endAngle = toNumber(stateIdx + 1 | 0) * anglePerState - anglepadding;
                      var drawSegment = function(ageIdx) {
                        return function(seg) {
                          var v1 = index2(stateData)(ageIdx);
                          if (v1 instanceof Nothing) {
                            return pure56(unit);
                          }
                          ;
                          if (v1 instanceof Just) {
                            var radiusScale = function(v2) {
                              return dims.innerRadius + v2 / maxTotal * (dims.outerRadius - dims.innerRadius);
                            };
                            var innerR = radiusScale(seg.start);
                            var outerR = radiusScale(seg.end);
                            var pathData = arcPath(innerR)(outerR)(startAngle)(endAngle);
                            var color2 = getAgeColor(v1.value0.age);
                            return bind121(appendTo6(chartGroup)(Path2.value)([d14(pathData), fill25(color2), fillOpacity7(0.8), strokeColor26("#ffffff"), classed30("segment")]))(function() {
                              return pure56(unit);
                            });
                          }
                          ;
                          throw new Error("Failed pattern match at D3.Viz.RadialStackedBar (line 131, column 38 - line 148, column 26): " + [v1.constructor.name]);
                        };
                      };
                      return bind121(traverse_16(function(t) {
                        return drawSegment(fst(t))(snd(t));
                      })(mapWithIndex3(Tuple.create)(stacked)))(function() {
                        return pure56(unit);
                      });
                    };
                  };
                  return bind121(traverse_16(function(t) {
                    return drawStateBar(fst(t))(snd(t));
                  })(mapWithIndex3(Tuple.create)(states)))(function() {
                    return bind121(appendTo6(chartGroup)(Group.value)([classed30("y-axis"), textAnchor9("middle")]))(function(yAxisGroup) {
                      return bind121(appendTo6(yAxisGroup)(Text2.value)([y30(-dims.outerRadius - 10), dy3(-16), text22("Population"), classed30("axis-label")]))(function() {
                        var yTicks2 = [0.25 * maxTotal, 0.5 * maxTotal, 0.75 * maxTotal, maxTotal];
                        var radiusScale = function(v1) {
                          return dims.innerRadius + v1 / maxTotal * (dims.outerRadius - dims.innerRadius);
                        };
                        var drawCircularGrid = function(value18) {
                          var gridRadius = radiusScale(value18);
                          return bind121(appendTo6(yAxisGroup)(Group.value)([fill25("none"), classed30("grid-line")]))(function(gridGroup) {
                            return bind121(appendTo6(gridGroup)(Circle.value)([radius18(gridRadius), strokeColor26("#000000"), strokeOpacity5(0.5), fill25("none")]))(function() {
                              return bind121(appendTo6(gridGroup)(Text2.value)([y30(-gridRadius), dy3(5.6), text22(formatSI2(value18)), strokeColor26("#ffffff"), strokeWidth23(5), fill25("none"), classed30("grid-label-bg")]))(function(textBg) {
                                return bind121(appendTo6(gridGroup)(Text2.value)([y30(-gridRadius), dy3(5.6), text22(formatSI2(value18)), fill25("#000000"), classed30("grid-label")]))(function(textFg) {
                                  return pure56(unit);
                                });
                              });
                            });
                          });
                        };
                        return bind121(traverse_16(drawCircularGrid)(yTicks2))(function() {
                          return bind121(appendTo6(chartGroup)(Group.value)([classed30("legend")]))(function(legendGroup) {
                            var ageCount = length3(ages);
                            var drawLegendItem = function(idx) {
                              return function(age$prime) {
                                var yOffset = (toNumber(ageCount) / 2 - toNumber(idx) - 1) * 20;
                                return bind121(appendTo6(legendGroup)(Group.value)([transform([function(v1) {
                                  return "translate(-40," + (toString(yOffset) + ")");
                                }]), classed30("legend-item")]))(function(itemGroup) {
                                  return bind121(appendTo6(itemGroup)(Rect.value)([width18(18), height18(18), fill25(getAgeColor(age$prime))]))(function() {
                                    return bind121(appendTo6(itemGroup)(Text2.value)([x30(24), y30(9), dy3(5.6), text22(age$prime), classed30("legend-label")]))(function() {
                                      return pure56(unit);
                                    });
                                  });
                                });
                              };
                            };
                            return bind121(traverse_16(function(t) {
                              return drawLegendItem(fst(t))(snd(t));
                            })(mapWithIndex3(Tuple.create)(ages)))(function() {
                              var drawStateLabel = function(stateIdx) {
                                return function(state$prime) {
                                  var angle = toNumber(stateIdx) * anglePerState + anglePerState / 2 - pi / 2;
                                  var labelRadius = dims.outerRadius + 30;
                                  var labelX = labelRadius * cos(angle);
                                  var labelY = labelRadius * sin(angle);
                                  var rotation = angle * 180 / pi;
                                  return bind121(appendTo6(chartGroup)(Text2.value)([x30(labelX), y30(labelY), text22(state$prime), textAnchor9("middle"), transform([function(v1) {
                                    return "rotate(" + (toString(rotation) + (" " + (toString(labelX) + (" " + (toString(labelY) + ")")))));
                                  }]), classed30("state-label")]))(function() {
                                    return pure56(unit);
                                  });
                                };
                              };
                              return bind121(traverse_16(function(t) {
                                return drawStateLabel(fst(t))(snd(t));
                              })(mapWithIndex3(Tuple.create)(states)))(function() {
                                return pure56(unit);
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.RadialTreeViz/index.js
  var show39 = /* @__PURE__ */ show(showNumber);
  var bind31 = /* @__PURE__ */ bind(bindList);
  var append116 = /* @__PURE__ */ append(semigroupList);
  var fromFoldable39 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map71 = /* @__PURE__ */ map(functorArray);
  var discard30 = /* @__PURE__ */ discard(discardUnit);
  var map125 = /* @__PURE__ */ map(functorList);
  var fromFoldable118 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var show120 = /* @__PURE__ */ show(showInt);
  var classed31 = /* @__PURE__ */ classed(toAttrString);
  var x31 = /* @__PURE__ */ x(toAttrNumber);
  var y31 = /* @__PURE__ */ y(toAttrNumber);
  var fill26 = /* @__PURE__ */ fill(toAttrString);
  var fontSize14 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text23 = /* @__PURE__ */ text6(toAttrString);
  var d15 = /* @__PURE__ */ d(toAttrStringFnI);
  var strokeColor27 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth24 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx15 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy15 = /* @__PURE__ */ cy(toAttrNumberFnI);
  var radius19 = /* @__PURE__ */ radius(toAttrNumber);
  var radialPoint2 = function(node) {
    return function(width25) {
      return function(height25) {
        var minDim = (function() {
          var $53 = width25 < height25;
          if ($53) {
            return width25;
          }
          ;
          return height25;
        })();
        var radius1 = node.y / height25 * (minDim / 2) * 0.85;
        var angle = node.x / width25 * 2 * pi - pi / 2;
        return {
          x: radius1 * cos(angle),
          y: radius1 * sin(angle)
        };
      };
    };
  };
  var radialLinkPath3 = function(x115) {
    return function(y113) {
      return function(x211) {
        return function(y211) {
          return function(centerX) {
            return function(centerY) {
              var radius210 = sqrt(x211 * x211 + y211 * y211);
              var radius1 = sqrt(x115 * x115 + y113 * y113);
              var midRadius = (radius1 + radius210) / 2;
              var angle2 = atan2(y211)(x211);
              var cp2x = midRadius * cos(angle2);
              var cp2y = midRadius * sin(angle2);
              var angle1 = atan2(y113)(x115);
              var cp1x = midRadius * cos(angle1);
              var cp1y = midRadius * sin(angle1);
              return "M" + (show39(x115 + centerX) + ("," + (show39(y113 + centerY) + ("C" + (show39(cp1x + centerX) + ("," + (show39(cp1y + centerY) + (" " + (show39(cp2x + centerX) + ("," + (show39(cp2y + centerY) + (" " + (show39(x211 + centerX) + ("," + show39(y211 + centerY)))))))))))))));
            };
          };
        };
      };
    };
  };
  var makeLinksAsList5 = function(v) {
    var grandchildLinks = bind31(v.value1)(makeLinksAsList5);
    var childLinks = bind31(v.value1)(function(v1) {
      return new Cons({
        source: {
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          x: v1.value0.x,
          y: v1.value0.y
        }
      }, Nil.value);
    });
    return append116(childLinks)(grandchildLinks);
  };
  var makeLinks7 = /* @__PURE__ */ (function() {
    var $71 = fromFoldable2(foldableList);
    return function($72) {
      return $71(makeLinksAsList5($72));
    };
  })();
  var hierDataToTree6 = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable39(map71(hierDataToTree6)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.RadialTreeViz (line 27, column 20 - line 29, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      depth: 0
    }, childrenList);
  };
  var draw16 = function(dictBind) {
    var discard115 = discard30(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            var centerX = 1600 / 2;
            var centerY = 1600 / 2;
            return discard115(liftEffect53(log2("RadialTreeViz: Using Tree4 with radial projection")))(function() {
              var dataTree = hierDataToTree6(flareData);
              var config = {
                minSeparation: defaultTreeConfig.minSeparation,
                size: {
                  width: 1600,
                  height: 1600
                }
              };
              var positioned = tree2(config)(dataTree);
              var projectNode = function(v) {
                var projectedChildren = map125(projectNode)(v.value1);
                var projected = radialPoint2(v.value0)(1600)(1600);
                return new Node2((function() {
                  var $63 = {};
                  for (var $64 in v.value0) {
                    if ({}.hasOwnProperty.call(v.value0, $64)) {
                      $63[$64] = v["value0"][$64];
                    }
                    ;
                  }
                  ;
                  $63.x = projected.x;
                  $63.y = projected.y;
                  return $63;
                })(), projectedChildren);
              };
              var radialTree = projectNode(positioned);
              var nodes = fromFoldable118(radialTree);
              var links = makeLinks7(radialTree);
              return discard115(liftEffect53(log2("RadialTreeViz: Rendering " + (show120(length3(nodes)) + (" nodes, " + (show120(length3(links)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1600), classed31("radial-tree-viz")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x31(10), y31(20), fill26("#333"), fontSize14(16), text23("Radial Tree Layout (Reingold-Tilford)"), classed31("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed31("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed31("nodes")]))(function(nodesGroup) {
                          return bind121(simpleJoin4(linksGroup)(Path2.value)(links)(keyIsID_))(function(linkElements) {
                            return discard115(setAttributes5(linkElements)([d15(function(v) {
                              return function(v1) {
                                return radialLinkPath3(v.source.x)(v.source.y)(v.target.x)(v.target.y)(centerX)(centerY);
                              };
                            }), fill26("none"), strokeColor27("#555"), strokeWidth24(1.5), classed31("link")]))(function() {
                              return bind121(simpleJoin4(nodesGroup)(Circle.value)(nodes)(keyIsID_))(function(nodeElements) {
                                return discard115(setAttributes5(nodeElements)([cx15(function(v) {
                                  return function(v1) {
                                    return v.x + centerX;
                                  };
                                }), cy15(function(v) {
                                  return function(v1) {
                                    return v.y + centerY;
                                  };
                                }), radius19(3), fill26("#999"), strokeColor27("#555"), strokeWidth24(1.5), classed31("node")]))(function() {
                                  return discard115(liftEffect53(log2("RadialTreeViz: Rendering complete!")))(function() {
                                    return pure56(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/PSD3.Layout.Sankey.CSV/index.js
  var map72 = /* @__PURE__ */ map(functorArray);
  var parseLine = function(line) {
    var parts = map72(trim)(split(",")(line));
    if (parts.length === 3) {
      var v = fromString(parts[2]);
      if (v instanceof Just) {
        return new Just({
          s: parts[0],
          t: parts[1],
          v: v.value0
        });
      }
      ;
      if (v instanceof Nothing) {
        return Nothing.value;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Sankey.CSV (line 42, column 9 - line 45, column 29): " + [v.constructor.name]);
    }
    ;
    return Nothing.value;
  };
  var parseSankeyCSV = function(csvString) {
    var isEmpty3 = function(s) {
      return $$null(trim(s));
    };
    var lines = split("\n")(csvString);
    var dataLines = filter(function($10) {
      return !isEmpty3($10);
    })(drop(1)(lines));
    return mapMaybe(parseLine)(dataLines);
  };

  // output/PSD3.Layout.Sankey.Compute/foreign.js
  var pow3 = (base2) => (exponent) => Math.pow(base2, exponent);

  // output/Control.Monad.State/index.js
  var execState = function(v) {
    return function(s) {
      var v1 = v(s);
      return v1.value1;
    };
  };

  // output/PSD3.Layout.Sankey.Types/index.js
  var show40 = /* @__PURE__ */ show(showInt);
  var compare14 = /* @__PURE__ */ compare(ordInt);
  var bind32 = /* @__PURE__ */ bind(bindMaybe);
  var pure30 = /* @__PURE__ */ pure(applicativeMaybe);
  var SourceColor = /* @__PURE__ */ (function() {
    function SourceColor2() {
    }
    ;
    SourceColor2.value = new SourceColor2();
    return SourceColor2;
  })();
  var TargetColor = /* @__PURE__ */ (function() {
    function TargetColor2() {
    }
    ;
    TargetColor2.value = new TargetColor2();
    return TargetColor2;
  })();
  var SourceTargetGradient = /* @__PURE__ */ (function() {
    function SourceTargetGradient2() {
    }
    ;
    SourceTargetGradient2.value = new SourceTargetGradient2();
    return SourceTargetGradient2;
  })();
  var StaticColor = /* @__PURE__ */ (function() {
    function StaticColor2(value0) {
      this.value0 = value0;
    }
    ;
    StaticColor2.create = function(value0) {
      return new StaticColor2(value0);
    };
    return StaticColor2;
  })();
  var Justify = /* @__PURE__ */ (function() {
    function Justify2() {
    }
    ;
    Justify2.value = new Justify2();
    return Justify2;
  })();
  var Left2 = /* @__PURE__ */ (function() {
    function Left3() {
    }
    ;
    Left3.value = new Left3();
    return Left3;
  })();
  var Right2 = /* @__PURE__ */ (function() {
    function Right3() {
    }
    ;
    Right3.value = new Right3();
    return Right3;
  })();
  var Center = /* @__PURE__ */ (function() {
    function Center3() {
    }
    ;
    Center3.value = new Center3();
    return Center3;
  })();
  var showLinkID = {
    show: function(v) {
      return "LinkID" + show40(v);
    }
  };
  var initialiseSankeyLink = function(l) {
    return {
      sourceIndex: l.source,
      targetIndex: l.target,
      value: l.value,
      width: 0,
      y0: 0,
      y1: 0,
      color: "",
      index: l.id
    };
  };
  var initialSankeyGraphModel = function(config) {
    return {
      linkCount: 0,
      nodeCount: 0,
      nodeNameToID: empty2,
      nodeIDToName: empty2,
      deps: empty2,
      sped: empty2,
      sankeyNodes: [],
      sankeyLinks: [],
      config
    };
  };
  var eqNodeID = {
    eq: function(x46) {
      return function(y46) {
        return x46 === y46;
      };
    }
  };
  var ordNodeID = {
    compare: function(x46) {
      return function(y46) {
        return compare14(x46)(y46);
      };
    },
    Eq0: function() {
      return eqNodeID;
    }
  };
  var lookup16 = /* @__PURE__ */ lookup(ordNodeID);
  var initialiseSankeyNode = function(m) {
    return function(id5) {
      return bind32(lookup16(id5)(m.nodeIDToName))(function(name16) {
        var sourceLinks = fromMaybe(empty7)(lookup16(id5)(m.deps));
        var targetLinks = fromMaybe(empty7)(lookup16(id5)(m.sped));
        return pure30({
          name: name16,
          x0: 0,
          x1: 0,
          y0: 0,
          y1: 0,
          value: 0,
          depth: 0,
          nodeHeight: 0,
          layer: 0,
          index: id5,
          color: "",
          sourceLinks,
          targetLinks
        });
      });
    };
  };
  var eqLinkID = {
    eq: function(x46) {
      return function(y46) {
        return x46 === y46;
      };
    }
  };
  var defaultSankeyConfig = function(width25) {
    return function(height25) {
      return {
        alignment: Justify.value,
        linkColorMode: SourceColor.value,
        nodeWidth: 15,
        nodePadding: 10,
        iterations: 6,
        extent: {
          x0: 1,
          y0: 1,
          x1: width25 - 1,
          y1: height25 - 5
        }
      };
    };
  };

  // output/PSD3.Layout.Sankey.Compute/index.js
  var lookup17 = /* @__PURE__ */ lookup(ordNodeID);
  var insert14 = /* @__PURE__ */ insert5(ordNodeID);
  var insert15 = /* @__PURE__ */ insert(ordNodeID);
  var eq8 = /* @__PURE__ */ eq(eqNodeID);
  var compare15 = /* @__PURE__ */ compare(ordNumber);
  var max14 = /* @__PURE__ */ max(ordInt);
  var map73 = /* @__PURE__ */ map(functorArray);
  var max15 = /* @__PURE__ */ max(ordNumber);
  var min9 = /* @__PURE__ */ min(ordNumber);
  var eq22 = /* @__PURE__ */ eq(eqOrdering);
  var show41 = /* @__PURE__ */ show(showInt);
  var show121 = /* @__PURE__ */ show(showNumber);
  var bindStateT3 = /* @__PURE__ */ bindStateT(monadIdentity);
  var bind33 = /* @__PURE__ */ bind(bindStateT3);
  var monadStateStateT2 = /* @__PURE__ */ monadStateStateT(monadIdentity);
  var get8 = /* @__PURE__ */ get(monadStateStateT2);
  var lookup18 = /* @__PURE__ */ lookup(ordString);
  var modify_5 = /* @__PURE__ */ modify_(monadStateStateT2);
  var insert22 = /* @__PURE__ */ insert(ordString);
  var toUnfoldable9 = /* @__PURE__ */ toUnfoldable4(unfoldableArray);
  var member5 = /* @__PURE__ */ member2(ordNodeID);
  var union4 = /* @__PURE__ */ union3(ordNodeID);
  var fromFoldable40 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordNodeID);
  var eq32 = /* @__PURE__ */ eq(eqLinkID);
  var mod5 = /* @__PURE__ */ mod(euclideanRingInt);
  var discard31 = /* @__PURE__ */ discard(discardUnit);
  var discard210 = /* @__PURE__ */ discard31(bindStateT3);
  var for_3 = /* @__PURE__ */ for_(/* @__PURE__ */ applicativeStateT(monadIdentity))(foldableArray);
  var unionInsert = function(sid) {
    return function(tid) {
      return function(deps) {
        var targetSet = (function() {
          var v = lookup17(sid)(deps);
          if (v instanceof Nothing) {
            return singleton9(tid);
          }
          ;
          if (v instanceof Just) {
            return insert14(tid)(v.value0);
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 99, column 11 - line 101, column 53): " + [v.constructor.name]);
        })();
        return insert15(sid)(targetSet)(deps);
      };
    };
  };
  var relaxation = function(nodes) {
    return function(links) {
      return function(config) {
        return function(y0) {
          return function(y113) {
            var updateNodes = function(allNodes3) {
              return function(updated) {
                return map73(function(node) {
                  var v = find2(function(u2) {
                    return eq8(u2.node.index)(node.index);
                  })(updated);
                  if (v instanceof Just) {
                    return v.value0.node;
                  }
                  ;
                  if (v instanceof Nothing) {
                    return node;
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 665, column 9 - line 667, column 26): " + [v.constructor.name]);
                })(allNodes3);
              };
            };
            var resolveCollisions = function(sorted) {
              return function(padding) {
                return function(yMin) {
                  return function(yMax) {
                    var $110 = $$null2(sorted);
                    if ($110) {
                      return sorted;
                    }
                    ;
                    var nodeHeight = function(n) {
                      return n.node.y1 - n.node.y0;
                    };
                    var pushedDown = foldl3(function(acc) {
                      return function(item) {
                        var height25 = nodeHeight(item);
                        var desiredY0 = item.targetY - height25 / 2;
                        var actualY0 = max15(acc.y)(desiredY0);
                        var actualY1 = actualY0 + height25;
                        var updatedNode = {
                          color: item.node.color,
                          depth: item.node.depth,
                          index: item.node.index,
                          layer: item.node.layer,
                          name: item.node.name,
                          nodeHeight: item.node.nodeHeight,
                          sourceLinks: item.node.sourceLinks,
                          targetLinks: item.node.targetLinks,
                          value: item.node.value,
                          x0: item.node.x0,
                          x1: item.node.x1,
                          y0: actualY0,
                          y1: actualY1
                        };
                        return {
                          y: actualY1 + padding,
                          nodes: snoc(acc.nodes)({
                            node: updatedNode,
                            targetY: item.targetY
                          })
                        };
                      };
                    })({
                      y: yMin,
                      nodes: []
                    })(sorted);
                    var pushedUp = foldr3(function(item) {
                      return function(acc) {
                        var height25 = nodeHeight(item);
                        var desiredY1 = min9(item.node.y1)(acc.y - padding);
                        var actualY0 = desiredY1 - height25;
                        var updatedNode = {
                          color: item.node.color,
                          depth: item.node.depth,
                          index: item.node.index,
                          layer: item.node.layer,
                          name: item.node.name,
                          nodeHeight: item.node.nodeHeight,
                          sourceLinks: item.node.sourceLinks,
                          targetLinks: item.node.targetLinks,
                          value: item.node.value,
                          x0: item.node.x0,
                          x1: item.node.x1,
                          y0: actualY0,
                          y1: desiredY1
                        };
                        return {
                          y: actualY0,
                          nodes: cons({
                            node: updatedNode,
                            targetY: item.targetY
                          })(acc.nodes)
                        };
                      };
                    })({
                      y: yMax,
                      nodes: []
                    })(pushedDown.nodes);
                    return pushedUp.nodes;
                  };
                };
              };
            };
            var calculateWeightedFromTargets = function(node) {
              return function(allNodes3) {
                return function(allLinks) {
                  var result = foldl3(function(acc) {
                    return function(link4) {
                      var $111 = eq8(link4.sourceIndex)(node.index);
                      if ($111) {
                        var v = find2(function(n) {
                          return eq8(n.index)(link4.targetIndex);
                        })(allNodes3);
                        if (v instanceof Just) {
                          var layerDist = toNumber(v.value0.layer - node.layer | 0);
                          var v1 = link4.value * layerDist;
                          var center3 = (v.value0.y0 + v.value0.y1) / 2;
                          return {
                            sum: acc.sum + center3 * v1,
                            totalWeight: acc.totalWeight + v1
                          };
                        }
                        ;
                        if (v instanceof Nothing) {
                          return acc;
                        }
                        ;
                        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 574, column 13 - line 582, column 29): " + [v.constructor.name]);
                      }
                      ;
                      return acc;
                    };
                  })({
                    sum: 0,
                    totalWeight: 0
                  })(allLinks);
                  var $114 = result.totalWeight > 0;
                  if ($114) {
                    return result.sum / result.totalWeight;
                  }
                  ;
                  return node.y0;
                };
              };
            };
            var calculateWeightedFromSources = function(node) {
              return function(allNodes3) {
                return function(allLinks) {
                  var result = foldl3(function(acc) {
                    return function(link4) {
                      var $115 = eq8(link4.targetIndex)(node.index);
                      if ($115) {
                        var v = find2(function(n) {
                          return eq8(n.index)(link4.sourceIndex);
                        })(allNodes3);
                        if (v instanceof Just) {
                          var layerDist = toNumber(node.layer - v.value0.layer | 0);
                          var v1 = link4.value * layerDist;
                          var center3 = (v.value0.y0 + v.value0.y1) / 2;
                          return {
                            sum: acc.sum + center3 * v1,
                            totalWeight: acc.totalWeight + v1
                          };
                        }
                        ;
                        if (v instanceof Nothing) {
                          return acc;
                        }
                        ;
                        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 599, column 13 - line 607, column 29): " + [v.constructor.name]);
                      }
                      ;
                      return acc;
                    };
                  })({
                    sum: 0,
                    totalWeight: 0
                  })(allLinks);
                  var $118 = result.totalWeight > 0;
                  if ($118) {
                    return result.sum / result.totalWeight;
                  }
                  ;
                  return node.y0;
                };
              };
            };
            var relaxLayer = function(currentNodes) {
              return function(allLinks) {
                return function(layerIdx) {
                  return function(padding) {
                    return function(ascending3) {
                      return function(alpha) {
                        return function(beta) {
                          var layerNodes = filter(function(n) {
                            return n.layer === layerIdx;
                          })(currentNodes);
                          var nodesWithTarget = map73(function(node) {
                            var weightedY = (function() {
                              if (ascending3) {
                                return calculateWeightedFromSources(node)(currentNodes)(allLinks);
                              }
                              ;
                              return calculateWeightedFromTargets(node)(currentNodes)(allLinks);
                            })();
                            var dy4 = (weightedY - node.y0) * alpha;
                            var newY0 = node.y0 + dy4;
                            var newY1 = node.y1 + dy4;
                            return {
                              node: {
                                color: node.color,
                                depth: node.depth,
                                index: node.index,
                                layer: node.layer,
                                name: node.name,
                                nodeHeight: node.nodeHeight,
                                sourceLinks: node.sourceLinks,
                                targetLinks: node.targetLinks,
                                value: node.value,
                                x0: node.x0,
                                x1: node.x1,
                                y0: newY0,
                                y1: newY1
                              },
                              targetY: newY0
                            };
                          })(layerNodes);
                          var sorted = sortBy(function(a2) {
                            return function(b2) {
                              var posCompare = compare15(a2.targetY)(b2.targetY);
                              var $120 = eq22(posCompare)(EQ.value);
                              if ($120) {
                                return compare15(b2.node.value)(a2.node.value);
                              }
                              ;
                              return posCompare;
                            };
                          })(nodesWithTarget);
                          var resolved = resolveCollisions(sorted)(padding)(y0)(y113);
                          return updateNodes(currentNodes)(resolved);
                        };
                      };
                    };
                  };
                };
              };
            };
            var relaxByLayer = function(currentNodes) {
              return function(allLinks) {
                return function(padding) {
                  return function(ascending3) {
                    return function(alpha) {
                      return function(beta) {
                        var maxLayer = foldl3(function(acc) {
                          return function(node) {
                            return max14(acc)(node.layer);
                          };
                        })(0)(currentNodes);
                        var layerIndices = (function() {
                          if (ascending3) {
                            return range2(0)(maxLayer);
                          }
                          ;
                          return reverse(range2(0)(maxLayer));
                        })();
                        var relaxed2 = foldl3(function(nodes1) {
                          return function(layerIdx) {
                            return relaxLayer(nodes1)(allLinks)(layerIdx)(padding)(ascending3)(alpha)(beta);
                          };
                        })(currentNodes)(layerIndices);
                        return relaxed2;
                      };
                    };
                  };
                };
              };
            };
            var relaxed = foldl3(function(currentNodes) {
              return function(i2) {
                var alpha = pow3(0.99)(toNumber(i2));
                var beta = max15(1 - alpha)(toNumber(i2 + 1 | 0) / toNumber(config.iterations));
                var v = unsafePerformEffect(log2("Relaxation iteration " + (show41(i2) + (", alpha=" + (show121(alpha) + (", beta=" + show121(beta)))))));
                var rtl = relaxByLayer(currentNodes)(links)(config.nodePadding)(false)(alpha)(beta);
                var ltr = relaxByLayer(rtl)(links)(config.nodePadding)(true)(alpha)(beta);
                return ltr;
              };
            })(nodes)(range2(0)(config.iterations - 1 | 0));
            return relaxed;
          };
        };
      };
    };
  };
  var processCSVLink = function(link4) {
    return bind33(get8)(function(model) {
      var t = lookup18(link4.t)(model.nodeNameToID);
      var s = lookup18(link4.s)(model.nodeNameToID);
      var v = (function() {
        if (s instanceof Just && t instanceof Just) {
          return {
            nodeCount: model.nodeCount,
            sid: s.value0,
            tid: t.value0
          };
        }
        ;
        if (s instanceof Just && t instanceof Nothing) {
          return {
            nodeCount: model.nodeCount + 1 | 0,
            sid: s.value0,
            tid: model.nodeCount
          };
        }
        ;
        if (s instanceof Nothing && t instanceof Just) {
          return {
            nodeCount: model.nodeCount + 1 | 0,
            sid: model.nodeCount,
            tid: t.value0
          };
        }
        ;
        if (s instanceof Nothing && t instanceof Nothing) {
          return {
            nodeCount: model.nodeCount + 2 | 0,
            sid: model.nodeCount,
            tid: model.nodeCount + 1 | 0
          };
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 114, column 7 - line 124, column 109): " + [s.constructor.name, t.constructor.name]);
      })();
      return modify_5(function(v1) {
        var $129 = {};
        for (var $130 in v1) {
          if ({}.hasOwnProperty.call(v1, $130)) {
            $129[$130] = v1[$130];
          }
          ;
        }
        ;
        $129.linkCount = model.linkCount + 1 | 0;
        $129.nodeCount = v.nodeCount;
        $129.nodeNameToID = insert22(link4.s)(v.sid)(insert22(link4.t)(v.tid)(model.nodeNameToID));
        $129.nodeIDToName = insert15(v.sid)(link4.s)(insert15(v.tid)(link4.t)(model.nodeIDToName));
        $129.deps = unionInsert(v.sid)(v.tid)(model.deps);
        $129.sped = unionInsert(v.tid)(v.sid)(model.sped);
        $129.sankeyLinks = snoc(model.sankeyLinks)(initialiseSankeyLink({
          source: v.sid,
          target: v.tid,
          value: link4.v,
          id: model.linkCount
        }));
        return $129;
      });
    });
  };
  var initializeNodeBreadths = function(nodes) {
    return function(links) {
      return function(config) {
        return function(y0) {
          return function(y113) {
            var positionLayer = function(ky2) {
              return function(padding) {
                return function(yStart) {
                  return function(layerNodes) {
                    var stacked = foldl3(function(acc) {
                      return function(node) {
                        var nodeHeight = node.value * ky2;
                        var positioned2 = {
                          value: node.value,
                          color: node.color,
                          depth: node.depth,
                          index: node.index,
                          layer: node.layer,
                          name: node.name,
                          nodeHeight: node.nodeHeight,
                          sourceLinks: node.sourceLinks,
                          targetLinks: node.targetLinks,
                          x0: node.x0,
                          x1: node.x1,
                          y0: acc.y,
                          y1: acc.y + nodeHeight
                        };
                        return {
                          nodes: snoc(acc.nodes)(positioned2),
                          y: acc.y + nodeHeight + padding,
                          finalY: acc.finalY
                        };
                      };
                    })({
                      nodes: [],
                      y: yStart,
                      finalY: y113
                    })(layerNodes);
                    var extraSpacing = (y113 - stacked.y + padding) / (toNumber(length3(layerNodes)) + 1);
                    var v2 = unsafePerformEffect(log2("  Layer extra spacing: " + (show121(extraSpacing) + (" (lastY=" + (show121(stacked.y) + (", y1=" + (show121(y113) + ")")))))));
                    var adjusted = mapWithIndex3(function(i2) {
                      return function(node) {
                        var shift = extraSpacing * toNumber(i2 + 1 | 0);
                        return {
                          color: node.color,
                          depth: node.depth,
                          index: node.index,
                          layer: node.layer,
                          name: node.name,
                          nodeHeight: node.nodeHeight,
                          sourceLinks: node.sourceLinks,
                          targetLinks: node.targetLinks,
                          value: node.value,
                          x0: node.x0,
                          x1: node.x1,
                          y0: node.y0 + shift,
                          y1: node.y1 + shift
                        };
                      };
                    })(stacked.nodes);
                    return adjusted;
                  };
                };
              };
            };
            var calculateKy = function(layers2) {
              return function(height25) {
                return function(padding) {
                  var scaleForLayer = function(layerNodes) {
                    var totalValue = foldl3(function(sum8) {
                      return function(node) {
                        return sum8 + node.value;
                      };
                    })(0)(layerNodes);
                    var numNodes = toNumber(length3(layerNodes));
                    var availableHeight = height25 - (numNodes - 1) * padding;
                    var scale = (function() {
                      var $135 = totalValue > 0;
                      if ($135) {
                        return availableHeight / totalValue;
                      }
                      ;
                      return 1;
                    })();
                    var v3 = unsafePerformEffect(log2("  Layer: " + (show41(length3(layerNodes)) + (" nodes, totalValue=" + (show121(totalValue) + (", availableHeight=" + (show121(availableHeight) + (", scale=" + show121(scale)))))))));
                    return scale;
                  };
                  var v2 = unsafePerformEffect(log2("calculateKy: height=" + (show121(height25) + (", padding=" + show121(padding)))));
                  var scales = map73(scaleForLayer)(layers2);
                  var nonEmptyScales = filter(function(s) {
                    return s > 0;
                  })(scales);
                  var result = (function() {
                    var v12 = head(nonEmptyScales);
                    if (v12 instanceof Just) {
                      return foldl3(min9)(v12.value0)(nonEmptyScales);
                    }
                    ;
                    if (v12 instanceof Nothing) {
                      return 1;
                    }
                    ;
                    throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 448, column 18 - line 450, column 25): " + [v12.constructor.name]);
                  })();
                  var v1 = unsafePerformEffect(log2("calculateKy result (min of all scales): " + show121(result)));
                  return result;
                };
              };
            };
            var totalHeight = y113 - y0;
            var maxLayer = foldl3(function(acc) {
              return function(node) {
                return max14(acc)(node.layer);
              };
            })(0)(nodes);
            var layers = map73(function(layerIdx) {
              return filter(function(node) {
                return node.layer === layerIdx;
              })(nodes);
            })(range2(0)(maxLayer));
            var ky = calculateKy(layers)(totalHeight)(config.nodePadding);
            var v = unsafePerformEffect(log2("DEBUG initializeNodeBreadths: totalHeight=" + (show121(totalHeight) + (", ky=" + (show121(ky) + (", numLayers=" + show41(length3(layers))))))));
            var positionedLayers = map73(positionLayer(ky)(config.nodePadding)(y0))(layers);
            var positioned = concat(positionedLayers);
            return positioned;
          };
        };
      };
    };
  };
  var initialiseSankeyNodes = /* @__PURE__ */ bind33(get8)(function(model) {
    var nodeNames = toUnfoldable9(keys3(model.nodeIDToName));
    var sankeyNodes = catMaybes(map73(initialiseSankeyNode(model))(nodeNames));
    return modify_5(function(v) {
      var $138 = {};
      for (var $139 in v) {
        if ({}.hasOwnProperty.call(v, $139)) {
          $138[$139] = v[$139];
        }
        ;
      }
      ;
      $138.sankeyNodes = sankeyNodes;
      return $138;
    });
  });
  var computeNodeValues = /* @__PURE__ */ (function() {
    var setNodeValue2 = function(links) {
      return function(n) {
        var totalOut = foldl3(function(sum8) {
          return function(link4) {
            return sum8 + link4.value;
          };
        })(0)(filter(function(l) {
          return eq8(l.sourceIndex)(n.index);
        })(links));
        var totalIn = foldl3(function(sum8) {
          return function(link4) {
            return sum8 + link4.value;
          };
        })(0)(filter(function(l) {
          return eq8(l.targetIndex)(n.index);
        })(links));
        return {
          name: n.name,
          x0: n.x0,
          y0: n.y0,
          x1: n.x1,
          y1: n.y1,
          depth: n.depth,
          nodeHeight: n.nodeHeight,
          layer: n.layer,
          index: n.index,
          color: n.color,
          sourceLinks: n.sourceLinks,
          targetLinks: n.targetLinks,
          value: max15(totalIn)(totalOut)
        };
      };
    };
    return bind33(get8)(function(model) {
      var updatedNodes = map73(setNodeValue2(model.sankeyLinks))(model.sankeyNodes);
      return modify_5(function(v) {
        var $141 = {};
        for (var $142 in v) {
          if ({}.hasOwnProperty.call(v, $142)) {
            $141[$142] = v[$142];
          }
          ;
        }
        ;
        $141.sankeyNodes = updatedNodes;
        return $141;
      });
    });
  })();
  var computeNodeHeights = /* @__PURE__ */ (function() {
    var bfsHeight = function($copy_nodes) {
      return function($copy_height) {
        return function($copy_current) {
          return function($copy_maxHeight) {
            var $tco_var_nodes = $copy_nodes;
            var $tco_var_height = $copy_height;
            var $tco_var_current = $copy_current;
            var $tco_done = false;
            var $tco_result;
            function $tco_loop(nodes, height25, current, maxHeight) {
              if (isEmpty2(current)) {
                $tco_done = true;
                return nodes;
              }
              ;
              if (height25 > maxHeight) {
                $tco_done = true;
                return nodes;
              }
              ;
              if (otherwise) {
                var nodesWithHeight = map73(function(node) {
                  var $148 = member5(node.index)(current);
                  if ($148) {
                    return {
                      index: node.index,
                      color: node.color,
                      depth: node.depth,
                      layer: node.layer,
                      name: node.name,
                      sourceLinks: node.sourceLinks,
                      targetLinks: node.targetLinks,
                      value: node.value,
                      x0: node.x0,
                      x1: node.x1,
                      y0: node.y0,
                      y1: node.y1,
                      nodeHeight: height25
                    };
                  }
                  ;
                  return node;
                })(nodes);
                var next2 = foldl3(function(acc) {
                  return function(node) {
                    var $149 = member5(node.index)(current);
                    if ($149) {
                      return union4(acc)(node.targetLinks);
                    }
                    ;
                    return acc;
                  };
                })(empty7)(nodes);
                $tco_var_nodes = nodesWithHeight;
                $tco_var_height = height25 + 1 | 0;
                $tco_var_current = next2;
                $copy_maxHeight = maxHeight;
                return;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 224, column 5 - line 224, column 86): " + [nodes.constructor.name, height25.constructor.name, current.constructor.name, maxHeight.constructor.name]);
            }
            ;
            while (!$tco_done) {
              $tco_result = $tco_loop($tco_var_nodes, $tco_var_height, $tco_var_current, $copy_maxHeight);
            }
            ;
            return $tco_result;
          };
        };
      };
    };
    return bind33(get8)(function(model) {
      var n = length3(model.sankeyNodes);
      var sinkNodes = filter(function(node) {
        return isEmpty2(node.sourceLinks);
      })(model.sankeyNodes);
      var initialCurrent = fromFoldable40(map73(function(v) {
        return v.index;
      })(sinkNodes));
      var result = bfsHeight(model.sankeyNodes)(0)(initialCurrent)(n);
      return modify_5(function(v) {
        var $150 = {};
        for (var $151 in v) {
          if ({}.hasOwnProperty.call(v, $151)) {
            $150[$151] = v[$151];
          }
          ;
        }
        ;
        $150.sankeyNodes = result;
        return $150;
      });
    });
  })();
  var computeNodeDepths = /* @__PURE__ */ (function() {
    var bfsDepth = function($copy_nodes) {
      return function($copy_depth) {
        return function($copy_current) {
          return function($copy_maxDepth) {
            var $tco_var_nodes = $copy_nodes;
            var $tco_var_depth = $copy_depth;
            var $tco_var_current = $copy_current;
            var $tco_done = false;
            var $tco_result;
            function $tco_loop(nodes, depth, current, maxDepth2) {
              if (isEmpty2(current)) {
                $tco_done = true;
                return nodes;
              }
              ;
              if (depth > maxDepth2) {
                $tco_done = true;
                return nodes;
              }
              ;
              if (otherwise) {
                var nodesWithDepth = map73(function(node) {
                  var $157 = member5(node.index)(current);
                  if ($157) {
                    return {
                      index: node.index,
                      color: node.color,
                      layer: node.layer,
                      name: node.name,
                      nodeHeight: node.nodeHeight,
                      sourceLinks: node.sourceLinks,
                      targetLinks: node.targetLinks,
                      value: node.value,
                      x0: node.x0,
                      x1: node.x1,
                      y0: node.y0,
                      y1: node.y1,
                      depth
                    };
                  }
                  ;
                  return node;
                })(nodes);
                var next2 = foldl3(function(acc) {
                  return function(node) {
                    var $158 = member5(node.index)(current);
                    if ($158) {
                      return union4(acc)(node.sourceLinks);
                    }
                    ;
                    return acc;
                  };
                })(empty7)(nodes);
                $tco_var_nodes = nodesWithDepth;
                $tco_var_depth = depth + 1 | 0;
                $tco_var_current = next2;
                $copy_maxDepth = maxDepth2;
                return;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 185, column 5 - line 185, column 85): " + [nodes.constructor.name, depth.constructor.name, current.constructor.name, maxDepth2.constructor.name]);
            }
            ;
            while (!$tco_done) {
              $tco_result = $tco_loop($tco_var_nodes, $tco_var_depth, $tco_var_current, $copy_maxDepth);
            }
            ;
            return $tco_result;
          };
        };
      };
    };
    return bind33(get8)(function(model) {
      var n = length3(model.sankeyNodes);
      var sourceNodes = filter(function(node) {
        return isEmpty2(node.targetLinks);
      })(model.sankeyNodes);
      var initialCurrent = fromFoldable40(map73(function(v) {
        return v.index;
      })(sourceNodes));
      var result = bfsDepth(model.sankeyNodes)(0)(initialCurrent)(n);
      return modify_5(function(v) {
        var $159 = {};
        for (var $160 in v) {
          if ({}.hasOwnProperty.call(v, $160)) {
            $159[$160] = v[$160];
          }
          ;
        }
        ;
        $159.sankeyNodes = result;
        return $159;
      });
    });
  })();
  var computeLinkBreadths2 = /* @__PURE__ */ (function() {
    var calculateLinkYPositions = function(nodes) {
      return function(links) {
        var linksWithY0 = foldl3(function(currentLinks) {
          return function(node) {
            var outgoingLinks = filter(function(link4) {
              return eq8(link4.sourceIndex)(node.index);
            })(currentLinks);
            var sorted = sortBy(function(a2) {
              return function(b2) {
                var v = find2(function(n) {
                  return eq8(n.index)(b2.targetIndex);
                })(nodes);
                var v1 = find2(function(n) {
                  return eq8(n.index)(a2.targetIndex);
                })(nodes);
                if (v1 instanceof Just && v instanceof Just) {
                  return compare15(v1.value0.y0)(v.value0.y0);
                }
                ;
                return EQ.value;
              };
            })(outgoingLinks);
            var withY0 = foldl3(function(acc) {
              return function(link4) {
                var y46 = acc.y + link4.width / 2;
                var updated = {
                  width: link4.width,
                  sourceIndex: link4.sourceIndex,
                  targetIndex: link4.targetIndex,
                  index: link4.index,
                  color: link4.color,
                  value: link4.value,
                  y1: link4.y1,
                  y0: y46
                };
                return {
                  y: acc.y + link4.width,
                  links: snoc(acc.links)(updated)
                };
              };
            })({
              y: node.y0,
              links: []
            })(sorted);
            return map73(function(link4) {
              var v = find2(function(l) {
                return eq32(l.index)(link4.index);
              })(withY0.links);
              if (v instanceof Just) {
                return v.value0;
              }
              ;
              if (v instanceof Nothing) {
                return link4;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 741, column 15 - line 743, column 32): " + [v.constructor.name]);
            })(currentLinks);
          };
        })(links)(nodes);
        var linksWithY1 = foldl3(function(currentLinks) {
          return function(node) {
            var incomingLinks = filter(function(link4) {
              return eq8(link4.targetIndex)(node.index);
            })(currentLinks);
            var sorted = sortBy(function(a2) {
              return function(b2) {
                var v = find2(function(n) {
                  return eq8(n.index)(b2.sourceIndex);
                })(nodes);
                var v1 = find2(function(n) {
                  return eq8(n.index)(a2.sourceIndex);
                })(nodes);
                if (v1 instanceof Just && v instanceof Just) {
                  return compare15(v1.value0.y0)(v.value0.y0);
                }
                ;
                return EQ.value;
              };
            })(incomingLinks);
            var withY1 = foldl3(function(acc) {
              return function(link4) {
                var y46 = acc.y + link4.width / 2;
                var updated = {
                  width: link4.width,
                  sourceIndex: link4.sourceIndex,
                  targetIndex: link4.targetIndex,
                  index: link4.index,
                  color: link4.color,
                  value: link4.value,
                  y0: link4.y0,
                  y1: y46
                };
                return {
                  y: acc.y + link4.width,
                  links: snoc(acc.links)(updated)
                };
              };
            })({
              y: node.y0,
              links: []
            })(sorted);
            return map73(function(link4) {
              var v = find2(function(l) {
                return eq32(l.index)(link4.index);
              })(withY1.links);
              if (v instanceof Just) {
                return v.value0;
              }
              ;
              if (v instanceof Nothing) {
                return link4;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 771, column 15 - line 773, column 32): " + [v.constructor.name]);
            })(currentLinks);
          };
        })(linksWithY0)(nodes);
        return linksWithY1;
      };
    };
    var calculateGlobalKy = function(nodes) {
      return function(y0) {
        return function(y113) {
          return function(padding) {
            var scaleForLayer = function(layerNodes) {
              var totalValue = foldl3(function(sum8) {
                return function(node) {
                  return sum8 + node.value;
                };
              })(0)(layerNodes);
              var numNodes = toNumber(length3(layerNodes));
              var availableHeight = y113 - y0 - (numNodes - 1) * padding;
              var $174 = totalValue > 0;
              if ($174) {
                return availableHeight / totalValue;
              }
              ;
              return 1;
            };
            var maxLayer = foldl3(function(acc) {
              return function(node) {
                return max14(acc)(node.layer);
              };
            })(0)(nodes);
            var layers = map73(function(layerIdx) {
              return filter(function(node) {
                return node.layer === layerIdx;
              })(nodes);
            })(range2(0)(maxLayer));
            var scales = map73(scaleForLayer)(layers);
            var nonEmptyScales = filter(function(s) {
              return s > 0;
            })(scales);
            var v = head(nonEmptyScales);
            if (v instanceof Just) {
              return foldl3(min9)(v.value0)(nonEmptyScales);
            }
            ;
            if (v instanceof Nothing) {
              return 1;
            }
            ;
            throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 709, column 9 - line 711, column 25): " + [v.constructor.name]);
          };
        };
      };
    };
    return bind33(get8)(function(model) {
      var ky = calculateGlobalKy(model.sankeyNodes)(model.config.extent.y0)(model.config.extent.y1)(model.config.nodePadding);
      var linksWithWidth = map73(function(link4) {
        return {
          value: link4.value,
          color: link4.color,
          index: link4.index,
          sourceIndex: link4.sourceIndex,
          targetIndex: link4.targetIndex,
          y0: link4.y0,
          y1: link4.y1,
          width: link4.value * ky
        };
      })(model.sankeyLinks);
      var linksWithY = calculateLinkYPositions(model.sankeyNodes)(linksWithWidth);
      return modify_5(function(v) {
        var $177 = {};
        for (var $178 in v) {
          if ({}.hasOwnProperty.call(v, $178)) {
            $177[$178] = v[$178];
          }
          ;
        }
        ;
        $177.sankeyLinks = linksWithY;
        return $177;
      });
    });
  })();
  var assignColors = /* @__PURE__ */ bind33(get8)(function(model) {
    var colors6 = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];
    var nodesWithColor = mapWithIndex3(function(i2) {
      return function(node) {
        return {
          depth: node.depth,
          index: node.index,
          layer: node.layer,
          name: node.name,
          nodeHeight: node.nodeHeight,
          sourceLinks: node.sourceLinks,
          targetLinks: node.targetLinks,
          value: node.value,
          x0: node.x0,
          x1: node.x1,
          y0: node.y0,
          y1: node.y1,
          color: fromMaybe("#999")(index2(colors6)(mod5(i2)(length3(colors6))))
        };
      };
    })(model.sankeyNodes);
    var assignLinkColor = function(nodes) {
      return function(mode) {
        return function(link4) {
          if (mode instanceof SourceColor) {
            var sourceNode = find2(function(n) {
              return eq8(n.index)(link4.sourceIndex);
            })(nodes);
            return {
              sourceIndex: link4.sourceIndex,
              targetIndex: link4.targetIndex,
              value: link4.value,
              width: link4.width,
              y0: link4.y0,
              y1: link4.y1,
              index: link4.index,
              color: maybe("#999")(function(n) {
                return n.color;
              })(sourceNode)
            };
          }
          ;
          if (mode instanceof TargetColor) {
            var targetNode = find2(function(n) {
              return eq8(n.index)(link4.targetIndex);
            })(nodes);
            return {
              sourceIndex: link4.sourceIndex,
              targetIndex: link4.targetIndex,
              value: link4.value,
              width: link4.width,
              y0: link4.y0,
              y1: link4.y1,
              index: link4.index,
              color: maybe("#999")(function(n) {
                return n.color;
              })(targetNode)
            };
          }
          ;
          if (mode instanceof SourceTargetGradient) {
            return {
              sourceIndex: link4.sourceIndex,
              targetIndex: link4.targetIndex,
              value: link4.value,
              width: link4.width,
              y0: link4.y0,
              y1: link4.y1,
              index: link4.index,
              color: "#999"
            };
          }
          ;
          if (mode instanceof StaticColor) {
            return {
              sourceIndex: link4.sourceIndex,
              targetIndex: link4.targetIndex,
              value: link4.value,
              width: link4.width,
              y0: link4.y0,
              y1: link4.y1,
              index: link4.index,
              color: mode.value0
            };
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 799, column 9 - line 809, column 31): " + [mode.constructor.name]);
        };
      };
    };
    var linksWithColor = map73(assignLinkColor(nodesWithColor)(model.config.linkColorMode))(model.sankeyLinks);
    return modify_5(function(v) {
      var $182 = {};
      for (var $183 in v) {
        if ({}.hasOwnProperty.call(v, $183)) {
          $182[$183] = v[$183];
        }
        ;
      }
      ;
      $182.sankeyNodes = nodesWithColor;
      $182.sankeyLinks = linksWithColor;
      return $182;
    });
  });
  var alignNodeToLayer = function(alignment) {
    return function(node) {
      return function(numLayers) {
        if (alignment instanceof Left2) {
          return node.depth;
        }
        ;
        if (alignment instanceof Right2) {
          return max14(0)((numLayers - 1 | 0) - node.nodeHeight | 0);
        }
        ;
        if (alignment instanceof Justify) {
          var $186 = isEmpty2(node.sourceLinks);
          if ($186) {
            return numLayers - 1 | 0;
          }
          ;
          return node.depth;
        }
        ;
        if (alignment instanceof Center) {
          var $187 = !isEmpty2(node.targetLinks);
          if ($187) {
            return node.depth;
          }
          ;
          return 0;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 390, column 3 - line 400, column 13): " + [alignment.constructor.name]);
      };
    };
  };
  var computeNodeLayers = function(nodes) {
    return function(config) {
      return function(x0) {
        return function(x115) {
          var maxDepth2 = foldl3(function(acc) {
            return function(node) {
              return max14(acc)(node.depth);
            };
          })(0)(nodes);
          var numLayers = maxDepth2 + 1 | 0;
          var nodesWithLayer = map73(function(node) {
            var layer = alignNodeToLayer(config.alignment)(node)(numLayers);
            return {
              color: node.color,
              depth: node.depth,
              index: node.index,
              name: node.name,
              nodeHeight: node.nodeHeight,
              sourceLinks: node.sourceLinks,
              targetLinks: node.targetLinks,
              value: node.value,
              x0: node.x0,
              x1: node.x1,
              y0: node.y0,
              y1: node.y1,
              layer
            };
          })(nodes);
          var kx = (x115 - x0 - config.nodeWidth) / max15(1)(toNumber(numLayers - 1 | 0));
          var nodesWithX = map73(function(node) {
            var x0Pos = x0 + toNumber(node.layer) * kx;
            return {
              layer: node.layer,
              color: node.color,
              depth: node.depth,
              index: node.index,
              name: node.name,
              nodeHeight: node.nodeHeight,
              sourceLinks: node.sourceLinks,
              targetLinks: node.targetLinks,
              value: node.value,
              y0: node.y0,
              y1: node.y1,
              x0: x0Pos,
              x1: x0Pos + config.nodeWidth
            };
          })(nodesWithLayer);
          return nodesWithX;
        };
      };
    };
  };
  var computeNodeBreadths = /* @__PURE__ */ bind33(get8)(function(model) {
    var nodesWithLayers = computeNodeLayers(model.sankeyNodes)(model.config)(model.config.extent.x0)(model.config.extent.x1);
    var nodesWithY = initializeNodeBreadths(nodesWithLayers)(model.sankeyLinks)(model.config)(model.config.extent.y0)(model.config.extent.y1);
    var v = unsafePerformEffect(function __do5() {
      (function() {
        var v13 = find2(function(n) {
          return n.name === "Nuclear";
        })(nodesWithY);
        if (v13 instanceof Just) {
          return log2("BEFORE relaxation - Nuclear: y0=" + (show121(v13.value0.y0) + (", y1=" + show121(v13.value0.y1))))();
        }
        ;
        if (v13 instanceof Nothing) {
          return unit;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 266, column 9 - line 268, column 31): " + [v13.constructor.name]);
      })();
      (function() {
        var v13 = find2(function(n) {
          return n.name === "Thermal generation";
        })(nodesWithY);
        if (v13 instanceof Just) {
          return log2("BEFORE relaxation - Thermal generation: y0=" + (show121(v13.value0.y0) + (", y1=" + show121(v13.value0.y1))))();
        }
        ;
        if (v13 instanceof Nothing) {
          return unit;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 269, column 9 - line 271, column 31): " + [v13.constructor.name]);
      })();
      var v12 = find2(function(n) {
        return n.name === "Losses";
      })(nodesWithY);
      if (v12 instanceof Just) {
        return log2("BEFORE relaxation - Losses: y0=" + (show121(v12.value0.y0) + (", y1=" + show121(v12.value0.y1))))();
      }
      ;
      if (v12 instanceof Nothing) {
        return unit;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 272, column 9 - line 274, column 31): " + [v12.constructor.name]);
    });
    var relaxedNodes = relaxation(nodesWithY)(model.sankeyLinks)(model.config)(model.config.extent.y0)(model.config.extent.y1);
    var v1 = unsafePerformEffect(function __do5() {
      (function() {
        var v22 = find2(function(n) {
          return n.name === "Nuclear";
        })(relaxedNodes);
        if (v22 instanceof Just) {
          return log2("AFTER relaxation - Nuclear: y0=" + (show121(v22.value0.y0) + (", y1=" + show121(v22.value0.y1))))();
        }
        ;
        if (v22 instanceof Nothing) {
          return unit;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 282, column 9 - line 284, column 31): " + [v22.constructor.name]);
      })();
      (function() {
        var v22 = find2(function(n) {
          return n.name === "Thermal generation";
        })(relaxedNodes);
        if (v22 instanceof Just) {
          return log2("AFTER relaxation - Thermal generation: y0=" + (show121(v22.value0.y0) + (", y1=" + show121(v22.value0.y1))))();
        }
        ;
        if (v22 instanceof Nothing) {
          return unit;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 285, column 9 - line 287, column 31): " + [v22.constructor.name]);
      })();
      var v2 = find2(function(n) {
        return n.name === "Losses";
      })(relaxedNodes);
      if (v2 instanceof Just) {
        return log2("AFTER relaxation - Losses: y0=" + (show121(v2.value0.y0) + (", y1=" + show121(v2.value0.y1))))();
      }
      ;
      if (v2 instanceof Nothing) {
        return unit;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Layout.Sankey.Compute (line 288, column 9 - line 290, column 31): " + [v2.constructor.name]);
    });
    return modify_5(function(v2) {
      var $200 = {};
      for (var $201 in v2) {
        if ({}.hasOwnProperty.call(v2, $201)) {
          $200[$201] = v2[$201];
        }
        ;
      }
      ;
      $200.sankeyNodes = relaxedNodes;
      return $200;
    });
  });
  var computeLayoutWithConfig = function(linkInputs) {
    return function(config) {
      var computeSankeyLayout = discard210(for_3(linkInputs)(processCSVLink))(function() {
        return discard210(initialiseSankeyNodes)(function() {
          return discard210(computeNodeValues)(function() {
            return discard210(computeNodeDepths)(function() {
              return discard210(computeNodeHeights)(function() {
                return discard210(computeNodeBreadths)(function() {
                  return discard210(computeLinkBreadths2)(function() {
                    return assignColors;
                  });
                });
              });
            });
          });
        });
      });
      var finalModel = execState(computeSankeyLayout)(initialSankeyGraphModel(config));
      return {
        nodes: finalModel.sankeyNodes,
        links: finalModel.sankeyLinks
      };
    };
  };
  var computeLayout = function(linkInputs) {
    return function(width25) {
      return function(height25) {
        return computeLayoutWithConfig(linkInputs)(defaultSankeyConfig(width25)(height25));
      };
    };
  };

  // output/PSD3.Layout.Sankey.Path/index.js
  var eq9 = /* @__PURE__ */ eq(eqNodeID);
  var findNode = function(nodes) {
    return function(nodeId) {
      return find2(function(n) {
        return eq9(n.index)(nodeId);
      })(nodes);
    };
  };
  var generateLinkPath = function(nodes) {
    return function(link4) {
      var targetNode = findNode(nodes)(link4.targetIndex);
      var sourceNode = findNode(nodes)(link4.sourceIndex);
      if (sourceNode instanceof Just && targetNode instanceof Just) {
        var xi = (sourceNode.value0.x1 + targetNode.value0.x0) / 2;
        var y0Bottom = link4.y0 + link4.width / 2;
        var y0Top = link4.y0 - link4.width / 2;
        var y1Bottom = link4.y1 + link4.width / 2;
        var y1Top = link4.y1 - link4.width / 2;
        return "M" + (toString(sourceNode.value0.x1) + ("," + (toString(y0Top) + (" C" + (toString(xi) + ("," + (toString(y0Top) + (" " + (toString(xi) + ("," + (toString(y1Top) + (" " + (toString(targetNode.value0.x0) + ("," + (toString(y1Top) + (" L" + (toString(targetNode.value0.x0) + ("," + (toString(y1Bottom) + (" C" + (toString(xi) + ("," + (toString(y1Bottom) + (" " + (toString(xi) + ("," + (toString(y0Bottom) + (" " + (toString(sourceNode.value0.x1) + ("," + (toString(y0Bottom) + " Z")))))))))))))))))))))))))))))));
      }
      ;
      return "";
    };
  };

  // output/D3.Viz.SankeyDiagram/index.js
  var show42 = /* @__PURE__ */ show(showLinkID);
  var show122 = /* @__PURE__ */ show(showNumber);
  var width19 = /* @__PURE__ */ width8(toAttrNumber);
  var height19 = /* @__PURE__ */ height8(toAttrNumber);
  var classed32 = /* @__PURE__ */ classed(toAttrString);
  var show211 = /* @__PURE__ */ show(showInt);
  var for_4 = /* @__PURE__ */ for_(applicativeEffect)(foldableArray);
  var discard32 = /* @__PURE__ */ discard(discardUnit);
  var compare16 = /* @__PURE__ */ compare(ordInt);
  var fill27 = /* @__PURE__ */ fill(toAttrStringFnI);
  var fillOpacity8 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var d16 = /* @__PURE__ */ d(toAttrStringFnI);
  var x33 = /* @__PURE__ */ x(toAttrNumberFnI);
  var y33 = /* @__PURE__ */ y(toAttrNumberFnI);
  var width1 = /* @__PURE__ */ width8(toAttrNumberFnI);
  var height1 = /* @__PURE__ */ height8(toAttrNumberFnI);
  var strokeColor28 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth25 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var strokeOpacity6 = /* @__PURE__ */ strokeOpacity(toAttrNumber);
  var textAnchor10 = /* @__PURE__ */ textAnchor(toAttrStringFnI);
  var text24 = /* @__PURE__ */ text6(toAttrStringFnI);
  var fill110 = /* @__PURE__ */ fill(toAttrString);
  var keyForNode = function(d1) {
    return d1.name;
  };
  var keyForLink = function(d1) {
    return show42(d1.index);
  };
  var draw17 = function(dictBind) {
    var bind92 = bind(dictBind);
    var discard216 = discard32(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(csvData) {
          return function(selector) {
            return bind92(liftEffect53(getWindowWidthHeight))(function(v) {
              return bind92(liftEffect53(log2("Window dimensions: w=" + (show122(v.value0) + (", h=" + show122(v.value1))))))(function() {
                return bind92(attach6(selector))(function(root3) {
                  return bind92(appendTo6(root3)(Svg.value)([viewBox(0)(0)(v.value0)(v.value1), width19(v.value0), height19(v.value1), classed32("sankey")]))(function(svg2) {
                    return bind92(appendTo6(svg2)(Group.value)([classed32("links")]))(function(linksGroup) {
                      return bind92(appendTo6(svg2)(Group.value)([classed32("nodes")]))(function(nodesGroup) {
                        return bind92(appendTo6(svg2)(Group.value)([classed32("labels")]))(function(labelsGroup) {
                          var linkInputs = parseSankeyCSV(csvData);
                          return bind92(liftEffect53(log2("Parsed " + (show211(length3(linkInputs)) + " link inputs from CSV"))))(function() {
                            var layoutResult = computeLayout(linkInputs)(v.value0)(v.value1);
                            return bind92(liftEffect53(log2("Layout computed: " + (show211(length3(layoutResult.nodes)) + (" nodes, " + (show211(length3(layoutResult.links)) + " links"))))))(function() {
                              return bind92(liftEffect53(for_4(layoutResult.nodes)(function(node) {
                                var sourceCount = "sources=" + show211(size5(node.sourceLinks));
                                var targetCount = "targets=" + show211(size5(node.targetLinks));
                                return function __do5() {
                                  log2('Node: "' + (node.name + '"'))();
                                  log2("  Position: x0=" + (show122(node.x0) + (", y0=" + (show122(node.y0) + (", x1=" + (show122(node.x1) + (", y1=" + show122(node.y1))))))))();
                                  log2("  Depth: " + (show211(node.depth) + (", Height: " + (show211(node.nodeHeight) + (", Layer: " + show211(node.layer))))))();
                                  return log2("  " + (sourceCount + (", " + targetCount)))();
                                };
                              })))(function() {
                                return bind92(liftEffect53((function() {
                                  var sorted = sortBy(function(n1) {
                                    return function(n2) {
                                      return compare16(n1.layer)(n2.layer);
                                    };
                                  })(layoutResult.nodes);
                                  var layers = groupBy(function(n1) {
                                    return function(n2) {
                                      return n1.layer === n2.layer;
                                    };
                                  })(sorted);
                                  return for_4(layers)(function(layerNodes) {
                                    var firstNode = head4(layerNodes);
                                    return log2("Layer " + (show211(firstNode.layer) + (": " + (show211(length8(layerNodes)) + " nodes"))));
                                  });
                                })()))(function() {
                                  return bind92(simpleJoin4(linksGroup)(Path2.value)(layoutResult.links)(keyForLink))(function(linksSelection) {
                                    return discard216(setAttributes5(linksSelection)([classed32("sankey-link"), fill27(function(v1) {
                                      return function(v2) {
                                        return v1.color;
                                      };
                                    }), fillOpacity8(0.5), d16(function(v1) {
                                      return function(v2) {
                                        return generateLinkPath(layoutResult.nodes)(v1);
                                      };
                                    })]))(function() {
                                      return bind92(simpleJoin4(nodesGroup)(Rect.value)(layoutResult.nodes)(keyForNode))(function(nodesSelection) {
                                        return discard216(setAttributes5(nodesSelection)([classed32("sankey-node"), x33(function(v1) {
                                          return function(v2) {
                                            return v1.x0;
                                          };
                                        }), y33(function(v1) {
                                          return function(v2) {
                                            return v1.y0;
                                          };
                                        }), width1(function(v1) {
                                          return function(v2) {
                                            return v1.x1 - v1.x0;
                                          };
                                        }), height1(function(v1) {
                                          return function(v2) {
                                            return v1.y1 - v1.y0;
                                          };
                                        }), fill27(function(v1) {
                                          return function(v2) {
                                            return v1.color;
                                          };
                                        }), strokeColor28("#000"), strokeWidth25(1), strokeOpacity6(0.3)]))(function() {
                                          return bind92(simpleJoin4(labelsGroup)(Text2.value)(layoutResult.nodes)(keyForNode))(function(labelsSelection) {
                                            return discard216(setAttributes5(labelsSelection)([classed32("sankey-label"), x33(function(v1) {
                                              return function(v2) {
                                                var $75 = v1.x0 < v.value0 / 2;
                                                if ($75) {
                                                  return v1.x1 + 6;
                                                }
                                                ;
                                                return v1.x0 - 6;
                                              };
                                            }), y33(function(v1) {
                                              return function(v2) {
                                                return (v1.y0 + v1.y1) / 2;
                                              };
                                            }), textAnchor10(function(v1) {
                                              return function(v2) {
                                                var $78 = v1.x0 < v.value0 / 2;
                                                if ($78) {
                                                  return "start";
                                                }
                                                ;
                                                return "end";
                                              };
                                            }), text24(function(v1) {
                                              return function(v2) {
                                                return v1.name;
                                              };
                                            }), fill110("#000")]))(function() {
                                              return pure56(unit);
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.ScatterPlot/index.js
  var classed33 = /* @__PURE__ */ classed(toAttrString);
  var width20 = /* @__PURE__ */ width8(toAttrNumber);
  var height20 = /* @__PURE__ */ height8(toAttrNumber);
  var show43 = /* @__PURE__ */ show(showNumber);
  var x34 = /* @__PURE__ */ x(toAttrNumber);
  var y34 = /* @__PURE__ */ y(toAttrNumber);
  var text25 = /* @__PURE__ */ text6(toAttrString);
  var textAnchor11 = /* @__PURE__ */ textAnchor(toAttrString);
  var fontSize15 = /* @__PURE__ */ fontSize(toAttrNumber);
  var cx16 = /* @__PURE__ */ cx(toAttrNumber);
  var cy16 = /* @__PURE__ */ cy(toAttrNumber);
  var radius20 = /* @__PURE__ */ radius(toAttrNumber);
  var fill28 = /* @__PURE__ */ fill(toAttrString);
  var strokeColor29 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth26 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var drawQuartet = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure56 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(quartet) {
          return function(selector) {
            var plotWidth = (900 - 60 * 3) / 2;
            var plotHeight = (700 - 60 * 3) / 2;
            var margin = {
              top: 30,
              right: 20,
              bottom: 40,
              left: 50
            };
            var iWidth = plotWidth - margin.left - margin.right;
            var iHeight = plotHeight - margin.top - margin.bottom;
            var xDomain = [0, 20];
            var yDomain = [0, 14];
            return bind92(attach6(selector))(function(v) {
              return bind92(appendTo6(v)(Svg.value)([viewBox(0)(0)(900)(700), classed33("scatter-quartet"), width20(900), height20(700)]))(function(svg2) {
                var drawSubplot = function(title4) {
                  return function(dataPoints) {
                    return function(xOffset) {
                      return function(yOffset) {
                        return bind92(appendTo6(svg2)(Group.value)([classed33("subplot"), transform([function(v1) {
                          return "translate(" + (show43(xOffset + margin.left) + ("," + (show43(yOffset + margin.top) + ")")));
                        }])]))(function(subplotGroup) {
                          return bind92(appendTo6(svg2)(Text2.value)([x34(xOffset + plotWidth / 2), y34(yOffset + 15), text25(title4), textAnchor11("middle"), fontSize15(16), classed33("subplot-title")]))(function() {
                            return bind92(liftEffect53(createLinearScale_({
                              domain: xDomain,
                              range: [0, iWidth]
                            })))(function(xScale) {
                              return bind92(liftEffect53(createLinearScale_({
                                domain: yDomain,
                                range: [iHeight, 0]
                              })))(function(yScale) {
                                return bind92(appendTo6(subplotGroup)(Group.value)([classed33("x-axis"), transform([function(v1) {
                                  return "translate(0," + (show43(iHeight) + ")");
                                }])]))(function(xAxisGroup) {
                                  return bind92(appendTo6(subplotGroup)(Group.value)([classed33("y-axis")]))(function(yAxisGroup) {
                                    return bind92(liftEffect53(callAxis_(xAxisGroup)(axisBottom_(xScale))))(function() {
                                      return bind92(liftEffect53(callAxis_(yAxisGroup)(axisLeft_(yScale))))(function() {
                                        var addPoint = function(point) {
                                          var xPos = applyScale_(xScale)(point.x);
                                          var yPos = applyScale_(yScale)(point.y);
                                          return bind92(appendTo6(subplotGroup)(Circle.value)([cx16(xPos), cy16(yPos), radius20(4), fill28("#e74c3c"), strokeColor29("#c0392b"), strokeWidth26(1.5), classed33("scatter-point")]))(function() {
                                            return pure56(unit);
                                          });
                                        };
                                        return bind92(traverse_16(addPoint)(dataPoints))(function() {
                                          return pure56(unit);
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      };
                    };
                  };
                };
                return bind92(drawSubplot("Dataset I")(quartet.dataset1)(60)(60))(function() {
                  return bind92(drawSubplot("Dataset II")(quartet.dataset2)(60 + plotWidth + 60)(60))(function() {
                    return bind92(drawSubplot("Dataset III")(quartet.dataset3)(60)(60 + plotHeight + 60))(function() {
                      return bind92(drawSubplot("Dataset IV")(quartet.dataset4)(60 + plotWidth + 60)(60 + plotHeight + 60))(function() {
                        return pure56(unit);
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.SunburstViz/index.js
  var map74 = /* @__PURE__ */ map(functorMaybe);
  var map126 = /* @__PURE__ */ map(functorArray);
  var show44 = /* @__PURE__ */ show(showInt);
  var discard33 = /* @__PURE__ */ discard(discardUnit);
  var show123 = /* @__PURE__ */ show(showNumber);
  var traverse_10 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var pure31 = /* @__PURE__ */ pure(applicativeEffect);
  var append117 = /* @__PURE__ */ append(semigroupArray);
  var bind34 = /* @__PURE__ */ bind(bindArray);
  var sum7 = /* @__PURE__ */ sum(foldableArray)(semiringInt);
  var mod6 = /* @__PURE__ */ mod(euclideanRingInt);
  var classed34 = /* @__PURE__ */ classed(toAttrString);
  var x35 = /* @__PURE__ */ x(toAttrNumber);
  var y35 = /* @__PURE__ */ y(toAttrNumber);
  var fill29 = /* @__PURE__ */ fill(toAttrString);
  var fontSize16 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text26 = /* @__PURE__ */ text6(toAttrString);
  var d17 = /* @__PURE__ */ d(toAttrString);
  var strokeColor30 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth27 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var fillOpacity9 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var textAnchor12 = /* @__PURE__ */ textAnchor(toAttrString);
  var toHierarchyData3 = function(node) {
    return {
      data_: node,
      value: (function() {
        var v = getChildren(node);
        if (v instanceof Nothing) {
          return new Just(getValue(node));
        }
        ;
        if (v instanceof Just) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.SunburstViz (line 70, column 7 - line 72, column 26): " + [v.constructor.name]);
      })(),
      children: map74(map126(toHierarchyData3))(getChildren(node))
    };
  };
  var printSunburstStructure = function(currentDepth) {
    return function(maxDepth2) {
      return function(indent) {
        return function(v) {
          var $66 = currentDepth <= maxDepth2;
          if ($66) {
            var nodeType = (function() {
              var $67 = length3(v.value0.children) === 0;
              if ($67) {
                return "leaf";
              }
              ;
              return "internal(" + (show44(length3(v.value0.children)) + " children)");
            })();
            var nodeName3 = getName(v.value0.data_);
            return function __do5() {
              log2(indent + (nodeName3 + (" [" + (nodeType + ("]: x0=" + (show123(v.value0.x0) + (", y0=" + (show123(v.value0.y0) + (", x1=" + (show123(v.value0.x1) + (", y1=" + (show123(v.value0.y1) + (", depth=" + show44(v.value0.depth))))))))))))))();
              var $68 = currentDepth < maxDepth2;
              if ($68) {
                return traverse_10(printSunburstStructure(currentDepth + 1 | 0)(maxDepth2)(indent + "  "))(v.value0.children)();
              }
              ;
              return unit;
            };
          }
          ;
          return pure31(unit);
        };
      };
    };
  };
  var makeArcPath = function(chartWidth) {
    return function(chartHeight) {
      return function(x0) {
        return function(y0) {
          return function(x115) {
            return function(y113) {
              var startAngle = x0 / chartWidth * 2 * pi;
              var x2$prime = y113 * cos(startAngle);
              var y2$prime = y113 * sin(startAngle);
              var x0$prime = y0 * cos(startAngle);
              var y0$prime = y0 * sin(startAngle);
              var endAngle = x115 / chartWidth * 2 * pi;
              var largeArcFlag = (function() {
                var $70 = endAngle - startAngle > pi;
                if ($70) {
                  return 1;
                }
                ;
                return 0;
              })();
              var x1$prime = y0 * cos(endAngle);
              var x3$prime = y113 * cos(endAngle);
              var y1$prime = y0 * sin(endAngle);
              var y3$prime = y113 * sin(endAngle);
              var path3 = "M" + (show123(x0$prime) + ("," + (show123(y0$prime) + (" A" + (show123(y0) + ("," + (show123(y0) + (" 0 " + (show44(largeArcFlag) + (",1 " + (show123(x1$prime) + ("," + (show123(y1$prime) + (" L" + (show123(x3$prime) + ("," + (show123(y3$prime) + (" A" + (show123(y113) + ("," + (show123(y113) + (" 0 " + (show44(largeArcFlag) + (",0 " + (show123(x2$prime) + ("," + (show123(y2$prime) + " Z")))))))))))))))))))))))))));
              return path3;
            };
          };
        };
      };
    };
  };
  var getLabelPosition = function(chartWidth) {
    return function(chartHeight) {
      return function(x0) {
        return function(y0) {
          return function(x115) {
            return function(y113) {
              var startAngle = x0 / chartWidth * 2 * pi;
              var midRadius = (y0 + y113) / 2;
              var endAngle = x115 / chartWidth * 2 * pi;
              var midAngle = (startAngle + endAngle) / 2;
              var x211 = midRadius * cos(midAngle);
              var y211 = midRadius * sin(midAngle);
              var angleDeg = midAngle * 180 / pi;
              return {
                x: x211,
                y: y211,
                angle: angleDeg
              };
            };
          };
        };
      };
    };
  };
  var getAllNodes4 = function(v) {
    var $72 = length3(v.value0.children) === 0;
    if ($72) {
      return [v];
    }
    ;
    return append117([v])(bind34(v.value0.children)(getAllNodes4));
  };
  var countNodes3 = function(v) {
    return 1 + sum7(map126(countNodes3)(v.value0.children)) | 0;
  };
  var colors4 = ["#e7ba52", "#c7c7c7", "#aec7e8", "#1f77b4", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];
  var getColor3 = function(depth) {
    var idx = mod6(depth)(length3(colors4));
    var v = index2(colors4)(idx);
    if (v instanceof Just) {
      return v.value0;
    }
    ;
    if (v instanceof Nothing) {
      return "#cccccc";
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.SunburstViz (line 34, column 6 - line 36, column 28): " + [v.constructor.name]);
  };
  var draw18 = function(dictBind) {
    var bind121 = bind(dictBind);
    var discard216 = discard33(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure121 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return bind121(liftEffect53(log2("Loaded JSON - root name: " + getName(flareData))))(function() {
              var hierData = toHierarchyData3(flareData);
              var root3 = hierarchy3(hierData);
              var config = {
                padding: defaultPartitionConfig.padding,
                round: defaultPartitionConfig.round,
                size: {
                  width: 2 * pi,
                  height: 500
                }
              };
              var layout = partition3(config)(root3);
              var nodes = getAllNodes4(layout);
              return bind121(liftEffect53(log2("\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557")))(function() {
                return bind121(liftEffect53(log2("\u2551   SUNBURST VISUALIZATION: FULL FLARE HIERARCHY (RADIAL)      \u2551")))(function() {
                  return bind121(liftEffect53(log2("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D\n")))(function() {
                    return bind121(liftEffect53(printSunburstStructure(0)(2)("")(layout)))(function() {
                      return bind121(liftEffect53(log2("\nRendering " + (show44(length3(nodes)) + " nodes (full hierarchy)"))))(function() {
                        return bind121(liftEffect53(log2("Total node count: " + show44(countNodes3(layout)))))(function() {
                          return bind121(attach6(selector))(function(root$prime) {
                            return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed34("sunburst")]))(function(svg2) {
                              return bind121(appendTo6(svg2)(Text2.value)([x35(10), y35(20), fill29("#333"), fontSize16(16), text26("Sunburst Layout (Radial Partition)"), classed34("title")]))(function() {
                                return bind121(appendTo6(svg2)(Group.value)([classed34("sunburst-arcs"), transform([function(v) {
                                  return "translate(" + (show123(1600 / 2) + ("," + (show123(1200 / 2) + ")")));
                                }])]))(function(sunburstGroup) {
                                  var renderNode = function(v) {
                                    var nodeName3 = getName(v.value0.data_);
                                    return discard216((function() {
                                      var $79 = v.value0.depth > 0;
                                      if ($79) {
                                        var angleSpan = v.value0.x1 - v.value0.x0;
                                        var radiusSpan = v.value0.y1 - v.value0.y0;
                                        var $80 = angleSpan > 1e-3 && radiusSpan > 0.5;
                                        if ($80) {
                                          return bind121(appendTo6(sunburstGroup)(Path2.value)([d17(makeArcPath(2 * pi)(500)(v.value0.x0)(v.value0.y0)(v.value0.x1)(v.value0.y1)), fill29(getColor3(v.value0.depth)), strokeColor30("#fff"), strokeWidth27(1), fillOpacity9(0.7), classed34("arc"), classed34("depth-" + show44(v.value0.depth))]))(function() {
                                            return discard216((function() {
                                              var $81 = angleSpan > 0.1 && radiusSpan > 30;
                                              if ($81) {
                                                var labelPos = getLabelPosition(2 * pi)(500)(v.value0.x0)(v.value0.y0)(v.value0.x1)(v.value0.y1);
                                                var textRotation = (function() {
                                                  var $82 = labelPos.angle > 90 && labelPos.angle < 270;
                                                  if ($82) {
                                                    return labelPos.angle + 180;
                                                  }
                                                  ;
                                                  return labelPos.angle;
                                                })();
                                                var anchor = (function() {
                                                  var $83 = labelPos.angle > 90 && labelPos.angle < 270;
                                                  if ($83) {
                                                    return "end";
                                                  }
                                                  ;
                                                  return "start";
                                                })();
                                                return bind121(appendTo6(sunburstGroup)(Text2.value)([x35(labelPos.x), y35(labelPos.y), transform([function(v1) {
                                                  return "rotate(" + (show123(textRotation) + (" " + (show123(labelPos.x) + (" " + (show123(labelPos.y) + ")")))));
                                                }]), fill29("#333"), fontSize16(10), text26(nodeName3), textAnchor12(anchor), classed34("label")]))(function() {
                                                  return pure121(unit);
                                                });
                                              }
                                              ;
                                              return pure121(unit);
                                            })())(function() {
                                              return pure121(unit);
                                            });
                                          });
                                        }
                                        ;
                                        return pure121(unit);
                                      }
                                      ;
                                      return pure121(unit);
                                    })())(function() {
                                      return traverse_16(renderNode)(v.value0.children);
                                    });
                                  };
                                  return bind121(renderNode(layout))(function() {
                                    return pure121(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.ThreeLittleCircles/index.js
  var classed35 = /* @__PURE__ */ classed(toAttrString);
  var discard34 = /* @__PURE__ */ discard(discardUnit);
  var fill30 = /* @__PURE__ */ fill(toAttrString);
  var cx17 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy17 = /* @__PURE__ */ cy(toAttrNumber);
  var radius21 = /* @__PURE__ */ radius(toAttrNumber);
  var drawThreeCircles = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind92 = bind(Bind1);
    var attach6 = attach(dictSelectionM);
    var appendTo6 = appendTo(dictSelectionM);
    var simpleJoin4 = simpleJoin(dictSelectionM);
    var discard115 = discard34(Bind1);
    var setAttributes5 = setAttributes(dictSelectionM);
    var pure56 = pure(Monad0.Applicative0());
    return function(selector) {
      return bind92(attach6(selector))(function(root3) {
        return bind92(appendTo6(root3)(Svg.value)([viewBox(-10)(20)(120)(60), classed35("d3svg gup")]))(function(svg2) {
          return bind92(appendTo6(svg2)(Group.value)([]))(function(circleGroup) {
            return bind92(simpleJoin4(circleGroup)(Circle.value)([32, 57, 293])(keyIsID_))(function(circles) {
              return discard115(setAttributes5(circles)([fill30("green"), cx17(function(v) {
                return function(i2) {
                  return index_ToNumber(i2) * 30 + 10;
                };
              }), cy17(50), radius21(10)]))(function() {
                return pure56(circles);
              });
            });
          });
        });
      });
    };
  };

  // output/D3.Viz.ThreeLittleCirclesTransition/index.js
  var discard35 = /* @__PURE__ */ discard(discardUnit);
  var fill31 = /* @__PURE__ */ fill(toAttrStringFnI);
  var fillOpacity10 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var cx18 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy18 = /* @__PURE__ */ cy(toAttrNumberFnI);
  var radius22 = /* @__PURE__ */ radius(toAttrNumber);
  var classed36 = /* @__PURE__ */ classed(toAttrString);
  var fill111 = /* @__PURE__ */ fill(toAttrString);
  var cy19 = /* @__PURE__ */ cy(toAttrNumber);
  var transitionToColorMixing = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var discard115 = discard35(Monad0.Bind1());
    var pure56 = pure(Monad0.Applicative0());
    return function(dictSelectionM) {
      var setAttributes5 = setAttributes(dictSelectionM);
      return function(circles) {
        var transition2 = transitionWithDuration(1500);
        var cyFn = function(d23) {
          return function(v) {
            if (d23 === 0) {
              return 50;
            }
            ;
            if (d23 === 1) {
              return 50;
            }
            ;
            return 30;
          };
        };
        var cxFn = function(d23) {
          return function(v) {
            if (d23 === 0) {
              return 30;
            }
            ;
            if (d23 === 1) {
              return 60;
            }
            ;
            return 45;
          };
        };
        var colorFn = function(d23) {
          return function(v) {
            if (d23 === 0) {
              return "#ff0000";
            }
            ;
            if (d23 === 1) {
              return "#00ff00";
            }
            ;
            return "#0000ff";
          };
        };
        return discard115(setAttributes5(circles)(to(transition2)([fill31(colorFn), fillOpacity10(0.5), cx18(cxFn), cy18(cyFn), radius22(20)])))(function() {
          return pure56(unit);
        });
      };
    };
  };
  var drawThreeCirclesTransition = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var Bind1 = Monad0.Bind1();
    var discard115 = discard35(Bind1);
    var liftEffect53 = liftEffect(dictMonadEffect);
    var bind92 = bind(Bind1);
    var pure56 = pure(Monad0.Applicative0());
    return function(dictSelectionM) {
      var attach6 = attach(dictSelectionM);
      var appendTo6 = appendTo(dictSelectionM);
      var simpleJoin4 = simpleJoin(dictSelectionM);
      var setAttributes5 = setAttributes(dictSelectionM);
      return function(selector) {
        return discard115(liftEffect53(log2("=== drawThreeCirclesTransition: Starting ===")))(function() {
          return bind92(attach6(selector))(function(root3) {
            return bind92(appendTo6(root3)(Svg.value)([viewBox(-10)(-10)(120)(100), classed36("d3svg three-circles-transition")]))(function(svg2) {
              return bind92(appendTo6(svg2)(Group.value)([]))(function(circleGroup) {
                return discard115(liftEffect53(log2("=== Creating initial join with data: [0, 1, 2] ===")))(function() {
                  return bind92(simpleJoin4(circleGroup)(Circle.value)([0, 1, 2])(keyIsID_))(function(circles) {
                    return discard115(liftEffect53(log2("=== Join complete, setting attributes ===")))(function() {
                      return discard115(setAttributes5(circles)([fill111("orange"), cx18(function(v) {
                        return function(i2) {
                          return index_ToNumber(i2) * 30 + 20;
                        };
                      }), cy19(30), radius22(15), fillOpacity10(1)]))(function() {
                        return discard115(liftEffect53(log2("=== Initial circles created ===")))(function() {
                          return pure56({
                            circles,
                            svg: svg2
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      };
    };
  };

  // output/PSD3v2.Attribute.Types/index.js
  var StringValue = /* @__PURE__ */ (function() {
    function StringValue2(value0) {
      this.value0 = value0;
    }
    ;
    StringValue2.create = function(value0) {
      return new StringValue2(value0);
    };
    return StringValue2;
  })();
  var NumberValue = /* @__PURE__ */ (function() {
    function NumberValue2(value0) {
      this.value0 = value0;
    }
    ;
    NumberValue2.create = function(value0) {
      return new NumberValue2(value0);
    };
    return NumberValue2;
  })();
  var BooleanValue = /* @__PURE__ */ (function() {
    function BooleanValue2(value0) {
      this.value0 = value0;
    }
    ;
    BooleanValue2.create = function(value0) {
      return new BooleanValue2(value0);
    };
    return BooleanValue2;
  })();
  var StaticAttr = /* @__PURE__ */ (function() {
    function StaticAttr2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    StaticAttr2.create = function(value0) {
      return function(value1) {
        return new StaticAttr2(value0, value1);
      };
    };
    return StaticAttr2;
  })();
  var DataAttr = /* @__PURE__ */ (function() {
    function DataAttr2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    DataAttr2.create = function(value0) {
      return function(value1) {
        return new DataAttr2(value0, value1);
      };
    };
    return DataAttr2;
  })();
  var IndexedAttr = /* @__PURE__ */ (function() {
    function IndexedAttr2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    IndexedAttr2.create = function(value0) {
      return function(value1) {
        return new IndexedAttr2(value0, value1);
      };
    };
    return IndexedAttr2;
  })();
  var toAttrStringString = {
    toAttr: function(value18) {
      return function(name16) {
        return new StaticAttr(name16, new StringValue(value18));
      };
    }
  };
  var toAttrNumberNumber = {
    toAttr: function(value18) {
      return function(name16) {
        return new StaticAttr(name16, new NumberValue(value18));
      };
    }
  };
  var toAttrNumberFunctionNumbe = {
    toAttr: function(fn) {
      return function(name16) {
        return new DataAttr(name16, function($134) {
          return NumberValue.create(fn($134));
        });
      };
    }
  };
  var toAttrNumberFunctionIntFu = {
    toAttr: function(fn) {
      return function(name16) {
        return new IndexedAttr(name16, function(d1) {
          return function(i2) {
            return new NumberValue(fn(d1)(i2));
          };
        });
      };
    }
  };
  var toAttr3 = function(dict) {
    return dict.toAttr;
  };
  var radius23 = function(dictToAttr) {
    var toAttr1 = toAttr3(dictToAttr);
    return function(value18) {
      return toAttr1(value18)("r");
    };
  };
  var fill32 = function(dictToAttr) {
    var toAttr1 = toAttr3(dictToAttr);
    return function(value18) {
      return toAttr1(value18)("fill");
    };
  };
  var cy20 = function(dictToAttr) {
    var toAttr1 = toAttr3(dictToAttr);
    return function(value18) {
      return toAttr1(value18)("cy");
    };
  };
  var cx19 = function(dictToAttr) {
    var toAttr1 = toAttr3(dictToAttr);
    return function(value18) {
      return toAttr1(value18)("cx");
    };
  };

  // output/PSD3v2.Capabilities.Selection/index.js
  var select5 = function(dict) {
    return dict.select;
  };
  var renderData = function(dict) {
    return dict.renderData;
  };

  // output/PSD3v2.Selection.Operations/foreign.js
  function querySelector_(selector) {
    return function(doc) {
      return function() {
        const element3 = doc.querySelector(selector);
        return element3 ? { constructor: {}, value0: element3 } : null;
      };
    };
  }
  function querySelectorAll_(selector) {
    return function(parents) {
      return function() {
        const results = [];
        for (const parent2 of parents) {
          const elements = parent2.querySelectorAll(selector);
          results.push(...elements);
        }
        return results;
      };
    };
  }
  function createElement_(tagName2) {
    return function(doc) {
      return function() {
        return doc.createElement(tagName2);
      };
    };
  }
  function setAttribute_(name16) {
    return function(value18) {
      return function(element3) {
        return function() {
          element3.setAttribute(name16, value18);
        };
      };
    };
  }
  function appendChild_(child) {
    return function(parent2) {
      return function() {
        parent2.appendChild(child);
      };
    };
  }
  function removeElement_(element3) {
    return function() {
      if (element3.parentNode) {
        element3.parentNode.removeChild(element3);
      }
    };
  }
  function getElementData_(element3) {
    return function() {
      const data = element3.__data__;
      return data !== void 0 ? { constructor: {}, value0: data } : null;
    };
  }

  // output/PSD3v2.Selection.Join/index.js
  var mapFlipped8 = /* @__PURE__ */ mapFlipped(functorArray);
  var computeJoin = function(dictOrd) {
    var fromFoldable48 = fromFoldable(dictOrd)(foldableArray);
    var lookup19 = lookup(dictOrd);
    var insert20 = insert(dictOrd);
    var member10 = member(dictOrd);
    return function(newData) {
      return function(oldBindings) {
        var oldMap = fromFoldable48(mapFlipped8(oldBindings)(function(v) {
          return new Tuple(v.datum, v.element);
        }));
        var processNewDatum = function(state3) {
          return function(datum2) {
            var v = lookup19(datum2)(oldMap);
            if (v instanceof Nothing) {
              return {
                matched: state3.matched,
                update: state3.update,
                enter: cons(datum2)(state3.enter)
              };
            }
            ;
            if (v instanceof Just) {
              var updateBinding = {
                element: v.value0,
                oldDatum: datum2,
                newDatum: datum2
              };
              return {
                enter: state3.enter,
                update: cons(updateBinding)(state3.update),
                matched: insert20(datum2)(v.value0)(state3.matched)
              };
            }
            ;
            throw new Error("Failed pattern match at PSD3v2.Selection.Join (line 86, column 7 - line 99, column 16): " + [v.constructor.name]);
          };
        };
        var matchResult = foldl3(processNewDatum)({
          matched: empty2,
          enter: [],
          update: []
        })(newData);
        var exitBindings = filter(function(v) {
          return !member10(v.datum)(matchResult.matched);
        })(oldBindings);
        return {
          enter: reverse(matchResult.enter),
          update: reverse(matchResult.update),
          exit: exitBindings
        };
      };
    };
  };

  // output/PSD3v2.Selection.Types/index.js
  var EmptySelection = /* @__PURE__ */ (function() {
    function EmptySelection2(value0) {
      this.value0 = value0;
    }
    ;
    EmptySelection2.create = function(value0) {
      return new EmptySelection2(value0);
    };
    return EmptySelection2;
  })();
  var BoundSelection = /* @__PURE__ */ (function() {
    function BoundSelection2(value0) {
      this.value0 = value0;
    }
    ;
    BoundSelection2.create = function(value0) {
      return new BoundSelection2(value0);
    };
    return BoundSelection2;
  })();
  var PendingSelection = /* @__PURE__ */ (function() {
    function PendingSelection2(value0) {
      this.value0 = value0;
    }
    ;
    PendingSelection2.create = function(value0) {
      return new PendingSelection2(value0);
    };
    return PendingSelection2;
  })();
  var ExitingSelection = /* @__PURE__ */ (function() {
    function ExitingSelection2(value0) {
      this.value0 = value0;
    }
    ;
    ExitingSelection2.create = function(value0) {
      return new ExitingSelection2(value0);
    };
    return ExitingSelection2;
  })();
  var JoinResult = /* @__PURE__ */ (function() {
    function JoinResult2(value0) {
      this.value0 = value0;
    }
    ;
    JoinResult2.create = function(value0) {
      return new JoinResult2(value0);
    };
    return JoinResult2;
  })();
  var Circle2 = /* @__PURE__ */ (function() {
    function Circle3() {
    }
    ;
    Circle3.value = new Circle3();
    return Circle3;
  })();
  var Rect2 = /* @__PURE__ */ (function() {
    function Rect3() {
    }
    ;
    Rect3.value = new Rect3();
    return Rect3;
  })();
  var Path5 = /* @__PURE__ */ (function() {
    function Path6() {
    }
    ;
    Path6.value = new Path6();
    return Path6;
  })();
  var Line2 = /* @__PURE__ */ (function() {
    function Line3() {
    }
    ;
    Line3.value = new Line3();
    return Line3;
  })();
  var Text3 = /* @__PURE__ */ (function() {
    function Text4() {
    }
    ;
    Text4.value = new Text4();
    return Text4;
  })();
  var Group2 = /* @__PURE__ */ (function() {
    function Group3() {
    }
    ;
    Group3.value = new Group3();
    return Group3;
  })();
  var SVG = /* @__PURE__ */ (function() {
    function SVG2() {
    }
    ;
    SVG2.value = new SVG2();
    return SVG2;
  })();
  var Div2 = /* @__PURE__ */ (function() {
    function Div3() {
    }
    ;
    Div3.value = new Div3();
    return Div3;
  })();
  var Span2 = /* @__PURE__ */ (function() {
    function Span3() {
    }
    ;
    Span3.value = new Span3();
    return Span3;
  })();

  // output/PSD3v2.Selection.Operations/index.js
  var bind35 = /* @__PURE__ */ bind(bindEffect);
  var mapFlipped9 = /* @__PURE__ */ mapFlipped(functorEffect);
  var pure32 = /* @__PURE__ */ pure(applicativeEffect);
  var traverse_11 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var append118 = /* @__PURE__ */ append(semigroupArray);
  var traverse4 = /* @__PURE__ */ traverse(traversableArray)(applicativeEffect);
  var mapFlipped1 = /* @__PURE__ */ mapFlipped(functorMaybe);
  var mapFlipped22 = /* @__PURE__ */ mapFlipped(functorArray);
  var show45 = /* @__PURE__ */ show(showNumber);
  var show124 = /* @__PURE__ */ show(showBoolean);
  var discard36 = /* @__PURE__ */ discard(discardUnit);
  var traverseWithIndex_2 = /* @__PURE__ */ traverseWithIndex_(applicativeEffect)(foldableWithIndexArray);
  var traverseWithIndex2 = /* @__PURE__ */ traverseWithIndex(traversableWithIndexArray)(applicativeEffect);
  var select6 = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return function(selector) {
      return liftEffect53(function __do5() {
        var doc = mapFlipped9(bind35(windowImpl)(document2))(toDocument)();
        var maybeElement = querySelector_(selector)(doc)();
        if (maybeElement instanceof Nothing) {
          return new EmptySelection({
            parentElements: [],
            document: doc
          });
        }
        ;
        if (maybeElement instanceof Just) {
          return new EmptySelection({
            parentElements: [maybeElement.value0],
            document: doc
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 52, column 3 - line 60, column 8): " + [maybeElement.constructor.name]);
      });
    };
  };
  var remove3 = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return function(v) {
      return liftEffect53((function() {
        var v1 = (function() {
          if (v instanceof ExitingSelection) {
            return v.value0;
          }
          ;
          throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 184, column 36 - line 185, column 32): " + [v.constructor.name]);
        })();
        return traverse_11(function(element3) {
          return removeElement_(element3);
        })(v1.elements);
      })());
    };
  };
  var merge = function(dictMonadEffect) {
    var pure121 = pure(dictMonadEffect.Monad0().Applicative0());
    return function(v) {
      return function(v1) {
        var v2 = (function() {
          if (v instanceof BoundSelection) {
            return v.value0;
          }
          ;
          throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 205, column 70 - line 206, column 30): " + [v.constructor.name]);
        })();
        var v3 = (function() {
          if (v1 instanceof BoundSelection) {
            return v1.value0;
          }
          ;
          throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 207, column 55 - line 208, column 30): " + [v1.constructor.name]);
        })();
        return pure121(new BoundSelection({
          elements: append118(v2.elements)(v3.elements),
          data: append118(v2.data)(v3.data),
          document: v2.document
        }));
      };
    };
  };
  var joinData = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return function(dictFoldable) {
      var fromFoldable48 = fromFoldable2(dictFoldable);
      return function(dictOrd) {
        var computeJoin2 = computeJoin(dictOrd);
        return function(foldableData) {
          return function(selector) {
            return function(v) {
              return liftEffect53((function() {
                var v1 = (function() {
                  if (v instanceof EmptySelection) {
                    return v.value0;
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 237, column 57 - line 238, column 30): " + [v.constructor.name]);
                })();
                return function __do5() {
                  var existingElements = querySelectorAll_(selector)(v1.parentElements)();
                  var oldBindings = traverse4(function(element3) {
                    return function __do6() {
                      var maybeDatum = getElementData_(element3)();
                      return {
                        element: element3,
                        datum: maybeDatum
                      };
                    };
                  })(existingElements)();
                  var validOldBindings = mapMaybe(function(v2) {
                    return mapFlipped1(v2.datum)(function(d23) {
                      return {
                        element: v2.element,
                        datum: d23
                      };
                    });
                  })(oldBindings);
                  var newDataArray = fromFoldable48(foldableData);
                  var joinSets = computeJoin2(newDataArray)(validOldBindings);
                  var enterSelection = new PendingSelection({
                    parentElements: v1.parentElements,
                    pendingData: joinSets.enter,
                    document: v1.document
                  });
                  var updateSelection = new BoundSelection({
                    elements: mapFlipped22(joinSets.update)(function(v2) {
                      return v2.element;
                    }),
                    data: mapFlipped22(joinSets.update)(function(v2) {
                      return v2.newDatum;
                    }),
                    document: v1.document
                  });
                  var exitSelection = new ExitingSelection({
                    elements: mapFlipped22(joinSets.exit)(function(v2) {
                      return v2.element;
                    }),
                    document: v1.document
                  });
                  return new JoinResult({
                    enter: enterSelection,
                    update: updateSelection,
                    exit: exitSelection
                  });
                };
              })());
            };
          };
        };
      };
    };
  };
  var getDocument = function(v) {
    if (v instanceof EmptySelection) {
      return pure32(v.value0.document);
    }
    ;
    if (v instanceof BoundSelection) {
      return pure32(v.value0.document);
    }
    ;
    if (v instanceof PendingSelection) {
      return pure32(v.value0.document);
    }
    ;
    if (v instanceof ExitingSelection) {
      return pure32(v.value0.document);
    }
    ;
    throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 362, column 1 - line 362, column 82): " + [v.constructor.name]);
  };
  var selectAll = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return function(selector) {
      return function(v) {
        return liftEffect53(function __do5() {
          var doc = getDocument(v)();
          var elements = (function() {
            if (v instanceof EmptySelection) {
              return querySelectorAll_(selector)(v.value0.parentElements)();
            }
            ;
            if (v instanceof BoundSelection) {
              return querySelectorAll_(selector)(v.value0.elements)();
            }
            ;
            if (v instanceof PendingSelection) {
              return querySelectorAll_(selector)(v.value0.parentElements)();
            }
            ;
            if (v instanceof ExitingSelection) {
              return querySelectorAll_(selector)(v.value0.elements)();
            }
            ;
            throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 81, column 15 - line 89, column 43): " + [v.constructor.name]);
          })();
          return new EmptySelection({
            parentElements: elements,
            document: doc
          });
        });
      };
    };
  };
  var elementTypeToString = function(v) {
    if (v instanceof Circle2) {
      return "circle";
    }
    ;
    if (v instanceof Rect2) {
      return "rect";
    }
    ;
    if (v instanceof Path5) {
      return "path";
    }
    ;
    if (v instanceof Line2) {
      return "line";
    }
    ;
    if (v instanceof Text3) {
      return "text";
    }
    ;
    if (v instanceof Group2) {
      return "g";
    }
    ;
    if (v instanceof SVG) {
      return "svg";
    }
    ;
    if (v instanceof Div2) {
      return "div";
    }
    ;
    if (v instanceof Span2) {
      return "span";
    }
    ;
    throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 386, column 1 - line 386, column 45): " + [v.constructor.name]);
  };
  var attributeValueToString = function(v) {
    if (v instanceof StringValue) {
      return v.value0;
    }
    ;
    if (v instanceof NumberValue) {
      return show45(v.value0);
    }
    ;
    if (v instanceof BooleanValue) {
      return show124(v.value0);
    }
    ;
    throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 381, column 1 - line 381, column 51): " + [v.constructor.name]);
  };
  var applyAttributes = function(element3) {
    return function(datum2) {
      return function(index5) {
        return function(attrs) {
          return traverse_11(function(attr3) {
            if (attr3 instanceof StaticAttr) {
              return setAttribute_(attr3.value0)(attributeValueToString(attr3.value1))(element3);
            }
            ;
            if (attr3 instanceof DataAttr) {
              return setAttribute_(attr3.value0)(attributeValueToString(attr3.value1(datum2)))(element3);
            }
            ;
            if (attr3 instanceof IndexedAttr) {
              return setAttribute_(attr3.value0)(attributeValueToString(attr3.value1(datum2)(index5)))(element3);
            }
            ;
            throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 371, column 30 - line 379, column 74): " + [attr3.constructor.name]);
          })(attrs);
        };
      };
    };
  };
  var applyPerDatumAttrs = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return function(mkAttrs) {
      return function(v) {
        return liftEffect53((function() {
          if (v instanceof BoundSelection) {
            var paired = zipWith(Tuple.create)(v.value0.data)(v.value0.elements);
            return function __do5() {
              traverseWithIndex_2(function(index5) {
                return function(v1) {
                  var attrs = mkAttrs(v1.value0);
                  return applyAttributes(v1.value1)(v1.value0)(index5)(attrs);
                };
              })(paired)();
              return v;
            };
          }
          ;
          return pure32(v);
        })());
      };
    };
  };
  var setAttrs = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return function(attrs) {
      return function(v) {
        return liftEffect53((function() {
          var v1 = (function() {
            if (v instanceof BoundSelection) {
              return v.value0;
            }
            ;
            throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 156, column 69 - line 157, column 30): " + [v.constructor.name]);
          })();
          var paired = zipWith(Tuple.create)(v1.data)(v1.elements);
          return function __do5() {
            traverseWithIndex_2(function(index5) {
              return function(v2) {
                return applyAttributes(v2.value1)(v2.value0)(index5)(attrs);
              };
            })(paired)();
            return new BoundSelection({
              elements: v1.elements,
              data: v1.data,
              document: v1.document
            });
          };
        })());
      };
    };
  };
  var append24 = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return function(elemType) {
      return function(attrs) {
        return function(v) {
          return liftEffect53((function() {
            var v1 = (function() {
              if (v instanceof PendingSelection) {
                return v.value0;
              }
              ;
              throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 118, column 70 - line 119, column 32): " + [v.constructor.name]);
            })();
            var paired = zipWith(Tuple.create)(v1.pendingData)(v1.parentElements);
            return function __do5() {
              var elements = traverseWithIndex2(function(index5) {
                return function(v2) {
                  return function __do6() {
                    var element3 = createElement_(elementTypeToString(elemType))(v1.document)();
                    applyAttributes(element3)(v2.value0)(index5)(attrs)();
                    appendChild_(element3)(v2.value1)();
                    return element3;
                  };
                };
              })(paired)();
              return new BoundSelection({
                elements,
                data: v1.pendingData,
                document: v1.document
              });
            };
          })());
        };
      };
    };
  };
  var renderData2 = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind121 = bind(Bind1);
    var joinData1 = joinData(dictMonadEffect);
    var append210 = append24(dictMonadEffect);
    var pure121 = pure(Monad0.Applicative0());
    var applyPerDatumAttrs1 = applyPerDatumAttrs(dictMonadEffect);
    var discard216 = discard36(Bind1);
    var remove1 = remove3(dictMonadEffect);
    var merge1 = merge(dictMonadEffect);
    return function(dictFoldable) {
      var joinData22 = joinData1(dictFoldable);
      return function(dictOrd) {
        var joinData3 = joinData22(dictOrd);
        return function(elemType) {
          return function(foldableData) {
            return function(selector) {
              return function(emptySelection) {
                return function(enterAttrs2) {
                  return function(updateAttrs2) {
                    return function(exitAttrs) {
                      return bind121(joinData3(foldableData)(selector)(emptySelection))(function(v) {
                        return bind121(bind121(append210(elemType)([])(v.value0.enter))(function(bound) {
                          if (enterAttrs2 instanceof Nothing) {
                            return pure121(bound);
                          }
                          ;
                          if (enterAttrs2 instanceof Just) {
                            return applyPerDatumAttrs1(enterAttrs2.value0)(bound);
                          }
                          ;
                          throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 317, column 5 - line 319, column 55): " + [enterAttrs2.constructor.name]);
                        }))(function(enterBound) {
                          return bind121((function() {
                            if (updateAttrs2 instanceof Nothing) {
                              return pure121(v.value0.update);
                            }
                            ;
                            if (updateAttrs2 instanceof Just) {
                              return applyPerDatumAttrs1(updateAttrs2.value0)(v.value0.update);
                            }
                            ;
                            throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 322, column 18 - line 324, column 54): " + [updateAttrs2.constructor.name]);
                          })())(function(updateBound) {
                            return discard216((function() {
                              if (exitAttrs instanceof Nothing) {
                                return remove1(v.value0.exit);
                              }
                              ;
                              if (exitAttrs instanceof Just) {
                                return bind121(applyPerDatumAttrs1(exitAttrs.value0)(v.value0.exit))(function() {
                                  return remove1(v.value0.exit);
                                });
                              }
                              ;
                              throw new Error("Failed pattern match at PSD3v2.Selection.Operations (line 327, column 3 - line 331, column 18): " + [exitAttrs.constructor.name]);
                            })())(function() {
                              return merge1(enterBound)(updateBound);
                            });
                          });
                        });
                      });
                    };
                  };
                };
              };
            };
          };
        };
      };
    };
  };

  // output/PSD3v2.Interpreter.D3v2/index.js
  var select7 = /* @__PURE__ */ select6(monadEffectEffect);
  var selectAll2 = /* @__PURE__ */ selectAll(monadEffectEffect);
  var renderData3 = /* @__PURE__ */ renderData2(monadEffectEffect);
  var joinData2 = /* @__PURE__ */ joinData(monadEffectEffect);
  var append25 = /* @__PURE__ */ append24(monadEffectEffect);
  var setAttrs2 = /* @__PURE__ */ setAttrs(monadEffectEffect);
  var remove4 = /* @__PURE__ */ remove3(monadEffectEffect);
  var merge2 = /* @__PURE__ */ merge(monadEffectEffect);
  var monadD3v2M = monadEffect;
  var selectionMD3v2Selection_D = {
    select: function(selector) {
      return function __do5() {
        var sel = select7(selector)();
        return sel;
      };
    },
    selectAll: function(selector) {
      return function(v) {
        return function __do5() {
          var result = selectAll2(selector)(v)();
          return result;
        };
      };
    },
    renderData: function(dictFoldable) {
      var renderData1 = renderData3(dictFoldable);
      return function(dictOrd) {
        var renderData22 = renderData1(dictOrd);
        return function(elemType) {
          return function(foldableData) {
            return function(selector) {
              return function(v) {
                return function(enterAttrs2) {
                  return function(updateAttrs2) {
                    return function(exitAttrs) {
                      return function __do5() {
                        var result = renderData22(elemType)(foldableData)(selector)(v)(enterAttrs2)(updateAttrs2)(exitAttrs)();
                        return result;
                      };
                    };
                  };
                };
              };
            };
          };
        };
      };
    },
    joinData: function(dictFoldable) {
      var joinData1 = joinData2(dictFoldable);
      return function(dictOrd) {
        var joinData22 = joinData1(dictOrd);
        return function(foldableData) {
          return function(selector) {
            return function(v) {
              return joinData22(foldableData)(selector)(v);
            };
          };
        };
      };
    },
    append: function(elemType) {
      return function(attrs) {
        return function(v) {
          return function __do5() {
            var result = append25(elemType)(attrs)(v)();
            return result;
          };
        };
      };
    },
    setAttrs: function(attrs) {
      return function(v) {
        return function __do5() {
          var result = setAttrs2(attrs)(v)();
          return result;
        };
      };
    },
    remove: function(v) {
      return remove4(v);
    },
    merge: function(v) {
      return function(v1) {
        return function __do5() {
          var result = merge2(v)(v1)();
          return result;
        };
      };
    },
    Monad0: function() {
      return monadD3v2M;
    }
  };
  var runD3v2M = function(v) {
    return v;
  };

  // output/D3.Viz.ThreeLittleCirclesV2/index.js
  var fill33 = /* @__PURE__ */ fill32(toAttrStringString);
  var cx20 = /* @__PURE__ */ cx19(toAttrNumberFunctionIntFu);
  var cy21 = /* @__PURE__ */ cy20(toAttrNumberNumber);
  var radius24 = /* @__PURE__ */ radius23(toAttrNumberFunctionNumbe);
  var drawThreeCircles2 = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var bind92 = bind(Monad0.Bind1());
    var select8 = select5(dictSelectionM);
    var renderData4 = renderData(dictSelectionM)(foldableArray)(ordInt);
    var pure56 = pure(Monad0.Applicative0());
    return function(selector) {
      var updateAttrs2 = function(v) {
        return [fill33("orange"), cx20(function(v1) {
          return function(i2) {
            return toNumber(i2) * 100 + 50;
          };
        }), cy21(50), radius24(function(datum2) {
          return toNumber(datum2) / 10;
        })];
      };
      var enterAttrs2 = function(v) {
        return [fill33("green"), cx20(function(v1) {
          return function(i2) {
            return toNumber(i2) * 100 + 50;
          };
        }), cy21(50), radius24(function(datum2) {
          return toNumber(datum2) / 10;
        })];
      };
      return bind92(select8(selector))(function(svg2) {
        return bind92(renderData4(Circle2.value)([32, 57, 293])("circle")(svg2)(new Just(enterAttrs2))(new Just(updateAttrs2))(Nothing.value))(function() {
          return pure56(unit);
        });
      });
    };
  };

  // output/D3.Viz.ThreeLittleDimensions.Unsafe/index.js
  var coerceDatumToSet = unsafeCoerce2;
  var coerceDatumToArray = unsafeCoerce2;

  // output/D3.Viz.ThreeLittleDimensions/index.js
  var fromFoldable41 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordString);
  var classed37 = /* @__PURE__ */ classed(toAttrString);
  var discard37 = /* @__PURE__ */ discard(discardUnit);
  var text27 = /* @__PURE__ */ text6(toAttrStringFn);
  var identity20 = /* @__PURE__ */ identity(categoryFn);
  var show46 = /* @__PURE__ */ show(showInt);
  var drawThreeDimensionsSets = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind92 = bind(Bind1);
    var attach6 = attach(dictSelectionM);
    var appendTo6 = appendTo(dictSelectionM);
    var simpleJoin4 = simpleJoin(dictSelectionM);
    var nestedJoin2 = nestedJoin(dictSelectionM)(foldableSet);
    var discard115 = discard37(Bind1);
    var setAttributes5 = setAttributes(dictSelectionM);
    var pure56 = pure(Monad0.Applicative0());
    return function(selector) {
      var productCategories = [fromFoldable41(["web", "frontend", "javascript"]), fromFoldable41(["database", "backend"]), empty7, fromFoldable41(["api", "rest", "graphql", "backend"]), fromFoldable41(["mobile"])];
      return bind92(attach6(selector))(function(root3) {
        return bind92(appendTo6(root3)(Table.value)([classed37("nested-data-table nested-data-table--sets")]))(function(table2) {
          return bind92(simpleJoin4(table2)(Tr.value)(productCategories)(keyIsID_))(function(rows4) {
            return bind92(nestedJoin2(rows4)(Td.value)(coerceDatumToSet)(keyIsID_))(function(cells2) {
              return discard115(setAttributes5(cells2)([text27(identity20), classed37("tag-cell")]))(function() {
                return pure56(cells2);
              });
            });
          });
        });
      });
    };
  };
  var drawThreeDimensions = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind92 = bind(Bind1);
    var attach6 = attach(dictSelectionM);
    var appendTo6 = appendTo(dictSelectionM);
    var simpleJoin4 = simpleJoin(dictSelectionM);
    var nestedJoin2 = nestedJoin(dictSelectionM)(foldableArray);
    var discard115 = discard37(Bind1);
    var setAttributes5 = setAttributes(dictSelectionM);
    var pure56 = pure(Monad0.Applicative0());
    return function(selector) {
      var data2D = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];
      return bind92(attach6(selector))(function(root3) {
        return bind92(appendTo6(root3)(Table.value)([classed37("nested-data-table")]))(function(table2) {
          return bind92(simpleJoin4(table2)(Tr.value)(data2D)(keyIsID_))(function(rows4) {
            var cellText = function(d23) {
              return show46(d23);
            };
            return bind92(nestedJoin2(rows4)(Td.value)(coerceDatumToArray)(keyIsID_))(function(cells2) {
              return discard115(setAttributes5(cells2)([text27(cellText)]))(function() {
                return pure56(cells2);
              });
            });
          });
        });
      });
    };
  };

  // output/D3.Viz.TreeViz/index.js
  var bind36 = /* @__PURE__ */ bind(bindList);
  var append26 = /* @__PURE__ */ append(semigroupList);
  var show47 = /* @__PURE__ */ show(showNumber);
  var fromFoldable42 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map75 = /* @__PURE__ */ map(functorArray);
  var discard38 = /* @__PURE__ */ discard(discardUnit);
  var fromFoldable119 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var show125 = /* @__PURE__ */ show(showInt);
  var classed38 = /* @__PURE__ */ classed(toAttrString);
  var x36 = /* @__PURE__ */ x(toAttrNumber);
  var y36 = /* @__PURE__ */ y(toAttrNumber);
  var fill34 = /* @__PURE__ */ fill(toAttrString);
  var fontSize17 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text28 = /* @__PURE__ */ text6(toAttrString);
  var d18 = /* @__PURE__ */ d(toAttrString);
  var strokeColor31 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth28 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx21 = /* @__PURE__ */ cx(toAttrNumber);
  var cy22 = /* @__PURE__ */ cy(toAttrNumber);
  var radius25 = /* @__PURE__ */ radius(toAttrNumber);
  var makeLinksAsList6 = function(v) {
    var grandchildLinks = bind36(v.value1)(makeLinksAsList6);
    var childLinks = bind36(v.value1)(function(v1) {
      return new Cons({
        source: {
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          x: v1.value0.x,
          y: v1.value0.y
        }
      }, Nil.value);
    });
    return append26(childLinks)(grandchildLinks);
  };
  var makeLinks8 = /* @__PURE__ */ (function() {
    var $51 = fromFoldable2(foldableList);
    return function($52) {
      return $51(makeLinksAsList6($52));
    };
  })();
  var linkPath2 = function(x1$prime) {
    return function(y1$prime) {
      return function(x2$prime) {
        return function(y2$prime) {
          return "M" + (show47(x1$prime) + ("," + (show47(y1$prime) + ("C" + (show47(x1$prime) + ("," + (show47((y1$prime + y2$prime) / 2) + (" " + (show47(x2$prime) + ("," + (show47((y1$prime + y2$prime) / 2) + (" " + (show47(x2$prime) + ("," + show47(y2$prime)))))))))))))));
        };
      };
    };
  };
  var hierDataToTree7 = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable42(map75(hierDataToTree7)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.TreeViz (line 26, column 20 - line 28, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      depth: 0
    }, childrenList);
  };
  var draw19 = function(dictBind) {
    var discard115 = discard38(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      var pure56 = pure(Applicative0);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return discard115(liftEffect53(log2("TreeViz: Using Tree4 (Reingold-Tilford) layout")))(function() {
              var dataTree = hierDataToTree7(flareData);
              var config = {
                minSeparation: defaultTreeConfig.minSeparation,
                size: {
                  width: 1600 - 2 * 40,
                  height: 1200 - 2 * 40
                }
              };
              var positioned = tree2(config)(dataTree);
              var nodes = fromFoldable119(positioned);
              var links = makeLinks8(positioned);
              return discard115(liftEffect53(log2("TreeViz: Rendering " + (show125(length3(nodes)) + (" nodes, " + (show125(length3(links)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed38("tree")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x36(10), y36(20), fill34("#333"), fontSize17(16), text28("Tree Layout (Reingold-Tilford)"), classed38("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed38("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed38("nodes")]))(function(nodesGroup) {
                          return bind121(traverse_16(function(link4) {
                            return appendTo6(linksGroup)(Path2.value)([d18(linkPath2(link4.source.x + 40)(link4.source.y + 40)(link4.target.x + 40)(link4.target.y + 40)), fill34("none"), strokeColor31("#555"), strokeWidth28(1.5), classed38("link")]);
                          })(links))(function() {
                            return bind121(traverse_16(function(node) {
                              return appendTo6(nodesGroup)(Circle.value)([cx21(node.x + 40), cy22(node.y + 40), radius25(4), fill34("#999"), strokeColor31("#555"), strokeWidth28(1.5), classed38("node")]);
                            })(nodes))(function() {
                              return discard115(liftEffect53(log2("TreeViz: Rendering complete!")))(function() {
                                return pure56(unit);
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/D3.Viz.TreeViz4/index.js
  var bind37 = /* @__PURE__ */ bind(bindList);
  var append27 = /* @__PURE__ */ append(semigroupList);
  var show48 = /* @__PURE__ */ show(showNumber);
  var fromFoldable43 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map76 = /* @__PURE__ */ map(functorArray);
  var discard39 = /* @__PURE__ */ discard(discardUnit);
  var fromFoldable120 = /* @__PURE__ */ fromFoldable2(foldableTree);
  var show126 = /* @__PURE__ */ show(showInt);
  var classed39 = /* @__PURE__ */ classed(toAttrString);
  var x37 = /* @__PURE__ */ x(toAttrNumber);
  var y37 = /* @__PURE__ */ y(toAttrNumber);
  var fill35 = /* @__PURE__ */ fill(toAttrString);
  var fontSize18 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text29 = /* @__PURE__ */ text6(toAttrString);
  var d19 = /* @__PURE__ */ d(toAttrStringFnI);
  var strokeColor32 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth29 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx22 = /* @__PURE__ */ cx(toAttrNumberFnI);
  var cy23 = /* @__PURE__ */ cy(toAttrNumberFnI);
  var radius26 = /* @__PURE__ */ radius(toAttrNumber);
  var makeLinksAsList7 = function(v) {
    var grandchildLinks = bind37(v.value1)(makeLinksAsList7);
    var childLinks = bind37(v.value1)(function(v1) {
      return new Cons({
        source: {
          x: v.value0.x,
          y: v.value0.y
        },
        target: {
          x: v1.value0.x,
          y: v1.value0.y
        }
      }, Nil.value);
    });
    return append27(childLinks)(grandchildLinks);
  };
  var makeLinks9 = /* @__PURE__ */ (function() {
    var $60 = fromFoldable2(foldableList);
    return function($61) {
      return $60(makeLinksAsList7($61));
    };
  })();
  var linkPath3 = function(x1$prime) {
    return function(y1$prime) {
      return function(x2$prime) {
        return function(y2$prime) {
          return "M" + (show48(x1$prime) + ("," + (show48(y1$prime) + ("C" + (show48(x1$prime) + ("," + (show48((y1$prime + y2$prime) / 2) + (" " + (show48(x2$prime) + ("," + (show48((y1$prime + y2$prime) / 2) + (" " + (show48(x2$prime) + ("," + show48(y2$prime)))))))))))))));
        };
      };
    };
  };
  var hierDataToTree8 = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable43(map76(hierDataToTree8)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.TreeViz4 (line 31, column 20 - line 33, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return new Node2({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      depth: 0
    }, childrenList);
  };
  var draw20 = function(dictBind) {
    var discard115 = discard39(dictBind);
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        var simpleJoin4 = simpleJoin(dictSelectionM);
        var setAttributes5 = setAttributes(dictSelectionM);
        return function(flareData) {
          return function(selector) {
            return discard115(liftEffect53(log2("TreeViz4: Using Tree4 (Reingold-Tilford) with Flare data")))(function() {
              var dataTree = hierDataToTree8(flareData);
              var config = {
                minSeparation: defaultTreeConfig.minSeparation,
                size: {
                  width: 1600 - 2 * 40,
                  height: 1200 - 2 * 40
                }
              };
              var positioned = tree2(config)(dataTree);
              var nodes = fromFoldable120(positioned);
              var links = makeLinks9(positioned);
              return discard115(liftEffect53(log2("TreeViz4: Rendering " + (show126(length3(nodes)) + (" nodes, " + (show126(length3(links)) + " links"))))))(function() {
                return bind121(attach6(selector))(function(root$prime) {
                  return bind121(appendTo6(root$prime)(Svg.value)([viewBox(0)(0)(1600)(1200), classed39("tree4-viz")]))(function(svg2) {
                    return bind121(appendTo6(svg2)(Text2.value)([x37(10), y37(20), fill35("#333"), fontSize18(16), text29("Tree Layout (Reingold-Tilford via Tree4)"), classed39("title")]))(function() {
                      return bind121(appendTo6(svg2)(Group.value)([classed39("links")]))(function(linksGroup) {
                        return bind121(appendTo6(svg2)(Group.value)([classed39("nodes")]))(function(nodesGroup) {
                          return bind121(simpleJoin4(linksGroup)(Path2.value)(links)(keyIsID_))(function(linkElements) {
                            return discard115(setAttributes5(linkElements)([d19(function(v) {
                              return function(v1) {
                                return linkPath3(v.source.x + 40)(v.source.y + 40)(v.target.x + 40)(v.target.y + 40);
                              };
                            }), fill35("none"), strokeColor32("#555"), strokeWidth29(1.5), classed39("link")]))(function() {
                              return bind121(simpleJoin4(nodesGroup)(Circle.value)(nodes)(keyIsID_))(function(nodeElements) {
                                return discard115(setAttributes5(nodeElements)([cx22(function(v) {
                                  return function(v1) {
                                    return v.x + 40;
                                  };
                                }), cy23(function(v) {
                                  return function(v1) {
                                    return v.y + 40;
                                  };
                                }), radius26(4), fill35("#999"), strokeColor32("#555"), strokeWidth29(1.5), classed39("node")]))(function() {
                                  return discard115(liftEffect53(log2("TreeViz4: Rendering complete!")))(function() {
                                    return pure56(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    };
  };

  // output/PSD3.Layout.Hierarchy.Treemap/index.js
  var map77 = /* @__PURE__ */ map(functorArray);
  var foldl22 = /* @__PURE__ */ foldl(foldableArray);
  var append119 = /* @__PURE__ */ append(semigroupArray);
  var max16 = /* @__PURE__ */ max(ordNumber);
  var min10 = /* @__PURE__ */ min(ordNumber);
  var TNode = /* @__PURE__ */ (function() {
    function TNode2(value0) {
      this.value0 = value0;
    }
    ;
    TNode2.create = function(value0) {
      return new TNode2(value0);
    };
    return TNode2;
  })();
  var toTreemapNode = function(v) {
    return new TNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      value: v.value0.value,
      children: map77(toTreemapNode)(v.value0.children),
      x0: 0,
      y0: 0,
      x1: 0,
      y1: 0
    });
  };
  var slice5 = function(v) {
    return function(x0) {
      return function(y0) {
        return function(x115) {
          return function(y113) {
            var k = (function() {
              var $73 = v.value0.value !== 0;
              if ($73) {
                return (y113 - y0) / v.value0.value;
              }
              ;
              return 0;
            })();
            var positioned = foldl22(function(acc) {
              return function(child) {
                var height25 = child.value0.value * k;
                var positionedChild = new TNode({
                  data_: child.value0.data_,
                  depth: child.value0.depth,
                  height: child.value0.height,
                  value: child.value0.value,
                  children: child.value0.children,
                  x0,
                  x1: x115,
                  y0: acc.y,
                  y1: acc.y + height25
                });
                return {
                  children: snoc(acc.children)(positionedChild),
                  y: acc.y + height25
                };
              };
            })({
              children: [],
              y: y0
            })(v.value0.children);
            return new TNode({
              data_: v.value0.data_,
              depth: v.value0.depth,
              height: v.value0.height,
              value: v.value0.value,
              x0: v.value0.x0,
              y0: v.value0.y0,
              x1: v.value0.x1,
              y1: v.value0.y1,
              children: positioned.children
            });
          };
        };
      };
    };
  };
  var positionTree = function(config) {
    return function(v) {
      return function(paddingStack) {
        var p2 = (function() {
          var v1 = index2(paddingStack)(v.value0.depth);
          if (v1 instanceof Just) {
            return v1.value0;
          }
          ;
          if (v1 instanceof Nothing) {
            return 0;
          }
          ;
          throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Treemap (line 111, column 9 - line 113, column 21): " + [v1.constructor.name]);
        })();
        var x0 = v.value0.x0 + p2;
        var x115 = v.value0.x1 - p2;
        var x0$prime = (function() {
          var $84 = x115 < x0;
          if ($84) {
            return (x0 + x115) / 2;
          }
          ;
          return x0;
        })();
        var x1$prime = (function() {
          var $85 = x115 < x0;
          if ($85) {
            return (x0 + x115) / 2;
          }
          ;
          return x115;
        })();
        var y0 = v.value0.y0 + p2;
        var y113 = v.value0.y1 - p2;
        var y0$prime = (function() {
          var $86 = y113 < y0;
          if ($86) {
            return (y0 + y113) / 2;
          }
          ;
          return y0;
        })();
        var y1$prime = (function() {
          var $87 = y113 < y0;
          if ($87) {
            return (y0 + y113) / 2;
          }
          ;
          return y113;
        })();
        var nodeWithPadding = new TNode({
          data_: v.value0.data_,
          depth: v.value0.depth,
          height: v.value0.height,
          value: v.value0.value,
          children: v.value0.children,
          x0: x0$prime,
          y0: y0$prime,
          x1: x1$prime,
          y1: y1$prime
        });
        var $88 = $$null2(v.value0.children);
        if ($88) {
          return nodeWithPadding;
        }
        ;
        var innerPad = config.paddingInner / 2;
        var newPaddingStack = append119(paddingStack)([innerPad]);
        var childY1 = y1$prime - config.paddingBottom + innerPad;
        var childY0 = y0$prime + config.paddingTop - innerPad;
        var childY0$prime = (function() {
          var $89 = childY1 < childY0;
          if ($89) {
            return (childY0 + childY1) / 2;
          }
          ;
          return childY0;
        })();
        var childY1$prime = (function() {
          var $90 = childY1 < childY0;
          if ($90) {
            return (childY0 + childY1) / 2;
          }
          ;
          return childY1;
        })();
        var childX1 = x1$prime - config.paddingRight + innerPad;
        var childX0 = x0$prime + config.paddingLeft - innerPad;
        var childX0$prime = (function() {
          var $91 = childX1 < childX0;
          if ($91) {
            return (childX0 + childX1) / 2;
          }
          ;
          return childX0;
        })();
        var childX1$prime = (function() {
          var $92 = childX1 < childX0;
          if ($92) {
            return (childX0 + childX1) / 2;
          }
          ;
          return childX1;
        })();
        var nodeWithTiledChildren = config.tile(nodeWithPadding)(childX0$prime)(childY0$prime)(childX1$prime)(childY1$prime);
        var finalChildren = map77(function(child) {
          return positionTree(config)(child)(newPaddingStack);
        })(nodeWithTiledChildren.value0.children);
        return new TNode({
          data_: nodeWithTiledChildren.value0.data_,
          depth: nodeWithTiledChildren.value0.depth,
          height: nodeWithTiledChildren.value0.height,
          value: nodeWithTiledChildren.value0.value,
          x0: nodeWithTiledChildren.value0.x0,
          y0: nodeWithTiledChildren.value0.y0,
          x1: nodeWithTiledChildren.value0.x1,
          y1: nodeWithTiledChildren.value0.y1,
          children: finalChildren
        });
      };
    };
  };
  var treemap = function(config) {
    return function(valuedRoot) {
      var root3 = toTreemapNode(valuedRoot);
      var rootWithBounds = new TNode({
        data_: root3.value0.data_,
        depth: root3.value0.depth,
        height: root3.value0.height,
        value: root3.value0.value,
        children: root3.value0.children,
        x0: 0,
        y0: 0,
        x1: config.size.width,
        y1: config.size.height
      });
      var positioned = positionTree(config)(rootWithBounds)([]);
      return positioned;
    };
  };
  var phi = /* @__PURE__ */ (function() {
    return (1 + sqrt(5)) / 2;
  })();
  var dice2 = function(v) {
    return function(x0) {
      return function(y0) {
        return function(x115) {
          return function(y113) {
            var k = (function() {
              var $107 = v.value0.value !== 0;
              if ($107) {
                return (x115 - x0) / v.value0.value;
              }
              ;
              return 0;
            })();
            var positioned = foldl22(function(acc) {
              return function(child) {
                var width25 = child.value0.value * k;
                var positionedChild = new TNode({
                  data_: child.value0.data_,
                  depth: child.value0.depth,
                  height: child.value0.height,
                  value: child.value0.value,
                  children: child.value0.children,
                  x0: acc.x,
                  x1: acc.x + width25,
                  y0,
                  y1: y113
                });
                return {
                  children: snoc(acc.children)(positionedChild),
                  x: acc.x + width25
                };
              };
            })({
              children: [],
              x: x0
            })(v.value0.children);
            return new TNode({
              data_: v.value0.data_,
              depth: v.value0.depth,
              height: v.value0.height,
              value: v.value0.value,
              x0: v.value0.x0,
              y0: v.value0.y0,
              x1: v.value0.x1,
              y1: v.value0.y1,
              children: positioned.children
            });
          };
        };
      };
    };
  };
  var squarifyRatio = function(ratio) {
    return function(v) {
      return function(initX0) {
        return function(initY0) {
          return function(initX1) {
            return function(initY1) {
              var n = length3(v.value0.children);
              var go2 = function($copy_i0) {
                return function($copy_i1) {
                  return function($copy_x0) {
                    return function($copy_y0) {
                      return function($copy_x1) {
                        return function($copy_y1) {
                          return function($copy_remainingValue) {
                            return function($copy_acc) {
                              var $tco_var_i0 = $copy_i0;
                              var $tco_var_i1 = $copy_i1;
                              var $tco_var_x0 = $copy_x0;
                              var $tco_var_y0 = $copy_y0;
                              var $tco_var_x1 = $copy_x1;
                              var $tco_var_y1 = $copy_y1;
                              var $tco_var_remainingValue = $copy_remainingValue;
                              var $tco_done = false;
                              var $tco_result;
                              function $tco_loop(i0, i1, x0, y0, x115, y113, remainingValue, acc) {
                                var $120 = i0 >= n;
                                if ($120) {
                                  $tco_done = true;
                                  return acc;
                                }
                                ;
                                var findNonEmpty = function($copy_idx) {
                                  return function($copy_sv) {
                                    var $tco_var_idx = $copy_idx;
                                    var $tco_done1 = false;
                                    var $tco_result2;
                                    function $tco_loop2(idx, sv) {
                                      var $121 = idx >= n;
                                      if ($121) {
                                        $tco_done1 = true;
                                        return {
                                          i1: idx,
                                          sumValue: sv
                                        };
                                      }
                                      ;
                                      var v12 = (function() {
                                        var v2 = index2(v.value0.children)(idx);
                                        if (v2 instanceof Just) {
                                          return v2.value0;
                                        }
                                        ;
                                        if (v2 instanceof Nothing) {
                                          return new TNode(v.value0);
                                        }
                                        ;
                                        throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Treemap (line 332, column 33 - line 334, column 44): " + [v2.constructor.name]);
                                      })();
                                      var $125 = v12.value0.value !== 0;
                                      if ($125) {
                                        $tco_done1 = true;
                                        return {
                                          i1: idx + 1 | 0,
                                          sumValue: v12.value0.value
                                        };
                                      }
                                      ;
                                      $tco_var_idx = idx + 1 | 0;
                                      $copy_sv = sv;
                                      return;
                                    }
                                    ;
                                    while (!$tco_done1) {
                                      $tco_result2 = $tco_loop2($tco_var_idx, $copy_sv);
                                    }
                                    ;
                                    return $tco_result2;
                                  };
                                };
                                var firstNode = findNonEmpty(i1)(0);
                                var dy4 = y113 - y0;
                                var dx = x115 - x0;
                                var alpha = max16(dy4 / dx)(dx / dy4) / (remainingValue * ratio);
                                var beta0 = firstNode.sumValue * firstNode.sumValue * alpha;
                                var tryAdd = function($copy_idx) {
                                  return function($copy_sumVal) {
                                    return function($copy_minVal) {
                                      return function($copy_maxVal) {
                                        return function($copy_minRat) {
                                          var $tco_var_idx = $copy_idx;
                                          var $tco_var_sumVal = $copy_sumVal;
                                          var $tco_var_minVal = $copy_minVal;
                                          var $tco_var_maxVal = $copy_maxVal;
                                          var $tco_done2 = false;
                                          var $tco_result2;
                                          function $tco_loop2(idx, sumVal, minVal, maxVal, minRat) {
                                            var $127 = idx >= n;
                                            if ($127) {
                                              $tco_done2 = true;
                                              return {
                                                i1: idx,
                                                sumValue: sumVal,
                                                minRatio: minRat
                                              };
                                            }
                                            ;
                                            var v12 = (function() {
                                              var v2 = index2(v.value0.children)(idx);
                                              if (v2 instanceof Just) {
                                                return v2.value0;
                                              }
                                              ;
                                              if (v2 instanceof Nothing) {
                                                return new TNode(v.value0);
                                              }
                                              ;
                                              throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Treemap (line 355, column 31 - line 357, column 42): " + [v2.constructor.name]);
                                            })();
                                            var newSum = sumVal + v12.value0.value;
                                            var newMin = min10(minVal)(v12.value0.value);
                                            var newMax = max16(maxVal)(v12.value0.value);
                                            var newBeta = newSum * newSum * alpha;
                                            var newRatio = max16(newMax / newBeta)(newBeta / newMin);
                                            var $131 = newRatio > minRat;
                                            if ($131) {
                                              $tco_done2 = true;
                                              return {
                                                i1: idx,
                                                sumValue: sumVal,
                                                minRatio: minRat
                                              };
                                            }
                                            ;
                                            $tco_var_idx = idx + 1 | 0;
                                            $tco_var_sumVal = newSum;
                                            $tco_var_minVal = newMin;
                                            $tco_var_maxVal = newMax;
                                            $copy_minRat = newRatio;
                                            return;
                                          }
                                          ;
                                          while (!$tco_done2) {
                                            $tco_result2 = $tco_loop2($tco_var_idx, $tco_var_sumVal, $tco_var_minVal, $tco_var_maxVal, $copy_minRat);
                                          }
                                          ;
                                          return $tco_result2;
                                        };
                                      };
                                    };
                                  };
                                };
                                var v1 = (function() {
                                  var v2 = index2(v.value0.children)(firstNode.i1 - 1 | 0);
                                  if (v2 instanceof Just) {
                                    return v2.value0;
                                  }
                                  ;
                                  if (v2 instanceof Nothing) {
                                    return new TNode(v.value0);
                                  }
                                  ;
                                  throw new Error("Failed pattern match at PSD3.Layout.Hierarchy.Treemap (line 369, column 30 - line 371, column 36): " + [v2.constructor.name]);
                                })();
                                var isDice = dx < dy4;
                                var initial = tryAdd(firstNode.i1)(firstNode.sumValue)(v1.value0.value)(v1.value0.value)(max16(v1.value0.value / beta0)(beta0 / v1.value0.value));
                                var rowChildren = slice(i0)(initial.i1)(v.value0.children);
                                var rowNode = new TNode({
                                  data_: v.value0.data_,
                                  depth: v.value0.depth,
                                  height: v.value0.height,
                                  x0: v.value0.x0,
                                  y0: v.value0.y0,
                                  x1: v.value0.x1,
                                  y1: v.value0.y1,
                                  children: rowChildren,
                                  value: initial.sumValue
                                });
                                var positioned = (function() {
                                  if (isDice) {
                                    var newY0 = (function() {
                                      var $137 = remainingValue !== 0;
                                      if ($137) {
                                        return y0 + dy4 * initial.sumValue / remainingValue;
                                      }
                                      ;
                                      return y113;
                                    })();
                                    var v2 = dice2(rowNode)(x0)(y0)(x115)(newY0);
                                    return {
                                      children: v2.value0.children,
                                      nextX0: x0,
                                      nextY0: newY0,
                                      nextX1: x115,
                                      nextY1: y113
                                    };
                                  }
                                  ;
                                  var newX0 = (function() {
                                    var $140 = remainingValue !== 0;
                                    if ($140) {
                                      return x0 + dx * initial.sumValue / remainingValue;
                                    }
                                    ;
                                    return x115;
                                  })();
                                  var v2 = slice5(rowNode)(x0)(y0)(newX0)(y113);
                                  return {
                                    children: v2.value0.children,
                                    nextX0: newX0,
                                    nextY0: y0,
                                    nextX1: x115,
                                    nextY1: y113
                                  };
                                })();
                                $tco_var_i0 = initial.i1;
                                $tco_var_i1 = initial.i1;
                                $tco_var_x0 = positioned.nextX0;
                                $tco_var_y0 = positioned.nextY0;
                                $tco_var_x1 = positioned.nextX1;
                                $tco_var_y1 = positioned.nextY1;
                                $tco_var_remainingValue = remainingValue - initial.sumValue;
                                $copy_acc = append119(acc)(positioned.children);
                                return;
                              }
                              ;
                              while (!$tco_done) {
                                $tco_result = $tco_loop($tco_var_i0, $tco_var_i1, $tco_var_x0, $tco_var_y0, $tco_var_x1, $tco_var_y1, $tco_var_remainingValue, $copy_acc);
                              }
                              ;
                              return $tco_result;
                            };
                          };
                        };
                      };
                    };
                  };
                };
              };
              return {
                children: go2(0)(0)(initX0)(initY0)(initX1)(initY1)(v.value0.value)([]),
                x0: initX0,
                y0: initY0
              };
            };
          };
        };
      };
    };
  };
  var squarify = function(ratio) {
    return function(v) {
      return function(x0) {
        return function(y0) {
          return function(x115) {
            return function(y113) {
              var result = squarifyRatio(ratio)(new TNode(v.value0))(x0)(y0)(x115)(y113);
              return new TNode({
                data_: v.value0.data_,
                depth: v.value0.depth,
                height: v.value0.height,
                value: v.value0.value,
                x0: v.value0.x0,
                y0: v.value0.y0,
                x1: v.value0.x1,
                y1: v.value0.y1,
                children: result.children
              });
            };
          };
        };
      };
    };
  };
  var defaultTreemapConfig = {
    size: {
      width: 1,
      height: 1
    },
    tile: /* @__PURE__ */ squarify(phi),
    round: false,
    paddingInner: 0,
    paddingOuter: 0,
    paddingTop: 0,
    paddingRight: 0,
    paddingBottom: 0,
    paddingLeft: 0
  };

  // output/D3.Viz.TreemapViz/index.js
  var maximum11 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var map78 = /* @__PURE__ */ map(functorArray);
  var bind38 = /* @__PURE__ */ bind(bindArray);
  var mod7 = /* @__PURE__ */ mod(euclideanRingInt);
  var show49 = /* @__PURE__ */ show(showInt);
  var classed40 = /* @__PURE__ */ classed(toAttrString);
  var width21 = /* @__PURE__ */ width8(toAttrNumber);
  var height21 = /* @__PURE__ */ height8(toAttrNumber);
  var x38 = /* @__PURE__ */ x(toAttrNumber);
  var y38 = /* @__PURE__ */ y(toAttrNumber);
  var fill36 = /* @__PURE__ */ fill(toAttrString);
  var fontSize19 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text30 = /* @__PURE__ */ text6(toAttrString);
  var strokeColor33 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth30 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var maxDepth = function(nodes) {
    var v = maximum11(map78(function(v1) {
      return v1.value0.depth;
    })(nodes));
    if (v instanceof Just) {
      return v.value0;
    }
    ;
    if (v instanceof Nothing) {
      return 0;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.TreemapViz (line 47, column 18 - line 49, column 15): " + [v.constructor.name]);
  };
  var getLeaves = function(v) {
    var $75 = length3(v.value0.children) === 0;
    if ($75) {
      return [v];
    }
    ;
    return bind38(v.value0.children)(getLeaves);
  };
  var getChildren3 = getChildren;
  var colors5 = ["#e7ba52", "#c7c7c7", "#aec7e8", "#1f77b4", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];
  var getColor4 = function(depth) {
    var idx = mod7(depth)(length3(colors5));
    var v = index2(colors5)(idx);
    if (v instanceof Just) {
      return v.value0;
    }
    ;
    if (v instanceof Nothing) {
      return "#cccccc";
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.TreemapViz (line 34, column 6 - line 36, column 28): " + [v.constructor.name]);
  };
  var drawWithTiling = function(dictBind) {
    var bind121 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var pure56 = pure(Applicative0);
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(flareData) {
          return function(title4) {
            return function(tileFunc) {
              return function(selector) {
                return bind121(liftEffect53(log2("Loaded JSON - root name: " + getName(flareData))))(function() {
                  var h = hierarchy(flareData)(getChildren3);
                  var valued = sum4(h)(getValue);
                  var config = {
                    paddingBottom: defaultTreemapConfig.paddingBottom,
                    paddingInner: defaultTreemapConfig.paddingInner,
                    paddingLeft: defaultTreemapConfig.paddingLeft,
                    paddingOuter: defaultTreemapConfig.paddingOuter,
                    paddingRight: defaultTreemapConfig.paddingRight,
                    paddingTop: defaultTreemapConfig.paddingTop,
                    round: defaultTreemapConfig.round,
                    size: {
                      width: 800,
                      height: 600
                    },
                    tile: tileFunc
                  };
                  var layout = treemap(config)(valued);
                  var leaves = getLeaves(layout);
                  return bind121(liftEffect53(log2("Total leaves: " + show49(length3(leaves)))))(function() {
                    return bind121(liftEffect53(log2("Max depth: " + show49(maxDepth(leaves)))))(function() {
                      return bind121(attach6(selector))(function(root3) {
                        return bind121(appendTo6(root3)(Svg.value)([viewBox(0)(0)(800)(600), classed40("treemap"), width21(800), height21(600)]))(function(svg2) {
                          return bind121(appendTo6(svg2)(Text2.value)([x38(10), y38(20), fill36("#333"), fontSize19(16), text30(title4), classed40("title")]))(function() {
                            var renderLeaf = function(v) {
                              var rectWidth = v.value0.x1 - v.value0.x0;
                              var rectHeight = v.value0.y1 - v.value0.y0;
                              var color2 = getColor4(v.value0.depth);
                              return bind121(appendTo6(svg2)(Rect.value)([x38(v.value0.x0), y38(v.value0.y0), width21(rectWidth), height21(rectHeight), fill36(color2), strokeColor33("#fff"), strokeWidth30(2), classed40("cell")]))(function() {
                                var nodeName3 = getName(v.value0.data_);
                                var $80 = rectWidth > 30 && rectHeight > 20;
                                if ($80) {
                                  return bind121(appendTo6(svg2)(Text2.value)([x38(v.value0.x0 + 4), y38(v.value0.y0 + 14), fill36("#333"), fontSize19(10), text30(nodeName3), classed40("label")]))(function() {
                                    return pure56(unit);
                                  });
                                }
                                ;
                                return pure56(unit);
                              });
                            };
                            return bind121(traverse_16(renderLeaf)(leaves))(function() {
                              return pure56(unit);
                            });
                          });
                        });
                      });
                    });
                  });
                });
              };
            };
          };
        };
      };
    };
  };
  var draw21 = function(dictBind) {
    var drawWithTiling1 = drawWithTiling(dictBind);
    return function(dictMonadEffect) {
      var drawWithTiling2 = drawWithTiling1(dictMonadEffect);
      return function(dictSelectionM) {
        var drawWithTiling3 = drawWithTiling2(dictSelectionM);
        return function(flareData) {
          return drawWithTiling3(flareData)("Treemap: Squarify")(squarify(phi));
        };
      };
    };
  };

  // output/Effect.Class.Console/index.js
  var log3 = function(dictMonadEffect) {
    var $67 = liftEffect(dictMonadEffect);
    return function($68) {
      return $67(log2($68));
    };
  };

  // output/PSD3.Internal.Sankey.Types/foreign.js
  var initialSankeyLayoutState_ = Sankey().nodeWidth(15).nodePadding(10);

  // output/PSD3.Component.Example/index.js
  var member6 = /* @__PURE__ */ member2(ordString);
  var mapFlipped10 = /* @__PURE__ */ mapFlipped(functorArray);
  var member1 = /* @__PURE__ */ member2(ordInt);
  var show50 = /* @__PURE__ */ show(showInt);
  var bind39 = /* @__PURE__ */ bind(bindHalogenM);
  var get9 = /* @__PURE__ */ get(monadStateHalogenM);
  var discard40 = /* @__PURE__ */ discard(discardUnit);
  var discard110 = /* @__PURE__ */ discard40(bindHalogenM);
  var drawThreeCircles3 = /* @__PURE__ */ drawThreeCircles(d3TaglessD3M);
  var pure33 = /* @__PURE__ */ pure(applicativeHalogenM);
  var drawThreeCircles1 = /* @__PURE__ */ drawThreeCircles2(selectionMD3v2Selection_D);
  var draw22 = /* @__PURE__ */ draw3(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw1 = /* @__PURE__ */ draw10(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawQuartet2 = /* @__PURE__ */ drawQuartet(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw23 = /* @__PURE__ */ draw7(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw32 = /* @__PURE__ */ draw11(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawAnimatedRadialTree2 = /* @__PURE__ */ drawAnimatedRadialTree(applicativeD3M);
  var draw42 = /* @__PURE__ */ draw19(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw52 = /* @__PURE__ */ draw20(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw62 = /* @__PURE__ */ draw16(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw72 = /* @__PURE__ */ draw9(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw82 = /* @__PURE__ */ draw21(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw92 = /* @__PURE__ */ draw12(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw102 = /* @__PURE__ */ draw5(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw112 = /* @__PURE__ */ draw6(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw122 = /* @__PURE__ */ draw14(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw132 = /* @__PURE__ */ draw8(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawHorizontalTree2 = /* @__PURE__ */ drawHorizontalTree(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw142 = /* @__PURE__ */ draw13(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw152 = /* @__PURE__ */ draw18(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw162 = /* @__PURE__ */ draw2(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var modify_6 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard211 = /* @__PURE__ */ discard40(bindAff);
  var bind110 = /* @__PURE__ */ bind(bindAff);
  var liftEffect9 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var updateLayout2 = /* @__PURE__ */ updateLayout(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw172 = /* @__PURE__ */ draw(monadEffD3M)(d3TaglessD3M);
  var animationStep2 = /* @__PURE__ */ animationStep(monadEffD3M)(d3TaglessD3M);
  var fromFoldable44 = /* @__PURE__ */ fromFoldable6(foldableArray);
  var fromFoldable121 = /* @__PURE__ */ fromFoldable44(ordString);
  var runWithD3_Simulation3 = /* @__PURE__ */ runWithD3_Simulation(bindHalogenM)(monadStateHalogenM);
  var drawSimplified3 = /* @__PURE__ */ drawSimplified(bindD3SimM)(monadEffD3SimM)(monadStateD3SimM)(simulationM2D3Selection_D);
  var log4 = /* @__PURE__ */ log3(monadEffectEffect);
  var $$void10 = /* @__PURE__ */ $$void(functorD3SimM);
  var drawSimplified1 = /* @__PURE__ */ drawSimplified2(bindD3SimM)(monadEffD3SimM)(monadStateD3SimM)(simulationM2D3Selection_D);
  var drawTopologicalSort2 = /* @__PURE__ */ drawTopologicalSort(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw182 = /* @__PURE__ */ draw17(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawMapQuartet2 = /* @__PURE__ */ drawMapQuartet(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw192 = /* @__PURE__ */ draw4(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var exGeneralUpdatePattern2 = /* @__PURE__ */ exGeneralUpdatePattern(d3TaglessD3M);
  var drawThreeCirclesTransition2 = /* @__PURE__ */ drawThreeCirclesTransition(monadEffD3M)(d3TaglessD3M);
  var drawWithData2 = /* @__PURE__ */ drawWithData(d3TaglessD3M);
  var draw202 = /* @__PURE__ */ draw15(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawThreeDimensions2 = /* @__PURE__ */ drawThreeDimensions(d3TaglessD3M);
  var drawThreeDimensionsSets2 = /* @__PURE__ */ drawThreeDimensionsSets(d3TaglessD3M);
  var $$delete8 = /* @__PURE__ */ $$delete3(ordInt);
  var insert16 = /* @__PURE__ */ insert5(ordInt);
  var bind210 = /* @__PURE__ */ bind(bindD3SimM);
  var attach2 = /* @__PURE__ */ attach(selectionMD3Selection_D3S1);
  var selectUnder2 = /* @__PURE__ */ selectUnder(selectionMD3Selection_D3S1);
  var discard310 = /* @__PURE__ */ discard40(bindD3SimM);
  var updateSimulation4 = /* @__PURE__ */ updateSimulation3(bindD3SimM)(monadEffD3SimM)(monadStateD3SimM)(selectionMD3Selection_D3S1)(simulationM2D3Selection_D);
  var start5 = /* @__PURE__ */ start2(simulationMD3Selection_D3);
  var delete1 = /* @__PURE__ */ $$delete3(ordString);
  var insert17 = /* @__PURE__ */ insert5(ordString);
  var stop3 = /* @__PURE__ */ stop(simulationMD3Selection_D3);
  var pure111 = /* @__PURE__ */ pure(applicativeEffect);
  var gets2 = /* @__PURE__ */ gets(monadStateHalogenM);
  var initialize4 = /* @__PURE__ */ initialize2(foldableArray)(functorArray);
  var fromFoldable211 = /* @__PURE__ */ fromFoldable44(ordInt);
  var Initialize5 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var Finalize3 = /* @__PURE__ */ (function() {
    function Finalize6() {
    }
    ;
    Finalize6.value = new Finalize6();
    return Finalize6;
  })();
  var ToggleGroup = /* @__PURE__ */ (function() {
    function ToggleGroup2(value0) {
      this.value0 = value0;
    }
    ;
    ToggleGroup2.create = function(value0) {
      return new ToggleGroup2(value0);
    };
    return ToggleGroup2;
  })();
  var ToggleForce2 = /* @__PURE__ */ (function() {
    function ToggleForce3(value0) {
      this.value0 = value0;
    }
    ;
    ToggleForce3.create = function(value0) {
      return new ToggleForce3(value0);
    };
    return ToggleForce3;
  })();
  var MoveToGrid = /* @__PURE__ */ (function() {
    function MoveToGrid2() {
    }
    ;
    MoveToGrid2.value = new MoveToGrid2();
    return MoveToGrid2;
  })();
  var ReleaseFromGrid = /* @__PURE__ */ (function() {
    function ReleaseFromGrid2() {
    }
    ;
    ReleaseFromGrid2.value = new ReleaseFromGrid2();
    return ReleaseFromGrid2;
  })();
  var renderForceButton = function(forceLabel) {
    return function(activeForces) {
      var isActive = member6(forceLabel)(activeForces);
      return button([classes([(function() {
        if (isActive) {
          return "active";
        }
        ;
        return "inactive";
      })()]), onClick(function(v) {
        return new ToggleForce2(forceLabel);
      })])([text5(forceLabel)]);
    };
  };
  var renderLesMisControls = function(state3) {
    var $186 = state3.exampleId === "lesmisgup";
    if ($186) {
      return div2([classes(["lesmis-controls"])])([div2([classes(["control-section"])])([h3_([text5("Character Groups")]), div2([classes(["button-group"])])(mapFlipped10(range2(0)(10))(function(groupId) {
        var isActive = member1(groupId)(state3.lesMisVisibleGroups);
        return button([classes([(function() {
          if (isActive) {
            return "active";
          }
          ;
          return "inactive";
        })()]), onClick(function(v) {
          return new ToggleGroup(groupId);
        })])([text5("Group " + show50(groupId))]);
      }))]), div2([classes(["control-section"])])([h3_([text5("Forces")]), div2([classes(["button-group"])])([renderForceButton("many body negative")(state3.lesMisActiveForces), renderForceButton("collision")(state3.lesMisActiveForces), renderForceButton("center")(state3.lesMisActiveForces), renderForceButton(linksForceName_)(state3.lesMisActiveForces)])]), div2([classes(["control-section"])])([h3_([text5("Layout")]), div2([classes(["button-group"])])([(function() {
        if (state3.lesMisInGridMode) {
          return button([classes(["layout-button"]), onClick(function(v) {
            return ReleaseFromGrid.value;
          })])([text5("Release from Grid")]);
        }
        ;
        return button([classes(["layout-button"]), onClick(function(v) {
          return MoveToGrid.value;
        })])([text5("Move to Grid")]);
      })()])])]);
    }
    ;
    return text5("");
  };
  var getExampleMeta = function(id5) {
    if (id5 === "three-little-circles") {
      return new Just({
        id: id5,
        name: "Three Little Circles",
        description: "The simplest possible D3 example - three circles",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "bar-chart") {
      return new Just({
        id: id5,
        name: "Bar Chart",
        description: "Basic bar chart with axis and labels",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "line-chart") {
      return new Just({
        id: id5,
        name: "Line Chart",
        description: "Line chart with time series data",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "scatter-plot") {
      return new Just({
        id: id5,
        name: "Scatter Plot",
        description: "Scatter plot with Anscombe's Quartet",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "grouped-bar-chart") {
      return new Just({
        id: id5,
        name: "Grouped Bar Chart",
        description: "Bar chart with grouped categories",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "multi-line-chart") {
      return new Just({
        id: id5,
        name: "Multi-Line Chart",
        description: "Multiple line series on one chart",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "radial-stacked-bar") {
      return new Just({
        id: id5,
        name: "Radial Stacked Bar Chart",
        description: "Population by age and state in radial form",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "parabola") {
      return new Just({
        id: id5,
        name: "Parabola",
        description: "Colored circles in parabolic formation",
        category: "Simple Charts"
      });
    }
    ;
    if (id5 === "animated-radial-tree") {
      return new Just({
        id: id5,
        name: "Animated Radial Tree",
        description: "Transitions between tree layouts with smooth animations",
        category: "Transitions"
      });
    }
    ;
    if (id5 === "tree-purescript") {
      return new Just({
        id: id5,
        name: "Tree (Pure PureScript)",
        description: "Node-link tree layout using pure PureScript implementation (Reingold-Tilford algorithm)",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "tree4") {
      return new Just({
        id: id5,
        name: "Tree4 (Data.Tree + Contours)",
        description: "Reingold-Tilford tree layout using Data.Tree with contour-based algorithm adapted from Haskell",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "radial-tree") {
      return new Just({
        id: id5,
        name: "Radial Tree",
        description: "Tree layout with polar projection - same Tree4 algorithm with radial coordinates",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "horizontal-tree") {
      return new Just({
        id: id5,
        name: "Horizontal Tree",
        description: "Tree layout with horizontal orientation - Tree4 with swapped axes",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "treemap") {
      return new Just({
        id: id5,
        name: "Treemap (Pure PureScript)",
        description: "Space-filling hierarchical visualization using squarified tiling algorithm in pure PureScript",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "pack-purescript") {
      return new Just({
        id: id5,
        name: "Pack (Pure PureScript)",
        description: "Circle packing layout with iterative relaxation algorithm in pure PureScript",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "cluster-purescript") {
      return new Just({
        id: id5,
        name: "Cluster (Pure PureScript)",
        description: "Dendrogram with equal leaf depth using pure PureScript implementation",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "cluster4") {
      return new Just({
        id: id5,
        name: "Cluster4 (Dendrogram)",
        description: "Vertical dendrogram using Cluster4 layout with Data.Tree - all leaves at equal depth",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "radial-cluster") {
      return new Just({
        id: id5,
        name: "Radial Cluster",
        description: "Radial dendrogram using Cluster4 with polar projection",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "horizontal-cluster") {
      return new Just({
        id: id5,
        name: "Horizontal Cluster",
        description: "Horizontal dendrogram using Cluster4 with swapped axes",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "horizontal-cluster-d3") {
      return new Just({
        id: id5,
        name: "Horizontal Cluster (D3 Native)",
        description: "Horizontal dendrogram using D3's native cluster algorithm via FFI",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "icicle") {
      return new Just({
        id: id5,
        name: "Partition/Icicle (Pure PureScript)",
        description: "Rectangular partition layout (icicle chart) with equal layer height in pure PureScript",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "sunburst-purescript") {
      return new Just({
        id: id5,
        name: "Sunburst (Pure PureScript)",
        description: "Radial partition layout with nested rings in pure PureScript",
        category: "Hierarchies"
      });
    }
    ;
    if (id5 === "animated-tree-cluster") {
      return new Just({
        id: id5,
        name: "Animated Tree \u2194 Cluster",
        description: "Automatic transitions between tree and dendrogram layouts using pure PureScript algorithms",
        category: "Transitions"
      });
    }
    ;
    if (id5 === "animated-tree4-cluster4") {
      return new Just({
        id: id5,
        name: "Animated Tree4 \u2194 Cluster4",
        description: "Looping animation between Reingold-Tilford tidy tree and dendrogram using Data.Tree",
        category: "Transitions"
      });
    }
    ;
    if (id5 === "lesmis-force") {
      return new Just({
        id: id5,
        name: "Les Mis\xE9rables Network",
        description: "Character co-occurrence force-directed graph with physics simulation",
        category: "Force-Directed"
      });
    }
    ;
    if (id5 === "lesmisgup") {
      return new Just({
        id: id5,
        name: "Les Mis\xE9rables GUP",
        description: "Les Mis\xE9rables network with General Update Pattern - filter groups dynamically",
        category: "Force-Directed"
      });
    }
    ;
    if (id5 === "topological-sort") {
      return new Just({
        id: id5,
        name: "Topological Sort Layers",
        description: "Force layout with layer constraints for dependency graphs",
        category: "Force-Directed"
      });
    }
    ;
    if (id5 === "sankey-diagram") {
      return new Just({
        id: id5,
        name: "Sankey Diagram",
        description: "Energy flow visualization showing sources, transformations, and destinations",
        category: "Data Flow"
      });
    }
    ;
    if (id5 === "map-quartet") {
      return new Just({
        id: id5,
        name: "Map Quartet",
        description: "Four scatter plots demonstrating sparse data with PureScript Maps (15 points out of 200 possible x-values)",
        category: "Rich Data Structures"
      });
    }
    ;
    if (id5 === "nested-data") {
      return new Just({
        id: id5,
        name: "Nested Data",
        description: "Nested selections with 2D arrays",
        category: "Rich Data Structures"
      });
    }
    ;
    if (id5 === "working-with-sets") {
      return new Just({
        id: id5,
        name: "Working with Sets",
        description: "Nested selections with Set data structures",
        category: "Rich Data Structures"
      });
    }
    ;
    if (id5 === "chord-diagram") {
      return new Just({
        id: id5,
        name: "Chord Diagram",
        description: "Circular flow diagram showing relationships between programming concepts",
        category: "Data Flow"
      });
    }
    ;
    if (id5 === "general-update-pattern") {
      return new Just({
        id: id5,
        name: "General Update Pattern",
        description: "Enter, update, exit pattern visualization with animated letters",
        category: "Transitions"
      });
    }
    ;
    if (id5 === "three-circles-transition") {
      return new Just({
        id: id5,
        name: "Color Mixing Transition",
        description: "RGB color mixing with smooth transitions demonstrating additive color",
        category: "Transitions"
      });
    }
    ;
    return Nothing.value;
  };
  var getExampleCode = function(exampleId) {
    return "-- Source code for " + (exampleId + "\n-- This will be populated with actual code snippets\n\ndraw :: forall m.\n  Bind m =>\n  MonadEffect m =>\n  SelectionM D3Selection_ m =>\n  Selector D3Selection_ -> m Unit\ndraw selector = do\n  svg <- attach selector >>= appendTo _ Svg []\n  -- visualization code here\n  pure unit");
  };
  var forces = /* @__PURE__ */ (function() {
    return {
      manyBodyNeg: createForce("many body negative")(new RegularForce(ForceManyBody.value))(allNodes)([strengthVal(-40)]),
      collision: createForce("collision")(new RegularForce(ForceCollide.value))(allNodes)([radiusVal(4)]),
      center: createForce("center")(new RegularForce(ForceCenter.value))(allNodes)([xVal(0), yVal(0), strengthVal(1)]),
      links: createLinkForce(Nothing.value)([])
    };
  })();
  var handleAction4 = function(dictMonadAff) {
    var monadEffectHalogenM8 = monadEffectHalogenM(dictMonadAff.MonadEffect0());
    var log1 = log3(monadEffectHalogenM8);
    var liftEffect112 = liftEffect(monadEffectHalogenM8);
    var monadAffHalogenM2 = monadAffHalogenM(dictMonadAff);
    var liftAff37 = liftAff(monadAffHalogenM2);
    var runWithD3_Simulation1 = runWithD3_Simulation3(monadAffHalogenM2);
    return function(v) {
      if (v instanceof Initialize5) {
        return bind39(get9)(function(state3) {
          return discard110(log1("Example: Initializing " + state3.exampleId))(function() {
            if (state3.exampleId === "three-little-circles") {
              return bind39(liftEffect112(eval_D3M(drawThreeCircles3("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "three-little-circles-v2") {
              return bind39(liftEffect112(runD3v2M(drawThreeCircles1("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "bar-chart") {
              return bind39(liftEffect112(eval_D3M(draw22(monthlySales)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "line-chart") {
              return bind39(liftEffect112(eval_D3M(draw1(sineWaveData)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "scatter-plot") {
              return bind39(liftEffect112(eval_D3M(drawQuartet2(anscombesQuartet)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "grouped-bar-chart") {
              return bind39(liftEffect112(eval_D3M(draw23(groupedBarData)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "multi-line-chart") {
              return bind39(liftEffect112(eval_D3M(draw32(multiLineData)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "animated-radial-tree") {
              return bind39(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("AnimatedRadialTree: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(drawAnimatedRadialTree2(TidyTree.value)(result.value0)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 180, column 9 - line 184, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "tree-purescript") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Tree (PureScript): Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw42(blessed)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 188, column 9 - line 193, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "tree4") {
              return bind39(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Tree4 (Reingold-Tilford): Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(draw52(result.value0)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 197, column 9 - line 201, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "radial-tree") {
              return bind39(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Radial Tree: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(draw62(result.value0)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 205, column 9 - line 209, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "horizontal-tree") {
              return bind39(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Horizontal Tree: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(draw72(result.value0)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 213, column 9 - line 217, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "treemap") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Treemap: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw82(blessed)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 221, column 9 - line 226, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "pack-purescript") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Pack (PureScript): Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw92(blessed)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 230, column 9 - line 235, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "cluster-purescript") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Cluster (PureScript): Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw102(blessed)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 239, column 9 - line 244, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "cluster4") {
              return bind39(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Cluster4: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(draw112(result.value0)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 248, column 9 - line 252, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "radial-cluster") {
              return bind39(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Radial Cluster: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(draw122(result.value0)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 256, column 9 - line 260, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "horizontal-cluster") {
              return bind39(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Horizontal Cluster: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(draw132(result.value0)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 264, column 9 - line 268, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "horizontal-cluster-d3") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Horizontal Cluster (D3): Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(drawHorizontalTree2(Dendrogram.value)(blessed)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 272, column 9 - line 277, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "icicle") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Partition (Icicle): Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw142(blessed)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 281, column 9 - line 286, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "sunburst-purescript") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("Sunburst (PureScript): Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw152(blessed)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 290, column 9 - line 295, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "animated-tree-cluster") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("AnimatedTreeCluster: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw162(blessed)("#example-viz"))))(function(v1) {
                    return discard110(modify_6(function(v2) {
                      var $237 = {};
                      for (var $238 in v2) {
                        if ({}.hasOwnProperty.call(v2, $238)) {
                          $237[$238] = v2[$238];
                        }
                        ;
                      }
                      ;
                      $237.animatedTreeClusterLayout = new Just(TreeLayout2.value);
                      $237.animatedTreeClusterLinks = new Just(v1.links);
                      $237.animatedTreeClusterNodes = new Just(v1.nodes);
                      return $237;
                    }))(function() {
                      var runToggle = function(currentLayout) {
                        return discard211(delay(3e3))(function() {
                          return bind110(liftEffect9(eval_D3M(updateLayout2(currentLayout)(v1.hierarchyRoot)(v1.links)(v1.nodes))))(function(newLayout) {
                            return runToggle(newLayout);
                          });
                        });
                      };
                      return bind39(liftAff37(forkAff(runToggle(TreeLayout2.value))))(function(fiber) {
                        return discard110(modify_6(function(v2) {
                          var $240 = {};
                          for (var $241 in v2) {
                            if ({}.hasOwnProperty.call(v2, $241)) {
                              $240[$241] = v2[$241];
                            }
                            ;
                          }
                          ;
                          $240.animatedTreeClusterFiber = new Just(fiber);
                          return $240;
                        }))(function() {
                          return pure33(unit);
                        });
                      });
                    });
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 299, column 9 - line 319, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "animated-tree4-cluster4") {
              return bind39(liftAff37(get4(string)("./data/flare-2.json")))(function(result) {
                if (result instanceof Left) {
                  return log1("AnimatedTree4Cluster4: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  var blessed = readJSON_(result.value0.body);
                  return bind39(liftEffect112(eval_D3M(draw172(blessed)("#example-viz"))))(function(v1) {
                    var runLoop = function(currentLayout) {
                      return bind110(liftEffect9(eval_D3M(animationStep2(v1.dataTree)(v1.linksGroup)(v1.nodesGroup)(v1.chartWidth)(v1.chartHeight)(currentLayout))))(function() {
                        return discard211(delay(3e3))(function() {
                          return runLoop(toggleLayout(currentLayout));
                        });
                      });
                    };
                    return bind39(liftAff37(forkAff(runLoop(TreeLayout.value))))(function() {
                      return pure33(unit);
                    });
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 323, column 9 - line 337, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "lesmis-force") {
              return bind39(liftAff37(get4(string)("./data/miserables.json")))(function(response) {
                var graph = readGraphFromFileContents(response);
                var forcesArray = [forces.manyBodyNeg, forces.collision, forces.center, forces.links];
                var activeForces = fromFoldable121(["many body negative", "collision", "center", linksForceName_]);
                return discard110(runWithD3_Simulation1(drawSimplified3(forcesArray)(activeForces)(graph)("#example-viz")))(function() {
                  return pure33(unit);
                });
              });
            }
            ;
            if (state3.exampleId === "lesmisgup") {
              return bind39(liftAff37(get4(string)("./data/miserables.json")))(function(response) {
                var graph = readGraphFromFileContents(response);
                return discard110((function() {
                  var v1 = head(graph.nodes);
                  if (v1 instanceof Just) {
                    return liftEffect112(log4("BEFORE SIMULATION (Myriel): " + stringify2(v1.value0)));
                  }
                  ;
                  if (v1 instanceof Nothing) {
                    return pure33(unit);
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.Component.Example (line 353, column 9 - line 355, column 31): " + [v1.constructor.name]);
                })())(function() {
                  var forcesArray = [forces.manyBodyNeg, forces.collision, forces.center, forces.links];
                  var activeForces = fromFoldable121(["many body negative", "collision", "center", linksForceName_]);
                  return discard110(runWithD3_Simulation1($$void10(drawSimplified1(forcesArray)(activeForces)(graph)("#example-viz"))))(function() {
                    return discard110(modify_6(function(v1) {
                      var $258 = {};
                      for (var $259 in v1) {
                        if ({}.hasOwnProperty.call(v1, $259)) {
                          $258[$259] = v1[$259];
                        }
                        ;
                      }
                      ;
                      $258.lesMisData = new Just(graph);
                      return $258;
                    }))(function() {
                      return pure33(unit);
                    });
                  });
                });
              });
            }
            ;
            if (state3.exampleId === "topological-sort") {
              return bind39(liftEffect112(eval_D3M(drawTopologicalSort2(buildPipelineTasks)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "sankey-diagram") {
              return bind39(liftAff37(get4(string)("./data/energy.csv")))(function(result) {
                if (result instanceof Left) {
                  return log1("Sankey: Failed to load data");
                }
                ;
                if (result instanceof Right) {
                  return bind39(liftEffect112(eval_D3M(draw182(result.value0.body)("#example-viz"))))(function() {
                    return pure33(unit);
                  });
                }
                ;
                throw new Error("Failed pattern match at PSD3.Component.Example (line 374, column 9 - line 378, column 22): " + [result.constructor.name]);
              });
            }
            ;
            if (state3.exampleId === "map-quartet") {
              return bind39(liftEffect112(generateMapQuartet))(function(quartet) {
                return bind39(liftEffect112(eval_D3M(drawMapQuartet2(quartet)("#example-viz"))))(function() {
                  return pure33(unit);
                });
              });
            }
            ;
            if (state3.exampleId === "chord-diagram") {
              return bind39(liftEffect112(eval_D3M(draw192(exampleMatrix)(exampleLabels)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "general-update-pattern") {
              return bind39(liftEffect112(eval_D3M(exGeneralUpdatePattern2("#example-viz"))))(function(updateFn) {
                return bind39(liftEffect112(eval_D3M(updateFn(["A", "B", "C", "D", "E"]))))(function() {
                  return pure33(unit);
                });
              });
            }
            ;
            if (state3.exampleId === "three-circles-transition") {
              return bind39(liftEffect112(eval_D3M(drawThreeCirclesTransition2("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "parabola") {
              var parabolaData = [310, 474, 613, 726, 814, 877, 914, 926, 914, 877, 814, 726, 613, 474, 310];
              return bind39(liftEffect112(eval_D3M(drawWithData2(parabolaData)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "radial-stacked-bar") {
              return bind39(liftEffect112(eval_D3M(draw202(groupedBarData)("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "nested-data") {
              return bind39(liftEffect112(eval_D3M(drawThreeDimensions2("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "working-with-sets") {
              return bind39(liftEffect112(eval_D3M(drawThreeDimensionsSets2("#example-viz"))))(function() {
                return pure33(unit);
              });
            }
            ;
            if (state3.exampleId === "wealth-health") {
              return discard110(log1("Wealth & Health example not yet implemented"))(function() {
                return pure33(unit);
              });
            }
            ;
            return log1("Example: Unknown example ID: " + state3.exampleId);
          });
        });
      }
      ;
      if (v instanceof ToggleGroup) {
        return bind39(get9)(function(state3) {
          var newVisibleGroups = (function() {
            var $264 = member1(v.value0)(state3.lesMisVisibleGroups);
            if ($264) {
              return $$delete8(v.value0)(state3.lesMisVisibleGroups);
            }
            ;
            return insert16(v.value0)(state3.lesMisVisibleGroups);
          })();
          return discard110(modify_6(function(v1) {
            var $265 = {};
            for (var $266 in v1) {
              if ({}.hasOwnProperty.call(v1, $266)) {
                $265[$266] = v1[$266];
              }
              ;
            }
            ;
            $265.lesMisVisibleGroups = newVisibleGroups;
            return $265;
          }))(function() {
            if (state3.lesMisData instanceof Just) {
              return runWithD3_Simulation1(bind210(attach2("#example-viz"))(function(v1) {
                return bind210(selectUnder2(v1)(".node"))(function(v2) {
                  return bind210(selectUnder2(v1)(".link"))(function(v3) {
                    return discard310(updateSimulation4({
                      nodes: new Just(v2),
                      links: new Just(v3)
                    })({
                      allNodes: state3.lesMisData.value0.nodes,
                      allLinks: state3.lesMisData.value0.links,
                      nodeFilter: function(node) {
                        return member1(node.group)(newVisibleGroups);
                      },
                      activeForces: state3.lesMisActiveForces
                    }))(function() {
                      return start5;
                    });
                  });
                });
              }));
            }
            ;
            return log1("ToggleGroup: No model data available");
          });
        });
      }
      ;
      if (v instanceof ToggleForce2) {
        return bind39(get9)(function(state3) {
          var newActiveForces = (function() {
            var $274 = member6(v.value0)(state3.lesMisActiveForces);
            if ($274) {
              return delete1(v.value0)(state3.lesMisActiveForces);
            }
            ;
            return insert17(v.value0)(state3.lesMisActiveForces);
          })();
          return discard110(modify_6(function(v1) {
            var $275 = {};
            for (var $276 in v1) {
              if ({}.hasOwnProperty.call(v1, $276)) {
                $275[$276] = v1[$276];
              }
              ;
            }
            ;
            $275.lesMisActiveForces = newActiveForces;
            return $275;
          }))(function() {
            if (state3.lesMisData instanceof Just) {
              return runWithD3_Simulation1(bind210(attach2("#example-viz"))(function(v1) {
                return bind210(selectUnder2(v1)(".node"))(function(v2) {
                  return bind210(selectUnder2(v1)(".link"))(function(v3) {
                    return updateSimulation4({
                      nodes: new Just(v2),
                      links: new Just(v3)
                    })({
                      allNodes: state3.lesMisData.value0.nodes,
                      allLinks: state3.lesMisData.value0.links,
                      nodeFilter: function(node) {
                        return member1(node.group)(state3.lesMisVisibleGroups);
                      },
                      activeForces: newActiveForces
                    });
                  });
                });
              }));
            }
            ;
            return log1("ToggleForce: No model data available");
          });
        });
      }
      ;
      if (v instanceof MoveToGrid) {
        return bind39(get9)(function(state3) {
          if (state3.lesMisData instanceof Just) {
            var gridNodes = nodesToGridLayout(state3.lesMisData.value0.nodes)(50)(800);
            return discard110(runWithD3_Simulation1(stop3))(function() {
              return discard110(liftEffect112(transitionNodesToGridPositions_(".lesmis")(".node circle")(".link line")(gridNodes)(pure111(unit))))(function() {
                return discard110(runWithD3_Simulation1(bind210(attach2("#example-viz"))(function(v1) {
                  return bind210(selectUnder2(v1)(".node"))(function(v2) {
                    return bind210(selectUnder2(v1)(".link"))(function(v3) {
                      return updateSimulation4({
                        nodes: new Just(v2),
                        links: new Just(v3)
                      })({
                        allNodes: gridNodes,
                        allLinks: state3.lesMisData.value0.links,
                        nodeFilter: function(node) {
                          return member1(node.group)(state3.lesMisVisibleGroups);
                        },
                        activeForces: state3.lesMisActiveForces
                      });
                    });
                  });
                })))(function() {
                  return modify_6(function(v1) {
                    var $288 = {};
                    for (var $289 in v1) {
                      if ({}.hasOwnProperty.call(v1, $289)) {
                        $288[$289] = v1[$289];
                      }
                      ;
                    }
                    ;
                    $288.lesMisInGridMode = true;
                    return $288;
                  });
                });
              });
            });
          }
          ;
          return log1("MoveToGrid: No model data available");
        });
      }
      ;
      if (v instanceof ReleaseFromGrid) {
        return bind39(get9)(function(state3) {
          if (state3.lesMisData instanceof Just) {
            var unpinnedNodes = unpinAllNodes2(state3.lesMisData.value0.nodes);
            return discard110(runWithD3_Simulation1(bind210(attach2("#example-viz"))(function(v1) {
              return bind210(selectUnder2(v1)(".node"))(function(v2) {
                return bind210(selectUnder2(v1)(".link"))(function(v3) {
                  return discard310(updateSimulation4({
                    nodes: new Just(v2),
                    links: new Just(v3)
                  })({
                    allNodes: unpinnedNodes,
                    allLinks: state3.lesMisData.value0.links,
                    nodeFilter: function(node) {
                      return member1(node.group)(state3.lesMisVisibleGroups);
                    },
                    activeForces: state3.lesMisActiveForces
                  }))(function() {
                    return start5;
                  });
                });
              });
            })))(function() {
              return modify_6(function(v1) {
                var $296 = {};
                for (var $297 in v1) {
                  if ({}.hasOwnProperty.call(v1, $297)) {
                    $296[$297] = v1[$297];
                  }
                  ;
                }
                ;
                $296.lesMisInGridMode = false;
                return $296;
              });
            });
          }
          ;
          return log1("ReleaseFromGrid: No model data available");
        });
      }
      ;
      if (v instanceof Finalize3) {
        return bind39(gets2(function(v1) {
          return v1.animatedTreeClusterFiber;
        }))(function(maybeFiber) {
          if (maybeFiber instanceof Nothing) {
            return pure33(unit);
          }
          ;
          if (maybeFiber instanceof Just) {
            return liftAff37(killFiber(error("Cancelling AnimatedTreeCluster animation"))(maybeFiber.value0));
          }
          ;
          throw new Error("Failed pattern match at PSD3.Component.Example (line 554, column 5 - line 556, column 99): " + [maybeFiber.constructor.name]);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Component.Example (line 143, column 16 - line 556, column 99): " + [v.constructor.name]);
    };
  };
  var allExampleIds = ["three-little-circles", "bar-chart", "line-chart", "scatter-plot", "grouped-bar-chart", "multi-line-chart", "radial-stacked-bar", "parabola", "animated-radial-tree", "tree-purescript", "tree4", "radial-tree", "horizontal-tree", "treemap", "pack-purescript", "cluster-purescript", "cluster4", "radial-cluster", "horizontal-cluster", "icicle", "sunburst-purescript", "animated-tree-cluster", "animated-tree4-cluster4", "lesmis-force", "lesmisgup", "topological-sort", "chord-diagram", "sankey-diagram", "map-quartet", "nested-data", "working-with-sets", "general-update-pattern", "three-circles-transition"];
  var getNextExampleId = function(currentId) {
    var v = findIndex(function(id5) {
      return id5 === currentId;
    })(allExampleIds);
    if (v instanceof Nothing) {
      return Nothing.value;
    }
    ;
    if (v instanceof Just) {
      return index2(allExampleIds)(v.value0 + 1 | 0);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Component.Example (line 607, column 3 - line 609, column 54): " + [v.constructor.name]);
  };
  var getPrevExampleId = function(currentId) {
    var v = findIndex(function(id5) {
      return id5 === currentId;
    })(allExampleIds);
    if (v instanceof Nothing) {
      return Nothing.value;
    }
    ;
    if (v instanceof Just) {
      var $305 = v.value0 > 0;
      if ($305) {
        return index2(allExampleIds)(v.value0 - 1 | 0);
      }
      ;
      return Nothing.value;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Component.Example (line 614, column 3 - line 616, column 83): " + [v.constructor.name]);
  };
  var renderHeader2 = function(currentId) {
    return function(maybeMeta) {
      return header([classes(["example-header"])])([div2([classes(["example-header-left"])])([a([href4("#" + routeToPath(Home.value)), classes(["example-logo-link"])])([img([src9("assets/psd3-logo-color.svg"), alt5("PSD3 Logo"), classes(["example-logo"])])]), a([href4("#" + routeToPath(ExamplesGallery.value)), classes(["example-gallery-link"])])([text5("Examples")]), (function() {
        if (maybeMeta instanceof Just) {
          return div2([classes(["example-title-container"])])([h1([classes(["example-title"])])([text5(maybeMeta.value0.name)])]);
        }
        ;
        if (maybeMeta instanceof Nothing) {
          return text5("");
        }
        ;
        throw new Error("Failed pattern match at PSD3.Component.Example (line 822, column 11 - line 830, column 34): " + [maybeMeta.constructor.name]);
      })()]), div2([classes(["example-header-right"])])([(function() {
        var v = getPrevExampleId(currentId);
        if (v instanceof Nothing) {
          return span3([classes(["example-nav-button", "disabled"])])([text5("\u2190 Previous")]);
        }
        ;
        if (v instanceof Just) {
          return a([href4("#" + routeToPath(new Example(v.value0))), classes(["example-nav-button"])])([text5("\u2190 Previous")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Component.Example (line 834, column 11 - line 844, column 41): " + [v.constructor.name]);
      })(), (function() {
        var v = getNextExampleId(currentId);
        if (v instanceof Nothing) {
          return span3([classes(["example-nav-button", "disabled"])])([text5("Next \u2192")]);
        }
        ;
        if (v instanceof Just) {
          return a([href4("#" + routeToPath(new Example(v.value0))), classes(["example-nav-button"])])([text5("Next \u2192")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Component.Example (line 845, column 11 - line 855, column 37): " + [v.constructor.name]);
      })()])]);
    };
  };
  var render11 = function(state3) {
    var v = getExampleMeta(state3.exampleId);
    if (v instanceof Nothing) {
      return div2([classes(["example-page"])])([renderHeader2(state3.exampleId)(Nothing.value), main([classes(["example-content"])])([h1_([text5("Example Not Found")]), p_([text5("No example found with ID: " + state3.exampleId)])])]);
    }
    ;
    if (v instanceof Just) {
      return div2([classes(["example-page"])])([renderHeader2(state3.exampleId)(new Just(v.value0)), main([classes(["example-content"])])([div2([classes(["example-viz-panel"])])([renderLesMisControls(state3), div2([id2("example-viz"), classes(["example-viz"])])([])]), div2([classes(["example-code-panel"])])([h2([classes(["code-panel-title"])])([text5("Source Code")]), pre([classes(["code-block"])])([code([classes(["language-haskell"])])([text5(getExampleCode(state3.exampleId))])])])])]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Component.Example (line 693, column 3 - line 733, column 10): " + [v.constructor.name]);
  };
  var component6 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(exampleId) {
        return {
          exampleId,
          simulation: initialSimulationState(initialize4([forces.manyBodyNeg, forces.collision, forces.center, forces.links])),
          sankeyLayout: initialSankeyLayoutState_,
          lesMisData: Nothing.value,
          lesMisVisibleGroups: fromFoldable211([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]),
          lesMisActiveForces: fromFoldable121(["many body negative", "collision", "center", linksForceName_]),
          lesMisInGridMode: false,
          animatedTreeClusterFiber: Nothing.value,
          animatedTreeClusterLayout: Nothing.value,
          animatedTreeClusterLinks: Nothing.value,
          animatedTreeClusterNodes: Nothing.value
        };
      },
      render: render11,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        handleAction: handleAction4(dictMonadAff),
        initialize: new Just(Initialize5.value),
        finalize: new Just(Finalize3.value)
      })
    });
  };

  // output/PSD3.Interpreter.MermaidAST/index.js
  var show51 = /* @__PURE__ */ show(showOrderingAttribute);
  var show127 = /* @__PURE__ */ show(showMouseEvent);
  var show212 = /* @__PURE__ */ show(showInt);
  var show310 = /* @__PURE__ */ show(showElement);
  var monadStateMermaidASTM = /* @__PURE__ */ monadStateStateT(monadEffect);
  var get10 = /* @__PURE__ */ get(monadStateMermaidASTM);
  var modify_7 = /* @__PURE__ */ modify_(monadStateMermaidASTM);
  var monadMermaidASTM = /* @__PURE__ */ monadStateT(monadEffect);
  var generateStyleDefinitions = function(v) {
    return "\n    %% Style definitions\n    classDef selectOp fill:#abdda4,stroke:#66c2a5,stroke-width:2px\n    classDef appendOp fill:#fee08b,stroke:#fdae61,stroke-width:2px\n    classDef joinOp fill:#f46d43,stroke:#d53e4f,stroke-width:2px\n    classDef attrOp fill:#e6f598,stroke:#abdda4,stroke-width:2px\n    classDef controlOp fill:#66c2a5,stroke:#3288bd,stroke-width:2px\n    classDef transitionOp fill:#fdae61,stroke:#f46d43,stroke-width:2px\n";
  };
  var runMermaidAST = function(v) {
    var initialState7 = {
      nodeCounter: 0,
      mermaidCode: "",
      nodeStyles: []
    };
    return function __do5() {
      var v1 = runStateT(v)(initialState7)();
      var styleDefinitions = generateStyleDefinitions(v1.value1.nodeStyles);
      return "%%{init: {'theme':'base', 'themeVariables': {'fontFamily':'monospace'}, 'look':'handDrawn', 'flowchart':{'curve':'basis'}}}%%\n" + ("graph TD\n" + (v1.value1.mermaidCode + styleDefinitions));
    };
  };
  var formatAttributeList = function(attrs) {
    if (attrs.length === 0) {
      return "";
    }
    ;
    return foldl3(function(acc) {
      return function(attr3) {
        var $45 = acc === "";
        if ($45) {
          return formatAttribute(attr3);
        }
        ;
        return acc + (", " + formatAttribute(attr3));
      };
    })("")(attrs);
  };
  var formatAttribute = function(attr3) {
    if (attr3 instanceof AttrT) {
      return attr3.value0.value0;
    }
    ;
    if (attr3 instanceof TextT) {
      return "text";
    }
    ;
    if (attr3 instanceof PropertyT) {
      return "prop:" + attr3.value0.value0;
    }
    ;
    if (attr3 instanceof HTMLT) {
      return "html";
    }
    ;
    if (attr3 instanceof RemoveT) {
      return "remove";
    }
    ;
    if (attr3 instanceof OrderingT) {
      return show51(attr3.value0);
    }
    ;
    if (attr3 instanceof TransitionT) {
      return "transition -> [" + (formatAttributeList(attr3.value0) + "]");
    }
    ;
    if (attr3 instanceof OnT) {
      return "on(" + (show127(attr3.value0) + ")");
    }
    ;
    if (attr3 instanceof OnT$prime) {
      return "on(" + (show127(attr3.value0) + ")");
    }
    ;
    throw new Error("Failed pattern match at PSD3.Interpreter.MermaidAST (line 168, column 24 - line 177, column 55): " + [attr3.constructor.name]);
  };
  var escapeLabel = /* @__PURE__ */ replaceAll('"')("'");
  var bindMermaidASTM = /* @__PURE__ */ bindStateT(monadEffect);
  var bind111 = /* @__PURE__ */ bind(bindMermaidASTM);
  var discard41 = /* @__PURE__ */ discard(discardUnit)(bindMermaidASTM);
  var applicativeMermaidASTM = /* @__PURE__ */ applicativeStateT(monadEffect);
  var pure112 = /* @__PURE__ */ pure(applicativeMermaidASTM);
  var addNode = function(label5) {
    return function(styleClass) {
      return bind111(get10)(function(state3) {
        var nodeName3 = "n" + show212(state3.nodeCounter);
        var newStyles = snoc(state3.nodeStyles)(new Tuple(state3.nodeCounter, styleClass));
        var escapedLabel = escapeLabel(label5);
        var line = "    " + (nodeName3 + ('["' + (escapedLabel + ('"]:::' + (styleClass + "\n")))));
        return discard41(modify_7(function(s) {
          var $66 = {};
          for (var $67 in s) {
            if ({}.hasOwnProperty.call(s, $67)) {
              $66[$67] = s[$67];
            }
            ;
          }
          ;
          $66.nodeCounter = s.nodeCounter + 1 | 0;
          $66.mermaidCode = s.mermaidCode + line;
          $66.nodeStyles = newStyles;
          return $66;
        }))(function() {
          return pure112(state3.nodeCounter);
        });
      });
    };
  };
  var addEdge = function(fromId) {
    return function(toId) {
      var toName = "n" + show212(toId);
      var fromName = "n" + show212(fromId);
      var line = "    " + (fromName + (" --> " + (toName + "\n")));
      return modify_7(function(s) {
        var $69 = {};
        for (var $70 in s) {
          if ({}.hasOwnProperty.call(s, $70)) {
            $69[$70] = s[$70];
          }
          ;
        }
        ;
        $69.mermaidCode = s.mermaidCode + line;
        return $69;
      });
    };
  };
  var addAttributesNode = function(parentId) {
    return function(attributes) {
      if (attributes.length === 0) {
        return pure112(unit);
      }
      ;
      var attrList = formatAttributeList(attributes);
      return bind111(addNode("attrs: [" + (attrList + "]"))("attrOp"))(function(nodeId) {
        return addEdge(parentId)(nodeId);
      });
    };
  };
  var mermaidTagless = {
    attach: function(selector) {
      return bind111(addNode('select("' + (selector + '")'))("selectOp"))(function(nodeId) {
        return pure112(nodeId);
      });
    },
    selectUnder: function(v) {
      return function(selector) {
        return bind111(addNode('selectAll("' + (selector + '")'))("selectOp"))(function(nodeId) {
          return discard41(addEdge(v)(nodeId))(function() {
            return pure112(nodeId);
          });
        });
      };
    },
    appendTo: function(v) {
      return function(element3) {
        return function(attributes) {
          return bind111(addNode('append("' + (show310(element3) + '")'))("appendOp"))(function(nodeId) {
            return discard41(addEdge(v)(nodeId))(function() {
              return discard41(addAttributesNode(nodeId)(attributes))(function() {
                return pure112(nodeId);
              });
            });
          });
        };
      };
    },
    filterSelection: function(v) {
      return function(selector) {
        return bind111(addNode('filter("' + (selector + '")'))("selectOp"))(function(nodeId) {
          return discard41(addEdge(v)(nodeId))(function() {
            return pure112(nodeId);
          });
        });
      };
    },
    mergeSelections: function(v) {
      return function(v1) {
        return bind111(addNode("merge")("selectOp"))(function(nodeId) {
          return discard41(addEdge(v)(nodeId))(function() {
            return discard41(addEdge(v1)(nodeId))(function() {
              return pure112(nodeId);
            });
          });
        });
      };
    },
    setAttributes: function(v) {
      return function(attributes) {
        return discard41(addAttributesNode(v)(attributes))(function() {
          return pure112(unit);
        });
      };
    },
    on: function(v) {
      return function(v1) {
        if (v1 instanceof Drag) {
          return bind111(addNode("drag()")("controlOp"))(function(nodeId) {
            return discard41(addEdge(v)(nodeId))(function() {
              return pure112(unit);
            });
          });
        }
        ;
        if (v1 instanceof Zoom) {
          return bind111(addNode("zoom()")("controlOp"))(function(nodeId) {
            return discard41(addEdge(v)(nodeId))(function() {
              return pure112(unit);
            });
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.Interpreter.MermaidAST (line 88, column 1 - line 164, column 125): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    openSelection: function(v) {
      return function(selector) {
        return bind111(addNode('selectAll("' + (selector + '")'))("selectOp"))(function(nodeId) {
          return discard41(addEdge(v)(nodeId))(function() {
            return pure112(nodeId);
          });
        });
      };
    },
    simpleJoin: function(v) {
      return function(element3) {
        return function(ds) {
          return function(_k) {
            return bind111(addNode('simpleJoin("' + (show310(element3) + ('", [' + (show212(length3(ds)) + " items])"))))("joinOp"))(function(joinNodeId) {
              return discard41(addEdge(v)(joinNodeId))(function() {
                return pure112(joinNodeId);
              });
            });
          };
        };
      };
    },
    nestedJoin: function(dictFoldable) {
      return function(v) {
        return function(element3) {
          return function(_extractChildren) {
            return function(_k) {
              return bind111(addNode('nestedJoin("' + (show310(element3) + '", fn)'))("joinOp"))(function(joinNodeId) {
                return discard41(addEdge(v)(joinNodeId))(function() {
                  return pure112(joinNodeId);
                });
              });
            };
          };
        };
      };
    },
    updateJoin: function(v) {
      return function(element3) {
        return function(ds) {
          return function(_k) {
            return bind111(addNode('updateJoin("' + (show310(element3) + ('", [' + (show212(length3(ds)) + " items])"))))("joinOp"))(function(joinNodeId) {
              return discard41(addEdge(v)(joinNodeId))(function() {
                return bind111(addNode("enter()")("controlOp"))(function(enterNodeId) {
                  return discard41(addEdge(joinNodeId)(enterNodeId))(function() {
                    return bind111(addNode('append("' + (show310(element3) + '")'))("appendOp"))(function(enterAppendId) {
                      return discard41(addEdge(enterNodeId)(enterAppendId))(function() {
                        return bind111(addNode("exit()")("controlOp"))(function(exitNodeId) {
                          return discard41(addEdge(joinNodeId)(exitNodeId))(function() {
                            return bind111(addNode("remove()")("controlOp"))(function(exitRemoveId) {
                              return discard41(addEdge(exitNodeId)(exitRemoveId))(function() {
                                return pure112({
                                  enter: enterAppendId,
                                  exit: exitRemoveId,
                                  update: joinNodeId
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          };
        };
      };
    },
    Monad0: function() {
      return monadMermaidASTM;
    }
  };

  // output/PSD3.Shared.Mermaid/foreign.js
  var logMessage = (msg) => () => {
    console.log(msg);
  };
  var renderMermaidDiagrams_ = () => {
    console.log("FFI: renderMermaidDiagrams_ effect executing");
    requestAnimationFrame(() => {
      console.log("FFI: requestAnimationFrame callback executing");
      try {
        if (typeof window.mermaid === "undefined") {
          console.log("Mermaid not loaded yet, will retry...");
          setTimeout(() => renderMermaidDiagrams_(), 500);
          return;
        }
        console.log("Mermaid is loaded, looking for diagram elements...");
        const elements = document.querySelectorAll(".mermaid:not([data-rendered])");
        console.log(`Found ${elements.length} Mermaid diagram elements`);
        if (elements.length === 0) {
          console.log("No unrendered Mermaid diagrams found");
          return;
        }
        console.log(`Processing ${elements.length} Mermaid diagrams...`);
        elements.forEach(async (element3, index5) => {
          try {
            console.log(`Processing diagram ${index5 + 1}...`);
            element3.setAttribute("data-rendered", "true");
            let graphDefinition = element3.textContent || element3.innerText;
            console.log(`Diagram ${index5 + 1} text length: ${graphDefinition.length}`);
            const id5 = "mermaid-" + Math.random().toString(36).substr(2, 9);
            const { svg: svg2 } = await window.mermaid.render(id5, graphDefinition);
            element3.innerHTML = svg2;
            console.log(`\u2713 Rendered Mermaid diagram ${index5 + 1}: ${id5}`);
          } catch (error4) {
            console.error(`\u2717 Failed to render Mermaid diagram ${index5 + 1}:`, error4);
            element3.innerHTML = '<div style="color: red; padding: 1rem; border: 1px solid red;">Failed to render diagram: ' + error4.message + "</div>";
          }
        });
      } catch (error4) {
        console.error("Error in requestAnimationFrame callback:", error4);
      }
    });
    console.log("FFI: requestAnimationFrame scheduled");
  };

  // output/PSD3.Shared.Mermaid/index.js
  var discard42 = /* @__PURE__ */ discard(discardUnit);
  var append28 = /* @__PURE__ */ append(semigroupArray);
  var triggerMermaidRendering = function(dictMonadEffect) {
    var liftEffect53 = liftEffect(dictMonadEffect);
    return discard42(dictMonadEffect.Monad0().Bind1())(liftEffect53(logMessage("PureScript: triggerMermaidRendering called")))(function() {
      return liftEffect53(renderMermaidDiagrams_);
    });
  };
  var mermaidDiagram = function(code2) {
    return function(className2) {
      return div2([classes(append28(["mermaid-container"])((function() {
        if (className2 instanceof Nothing) {
          return [];
        }
        ;
        if (className2 instanceof Just) {
          return [className2.value0];
        }
        ;
        throw new Error("Failed pattern match at PSD3.Shared.Mermaid (line 22, column 9 - line 24, column 43): " + [className2.constructor.name]);
      })()))])([div2([classes(["mermaid"])])([text5(code2)])]);
    };
  };

  // output/PSD3.Component.MermaidDiagrams/index.js
  var bind40 = /* @__PURE__ */ bind(bindMermaidASTM);
  var attach3 = /* @__PURE__ */ attach(mermaidTagless);
  var appendTo2 = /* @__PURE__ */ appendTo(mermaidTagless);
  var simpleJoin2 = /* @__PURE__ */ simpleJoin(mermaidTagless);
  var discard43 = /* @__PURE__ */ discard(discardUnit);
  var discard111 = /* @__PURE__ */ discard43(bindMermaidASTM);
  var setAttributes2 = /* @__PURE__ */ setAttributes(mermaidTagless);
  var x39 = /* @__PURE__ */ x(toAttrNumber);
  var y39 = /* @__PURE__ */ y(toAttrNumber);
  var width22 = /* @__PURE__ */ width8(toAttrNumber);
  var height22 = /* @__PURE__ */ height8(toAttrNumber);
  var fill37 = /* @__PURE__ */ fill(toAttrString);
  var fillOpacity11 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeColor34 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth31 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var pure34 = /* @__PURE__ */ pure(applicativeMermaidASTM);
  var strokeOpacity7 = /* @__PURE__ */ strokeOpacity(toAttrNumber);
  var radius27 = /* @__PURE__ */ radius(toAttrNumber);
  var cx23 = /* @__PURE__ */ cx(toAttrNumber);
  var cy24 = /* @__PURE__ */ cy(toAttrNumber);
  var classed41 = /* @__PURE__ */ classed(toAttrString);
  var openSelection2 = /* @__PURE__ */ openSelection(mermaidTagless);
  var updateJoin2 = /* @__PURE__ */ updateJoin(mermaidTagless);
  var andThen3 = /* @__PURE__ */ andThen(semigroupArray);
  var fontSize20 = /* @__PURE__ */ fontSize(toAttrNumber);
  var selectUnder3 = /* @__PURE__ */ selectUnder(mermaidTagless);
  var mergeSelections2 = /* @__PURE__ */ mergeSelections(mermaidTagless);
  var filterSelection2 = /* @__PURE__ */ filterSelection(mermaidTagless);
  var bind112 = /* @__PURE__ */ bind(bindHalogenM);
  var discard212 = /* @__PURE__ */ discard43(bindHalogenM);
  var modify_8 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var Initialize6 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var viz_TreemapAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(chartGroup) {
        return bind40(simpleJoin2(chartGroup)(Rect.value)([1, 2, 3, 4, 5, 6, 7])(unsafeCoerce2))(function(tiles) {
          return discard111(setAttributes2(tiles)([x39(0), y39(0), width22(120), height22(80), fill37("#d4c4b0"), fillOpacity11(0.85), strokeColor34("#ffffff"), strokeWidth31(2)]))(function() {
            return bind40(simpleJoin2(chartGroup)(Text2.value)([1, 2, 3, 4, 5, 6, 7])(unsafeCoerce2))(function(tileLabels) {
              return discard111(setAttributes2(tileLabels)([x39(2), y39(12), fill37("#ffffff")]))(function() {
                return pure34(tileLabels);
              });
            });
          });
        });
      });
    });
  });
  var viz_TreeAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(zoomGroup) {
        return bind40(appendTo2(zoomGroup)(Group.value)([]))(function(linksGroup) {
          return bind40(appendTo2(zoomGroup)(Group.value)([]))(function(nodesGroup) {
            return bind40(simpleJoin2(linksGroup)(Path2.value)([1, 2, 3, 4, 5])(unsafeCoerce2))(function(links) {
              return discard111(setAttributes2(links)([strokeWidth31(1.5), strokeColor34("#94a3b8"), strokeOpacity7(0.6), fill37("none")]))(function() {
                return bind40(simpleJoin2(nodesGroup)(Group.value)([1, 2, 3, 4, 5, 6])(unsafeCoerce2))(function(nodeGroups) {
                  return bind40(appendTo2(nodeGroups)(Circle.value)([fill37("#0ea5e9"), radius27(3), strokeColor34("white"), strokeWidth31(1.5), cx23(0), cy24(0)]))(function(circles) {
                    return bind40(appendTo2(nodeGroups)(Text2.value)([fill37("#0c4a6e"), x39(8), y39(0)]))(function(labels9) {
                      return pure34(labels9);
                    });
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var viz_StackedBarAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(centerGroup) {
        return bind40(simpleJoin2(centerGroup)(Path2.value)([1, 2, 3, 4, 5])(unsafeCoerce2))(function(bars) {
          return discard111(setAttributes2(bars)([fill37("orange"), strokeColor34("#ffffff"), strokeWidth31(1)]))(function() {
            return bind40(simpleJoin2(centerGroup)(Text2.value)([1, 2, 3, 4, 5])(unsafeCoerce2))(function(labels9) {
              return discard111(setAttributes2(labels9)([fill37("white"), x39(0), y39(0)]))(function() {
                return pure34(labels9);
              });
            });
          });
        });
      });
    });
  });
  var viz_SankeyAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(linksGroup) {
        return bind40(appendTo2(svg2)(Group.value)([]))(function(nodesGroup) {
          return bind40(appendTo2(svg2)(Group.value)([]))(function(labelsGroup) {
            return bind40(simpleJoin2(linksGroup)(Path2.value)([1, 2, 3, 4])(unsafeCoerce2))(function(links) {
              return discard111(setAttributes2(links)([fill37("none"), strokeWidth31(5), strokeOpacity7(0.5), strokeColor34("#aaa")]))(function() {
                return bind40(simpleJoin2(nodesGroup)(Rect.value)([1, 2, 3])(unsafeCoerce2))(function(nodes) {
                  return discard111(setAttributes2(nodes)([x39(0), y39(0), width22(20), height22(50), fill37("steelblue"), fillOpacity11(0.8)]))(function() {
                    return bind40(simpleJoin2(labelsGroup)(Text2.value)([1, 2, 3])(unsafeCoerce2))(function(labels9) {
                      return discard111(setAttributes2(labels9)([x39(25), y39(25), fill37("black")]))(function() {
                        return pure34(labels9);
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var viz_ParabolaAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(circleGroup) {
        return bind40(simpleJoin2(circleGroup)(Circle.value)([32, 57, 112])(unsafeCoerce2))(function(circles) {
          return discard111(setAttributes2(circles)([strokeColor34("steelblue"), strokeWidth31(3), fill37("none"), cx23(100), cy24(50), radius27(10)]))(function() {
            return pure34(circles);
          });
        });
      });
    });
  });
  var viz_MultiLineChartAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(chartGroup) {
        return bind40(appendTo2(chartGroup)(Group.value)([]))(function(yAxis) {
          return bind40(appendTo2(yAxis)(Text2.value)([y39(0), x39(-5), fill37("black")]))(function(yTick1) {
            return bind40(appendTo2(yAxis)(Text2.value)([y39(100), x39(-5), fill37("black")]))(function(yTick2) {
              return bind40(appendTo2(chartGroup)(Group.value)([]))(function(xAxis) {
                return bind40(appendTo2(xAxis)(Text2.value)([x39(0), y39(20), fill37("black")]))(function(xTick1) {
                  return bind40(appendTo2(xAxis)(Text2.value)([x39(200), y39(20), fill37("black")]))(function(xTick2) {
                    return bind40(appendTo2(chartGroup)(Path2.value)([strokeColor34("#4682b4"), strokeWidth31(1.5), fill37("none")]))(function(path1) {
                      return bind40(appendTo2(chartGroup)(Path2.value)([strokeColor34("#4682b4"), strokeWidth31(1.5), fill37("none")]))(function(path22) {
                        return bind40(appendTo2(chartGroup)(Path2.value)([strokeColor34("#4682b4"), strokeWidth31(1.5), fill37("none")]))(function(path3) {
                          return pure34(path3);
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var viz_IcicleAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(chartGroup) {
        return bind40(simpleJoin2(chartGroup)(Rect.value)([1, 2, 3, 4, 5, 6])(unsafeCoerce2))(function(partitions) {
          return discard111(setAttributes2(partitions)([x39(0), y39(0), width22(150), height22(100), fill37("#d4c4b0"), fillOpacity11(0.85), strokeColor34("#ffffff"), strokeWidth31(2)]))(function() {
            return bind40(simpleJoin2(chartGroup)(Text2.value)([1, 2, 3, 4, 5, 6])(unsafeCoerce2))(function(labels9) {
              return discard111(setAttributes2(labels9)([x39(4), y39(50), fill37("#ffffff")]))(function() {
                return pure34(labels9);
              });
            });
          });
        });
      });
    });
  });
  var viz_GUPAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([viewBox(0)(100)(800)(350), classed41("d3svg gup")]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(letterGroup) {
        return bind40(openSelection2(letterGroup)("text"))(function(enterSelection) {
          return bind40(updateJoin2(enterSelection)(Text2.value)([1, 2, 3])(unsafeCoerce2))(function(v) {
            var transition2 = transitionWithDuration(2e3);
            var exitAttrs = andThen3([classed41("exit"), fill37("brown")])(to(transition2)([y39(400), remove]));
            return discard111(setAttributes2(v.exit)(exitAttrs))(function() {
              var updateAttrs2 = andThen3([classed41("update"), fill37("gray"), y39(200)])(to(transition2)([x39(50)]));
              return discard111(setAttributes2(v.update)(updateAttrs2))(function() {
                return bind40(appendTo2(v.enter)(Text2.value)([]))(function(newlyEntered) {
                  var enterAttrs2 = andThen3([classed41("enter"), fill37("green"), x39(50), y39(0), fontSize20(60)])(to(transition2)([y39(200)]));
                  return discard111(setAttributes2(newlyEntered)(enterAttrs2))(function() {
                    return pure34(newlyEntered);
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var viz_ChordDiagramAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(centerGroup) {
        return bind40(appendTo2(centerGroup)(Group.value)([]))(function(ribbonsGroup) {
          return bind40(simpleJoin2(ribbonsGroup)(Path2.value)([1, 2, 3, 4, 5])(unsafeCoerce2))(function(ribbons) {
            return discard111(setAttributes2(ribbons)([fill37("#e74c3c"), fillOpacity11(0.67), strokeColor34("#000000"), strokeWidth31(0.5)]))(function() {
              return bind40(appendTo2(centerGroup)(Group.value)([]))(function(arcsGroup) {
                return bind40(simpleJoin2(arcsGroup)(Group.value)([1, 2, 3, 4, 5])(unsafeCoerce2))(function(arcGroups) {
                  return bind40(appendTo2(arcGroups)(Path2.value)([fill37("#3498db"), strokeColor34("#ffffff"), strokeWidth31(2)]))(function(arcPaths) {
                    return pure34(arcPaths);
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var viz_BubbleChartAST = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("div"))(function(root3) {
    return bind40(appendTo2(root3)(Svg.value)([]))(function(svg2) {
      return bind40(appendTo2(svg2)(Group.value)([]))(function(chartGroup) {
        return bind40(simpleJoin2(chartGroup)(Circle.value)([1, 2, 3, 4, 5, 6, 7])(unsafeCoerce2))(function(bubbles2) {
          return discard111(setAttributes2(bubbles2)([cx23(100), cy24(100), radius27(30), fill37("#e8dcc6"), fillOpacity11(0.8), strokeColor34("#ffffff"), strokeWidth31(2)]))(function() {
            return bind40(simpleJoin2(chartGroup)(Text2.value)([1, 2, 3, 4, 5, 6, 7])(unsafeCoerce2))(function(labels9) {
              return discard111(setAttributes2(labels9)([x39(100), y39(100), fill37("#ffffff")]))(function() {
                return pure34(labels9);
              });
            });
          });
        });
      });
    });
  });
  var test9_OpenSelection = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(simpleJoin2(svg2)(Group.value)([1, 2, 3])(unsafeCoerce2))(function(groups) {
      return bind40(openSelection2(groups)("circle"))(function(opened) {
        return pure34(opened);
      });
    });
  });
  var test8_MixedElements = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(appendTo2(svg2)(Rect.value)([width22(200), height22(100), fill37("lightblue")]))(function(rect) {
      return bind40(appendTo2(svg2)(Circle.value)([cx23(100), cy24(50), radius27(40), fill37("pink")]))(function(circle) {
        return bind40(appendTo2(svg2)(Line.value)([strokeColor34("black"), strokeWidth31(2)]))(function(line) {
          return bind40(appendTo2(svg2)(Text2.value)([]))(function(text35) {
            return pure34(text35);
          });
        });
      });
    });
  });
  var test7_NestedGroups = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(appendTo2(svg2)(Group.value)([]))(function(g1) {
      return bind40(appendTo2(g1)(Group.value)([]))(function(g2) {
        return bind40(appendTo2(g2)(Group.value)([]))(function(g3) {
          return bind40(appendTo2(g3)(Rect.value)([x39(10), y39(10), width22(100), height22(50)]))(function(rect) {
            return pure34(rect);
          });
        });
      });
    });
  });
  var test6_MergeSelections = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(selectUnder3(svg2)(".group1"))(function(circles1) {
      return bind40(selectUnder3(svg2)(".group2"))(function(circles2) {
        return bind40(mergeSelections2(circles1)(circles2))(function(merged) {
          return discard111(setAttributes2(merged)([fill37("purple")]))(function() {
            return pure34(merged);
          });
        });
      });
    });
  });
  var test5_FilterSelection = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(selectUnder3(svg2)("circle"))(function(allCircles) {
      return bind40(filterSelection2(allCircles)(".active"))(function(filtered) {
        return discard111(setAttributes2(filtered)([fill37("orange")]))(function() {
          return pure34(filtered);
        });
      });
    });
  });
  var test4_UpdatePattern = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(selectUnder3(svg2)("circle"))(function(circles) {
      return bind40(updateJoin2(circles)(Circle.value)([10, 20, 30])(unsafeCoerce2))(function(v) {
        return discard111(setAttributes2(v.enter)([fill37("green"), radius27(15)]))(function() {
          return discard111(setAttributes2(v.update)([fill37("blue")]))(function() {
            return pure34(v.enter);
          });
        });
      });
    });
  });
  var test3_SelectUnderJoin = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(selectUnder3(svg2)("circle"))(function(circles) {
      return bind40(simpleJoin2(circles)(Circle.value)([1, 2, 3, 4, 5])(unsafeCoerce2))(function(joined) {
        return discard111(setAttributes2(joined)([radius27(30), fill37("blue")]))(function() {
          return pure34(joined);
        });
      });
    });
  });
  var test2_MultipleAppends = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(appendTo2(svg2)(Group.value)([]))(function(g) {
      return bind40(appendTo2(g)(Circle.value)([cx23(50), cy24(50), radius27(20)]))(function(circle1) {
        return bind40(appendTo2(g)(Circle.value)([cx23(100), cy24(50), radius27(20)]))(function(circle2) {
          return bind40(appendTo2(g)(Circle.value)([cx23(150), cy24(50), radius27(20)]))(function(circle3) {
            return pure34(circle3);
          });
        });
      });
    });
  });
  var test1_SimpleAppend = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(appendTo2(svg2)(Circle.value)([cx23(100), cy24(100), radius27(50), fill37("red")]))(function(circle) {
      return pure34(circle);
    });
  });
  var test11_Transitions = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(appendTo2(svg2)(Circle.value)([cx23(50), cy24(50), radius27(20), fill37("red")]))(function(circle) {
      var transition2 = transitionWithDuration(1e3);
      return discard111(setAttributes2(circle)(to(transition2)([cx23(150), cy24(150), radius27(40), fill37("blue")])))(function() {
        return pure34(circle);
      });
    });
  });
  var test10_AttributesOnly = /* @__PURE__ */ bind40(/* @__PURE__ */ attach3("svg"))(function(svg2) {
    return bind40(appendTo2(svg2)(Circle.value)([]))(function(circle) {
      return discard111(setAttributes2(circle)([cx23(100), cy24(100), radius27(50), fill37("yellow"), strokeColor34("black"), strokeWidth31(3)]))(function() {
        return pure34(circle);
      });
    });
  });
  var render12 = function(state3) {
    return div2([class_("mermaid-diagrams")])([h1_([text5("PSD3 MermaidJS AST Visualizations")]), p_([text5("The MermaidAST interpreter visualizes PSD3 code structure as flowcharts. "), text5("Each diagram shows operations (nodes) and how selections flow between them (edges).")]), section([class_("instructions")])([h3_([text5("How to Read These Diagrams")]), ul_([li_([text5("Rectangles represent D3 operations (select, append, join, attr, etc.)")]), li_([text5("Arrows show how selections flow from one operation to the next")]), li_([text5("Edge labels describe the relationship (e.g., 'append', 'data', 'join')")]), li_([text5("These show code structure, not the visual output")])])]), section([class_("example")])([h2_([text5("1. Simple Append")]), p_([text5("Basic pattern: attach to DOM, append an element with attributes")]), mermaidDiagram(state3.test1_simpleAppend)(new Just("test1"))]), section([class_("example")])([h2_([text5("2. Multiple Appends")]), p_([text5("Sequential element creation in a group")]), mermaidDiagram(state3.test2_multipleAppends)(new Just("test2"))]), section([class_("example")])([h2_([text5("3. SelectUnder and Data Join")]), p_([text5("Select existing elements and bind data with simpleJoin")]), mermaidDiagram(state3.test3_selectUnderJoin)(new Just("test3"))]), section([class_("example")])([h2_([text5("4. Update Pattern (Enter/Update/Exit)")]), p_([text5("The classic D3 General Update Pattern with enter, update, and exit selections")]), mermaidDiagram(state3.test4_updatePattern)(new Just("test4"))]), section([class_("example")])([h2_([text5("5. Filter Selection")]), p_([text5("Filtering a selection by selector")]), mermaidDiagram(state3.test5_filterSelection)(new Just("test5"))]), section([class_("example")])([h2_([text5("6. Merge Selections")]), p_([text5("Combining two selections into one")]), mermaidDiagram(state3.test6_mergeSelections)(new Just("test6"))]), section([class_("example")])([h2_([text5("7. Nested Groups")]), p_([text5("Deep nesting of group elements")]), mermaidDiagram(state3.test7_nestedGroups)(new Just("test7"))]), section([class_("example")])([h2_([text5("8. Mixed Element Types")]), p_([text5("Creating various SVG elements (Rect, Circle, Line, Text)")]), mermaidDiagram(state3.test8_mixedElements)(new Just("test8"))]), section([class_("example")])([h2_([text5("9. Open Selection (Nested Join)")]), p_([text5("Opening a selection for nested data joins")]), mermaidDiagram(state3.test9_openSelection)(new Just("test9"))]), section([class_("example")])([h2_([text5("10. Attributes Only")]), p_([text5("Setting multiple attributes on an element")]), mermaidDiagram(state3.test10_attributesOnly)(new Just("test10"))]), section([class_("example")])([h2_([text5("11. Transitions")]), p_([text5("Animating attribute changes with transitions")]), mermaidDiagram(state3.test11_transitions)(new Just("test11"))]), h1([class_("section-break")])([text5("Concrete Visualizations")]), p_([text5("These diagrams show the AST structure of real visualization examples from the PSD3 library.")]), section([class_("example")])([h2_([text5("Parabola")]), p_([text5("Classic Three Little Circles pattern with data-driven positioning")]), mermaidDiagram(state3.viz_parabola)(new Just("viz-parabola"))]), section([class_("example")])([h2_([text5("Multi-Line Chart")]), p_([text5("Time-series visualization with multiple data series as paths")]), mermaidDiagram(state3.viz_multiLineChart)(new Just("viz-multiline"))]), section([class_("example")])([h2_([text5("Radial Stacked Bar Chart")]), p_([text5("Circular bar chart with radial layout and stacked segments")]), mermaidDiagram(state3.viz_stackedBar)(new Just("viz-stackedbar"))]), section([class_("example")])([h2_([text5("Chord Diagram")]), p_([text5("Circular dependency visualization with ribbons and arc groups")]), mermaidDiagram(state3.viz_chordDiagram)(new Just("viz-chord"))]), section([class_("example")])([h2_([text5("Sankey Diagram")]), p_([text5("Flow diagram with nodes, links, and labels showing value flows")]), mermaidDiagram(state3.viz_sankey)(new Just("viz-sankey"))]), section([class_("example")])([h2_([text5("Tree (Vertical)")]), p_([text5("Hierarchical tree layout with links and node groups")]), mermaidDiagram(state3.viz_tree)(new Just("viz-tree"))]), section([class_("example")])([h2_([text5("Bubble Chart")]), p_([text5("Circular packing layout showing hierarchical data as nested circles")]), mermaidDiagram(state3.viz_bubbleChart)(new Just("viz-bubble"))]), section([class_("example")])([h2_([text5("Icicle Chart")]), p_([text5("Partition layout showing hierarchy as horizontal rectangles")]), mermaidDiagram(state3.viz_icicle)(new Just("viz-icicle"))]), section([class_("example")])([h2_([text5("Treemap")]), p_([text5("Space-filling treemap with nested rectangular tiles")]), mermaidDiagram(state3.viz_treemap)(new Just("viz-treemap"))]), section([class_("example")])([h2_([text5("General Update Pattern (GUP)")]), p_([text5("The classic D3 pattern showing enter/update/exit with transitions and openSelection")]), mermaidDiagram(state3.viz_gup)(new Just("viz-gup"))])]);
  };
  var initialState = function(v) {
    return {
      test1_simpleAppend: "Loading...",
      test2_multipleAppends: "Loading...",
      test3_selectUnderJoin: "Loading...",
      test4_updatePattern: "Loading...",
      test5_filterSelection: "Loading...",
      test6_mergeSelections: "Loading...",
      test7_nestedGroups: "Loading...",
      test8_mixedElements: "Loading...",
      test9_openSelection: "Loading...",
      test10_attributesOnly: "Loading...",
      test11_transitions: "Loading...",
      viz_parabola: "Loading...",
      viz_multiLineChart: "Loading...",
      viz_stackedBar: "Loading...",
      viz_chordDiagram: "Loading...",
      viz_sankey: "Loading...",
      viz_tree: "Loading...",
      viz_bubbleChart: "Loading...",
      viz_icicle: "Loading...",
      viz_treemap: "Loading...",
      viz_gup: "Loading..."
    };
  };
  var handleAction5 = function(dictMonadEffect) {
    var monadEffectHalogenM8 = monadEffectHalogenM(dictMonadEffect);
    var liftEffect53 = liftEffect(monadEffectHalogenM8);
    var triggerMermaidRendering9 = triggerMermaidRendering(monadEffectHalogenM8);
    return function(v) {
      return bind112(liftEffect53(runMermaidAST(test1_SimpleAppend)))(function(test1) {
        return bind112(liftEffect53(runMermaidAST(test2_MultipleAppends)))(function(test2) {
          return bind112(liftEffect53(runMermaidAST(test3_SelectUnderJoin)))(function(test3) {
            return bind112(liftEffect53(runMermaidAST(test4_UpdatePattern)))(function(test4) {
              return bind112(liftEffect53(runMermaidAST(test5_FilterSelection)))(function(test5) {
                return bind112(liftEffect53(runMermaidAST(test6_MergeSelections)))(function(test6) {
                  return bind112(liftEffect53(runMermaidAST(test7_NestedGroups)))(function(test7) {
                    return bind112(liftEffect53(runMermaidAST(test8_MixedElements)))(function(test8) {
                      return bind112(liftEffect53(runMermaidAST(test9_OpenSelection)))(function(test9) {
                        return bind112(liftEffect53(runMermaidAST(test10_AttributesOnly)))(function(test10) {
                          return bind112(liftEffect53(runMermaidAST(test11_Transitions)))(function(test11) {
                            return bind112(liftEffect53(runMermaidAST(viz_ParabolaAST)))(function(vizParabola) {
                              return bind112(liftEffect53(runMermaidAST(viz_MultiLineChartAST)))(function(vizMultiLine) {
                                return bind112(liftEffect53(runMermaidAST(viz_StackedBarAST)))(function(vizStackedBar) {
                                  return bind112(liftEffect53(runMermaidAST(viz_ChordDiagramAST)))(function(vizChord) {
                                    return bind112(liftEffect53(runMermaidAST(viz_SankeyAST)))(function(vizSankey) {
                                      return bind112(liftEffect53(runMermaidAST(viz_TreeAST)))(function(vizTree) {
                                        return bind112(liftEffect53(runMermaidAST(viz_BubbleChartAST)))(function(vizBubble) {
                                          return bind112(liftEffect53(runMermaidAST(viz_IcicleAST)))(function(vizIcicle) {
                                            return bind112(liftEffect53(runMermaidAST(viz_TreemapAST)))(function(vizTreemap) {
                                              return bind112(liftEffect53(runMermaidAST(viz_GUPAST)))(function(vizGup) {
                                                return discard212(modify_8(function(v1) {
                                                  var $54 = {};
                                                  for (var $55 in v1) {
                                                    if ({}.hasOwnProperty.call(v1, $55)) {
                                                      $54[$55] = v1[$55];
                                                    }
                                                    ;
                                                  }
                                                  ;
                                                  $54.test1_simpleAppend = test1;
                                                  $54.test2_multipleAppends = test2;
                                                  $54.test3_selectUnderJoin = test3;
                                                  $54.test4_updatePattern = test4;
                                                  $54.test5_filterSelection = test5;
                                                  $54.test6_mergeSelections = test6;
                                                  $54.test7_nestedGroups = test7;
                                                  $54.test8_mixedElements = test8;
                                                  $54.test9_openSelection = test9;
                                                  $54.test10_attributesOnly = test10;
                                                  $54.test11_transitions = test11;
                                                  $54.viz_parabola = vizParabola;
                                                  $54.viz_multiLineChart = vizMultiLine;
                                                  $54.viz_stackedBar = vizStackedBar;
                                                  $54.viz_chordDiagram = vizChord;
                                                  $54.viz_sankey = vizSankey;
                                                  $54.viz_tree = vizTree;
                                                  $54.viz_bubbleChart = vizBubble;
                                                  $54.viz_icicle = vizIcicle;
                                                  $54.viz_treemap = vizTreemap;
                                                  $54.viz_gup = vizGup;
                                                  return $54;
                                                }))(function() {
                                                  return triggerMermaidRendering9;
                                                });
                                              });
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    };
  };
  var component7 = function(dictMonadAff) {
    return mkComponent({
      initialState,
      render: render12,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction5(dictMonadAff.MonadEffect0()),
        initialize: new Just(Initialize6.value)
      })
    });
  };

  // output/PSD3.Component.PSD3v2Examples/index.js
  var discard44 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var drawThreeCircles4 = /* @__PURE__ */ drawThreeCircles2(selectionMD3v2Selection_D);
  var pure35 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize7 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var renderExample = function(v) {
    return div2([classes(["example-card"])])([h3([classes(["example-title"])])([text5(v.title)]), p([classes(["example-description"])])([text5(v.description)]), div2([id2(v.id), classes(["example-viz"])])([])]);
  };
  var render13 = function(v) {
    return div2([classes(["psd3v2-examples-page"])])([div2([classes(["page-header"])])([h1_([text5("PSD3v2 Examples")]), p([classes(["page-description"])])([text5("Type-safe D3 visualizations using phantom types and tagless final architecture")])]), div2([classes(["examples-grid"])])([renderExample({
      id: "three-little-circles-v2",
      title: "Three Little Circles",
      description: "The classic D3 example reimplemented with PSD3v2"
    })])]);
  };
  var handleAction6 = function(dictMonadEffect) {
    var monadEffectHalogenM8 = monadEffectHalogenM(dictMonadEffect);
    var log7 = log3(monadEffectHalogenM8);
    var liftEffect53 = liftEffect(monadEffectHalogenM8);
    return function(v) {
      return discard44(log7("PSD3v2Examples: Initializing"))(function() {
        return discard44(liftEffect53(runD3v2M(drawThreeCircles4("#three-little-circles-v2"))))(function() {
          return pure35(unit);
        });
      });
    };
  };
  var component8 = function(dictMonadEffect) {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render13,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction6(dictMonadEffect),
        initialize: new Just(Initialize7.value)
      })
    });
  };

  // output/PSD3.ExamplesGallery/foreign.js
  var filterImpl2 = (pred) => (arr) => arr.filter(pred);

  // output/PSD3.ExamplesGallery/index.js
  var mapFlipped11 = /* @__PURE__ */ mapFlipped(functorArray);
  var renderExampleCard = function(ex) {
    return a([href4("#" + routeToPath(ex.route)), classes(["example-card"])])([div2([classes(["example-thumbnail"])])([img([src9(ex.thumbnail), alt5(ex.name), classes(["example-thumbnail-img"])])]), div2([classes(["example-card-content"])])([h3([classes(["example-card-title"])])([text5(ex.name)]), p([classes(["example-card-description"])])([text5(ex.description)])])]);
  };
  var renderCategory = function(categoryName) {
    return function(examples) {
      return section([classes(["gallery-category"])])([h2([classes(["gallery-category-title"])])([text5(categoryName)]), div2([classes(["gallery-grid"])])(mapFlipped11(examples)(renderExampleCard))]);
    };
  };
  var filter5 = filterImpl2;
  var renderCategories = function(examples) {
    var categories = ["Simple Charts", "Hierarchies", "Force-Directed", "Data Flow", "Rich Data Structures", "Animations", "Transitions"];
    return mapFlipped11(categories)(function(category) {
      var examplesInCategory = filter5(function(ex) {
        return ex.category === category;
      })(examples);
      return renderCategory(category)(examplesInCategory);
    });
  };
  var allExamples = /* @__PURE__ */ (function() {
    return [{
      id: "three-little-circles",
      name: "Three Little Circles",
      description: "The simplest possible D3 example",
      category: "Simple Charts",
      route: new Example("three-little-circles"),
      thumbnail: "assets/example-thumbnails/three-little-circles.png"
    }, {
      id: "bar-chart",
      name: "Bar Chart",
      description: "Basic bar chart with axis and labels",
      category: "Simple Charts",
      route: new Example("bar-chart"),
      thumbnail: "assets/example-thumbnails/simple-bar-chart.png"
    }, {
      id: "line-chart",
      name: "Line Chart",
      description: "Line chart with time series data",
      category: "Simple Charts",
      route: new Example("line-chart"),
      thumbnail: "assets/example-thumbnails/simple-line-chart.png"
    }, {
      id: "scatter-plot",
      name: "Scatter Plot",
      description: "Anscombe's Quartet visualization",
      category: "Simple Charts",
      route: new Example("scatter-plot"),
      thumbnail: "assets/example-thumbnails/anscombes-quartet.png"
    }, {
      id: "grouped-bar-chart",
      name: "Grouped Bar Chart",
      description: "Bar chart with grouped categories",
      category: "Simple Charts",
      route: new Example("grouped-bar-chart"),
      thumbnail: "assets/example-thumbnails/grouped-bar-chart.png"
    }, {
      id: "multi-line-chart",
      name: "Multi-Line Chart",
      description: "Multiple line series on one chart",
      category: "Simple Charts",
      route: new Example("multi-line-chart"),
      thumbnail: "assets/example-thumbnails/multiline-chart.png"
    }, {
      id: "radial-stacked-bar",
      name: "Radial Stacked Bar",
      description: "Population by age and state in radial form",
      category: "Simple Charts",
      route: new Example("radial-stacked-bar"),
      thumbnail: "assets/example-thumbnails/radial-stacked-bar.png"
    }, {
      id: "parabola",
      name: "Parabola",
      description: "Colored circles in parabolic formation",
      category: "Simple Charts",
      route: new Example("parabola"),
      thumbnail: "assets/example-thumbnails/parabola.png"
    }, {
      id: "tree-purescript",
      name: "Tree",
      description: "Node-link tree layout (Reingold-Tilford)",
      category: "Hierarchies",
      route: new Example("tree-purescript"),
      thumbnail: "assets/example-thumbnails/tree-purescript.png"
    }, {
      id: "treemap",
      name: "Treemap",
      description: "Space-filling squarified tiling",
      category: "Hierarchies",
      route: new Example("treemap"),
      thumbnail: "assets/example-thumbnails/treemap.png"
    }, {
      id: "pack-purescript",
      name: "Pack",
      description: "Circle packing with iterative relaxation",
      category: "Hierarchies",
      route: new Example("pack-purescript"),
      thumbnail: "assets/example-thumbnails/pack-purescript.png"
    }, {
      id: "cluster-purescript",
      name: "Cluster",
      description: "Dendrogram with equal leaf depth",
      category: "Hierarchies",
      route: new Example("cluster-purescript"),
      thumbnail: "assets/example-thumbnails/cluster-purescript.png"
    }, {
      id: "icicle",
      name: "Partition/Icicle",
      description: "Rectangular partition with equal layer height",
      category: "Hierarchies",
      route: new Example("icicle"),
      thumbnail: "assets/example-thumbnails/icicle-chart.png"
    }, {
      id: "sunburst-purescript",
      name: "Sunburst",
      description: "Radial partition with nested rings",
      category: "Hierarchies",
      route: new Example("sunburst-purescript"),
      thumbnail: "assets/example-thumbnails/sunburst-purescript.png"
    }, {
      id: "lesmis-force",
      name: "Les Mis\xE9rables Network",
      description: "Character co-occurrence graph",
      category: "Force-Directed",
      route: new Example("lesmis-force"),
      thumbnail: "assets/example-thumbnails/les-miserables.png"
    }, {
      id: "lesmisgup",
      name: "Les Mis\xE9rables GUP",
      description: "Interactive network with dynamic filtering",
      category: "Force-Directed",
      route: new Example("lesmisgup"),
      thumbnail: "assets/example-thumbnails/les-miserables-gup.png"
    }, {
      id: "topological-sort",
      name: "Topological Sort",
      description: "Force layout with layer constraints",
      category: "Force-Directed",
      route: new Example("topological-sort"),
      thumbnail: "assets/example-thumbnails/topological-sort.png"
    }, {
      id: "chord-diagram",
      name: "Chord Diagram",
      description: "Circular relationship diagram",
      category: "Data Flow",
      route: new Example("chord-diagram"),
      thumbnail: "assets/example-thumbnails/chord-diagram.png"
    }, {
      id: "sankey-diagram",
      name: "Sankey Diagram",
      description: "Flow diagram with proportional widths",
      category: "Data Flow",
      route: new Example("sankey-diagram"),
      thumbnail: "assets/example-thumbnails/sankey-diagram.png"
    }, {
      id: "map-quartet",
      name: "Map Quartet",
      description: "Sparse data with PureScript Maps",
      category: "Rich Data Structures",
      route: new Example("map-quartet"),
      thumbnail: "assets/example-thumbnails/working-with-maps.png"
    }, {
      id: "nested-data",
      name: "Nested Data",
      description: "Nested selections with 2D arrays",
      category: "Rich Data Structures",
      route: new Example("nested-data"),
      thumbnail: "assets/example-thumbnails/nested-data.png"
    }, {
      id: "working-with-sets",
      name: "Working with Sets",
      description: "Nested selections with Set data structures",
      category: "Rich Data Structures",
      route: new Example("working-with-sets"),
      thumbnail: "assets/example-thumbnails/working-with-sets.png"
    }, {
      id: "wealth-health",
      name: "Wealth & Health of Nations",
      description: "Interactive animated scatterplot (full page experience)",
      category: "Animations",
      route: WealthHealth.value,
      thumbnail: "assets/example-thumbnails/wealth-health.png"
    }, {
      id: "three-circles-transition",
      name: "Color Mixing",
      description: "RGB color transitions",
      category: "Transitions",
      route: new Example("three-circles-transition"),
      thumbnail: "assets/example-thumbnails/three-little-circles.png"
    }, {
      id: "general-update-pattern",
      name: "General Update Pattern",
      description: "Enter, update, exit pattern",
      category: "Transitions",
      route: new Example("general-update-pattern"),
      thumbnail: "assets/example-thumbnails/general-update-pattern.png"
    }, {
      id: "animated-tree-cluster",
      name: "Animated Tree \u2194 Cluster",
      description: "Pure PureScript tree and dendrogram with automatic transitions",
      category: "Transitions",
      route: new Example("animated-tree-cluster"),
      thumbnail: "assets/example-thumbnails/tree-purescript.png"
    }, {
      id: "animated-radial-tree",
      name: "Animated Radial Tree",
      description: "Transitions between tree layouts",
      category: "Transitions",
      route: new Example("animated-radial-tree"),
      thumbnail: "assets/example-thumbnails/animating-tree.png"
    }];
  })();
  var render14 = function(v) {
    return div2([classes(["examples-gallery-page"])])([header([classes(["gallery-header"])])([div2([classes(["gallery-header-content"])])([a([href4("#" + routeToPath(Home.value)), classes(["gallery-logo-link"])])([img([src9("assets/psd3-logo-color.svg"), alt5("PSD3 Logo"), classes(["gallery-logo"])])]), div2([classes(["gallery-header-text"])])([h1([classes(["gallery-title"])])([text5("Examples")]), p([classes(["gallery-subtitle"])])([text5("Interactive visualizations with source code")])])])]), main([classes(["gallery-content"])])(renderCategories(allExamples))]);
  };
  var component9 = /* @__PURE__ */ mkComponent({
    initialState: function(v) {
      return unit;
    },
    render: render14,
    "eval": /* @__PURE__ */ mkEval(defaultEval)
  });

  // output/D3.Viz.ForceNavigator.Model/index.js
  var Center2 = /* @__PURE__ */ (function() {
    function Center3() {
    }
    ;
    Center3.value = new Center3();
    return Center3;
  })();
  var Section = /* @__PURE__ */ (function() {
    function Section2() {
    }
    ;
    Section2.value = new Section2();
    return Section2;
  })();
  var Example2 = /* @__PURE__ */ (function() {
    function Example3() {
    }
    ;
    Example3.value = new Example3();
    return Example3;
  })();
  var Feature = /* @__PURE__ */ (function() {
    function Feature2() {
    }
    ;
    Feature2.value = new Feature2();
    return Feature2;
  })();
  var BasicChart = /* @__PURE__ */ (function() {
    function BasicChart2() {
    }
    ;
    BasicChart2.value = new BasicChart2();
    return BasicChart2;
  })();
  var AdvancedLayout = /* @__PURE__ */ (function() {
    function AdvancedLayout2() {
    }
    ;
    AdvancedLayout2.value = new AdvancedLayout2();
    return AdvancedLayout2;
  })();
  var Interactive2 = /* @__PURE__ */ (function() {
    function Interactive3() {
    }
    ;
    Interactive3.value = new Interactive3();
    return Interactive3;
  })();
  var Interpreter = /* @__PURE__ */ (function() {
    function Interpreter2() {
    }
    ;
    Interpreter2.value = new Interpreter2();
    return Interpreter2;
  })();
  var eqNodeType = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof Center2 && y46 instanceof Center2) {
          return true;
        }
        ;
        if (x46 instanceof Section && y46 instanceof Section) {
          return true;
        }
        ;
        if (x46 instanceof Example2 && y46 instanceof Example2) {
          return true;
        }
        ;
        if (x46 instanceof Feature && y46 instanceof Feature) {
          return true;
        }
        ;
        return false;
      };
    }
  };

  // output/D3.Viz.ForceNavigator.Data/index.js
  var packLink = unsafeCoerce2;
  var navigationData = /* @__PURE__ */ (function() {
    return {
      nodes: [{
        id: "purescript-d3",
        label: "PureScript D3",
        nodeType: Center2.value,
        category: Nothing.value,
        children: new Just(["gallery", "about", "spago", "interpreters", "github"]),
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: notNull(0),
        fy: notNull(0)
      }, {
        id: "gallery",
        label: "Gallery",
        nodeType: Section.value,
        category: Nothing.value,
        children: new Just(["line-chart", "bar-chart", "scatter-plot", "scatter-quartet", "chord-diagram", "bubble-chart", "sankey", "tree", "tree-horizontal", "tree-vertical", "tree-radial", "three-little-circles", "gup", "les-mis"]),
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "about",
        label: "About",
        nodeType: Section.value,
        category: Nothing.value,
        children: new Just(["type-safe", "composable", "interpreters-feature", "d3-powered", "interactive-feature", "documented"]),
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "spago",
        label: "Spago Explorer",
        nodeType: Section.value,
        category: Nothing.value,
        children: Nothing.value,
        url: new Just("#/spago"),
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "interpreters",
        label: "Interpreters",
        nodeType: Section.value,
        category: Nothing.value,
        children: new Just(["meta-tree", "print-tree"]),
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "github",
        label: "GitHub",
        nodeType: Section.value,
        category: Nothing.value,
        children: Nothing.value,
        url: new Just("https://github.com/afcondon/purescript-d3-tagless"),
        external: new Just(true),
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "line-chart",
        label: "Line Chart",
        nodeType: Example2.value,
        category: new Just(BasicChart.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "bar-chart",
        label: "Bar Chart",
        nodeType: Example2.value,
        category: new Just(BasicChart.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "scatter-plot",
        label: "Scatter Plot",
        nodeType: Example2.value,
        category: new Just(BasicChart.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "scatter-quartet",
        label: "Anscombe's Quartet",
        nodeType: Example2.value,
        category: new Just(BasicChart.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "chord-diagram",
        label: "Chord Diagram",
        nodeType: Example2.value,
        category: new Just(AdvancedLayout.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "bubble-chart",
        label: "Bubble Chart",
        nodeType: Example2.value,
        category: new Just(AdvancedLayout.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "sankey",
        label: "Sankey Diagram",
        nodeType: Example2.value,
        category: new Just(AdvancedLayout.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "tree",
        label: "Tree Layout",
        nodeType: Example2.value,
        category: new Just(AdvancedLayout.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "tree-horizontal",
        label: "Horizontal Tree",
        nodeType: Example2.value,
        category: new Just(AdvancedLayout.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "tree-vertical",
        label: "Vertical Tree",
        nodeType: Example2.value,
        category: new Just(AdvancedLayout.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "tree-radial",
        label: "Radial Tree",
        nodeType: Example2.value,
        category: new Just(AdvancedLayout.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "three-little-circles",
        label: "Three Little Circles",
        nodeType: Example2.value,
        category: new Just(Interactive2.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "gup",
        label: "General Update Pattern",
        nodeType: Example2.value,
        category: new Just(Interactive2.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "les-mis",
        label: "Les Mis\xE9rables Network",
        nodeType: Example2.value,
        category: new Just(Interactive2.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "meta-tree",
        label: "MetaTree Visualizer",
        nodeType: Example2.value,
        category: new Just(Interpreter.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "print-tree",
        label: "String Generator",
        nodeType: Example2.value,
        category: new Just(Interpreter.value),
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: Nothing.value,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "type-safe",
        label: "Type-Safe",
        nodeType: Feature.value,
        category: Nothing.value,
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: new Just("Strong type safety with PureScript"),
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "composable",
        label: "Composable",
        nodeType: Feature.value,
        category: Nothing.value,
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: new Just("Build complex visualizations from simple components"),
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "interpreters-feature",
        label: "Multiple Interpreters",
        nodeType: Feature.value,
        category: Nothing.value,
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: new Just("Finally Tagless pattern enables different interpretations"),
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "d3-powered",
        label: "D3-Powered",
        nodeType: Feature.value,
        category: Nothing.value,
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: new Just("Leverages D3.js for battle-tested rendering"),
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "interactive-feature",
        label: "Interactive",
        nodeType: Feature.value,
        category: Nothing.value,
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: new Just("Support for drag, zoom, and other behaviors"),
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }, {
        id: "documented",
        label: "Well-Documented",
        nodeType: Feature.value,
        category: Nothing.value,
        children: Nothing.value,
        url: Nothing.value,
        external: Nothing.value,
        description: new Just("Comprehensive examples with comparisons"),
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      }],
      links: [packLink({
        source: "purescript-d3",
        target: "gallery"
      }), packLink({
        source: "purescript-d3",
        target: "about"
      }), packLink({
        source: "purescript-d3",
        target: "spago"
      }), packLink({
        source: "purescript-d3",
        target: "interpreters"
      }), packLink({
        source: "purescript-d3",
        target: "github"
      }), packLink({
        source: "gallery",
        target: "line-chart"
      }), packLink({
        source: "gallery",
        target: "bar-chart"
      }), packLink({
        source: "gallery",
        target: "scatter-plot"
      }), packLink({
        source: "gallery",
        target: "scatter-quartet"
      }), packLink({
        source: "gallery",
        target: "chord-diagram"
      }), packLink({
        source: "gallery",
        target: "bubble-chart"
      }), packLink({
        source: "gallery",
        target: "sankey"
      }), packLink({
        source: "gallery",
        target: "tree"
      }), packLink({
        source: "gallery",
        target: "tree-horizontal"
      }), packLink({
        source: "gallery",
        target: "tree-vertical"
      }), packLink({
        source: "gallery",
        target: "tree-radial"
      }), packLink({
        source: "gallery",
        target: "three-little-circles"
      }), packLink({
        source: "gallery",
        target: "gup"
      }), packLink({
        source: "gallery",
        target: "les-mis"
      }), packLink({
        source: "about",
        target: "type-safe"
      }), packLink({
        source: "about",
        target: "composable"
      }), packLink({
        source: "about",
        target: "interpreters-feature"
      }), packLink({
        source: "about",
        target: "d3-powered"
      }), packLink({
        source: "about",
        target: "interactive-feature"
      }), packLink({
        source: "about",
        target: "documented"
      }), packLink({
        source: "interpreters",
        target: "meta-tree"
      }), packLink({
        source: "interpreters",
        target: "print-tree"
      })]
    };
  })();

  // output/D3.Viz.ForceNavigator.Draw/index.js
  var strokeColor35 = /* @__PURE__ */ strokeColor(toAttrString);
  var classed42 = /* @__PURE__ */ classed(toAttrString);
  var initialize5 = function(dictBind) {
    var bind92 = bind(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var zoomableSVG2 = zoomableSVG(dictMonadEffect);
      var pure56 = pure(dictMonadEffect.Monad0().Applicative0());
      return function(dictSimulationM2) {
        var SelectionM1 = dictSimulationM2.SimulationM1().SelectionM1();
        var attach6 = attach(SelectionM1);
        var zoomableSVG1 = zoomableSVG2(SelectionM1);
        var appendTo6 = appendTo(SelectionM1);
        return bind92(liftEffect53(getWindowWidthHeight))(function(v) {
          return bind92(attach6("div.svg-container"))(function(root3) {
            return bind92(zoomableSVG1(root3)({
              minX: -v.value0 / 2,
              minY: -v.value1 / 2,
              width: v.value0,
              height: v.value1,
              svgClass: "navigation",
              innerClass: "zoom-group",
              innerWidth: v.value0,
              innerHeight: v.value1,
              scaleMin: 0.5,
              scaleMax: 4
            }))(function(v1) {
              return bind92(appendTo6(v1.zoomGroup)(Group.value)([classed42("link"), strokeColor35("#999")]))(function(linksGroup) {
                return bind92(appendTo6(v1.zoomGroup)(Group.value)([classed42("node")]))(function(nodesGroup) {
                  return pure56({
                    nodes: new Just(nodesGroup),
                    links: new Just(linksGroup)
                  });
                });
              });
            });
          });
        });
      };
    };
  };

  // output/PSD3.ForceNavigator.Actions/index.js
  var NodeClick2 = /* @__PURE__ */ (function() {
    function NodeClick3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    NodeClick3.create = function(value0) {
      return function(value1) {
        return new NodeClick3(value0, value1);
      };
    };
    return NodeClick3;
  })();
  var Initialize8 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var Finalize4 = /* @__PURE__ */ (function() {
    function Finalize6() {
    }
    ;
    Finalize6.value = new Finalize6();
    return Finalize6;
  })();
  var EventFromVizualization2 = /* @__PURE__ */ (function() {
    function EventFromVizualization3(value0) {
      this.value0 = value0;
    }
    ;
    EventFromVizualization3.create = function(value0) {
      return new EventFromVizualization3(value0);
    };
    return EventFromVizualization3;
  })();

  // output/D3.Viz.ForceNavigator.Forces/index.js
  var collisionRadius = function(d23) {
    return 80;
  };
  var forceLibrary2 = /* @__PURE__ */ (function() {
    return initialize2(foldableArray)(functorArray)([createForce("charge")(new RegularForce(ForceManyBody.value))(allNodes)([strengthVal(-80), thetaVal(0.9), distanceMinVal(1), distanceMaxVal(infinity)]), createForce("center")(new RegularForce(ForceCenter.value))(allNodes)([strengthVal(0.5), xVal(0), yVal(0)]), createForce("collision")(new RegularForce(ForceCollide.value))(allNodes)([strengthVal(1), radiusFn(function(d23) {
      return function(v) {
        return collisionRadius(d23);
      };
    })]), createLinkForce(Nothing.value)([strengthVal(0.5), distanceVal(150)])]);
  })();

  // output/PSD3.ForceNavigator.Forces/index.js
  var forceLibrary3 = forceLibrary2;

  // output/PSD3.ForceNavigator.State/index.js
  var eq10 = /* @__PURE__ */ eq(eqNodeType);
  var bind41 = /* @__PURE__ */ bind(bindArray);
  var member7 = /* @__PURE__ */ member2(ordString);
  var elem7 = /* @__PURE__ */ elem2(eqString);
  var append29 = /* @__PURE__ */ append(semigroupArray);
  var fromFoldable45 = /* @__PURE__ */ fromFoldable6(foldableSet)(ordString);
  var fromFoldable122 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordString);
  var map79 = /* @__PURE__ */ map(functorArray);
  var spy4 = /* @__PURE__ */ spy();
  var toUnfoldable10 = /* @__PURE__ */ toUnfoldable4(unfoldableArray);
  var prop14 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "openSelections";
    }
  })()();
  var prop23 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "expandedNodes";
    }
  })()();
  var prop33 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "eventListener";
    }
  })()();
  var prop43 = /* @__PURE__ */ prop3({
    reflectSymbol: function() {
      return "activeForces";
    }
  })()();
  var visibleNodes = function(expanded) {
    return function(allNodes3) {
      var sectionNodes = filter(function(n) {
        return eq10(n.nodeType)(Section.value);
      })(allNodes3);
      var expandedChildren = bind41(allNodes3)(function(node) {
        var $47 = member7(node.id)(expanded);
        if ($47) {
          if (node.children instanceof Just) {
            return filter(function(n) {
              return elem7(n.id)(node.children.value0);
            })(allNodes3);
          }
          ;
          if (node.children instanceof Nothing) {
            return [];
          }
          ;
          throw new Error("Failed pattern match at PSD3.ForceNavigator.State (line 54, column 14 - line 56, column 24): " + [node.children.constructor.name]);
        }
        ;
        return [];
      });
      var centerNode = filter(function(n) {
        return n.id === "purescript-d3";
      })(allNodes3);
      return append29(centerNode)(append29(sectionNodes)(expandedChildren));
    };
  };
  var initialState2 = function(forceLibrary5) {
    return {
      simulation: initialSimulationState(forceLibrary5),
      expandedNodes: empty7,
      openSelections: Nothing.value,
      activeForces: fromFoldable45(keys3(forceLibrary5)),
      eventListener: Nothing.value
    };
  };
  var cloneLink = function(link4) {
    return {
      source: link4.source,
      target: link4.target
    };
  };
  var visibleLinks = function(nodes) {
    return function(allLinks) {
      var visibleIds = fromFoldable122(map79(function(n) {
        return n.id;
      })(nodes));
      var v = spy4("\u{1F4CA} ALL INPUT LINKS")(map79(function(l) {
        return l.source + (" \u2192 " + l.target);
      })(allLinks));
      var skeletonTests = map79(function(target7) {
        var targetInSet = member7(target7)(visibleIds);
        var sourceInSet = member7("purescript-d3")(visibleIds);
        return {
          target: target7,
          sourceInSet,
          targetInSet
        };
      })(["gallery", "about", "spago", "interpreters", "github"]);
      var v1 = spy4("\u{1F50D} Skeleton link tests")(skeletonTests);
      var isVisible = function(link4) {
        var sourceIn = member7(link4.source)(visibleIds);
        var targetIn = member7(link4.target)(visibleIds);
        var visible = sourceIn && targetIn;
        return visible;
      };
      var filtered = filter(isVisible)(allLinks);
      var result = map79(cloneLink)(filtered);
      var v2 = spy4("\u{1F4CA} Total links in navigationData")(length3(allLinks));
      var v3 = spy4("\u{1F4CA} visibleNodes IDs")(toUnfoldable10(visibleIds));
      var v4 = spy4("\u{1F4CA} visibleLinks (filtered)")(map79(function(l) {
        return l.source + (" \u2192 " + l.target);
      })(result));
      var v5 = spy4("\u{1F4CA} visibleLinks count")(length3(result));
      return result;
    };
  };
  var _openSelections = function(dictStrong) {
    return prop14($$Proxy.value)(dictStrong);
  };
  var _expandedNodes = function(dictStrong) {
    return prop23($$Proxy.value)(dictStrong);
  };
  var _eventListener = function(dictStrong) {
    return prop33($$Proxy.value)(dictStrong);
  };
  var _activeForces = function(dictStrong) {
    return prop43($$Proxy.value)(dictStrong);
  };

  // output/PSD3.ForceNavigator/index.js
  var liftEffect10 = /* @__PURE__ */ liftEffect(monadEffectEffect);
  var spy5 = /* @__PURE__ */ spy();
  var bind42 = /* @__PURE__ */ bind(bindHalogenM);
  var use3 = /* @__PURE__ */ use(monadStateHalogenM);
  var _activeForces2 = /* @__PURE__ */ _activeForces(strongForget);
  var evalEffectSimulation3 = /* @__PURE__ */ evalEffectSimulation(bindHalogenM)(monadStateHalogenM);
  var start6 = /* @__PURE__ */ start2(simulationMD3Selection_D3);
  var discard45 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var $$void11 = /* @__PURE__ */ $$void(functorHalogenM);
  var assign3 = /* @__PURE__ */ assign2(monadStateHalogenM);
  var _eventListener2 = /* @__PURE__ */ _eventListener(strongFn);
  var initialize6 = /* @__PURE__ */ initialize5(bindD3SimM)(monadEffD3SimM)(simulationM2D3Selection_D);
  var _openSelections2 = /* @__PURE__ */ _openSelections(strongFn);
  var _expandedNodes2 = /* @__PURE__ */ _expandedNodes(strongForget);
  var pure36 = /* @__PURE__ */ pure(applicativeHalogenM);
  var modifying2 = /* @__PURE__ */ modifying(monadStateHalogenM);
  var _expandedNodes1 = /* @__PURE__ */ _expandedNodes(strongFn);
  var member8 = /* @__PURE__ */ member2(ordString);
  var $$delete9 = /* @__PURE__ */ $$delete3(ordString);
  var insert18 = /* @__PURE__ */ insert5(ordString);
  var _eventListener1 = /* @__PURE__ */ _eventListener(strongForget);
  var simulationEvent2 = function(l) {
    return onMouseEventEffectful(MouseClick.value)(function(e) {
      return function(d23) {
        return function(t) {
          return liftEffect10((function() {
            var v = spy5("\u{1F5B1}\uFE0F D3 Click Event")({
              nodeType: d23.nodeType,
              nodeId: d23.id
            });
            return notify(l)(new EventFromVizualization2(new NodeClick2(d23.nodeType, d23.id)));
          })());
        };
      };
    });
  };
  var runSimulation3 = function(dictMonadAff) {
    var evalEffectSimulation1 = evalEffectSimulation3(monadAffHalogenM(dictMonadAff));
    return bind42(use3(_activeForces2))(function(activeLabels) {
      return evalEffectSimulation1(start6);
    });
  };
  var render15 = function(v) {
    return div2([])([]);
  };
  var handleAction7 = function(dictMonadAff) {
    var liftEffect112 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    var evalEffectSimulation1 = evalEffectSimulation3(monadAffHalogenM(dictMonadAff));
    var runSimulation1 = runSimulation3(dictMonadAff);
    return function(v) {
      if (v instanceof Initialize8) {
        return bind42(liftEffect112(create3))(function(v12) {
          return discard45($$void11(subscribe2(v12.emitter)))(function() {
            return discard45(assign3(_eventListener2)(new Just(v12.listener)))(function() {
              return bind42(evalEffectSimulation1(initialize6))(function(selections) {
                return discard45(assign3(_openSelections2)(new Just(selections)))(function() {
                  var callback = simulationEvent2(v12.listener);
                  return bind42(use3(_expandedNodes2))(function(expanded) {
                    var visibleNodesArray = visibleNodes(expanded)(navigationData.nodes);
                    var visibleLinksArray = visibleLinks(visibleNodesArray)(navigationData.links);
                    var initialModel = {
                      nodes: visibleNodesArray,
                      links: visibleLinksArray
                    };
                    return discard45(runSimulation1)(function() {
                      return pure36(unit);
                    });
                  });
                });
              });
            });
          });
        });
      }
      ;
      if (v instanceof Finalize4) {
        return pure36(unit);
      }
      ;
      if (v instanceof EventFromVizualization2) {
        var v1 = spy5("\u2705 Halogen Received Event")({
          nodeType: v.value0.value0,
          nodeId: v.value0.value1
        });
        if (v.value0.value0 instanceof Section) {
          return discard45(modifying2(_expandedNodes1)(function(expanded) {
            var $51 = member8(v.value0.value1)(expanded);
            if ($51) {
              var v22 = spy5("\u{1F4C2} Collapsing")(v.value0.value1);
              return $$delete9(v.value0.value1)(expanded);
            }
            ;
            var v22 = spy5("\u{1F4C1} Expanding")(v.value0.value1);
            return insert18(v.value0.value1)(expanded);
          }))(function() {
            return bind42(use3(_expandedNodes2))(function(expanded) {
              return bind42(use3(_eventListener1))(function(maybeListener) {
                var visibleNodesArray = visibleNodes(expanded)(navigationData.nodes);
                var visibleLinksArray = visibleLinks(visibleNodesArray)(navigationData.links);
                var updatedModel = {
                  nodes: visibleNodesArray,
                  links: visibleLinksArray
                };
                return discard45((function() {
                  if (maybeListener instanceof Just) {
                    var callback = simulationEvent2(maybeListener.value0);
                    return discard45(pure36(unit))(function() {
                      return runSimulation1;
                    });
                  }
                  ;
                  if (maybeListener instanceof Nothing) {
                    return pure36(unit);
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.ForceNavigator (line 145, column 9 - line 151, column 31): " + [maybeListener.constructor.name]);
                })())(function() {
                  return pure36(unit);
                });
              });
            });
          });
        }
        ;
        var v2 = spy5("\u2139\uFE0F Non-section clicked")(v.value0.value0);
        return pure36(unit);
      }
      ;
      throw new Error("Failed pattern match at PSD3.ForceNavigator (line 94, column 16 - line 156, column 18): " + [v.constructor.name]);
    };
  };
  var component10 = function(dictMonadAff) {
    return mkComponent({
      initialState: $$const(initialState2(forceLibrary3)),
      render: render15,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        handleAction: handleAction7(dictMonadAff),
        initialize: new Just(Initialize8.value),
        finalize: new Just(Finalize4.value)
      })
    });
  };

  // output/PSD3.FpFtw.Actions/index.js
  var Initialize9 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SelectExample = /* @__PURE__ */ (function() {
    function SelectExample2(value0) {
      this.value0 = value0;
    }
    ;
    SelectExample2.create = function(value0) {
      return new SelectExample2(value0);
    };
    return SelectExample2;
  })();

  // output/PSD3.FpFtw.HTML/index.js
  var render16 = function(v) {
    return div2([classes(["example-page"])])([renderHeader(FpFtw.value), main([classes(["tutorial-content"])])([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("6. FP FTW")]), p_([text5("Functional Programming For The Win! This page showcases PSD3's unique capabilities in handling different data structures through its Finally Tagless design.")]), p_([text5("Unlike traditional D3 bindings that work only with arrays, PSD3 can visualize any Foldable data structure - Maps, Sets, Lists, and more - thanks to its polymorphic type class constraints.")])]), section([id2("map-quartet"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("1. Map-Based Scatter Plot Quartet")]), p_([text5("This visualization demonstrates PSD3's ability to work directly with Map data structures. Each of the four scatter plots receives a different sparse Map with only 15 data points out of a possible 200 x-values, showing how PSD3 handles sparse data naturally through its Foldable constraint.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["map-quartet-viz"])])([])]), p_([text5("Unlike arrays where all datasets would need 200 elements (with nulls or placeholder values for missing data), Maps only store the actual measurements. Each dataset has different randomly-selected keys, demonstrating that Maps naturally handle irregular sampling. This is particularly useful for time-series data with missing values, experimental data with different sample points, or any scenario where data is inherently sparse.")]), p_([a([href4("#/example/map-quartet"), classes(["tutorial-link"])])([text5("View interactive example with full source code \u2192")])])]), section([id2("topological-sort"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("2. Topological Sort with Data.Graph")]), p_([text5("This visualization demonstrates PureScript's Data.Graph library and its topologicalSort function. The Graph type is elegantly defined as: Graph k v = Graph (Map k (Tuple v (List k))), where each key maps to its value and a list of dependencies. We build a build pipeline as a directed acyclic graph (DAG) and use topologicalSort to determine execution order.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["topological-sort-viz"])])([])]), p_([text5("Tasks are arranged in layers computed from the topological sort. Layer 0 contains tasks with no dependencies, Layer 1 contains tasks depending only on Layer 0, and so on. All tasks within a layer can be executed in parallel. The topologicalSort function handles cycle detection and returns tasks in a valid execution order - demonstrating how functional data structures and algorithms elegantly solve dependency resolution problems found in build systems, task schedulers, and module systems.")]), p_([a([href4("#/example/topological-sort"), classes(["tutorial-link"])])([text5("View interactive example with full source code \u2192")])])]), section([id2("lesmis-layers"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("3. Les Mis\xE9rables Character Dependencies")]), p_([text5("Applying topological sort to the Les Mis\xE9rables character co-appearance graph reveals a surprising result: the graph is acyclic! With 77 characters arranged across 27 dependency layers (0-26), we can see the narrative structure of Victor Hugo's novel. Characters are positioned vertically by their dependency layer, showing which characters' storylines build upon others.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["lesmis-layers-viz"])])([])]), p_([text5("This visualization uses the same Data.Graph topological sort, but on a much larger real-world dataset. Characters within the same layer have no dependencies on each other and represent parallel narrative threads. The layered structure reveals the hierarchical relationships in the story - from the foundational characters at layer 0 to the culminating interactions at layer 26.")])])])]);
  };

  // output/PSD3.FpFtw.State/index.js
  var topologicalForceLibrary = /* @__PURE__ */ (function() {
    var forces3 = {
      manyBodyWeak: createForce("many body weak")(new RegularForce(ForceManyBody.value))(allNodes)([strengthVal(-15)]),
      collision: createForce("collision")(new RegularForce(ForceCollide.value))(allNodes)([radiusVal(7)]),
      links: createLinkForce(Nothing.value)([distanceVal(80)])
    };
    return initialize2(foldableArray)(functorArray)([forces3.manyBodyWeak, forces3.collision, forces3.links]);
  })();
  var initialState3 = function(v) {
    return {
      currentExample: "intro",
      simulation: initialSimulationState(topologicalForceLibrary)
    };
  };

  // output/PSD3.FpFtw/index.js
  var discard46 = /* @__PURE__ */ discard(discardUnit);
  var drawMapQuartet3 = /* @__PURE__ */ drawMapQuartet(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawTopologicalSort3 = /* @__PURE__ */ drawTopologicalSort(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var show52 = /* @__PURE__ */ show(showInt);
  var drawTopologicalForceDirected2 = /* @__PURE__ */ drawTopologicalForceDirected(bindD3SimM)(monadEffD3SimM)(monadStateD3SimM)(simulationM2D3Selection_D);
  var handleAction8 = function(dictMonadAff) {
    var MonadEffect0 = dictMonadAff.MonadEffect0();
    var Monad0 = MonadEffect0.Monad0();
    var Bind1 = Monad0.Bind1();
    var discard115 = discard46(Bind1);
    var log7 = log3(MonadEffect0);
    var bind92 = bind(Bind1);
    var liftEffect53 = liftEffect(MonadEffect0);
    var liftAff37 = liftAff(dictMonadAff);
    var runWithD3_Simulation5 = runWithD3_Simulation(Bind1);
    var pure56 = pure(Monad0.Applicative0());
    return function(dictMonadState) {
      var runWithD3_Simulation1 = runWithD3_Simulation5(dictMonadState)(dictMonadAff);
      var modify_49 = modify_(dictMonadState);
      return function(v) {
        if (v instanceof Initialize9) {
          return discard115(log7("FP FTW: Initializing..."))(function() {
            return discard115(log7("FP FTW: Generating Map quartet data..."))(function() {
              return bind92(liftEffect53(generateMapQuartet))(function(quartetData) {
                return discard115(log7("FP FTW: Map quartet data generated"))(function() {
                  return discard115(log7("FP FTW: Drawing Map quartet..."))(function() {
                    return bind92(liftEffect53(eval_D3M(drawMapQuartet3(quartetData)("div.map-quartet-viz"))))(function() {
                      return discard115(log7("FP FTW: Map quartet drawn"))(function() {
                        return discard115(log7("FP FTW: Drawing build pipeline topological sort..."))(function() {
                          return bind92(liftEffect53(eval_D3M(drawTopologicalSort3(buildPipelineTasks)("div.topological-sort-viz"))))(function() {
                            return discard115(log7("FP FTW: Build pipeline drawn"))(function() {
                              return discard115(log7("FP FTW: Loading LesMiserables graph..."))(function() {
                                return bind92(liftAff37(loadLesMisGraph))(function(lesMisResult) {
                                  return discard115((function() {
                                    if (lesMisResult instanceof Left) {
                                      return log7("FP FTW: Failed to load LesMis: " + lesMisResult.value0);
                                    }
                                    ;
                                    if (lesMisResult instanceof Right) {
                                      return discard115(log7("FP FTW: LesMiserables graph loaded!"))(function() {
                                        var lesMisTasks = lesMisToTasks(lesMisResult.value0);
                                        return discard115(log7("FP FTW: Converted to " + (show52(length3(lesMisTasks)) + " tasks")))(function() {
                                          return discard115(log7("FP FTW: Drawing LesMis topological layers with force simulation..."))(function() {
                                            return discard115(runWithD3_Simulation1(drawTopologicalForceDirected2(lesMisTasks)("div.lesmis-layers-viz")))(function() {
                                              return discard115(log7("FP FTW: LesMis topological layers drawn!"))(function() {
                                                return pure56(unit);
                                              });
                                            });
                                          });
                                        });
                                      });
                                    }
                                    ;
                                    throw new Error("Failed pattern match at PSD3.FpFtw (line 71, column 5 - line 83, column 18): " + [lesMisResult.constructor.name]);
                                  })())(function() {
                                    return pure56(unit);
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        }
        ;
        if (v instanceof SelectExample) {
          return modify_49(function(v1) {
            var $40 = {};
            for (var $41 in v1) {
              if ({}.hasOwnProperty.call(v1, $41)) {
                $40[$41] = v1[$41];
              }
              ;
            }
            ;
            $40.currentExample = v.value0;
            return $40;
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.FpFtw (line 49, column 16 - line 88, column 47): " + [v.constructor.name]);
      };
    };
  };
  var component11 = function(dictMonadAff) {
    return mkComponent({
      initialState: initialState3,
      render: render16,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction8(monadAffHalogenM(dictMonadAff))(monadStateHalogenM),
        initialize: new Just(Initialize9.value)
      })
    });
  };

  // output/PSD3.Home/foreign.js
  var filterImpl3 = (pred) => (arr) => arr.filter(pred);

  // output/PSD3.Home/index.js
  var mapFlipped12 = /* @__PURE__ */ mapFlipped(functorArray);
  var pure37 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize10 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var renderTutorialLink = function(title4) {
    return function(description) {
      return function(path3) {
        return a([href4("#" + path3), classes(["home-tutorial-card"])])([h3([classes(["home-tutorial-card-title"])])([text5(title4)]), p([classes(["home-tutorial-card-description"])])([text5(description)])]);
      };
    };
  };
  var renderExampleCard2 = function(ex) {
    return a([href4("#" + routeToPath(ex.route)), classes(["home-example-card"])])([div2([classes(["home-example-thumbnail"])])([img([src9(ex.thumbnail), alt5(ex.name), classes(["home-example-thumbnail-img"])])]), div2([classes(["home-example-card-content"])])([h3([classes(["home-example-card-title"])])([text5(ex.name)]), p([classes(["home-example-card-description"])])([text5(ex.description)])])]);
  };
  var renderCategory2 = function(categoryName) {
    return function(examples) {
      return div2([classes(["home-gallery-category"])])([h3([classes(["home-gallery-category-title"])])([text5(categoryName)]), div2([classes(["home-gallery-grid"])])(mapFlipped12(examples)(renderExampleCard2))]);
    };
  };
  var handleAction9 = function(v) {
    return pure37(unit);
  };
  var getBookmarkImage = function(v) {
    if (v === "Getting Started") {
      return "assets/bookmark-images/getting-started.jpeg";
    }
    ;
    if (v === "How-to Guides") {
      return "assets/bookmark-images/howto.jpeg";
    }
    ;
    if (v === "API Reference") {
      return "assets/bookmark-images/reference.jpeg";
    }
    ;
    if (v === "Understanding") {
      return "assets/bookmark-images/understanding.jpeg";
    }
    ;
    return "assets/bookmark-images/howto.jpeg";
  };
  var renderDocBox = function(title4) {
    return function(description) {
      return function(path3) {
        return a([href4("#" + path3), classes(["home-doc-box"])])([div2([classes(["home-doc-box__image-container"])])([img([src9(getBookmarkImage(title4)), alt5(""), classes(["home-doc-box__image"])])]), div2([classes(["home-doc-box__content"])])([h3([classes(["home-doc-box-title"])])([text5(title4)]), p([classes(["home-doc-box-description"])])([text5(description)])])]);
      };
    };
  };
  var renderDocBoxExternal = function(title4) {
    return function(description) {
      return function(url) {
        return a([href4(url), classes(["home-doc-box"])])([div2([classes(["home-doc-box__image-container"])])([img([src9(getBookmarkImage(title4)), alt5(""), classes(["home-doc-box__image"])])]), div2([classes(["home-doc-box__content"])])([h3([classes(["home-doc-box-title"])])([text5(title4)]), p([classes(["home-doc-box-description"])])([text5(description)])])]);
      };
    };
  };
  var filter6 = filterImpl3;
  var renderCategories2 = function(examples) {
    var categories = ["Simple Charts", "Hierarchies", "Force-Directed", "Data Flow", "Rich Data Structures", "Animations", "Transitions"];
    return mapFlipped12(categories)(function(category) {
      var examplesInCategory = filter6(function(ex) {
        return ex.category === category;
      })(examples);
      return renderCategory2(category)(examplesInCategory);
    });
  };
  var allExamples2 = /* @__PURE__ */ (function() {
    return [{
      id: "three-little-circles",
      name: "Three Little Circles",
      description: "The simplest possible D3 example",
      category: "Simple Charts",
      route: new Example("three-little-circles"),
      thumbnail: "assets/example-thumbnails/three-little-circles.png"
    }, {
      id: "bar-chart",
      name: "Bar Chart",
      description: "Basic bar chart with axis and labels",
      category: "Simple Charts",
      route: new Example("bar-chart"),
      thumbnail: "assets/example-thumbnails/simple-bar-chart.png"
    }, {
      id: "line-chart",
      name: "Line Chart",
      description: "Line chart with time series data",
      category: "Simple Charts",
      route: new Example("line-chart"),
      thumbnail: "assets/example-thumbnails/simple-line-chart.png"
    }, {
      id: "scatter-plot",
      name: "Scatter Plot",
      description: "Anscombe's Quartet visualization",
      category: "Simple Charts",
      route: new Example("scatter-plot"),
      thumbnail: "assets/example-thumbnails/anscombes-quartet.png"
    }, {
      id: "grouped-bar-chart",
      name: "Grouped Bar Chart",
      description: "Bar chart with grouped categories",
      category: "Simple Charts",
      route: new Example("grouped-bar-chart"),
      thumbnail: "assets/example-thumbnails/grouped-bar-chart.png"
    }, {
      id: "multi-line-chart",
      name: "Multi-Line Chart",
      description: "Multiple line series on one chart",
      category: "Simple Charts",
      route: new Example("multi-line-chart"),
      thumbnail: "assets/example-thumbnails/multiline-chart.png"
    }, {
      id: "radial-stacked-bar",
      name: "Radial Stacked Bar Chart",
      description: "Population by age and state in radial form",
      category: "Simple Charts",
      route: new Example("radial-stacked-bar"),
      thumbnail: "assets/example-thumbnails/stacked-radial-bar-chart.png"
    }, {
      id: "parabola",
      name: "Parabola",
      description: "Colored circles in parabolic formation",
      category: "Simple Charts",
      route: new Example("parabola"),
      thumbnail: "assets/example-thumbnails/parabola.png"
    }, {
      id: "bubble-chart",
      name: "Bubble Chart",
      description: "Hierarchical circle packing layout",
      category: "Hierarchies",
      route: new Example("bubble-chart"),
      thumbnail: "assets/example-thumbnails/circle-packing.png"
    }, {
      id: "vertical-tree",
      name: "Vertical Tree",
      description: "Top-down tidy tree layout",
      category: "Hierarchies",
      route: new Example("vertical-tree"),
      thumbnail: "assets/example-thumbnails/vertical-tidy-tree.png"
    }, {
      id: "horizontal-tree",
      name: "Horizontal Tree",
      description: "Left-to-right tidy tree layout",
      category: "Hierarchies",
      route: new Example("horizontal-tree"),
      thumbnail: "assets/example-thumbnails/horizontal-tidy-tree.png"
    }, {
      id: "radial-tree",
      name: "Radial Tree",
      description: "Circular tidy tree layout",
      category: "Hierarchies",
      route: new Example("radial-tree"),
      thumbnail: "assets/example-thumbnails/radial-tidy-tree.png"
    }, {
      id: "treemap",
      name: "Treemap",
      description: "Space-filling hierarchical visualization",
      category: "Hierarchies",
      route: new Example("treemap"),
      thumbnail: "assets/example-thumbnails/treemap.png"
    }, {
      id: "icicle",
      name: "Icicle Chart",
      description: "Hierarchical partition layout",
      category: "Hierarchies",
      route: new Example("icicle"),
      thumbnail: "assets/example-thumbnails/icicle-chart.png"
    }, {
      id: "lesmis-force",
      name: "Les Mis\xE9rables Network",
      description: "Character co-occurrence graph",
      category: "Force-Directed",
      route: new Example("lesmis-force"),
      thumbnail: "assets/example-thumbnails/les-miserables.png"
    }, {
      id: "topological-sort",
      name: "Topological Sort",
      description: "Force layout with layer constraints",
      category: "Force-Directed",
      route: new Example("topological-sort"),
      thumbnail: "assets/example-thumbnails/working-with-graphs.png"
    }, {
      id: "chord-diagram",
      name: "Chord Diagram",
      description: "Circular relationship diagram",
      category: "Data Flow",
      route: new Example("chord-diagram"),
      thumbnail: "assets/example-thumbnails/chord-diagram.png"
    }, {
      id: "sankey-diagram",
      name: "Sankey Diagram",
      description: "Flow diagram with proportional widths",
      category: "Data Flow",
      route: new Example("sankey-diagram"),
      thumbnail: "assets/example-thumbnails/sankey-diagram.png"
    }, {
      id: "map-quartet",
      name: "Map Quartet",
      description: "Sparse data with PureScript Maps",
      category: "Rich Data Structures",
      route: new Example("map-quartet"),
      thumbnail: "assets/example-thumbnails/working-with-maps.png"
    }, {
      id: "nested-data",
      name: "Nested Data",
      description: "Nested selections with 2D arrays",
      category: "Rich Data Structures",
      route: new Example("nested-data"),
      thumbnail: "assets/example-thumbnails/nested-data.png"
    }, {
      id: "working-with-sets",
      name: "Working with Sets",
      description: "Nested selections with Set data structures",
      category: "Rich Data Structures",
      route: new Example("working-with-sets"),
      thumbnail: "assets/example-thumbnails/working-with-sets.png"
    }, {
      id: "wealth-health",
      name: "Wealth & Health of Nations",
      description: "Animated scatterplot across time",
      category: "Animations",
      route: new Example("wealth-health"),
      thumbnail: "assets/example-thumbnails/wealth-and-health-of-nations.png"
    }, {
      id: "three-circles-transition",
      name: "Color Mixing",
      description: "RGB color transitions",
      category: "Transitions",
      route: new Example("three-circles-transition"),
      thumbnail: "assets/example-thumbnails/three-little-circles.png"
    }, {
      id: "general-update-pattern",
      name: "General Update Pattern",
      description: "Enter, update, exit pattern",
      category: "Transitions",
      route: new Example("general-update-pattern"),
      thumbnail: "assets/example-thumbnails/general-update-pattern.png"
    }, {
      id: "animated-radial-tree",
      name: "Animated Radial Tree",
      description: "Transitions between tree layouts",
      category: "Transitions",
      route: new Example("animated-radial-tree"),
      thumbnail: "assets/example-thumbnails/animating-tree.png"
    }];
  })();
  var render17 = function(v) {
    return div2([classes(["home-page"])])([header([classes(["home-header"])])([div2([classes(["home-header-content"])])([a([href4("#hero"), classes(["home-logo-link"])])([img([src9("assets/psd3-logo-color.svg"), alt5("PSD3 Logo"), classes(["home-logo"])])]), nav([classes(["home-nav"])])([a([href4("#docs"), classes(["home-nav-link"])])([text5("Docs")]), a([href4("#tutorials"), classes(["home-nav-link"])])([text5("Tour")]), a([href4("#examples"), classes(["home-nav-link"])])([text5("Examples' code")]), a([href4("#" + routeToPath(Wizard.value)), classes(["home-nav-link home-nav-link--cta"])])([text5("Get Started")])])])]), section([id2("hero"), classes(["home-hero"])])([div2([classes(["home-hero-content"])])([h1([classes(["home-hero-title"])])([text5("Type-safe, composable, maintainable, interactive data visualisation with PureScript and D3.js")]), div2([classes(["home-hero-image"])])([img([src9("assets/example-thumbnails/code-explorer.png"), alt5("Code Explorer visualization"), classes(["home-hero-img"])]), p([classes(["home-hero-caption"])])([text5("Learn how to make powerful interactive data-driven apps like this "), a([href4("#" + routeToPath(CodeExplorer.value)), classes(["home-hero-link"])])([text5("code explorer")])])])])]), section([id2("docs"), classes(["home-docs"])])([h2([classes(["home-section-title"])])([text5("Documentation")]), div2([classes(["home-docs-grid"])])([renderDocBox("Getting Started")("Installation, setup, and your first visualization")(routeToPath(GettingStarted.value)), renderDocBox("How-to Guides")("Step-by-step instructions for specific visualizations")(routeToPath(HowtoIndex.value)), renderDocBoxExternal("API Reference")("Pursuit-style documentation of the library with type signatures")("api/index.html"), renderDocBox("Understanding")("Concepts, patterns, and design philosophy")(routeToPath(UnderstandingConcepts.value))])]), section([id2("tutorials"), classes(["home-tutorials"])])([h2([classes(["home-section-title"])])([text5("Take the Tour")]), p([classes(["home-section-description"])])([text5("You can read through the following to progressively build up an understanding of the capabilities and concepts:")]), div2([classes(["home-tutorials-grid"])])([renderTutorialLink("1. Simplest Charts")("Start with the basics: three circles, positioning, and data binding")(routeToPath(SimpleCharts1.value)), renderTutorialLink("2. Lines and Bars")("Create line and bar charts with scales, axes, and labels")(routeToPath(SimpleCharts2.value)), renderTutorialLink("3. Hierarchies")("Trees, treemaps, and circle packing for hierarchical data")(routeToPath(Hierarchies.value)), renderTutorialLink("4. Data Flow Visualizations")("Chord diagrams and Sankey charts for showing relationships and flows")(routeToPath(DataFlowViz.value)), renderTutorialLink("5. Movement & Transition")("Animations, transitions, and the general update pattern")(routeToPath(Movement.value)), renderTutorialLink("6. FP FTW")("Functional programming patterns with Maps, Sets, and type-safe graphs")(routeToPath(FpFtw.value)), renderTutorialLink("7. Interpreters")("How the tagless final pattern enables framework-independent code")(routeToPath(Interpreters.value))])]), section([id2("apps"), classes(["home-tutorials"])])([h2([classes(["home-section-title"])])([text5("Interactive, data-driven apps")]), p([classes(["home-section-description"])])([text5("These examples are more involved than a simple visualisation")]), div2([classes(["home-tutorials-grid"])])([renderTutorialLink("Wealth & Health of Nations")("Animated scatterplot showing global development over time")(routeToPath(WealthHealth.value)), renderTutorialLink("Code Explorer")("Interactive force-directed graph exploring PureScript dependencies")(routeToPath(CodeExplorer.value)), renderTutorialLink("Code Atlas")("Visualize codebase structure with multiple interactive views")(routeToPath(CodeAtlas.value))])]), section([id2("examples"), classes(["home-examples"])])([h2([classes(["home-section-title"])])([text5("Examples Side-by-side with their code")]), p([classes(["home-section-description"])])([text5("Browse all the visualizations used in the tour side-by-side with their full source code")]), div2([classes(["home-examples-content"])])(renderCategories2(allExamples2))]), render]);
  };
  var component12 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render17,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction9,
        initialize: new Just(Initialize10.value)
      })
    });
  })();

  // output/PSD3.Shared.DocsCardGrid/index.js
  var append30 = /* @__PURE__ */ append(semigroupArray);
  var map80 = /* @__PURE__ */ map(functorArray);
  var HowTo = /* @__PURE__ */ (function() {
    function HowTo2() {
    }
    ;
    HowTo2.value = new HowTo2();
    return HowTo2;
  })();
  var BestPractice = /* @__PURE__ */ (function() {
    function BestPractice2() {
    }
    ;
    BestPractice2.value = new BestPractice2();
    return BestPractice2;
  })();
  var Concept = /* @__PURE__ */ (function() {
    function Concept2() {
    }
    ;
    Concept2.value = new Concept2();
    return Concept2;
  })();
  var Pattern = /* @__PURE__ */ (function() {
    function Pattern2() {
    }
    ;
    Pattern2.value = new Pattern2();
    return Pattern2;
  })();
  var renderCard = function(v) {
    var typeLabel = (function() {
      if (v.cardType instanceof HowTo) {
        return "How-to";
      }
      ;
      if (v.cardType instanceof BestPractice) {
        return "Best Practice";
      }
      ;
      if (v.cardType instanceof Concept) {
        return "Concept";
      }
      ;
      if (v.cardType instanceof Pattern) {
        return "Pattern";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Shared.DocsCardGrid (line 41, column 17 - line 45, column 27): " + [v.cardType.constructor.name]);
    })();
    var typeClass = (function() {
      if (v.cardType instanceof HowTo) {
        return "docs-card--howto";
      }
      ;
      if (v.cardType instanceof BestPractice) {
        return "docs-card--best-practice";
      }
      ;
      if (v.cardType instanceof Concept) {
        return "docs-card--concept";
      }
      ;
      if (v.cardType instanceof Pattern) {
        return "docs-card--pattern";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Shared.DocsCardGrid (line 34, column 17 - line 38, column 51): " + [v.cardType.constructor.name]);
    })();
    var baseClasses = ["docs-card"];
    var allClasses = append30(baseClasses)([typeClass]);
    var element3 = (function() {
      if (v.route instanceof Just) {
        return a([href4("#" + routeToPath(v.route.value0)), classes(allClasses)]);
      }
      ;
      if (v.route instanceof Nothing) {
        return div2([classes(append30(allClasses)(["docs-card--coming-soon"]))]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Shared.DocsCardGrid (line 47, column 15 - line 55, column 85): " + [v.route.constructor.name]);
    })();
    return element3([div2([classes(["docs-card-header"])])([span3([classes(["docs-card-type"])])([text5(typeLabel)]), (function() {
      if (v.route instanceof Nothing) {
        return span3([classes(["docs-card-status"])])([text5("Coming Soon")]);
      }
      ;
      if (v.route instanceof Just) {
        return text5("");
      }
      ;
      throw new Error("Failed pattern match at PSD3.Shared.DocsCardGrid (line 63, column 13 - line 68, column 35): " + [v.route.constructor.name]);
    })()]), h3([classes(["docs-card-title"])])([text5(v.title)]), p([classes(["docs-card-description"])])([text5(v.description)])]);
  };
  var renderDocsGrid = function(cards) {
    return div2([classes(["docs-grid"])])(map80(renderCard)(cards));
  };

  // output/PSD3.Shared.DocsHeader/index.js
  var eq11 = /* @__PURE__ */ eq(eqSection);
  var sectionTitle = function(v) {
    if (v instanceof UnderstandingSection) {
      return "Understanding";
    }
    ;
    if (v instanceof TutorialSection) {
      return "Getting Started";
    }
    ;
    if (v instanceof HowToSection) {
      return "How-To Guides";
    }
    ;
    if (v instanceof APISection) {
      return "API Reference";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Shared.DocsHeader (line 99, column 16 - line 103, column 32): " + [v.constructor.name]);
  };
  var sectionDefaultRoute = function(v) {
    if (v instanceof UnderstandingSection) {
      return UnderstandingConcepts.value;
    }
    ;
    if (v instanceof TutorialSection) {
      return GettingStarted.value;
    }
    ;
    if (v instanceof HowToSection) {
      return HowtoIndex.value;
    }
    ;
    if (v instanceof APISection) {
      return Reference.value;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Shared.DocsHeader (line 91, column 23 - line 95, column 26): " + [v.constructor.name]);
  };
  var renderQuadrant = function(targetSection) {
    return function(currentSection) {
      return a([href4((function() {
        var $8 = eq11(targetSection)(APISection.value);
        if ($8) {
          return "api/index.html";
        }
        ;
        return "#" + routeToPath(sectionDefaultRoute(targetSection));
      })()), classes(["docs-header-quadrant-box", (function() {
        if (currentSection instanceof Just && eq11(currentSection.value0)(targetSection)) {
          return "docs-header-quadrant-box--active";
        }
        ;
        return "docs-header-quadrant-box--inactive";
      })()]), title2(sectionTitle(targetSection))])([]);
    };
  };
  var render18 = function(v) {
    return header([classes(["docs-header"])])([div2([classes(["docs-header-content"])])([a([href4("#" + routeToPath(Home.value)), classes(["docs-header-logo-link"])])([img([src9("assets/psd3-logo-color.svg"), alt5("PSD3 Logo"), classes(["docs-header-logo"])])]), div2([classes(["docs-header-middle"])])([span3([classes(["docs-header-label"])])([text5("Docs")]), div2([classes(["docs-header-quadrant"])])([renderQuadrant(TutorialSection.value)(v.currentSection), renderQuadrant(HowToSection.value)(v.currentSection), renderQuadrant(APISection.value)(v.currentSection), renderQuadrant(UnderstandingSection.value)(v.currentSection)])]), nav([classes(["docs-header-nav"])])([a([href4("#" + routeToPath(Home.value)), classes(["docs-header-nav-link"])])([text5("\u2190 Back to Home")])])])]);
  };
  var component13 = /* @__PURE__ */ mkComponent({
    initialState: /* @__PURE__ */ identity(categoryFn),
    render: render18,
    "eval": /* @__PURE__ */ mkEval(defaultEval)
  });

  // output/PSD3.HowTo.HowtoIndex/index.js
  var pure38 = /* @__PURE__ */ pure(applicativeHalogenM);
  var slot_4 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize11 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var handleAction10 = function(v) {
    return pure38(unit);
  };
  var _docsHeader = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render19 = function(v) {
    return div2([classes(["docs-page"])])([slot_4(_docsHeader)(unit)(component13)({
      currentSection: new Just(HowToSection.value)
    }), section([classes(["docs-hero"])])([div2([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text5("How-to Guides")]), p([classes(["docs-hero-description"])])([text5("Practical guides for accomplishing specific tasks with PureScript D3. Learn how to integrate with Halogen or React, add interactivity, work with color, and follow best practices for type-safe visualization development.")])])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text5("How-to Guides")]), p([classes(["docs-section-description"])])([text5("Step-by-step instructions for specific tasks")]), renderDocsGrid([{
      title: "Getting Data on Screen",
      description: "Learn the fundamentals of binding data to DOM elements and creating your first visualization",
      route: Nothing.value,
      cardType: HowTo.value
    }, {
      title: "Structuring a Halogen App",
      description: "Best practices for integrating PS<$>D3 with Halogen components and managing visualization state",
      route: Nothing.value,
      cardType: HowTo.value
    }, {
      title: "Structuring a React App",
      description: "How to use PS<$>D3 visualizations within React applications using FFI",
      route: Nothing.value,
      cardType: HowTo.value
    }, {
      title: "Adding Drag and Zoom",
      description: "Implement interactive pan and zoom behavior for exploring large datasets",
      route: Nothing.value,
      cardType: HowTo.value
    }, {
      title: "Working with Color",
      description: "Color scales, palettes, and accessibility considerations for effective visualizations",
      route: Nothing.value,
      cardType: HowTo.value
    }])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text5("Best Practices")]), p([classes(["docs-section-description"])])([text5("Guidelines for writing maintainable, type-safe visualization code")]), renderDocsGrid([{
      title: "Separating Safe from Unsafe Code",
      description: "Architectural patterns for isolating FFI and maintaining type safety throughout your codebase",
      route: Nothing.value,
      cardType: BestPractice.value
    }])])]);
  };
  var component14 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render19,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction10,
        initialize: new Just(Initialize11.value)
      })
    });
  })();

  // output/PSD3.Reference.ModuleRegistry/index.js
  var moduleCategories = [{
    title: "Core API",
    modules: [{
      name: "PSD3.Types",
      path: "PSD3/Types.purs",
      description: "Common type definitions used throughout PSD3"
    }, {
      name: "PSD3.Attributes",
      path: "PSD3/Attributes.purs",
      description: "SVG and HTML attribute combinators"
    }]
  }, {
    title: "Capabilities",
    modules: [{
      name: "PSD3.Capabilities.Selection",
      path: "PSD3/Capabilities/Selection.purs",
      description: "Core selection and element manipulation operations"
    }, {
      name: "PSD3.Capabilities.Simulation",
      path: "PSD3/Capabilities/Simulation.purs",
      description: "Force simulation capabilities"
    }, {
      name: "PSD3.Capabilities.Sankey",
      path: "PSD3/Capabilities/Sankey.purs",
      description: "Sankey diagram layout capabilities"
    }]
  }, {
    title: "Interpreters",
    modules: [{
      name: "PSD3.Interpreter.D3",
      path: "PSD3/Interpreter/D3.purs",
      description: "D3.js interpreter - runs visualizations in the browser"
    }, {
      name: "PSD3.Interpreter.String",
      path: "PSD3/Interpreter/String.purs",
      description: "String interpreter - generates code as text"
    }, {
      name: "PSD3.Interpreter.MetaTree",
      path: "PSD3/Interpreter/MetaTree.purs",
      description: "MetaTree interpreter - produces AST representation"
    }]
  }, {
    title: "Data Structures",
    modules: [{
      name: "PSD3.Data.Tree",
      path: "PSD3/Data/Tree.purs",
      description: "Tree data structure for hierarchical layouts"
    }, {
      name: "PSD3.Data.Node",
      path: "PSD3/Data/Node.purs",
      description: "Node types for tree structures"
    }, {
      name: "PSD3.Data.Utility",
      path: "PSD3/Data/Utility.purs",
      description: "Utility functions for data manipulation"
    }]
  }, {
    title: "Internal - Selection",
    modules: [{
      name: "PSD3.Internal.Selection.Types",
      path: "PSD3/Internal/Selection/Types.purs",
      description: "Selection type definitions"
    }, {
      name: "PSD3.Internal.Selection.Functions",
      path: "PSD3/Internal/Selection/Functions.purs",
      description: "Selection implementation functions"
    }]
  }, {
    title: "Internal - Simulation",
    modules: [{
      name: "PSD3.Internal.Simulation.Types",
      path: "PSD3/Internal/Simulation/Types.purs",
      description: "Simulation type definitions"
    }, {
      name: "PSD3.Internal.Simulation.Functions",
      path: "PSD3/Internal/Simulation/Functions.purs",
      description: "Simulation implementation functions"
    }, {
      name: "PSD3.Internal.Simulation.Forces",
      path: "PSD3/Internal/Simulation/Forces.purs",
      description: "Force definitions for simulations"
    }, {
      name: "PSD3.Internal.Simulation.Config",
      path: "PSD3/Internal/Simulation/Config.purs",
      description: "Simulation configuration"
    }]
  }, {
    title: "Internal - Other",
    modules: [{
      name: "PSD3.Internal.Types",
      path: "PSD3/Internal/Types.purs",
      description: "Internal type definitions"
    }, {
      name: "PSD3.Internal.FFI",
      path: "PSD3/Internal/FFI.purs",
      description: "Foreign function interface to D3.js"
    }, {
      name: "PSD3.Internal.Attributes.Instances",
      path: "PSD3/Internal/Attributes/Instances.purs",
      description: "Type class instances for attributes"
    }, {
      name: "PSD3.Internal.Attributes.Sugar",
      path: "PSD3/Internal/Attributes/Sugar.purs",
      description: "Syntactic sugar for attributes"
    }, {
      name: "PSD3.Internal.Axes",
      path: "PSD3/Internal/Axes.purs",
      description: "Axis generation"
    }, {
      name: "PSD3.Internal.Hierarchical",
      path: "PSD3/Internal/Hierarchical.purs",
      description: "Hierarchical layout algorithms"
    }, {
      name: "PSD3.Internal.Generators.Line",
      path: "PSD3/Internal/Generators/Line.purs",
      description: "Line and area generators"
    }, {
      name: "PSD3.Internal.Scales.Scales",
      path: "PSD3/Internal/Scales/Scales.purs",
      description: "Scale functions"
    }, {
      name: "PSD3.Internal.Scales.Linear",
      path: "PSD3/Internal/Scales/Linear.purs",
      description: "Linear scale implementation"
    }, {
      name: "PSD3.Internal.Sankey.Types",
      path: "PSD3/Internal/Sankey/Types.purs",
      description: "Sankey diagram types"
    }, {
      name: "PSD3.Internal.Sankey.Functions",
      path: "PSD3/Internal/Sankey/Functions.purs",
      description: "Sankey diagram functions"
    }, {
      name: "PSD3.Internal.Utility",
      path: "PSD3/Internal/Utility.purs",
      description: "Internal utility functions"
    }, {
      name: "PSD3.Internal.Zoom",
      path: "PSD3/Internal/Zoom.purs",
      description: "Zoom and pan behavior"
    }]
  }];

  // output/PSD3.PrismJS/foreign.js
  function highlightAll() {
    if (window.Prism) {
      window.Prism.highlightAll();
    }
  }

  // output/PSD3.Reference.SourceLoader/index.js
  var bind43 = /* @__PURE__ */ bind(bindAff);
  var pure39 = /* @__PURE__ */ pure(applicativeAff);
  var loadSourceFile = function(relativePath) {
    var url = "sources/" + relativePath;
    return bind43(get4(string)(url))(function(result) {
      return pure39((function() {
        if (result instanceof Left) {
          return new Left("Failed to load " + (relativePath + (": " + printError(result.value0))));
        }
        ;
        if (result instanceof Right) {
          return new Right(result.value0.body);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.SourceLoader (line 16, column 8 - line 20, column 26): " + [result.constructor.name]);
      })());
    });
  };

  // output/PSD3.Reference.Modules.Attributes/index.js
  var bind44 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff2 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_9 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard47 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect11 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize12 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render20 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Attributes")]), p([classes(["module-page__description"])])([text5("SVG and HTML attribute combinators")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Attributes (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Attributes (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction11 = function(v) {
    if (v instanceof Initialize12) {
      return bind44(liftAff2(loadSourceFile("PSD3/Attributes.purs")))(function(result) {
        return handleAction11(new SourceLoaded(result));
      });
    }
    ;
    if (v instanceof SourceLoaded) {
      if (v.value0 instanceof Left) {
        return modify_9(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard47(modify_9(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect11(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Attributes (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Attributes (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component15 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render20,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction11,
        initialize: new Just(Initialize12.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Capabilities.Sankey/index.js
  var bind45 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff3 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_10 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard48 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect12 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize13 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded2 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render21 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Capabilities.Sankey")]), p([classes(["module-page__description"])])([text5("Sankey diagram layout capabilities")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Sankey (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Sankey (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction12 = function(v) {
    if (v instanceof Initialize13) {
      return bind45(liftAff3(loadSourceFile("PSD3/Capabilities/Sankey.purs")))(function(result) {
        return handleAction12(new SourceLoaded2(result));
      });
    }
    ;
    if (v instanceof SourceLoaded2) {
      if (v.value0 instanceof Left) {
        return modify_10(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard48(modify_10(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect12(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Sankey (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Sankey (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component16 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render21,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction12,
        initialize: new Just(Initialize13.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Capabilities.Selection/index.js
  var bind46 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff4 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_11 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard49 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect13 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize14 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded3 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render22 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Capabilities.Selection")]), p([classes(["module-page__description"])])([text5("Core selection and element manipulation operations")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Selection (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Selection (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction13 = function(v) {
    if (v instanceof Initialize14) {
      return bind46(liftAff4(loadSourceFile("PSD3/Capabilities/Selection.purs")))(function(result) {
        return handleAction13(new SourceLoaded3(result));
      });
    }
    ;
    if (v instanceof SourceLoaded3) {
      if (v.value0 instanceof Left) {
        return modify_11(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard49(modify_11(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect13(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Selection (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Selection (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component17 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render22,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction13,
        initialize: new Just(Initialize14.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Capabilities.Simulation/index.js
  var bind47 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff5 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_12 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard50 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect14 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize15 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded4 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render23 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Capabilities.Simulation")]), p([classes(["module-page__description"])])([text5("Force simulation capabilities")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Simulation (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Simulation (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction14 = function(v) {
    if (v instanceof Initialize15) {
      return bind47(liftAff5(loadSourceFile("PSD3/Capabilities/Simulation.purs")))(function(result) {
        return handleAction14(new SourceLoaded4(result));
      });
    }
    ;
    if (v instanceof SourceLoaded4) {
      if (v.value0 instanceof Left) {
        return modify_12(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard50(modify_12(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect14(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Simulation (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Capabilities.Simulation (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component18 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render23,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction14,
        initialize: new Just(Initialize15.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Data.Node/index.js
  var bind48 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff6 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_13 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard51 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect15 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize16 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded5 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render24 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Data.Node")]), p([classes(["module-page__description"])])([text5("Node types for tree structures")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Node (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Node (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction15 = function(v) {
    if (v instanceof Initialize16) {
      return bind48(liftAff6(loadSourceFile("PSD3/Data/Node.purs")))(function(result) {
        return handleAction15(new SourceLoaded5(result));
      });
    }
    ;
    if (v instanceof SourceLoaded5) {
      if (v.value0 instanceof Left) {
        return modify_13(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard51(modify_13(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect15(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Node (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Node (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component19 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render24,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction15,
        initialize: new Just(Initialize16.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Data.Tree/index.js
  var bind49 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff7 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_14 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard52 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect16 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize17 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded6 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render25 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Data.Tree")]), p([classes(["module-page__description"])])([text5("Tree data structure for hierarchical layouts")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Tree (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Tree (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction16 = function(v) {
    if (v instanceof Initialize17) {
      return bind49(liftAff7(loadSourceFile("PSD3/Data/Tree.purs")))(function(result) {
        return handleAction16(new SourceLoaded6(result));
      });
    }
    ;
    if (v instanceof SourceLoaded6) {
      if (v.value0 instanceof Left) {
        return modify_14(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard52(modify_14(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect16(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Tree (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Tree (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component20 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render25,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction16,
        initialize: new Just(Initialize17.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Data.Utility/index.js
  var bind50 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff8 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_15 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard53 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect17 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize18 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded7 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render26 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Data.Utility")]), p([classes(["module-page__description"])])([text5("Utility functions for data manipulation")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Utility (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Utility (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction17 = function(v) {
    if (v instanceof Initialize18) {
      return bind50(liftAff8(loadSourceFile("PSD3/Data/Utility.purs")))(function(result) {
        return handleAction17(new SourceLoaded7(result));
      });
    }
    ;
    if (v instanceof SourceLoaded7) {
      if (v.value0 instanceof Left) {
        return modify_15(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard53(modify_15(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect17(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Utility (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Data.Utility (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component21 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render26,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction17,
        initialize: new Just(Initialize18.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Attributes.Instances/index.js
  var bind51 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff9 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_16 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard54 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect18 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize19 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded8 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render27 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Attributes.Instances")]), p([classes(["module-page__description"])])([text5("Type class instances for attributes")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Instances (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Instances (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction18 = function(v) {
    if (v instanceof Initialize19) {
      return bind51(liftAff9(loadSourceFile("PSD3/Internal/Attributes/Instances.purs")))(function(result) {
        return handleAction18(new SourceLoaded8(result));
      });
    }
    ;
    if (v instanceof SourceLoaded8) {
      if (v.value0 instanceof Left) {
        return modify_16(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard54(modify_16(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect18(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Instances (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Instances (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component22 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render27,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction18,
        initialize: new Just(Initialize19.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Attributes.Sugar/index.js
  var bind52 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff10 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_17 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard55 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect19 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize20 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded9 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render28 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Attributes.Sugar")]), p([classes(["module-page__description"])])([text5("Syntactic sugar for attributes")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Sugar (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Sugar (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction19 = function(v) {
    if (v instanceof Initialize20) {
      return bind52(liftAff10(loadSourceFile("PSD3/Internal/Attributes/Sugar.purs")))(function(result) {
        return handleAction19(new SourceLoaded9(result));
      });
    }
    ;
    if (v instanceof SourceLoaded9) {
      if (v.value0 instanceof Left) {
        return modify_17(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard55(modify_17(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect19(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Sugar (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Attributes.Sugar (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component23 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render28,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction19,
        initialize: new Just(Initialize20.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Axes/index.js
  var bind53 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff11 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_18 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard56 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect20 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize21 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded10 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render29 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Axes")]), p([classes(["module-page__description"])])([text5("Axis generation")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Axes (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Axes (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction20 = function(v) {
    if (v instanceof Initialize21) {
      return bind53(liftAff11(loadSourceFile("PSD3/Internal/Axes.purs")))(function(result) {
        return handleAction20(new SourceLoaded10(result));
      });
    }
    ;
    if (v instanceof SourceLoaded10) {
      if (v.value0 instanceof Left) {
        return modify_18(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard56(modify_18(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect20(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Axes (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Axes (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component24 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render29,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction20,
        initialize: new Just(Initialize21.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.FFI/index.js
  var bind54 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff12 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_19 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard57 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect21 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize22 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded11 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render30 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.FFI")]), p([classes(["module-page__description"])])([text5("Foreign function interface to D3.js")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.FFI (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.FFI (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction21 = function(v) {
    if (v instanceof Initialize22) {
      return bind54(liftAff12(loadSourceFile("PSD3/Internal/FFI.purs")))(function(result) {
        return handleAction21(new SourceLoaded11(result));
      });
    }
    ;
    if (v instanceof SourceLoaded11) {
      if (v.value0 instanceof Left) {
        return modify_19(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard57(modify_19(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect21(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.FFI (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.FFI (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component25 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render30,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction21,
        initialize: new Just(Initialize22.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Generators.Line/index.js
  var bind55 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff13 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_20 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard58 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect22 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize23 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded12 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render31 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Generators.Line")]), p([classes(["module-page__description"])])([text5("Line and area generators")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Generators.Line (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Generators.Line (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction22 = function(v) {
    if (v instanceof Initialize23) {
      return bind55(liftAff13(loadSourceFile("PSD3/Internal/Generators/Line.purs")))(function(result) {
        return handleAction22(new SourceLoaded12(result));
      });
    }
    ;
    if (v instanceof SourceLoaded12) {
      if (v.value0 instanceof Left) {
        return modify_20(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard58(modify_20(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect22(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Generators.Line (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Generators.Line (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component26 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render31,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction22,
        initialize: new Just(Initialize23.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Hierarchical/index.js
  var bind56 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff14 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_21 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard59 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect23 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize24 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded13 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render32 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Hierarchical")]), p([classes(["module-page__description"])])([text5("Hierarchical layout algorithms")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Hierarchical (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Hierarchical (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction23 = function(v) {
    if (v instanceof Initialize24) {
      return bind56(liftAff14(loadSourceFile("PSD3/Internal/Hierarchical.purs")))(function(result) {
        return handleAction23(new SourceLoaded13(result));
      });
    }
    ;
    if (v instanceof SourceLoaded13) {
      if (v.value0 instanceof Left) {
        return modify_21(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard59(modify_21(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect23(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Hierarchical (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Hierarchical (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component27 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render32,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction23,
        initialize: new Just(Initialize24.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Sankey.Functions/index.js
  var bind57 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff15 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_22 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard60 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect24 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize25 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded14 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render33 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Sankey.Functions")]), p([classes(["module-page__description"])])([text5("Sankey diagram functions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Functions (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Functions (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction24 = function(v) {
    if (v instanceof Initialize25) {
      return bind57(liftAff15(loadSourceFile("PSD3/Internal/Sankey/Functions.purs")))(function(result) {
        return handleAction24(new SourceLoaded14(result));
      });
    }
    ;
    if (v instanceof SourceLoaded14) {
      if (v.value0 instanceof Left) {
        return modify_22(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard60(modify_22(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect24(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Functions (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Functions (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component28 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render33,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction24,
        initialize: new Just(Initialize25.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Sankey.Types/index.js
  var bind58 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff16 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_23 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard61 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect25 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize26 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded15 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render34 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Sankey.Types")]), p([classes(["module-page__description"])])([text5("Sankey diagram types")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Types (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Types (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction25 = function(v) {
    if (v instanceof Initialize26) {
      return bind58(liftAff16(loadSourceFile("PSD3/Internal/Sankey/Types.purs")))(function(result) {
        return handleAction25(new SourceLoaded15(result));
      });
    }
    ;
    if (v instanceof SourceLoaded15) {
      if (v.value0 instanceof Left) {
        return modify_23(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard61(modify_23(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect25(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Types (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Sankey.Types (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component29 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render34,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction25,
        initialize: new Just(Initialize26.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Scales.Linear/index.js
  var bind59 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff17 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_24 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard62 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect26 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize27 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded16 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render35 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Scales.Linear")]), p([classes(["module-page__description"])])([text5("Linear scale implementation")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Linear (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Linear (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction26 = function(v) {
    if (v instanceof Initialize27) {
      return bind59(liftAff17(loadSourceFile("PSD3/Internal/Scales/Linear.purs")))(function(result) {
        return handleAction26(new SourceLoaded16(result));
      });
    }
    ;
    if (v instanceof SourceLoaded16) {
      if (v.value0 instanceof Left) {
        return modify_24(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard62(modify_24(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect26(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Linear (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Linear (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component30 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render35,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction26,
        initialize: new Just(Initialize27.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Scales.Scales/index.js
  var bind60 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff18 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_25 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard63 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect27 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize28 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded17 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render36 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Scales.Scales")]), p([classes(["module-page__description"])])([text5("Scale functions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Scales (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Scales (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction27 = function(v) {
    if (v instanceof Initialize28) {
      return bind60(liftAff18(loadSourceFile("PSD3/Internal/Scales/Scales.purs")))(function(result) {
        return handleAction27(new SourceLoaded17(result));
      });
    }
    ;
    if (v instanceof SourceLoaded17) {
      if (v.value0 instanceof Left) {
        return modify_25(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard63(modify_25(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect27(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Scales (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Scales.Scales (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component31 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render36,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction27,
        initialize: new Just(Initialize28.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Selection.Functions/index.js
  var bind61 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff19 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_26 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard64 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect28 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize29 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded18 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render37 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Selection.Functions")]), p([classes(["module-page__description"])])([text5("Selection implementation functions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Functions (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Functions (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction28 = function(v) {
    if (v instanceof Initialize29) {
      return bind61(liftAff19(loadSourceFile("PSD3/Internal/Selection/Functions.purs")))(function(result) {
        return handleAction28(new SourceLoaded18(result));
      });
    }
    ;
    if (v instanceof SourceLoaded18) {
      if (v.value0 instanceof Left) {
        return modify_26(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard64(modify_26(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect28(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Functions (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Functions (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component32 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render37,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction28,
        initialize: new Just(Initialize29.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Selection.Types/index.js
  var bind62 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff20 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_27 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard65 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect29 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize30 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded19 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render38 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Selection.Types")]), p([classes(["module-page__description"])])([text5("Selection type definitions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Types (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Types (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction29 = function(v) {
    if (v instanceof Initialize30) {
      return bind62(liftAff20(loadSourceFile("PSD3/Internal/Selection/Types.purs")))(function(result) {
        return handleAction29(new SourceLoaded19(result));
      });
    }
    ;
    if (v instanceof SourceLoaded19) {
      if (v.value0 instanceof Left) {
        return modify_27(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard65(modify_27(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect29(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Types (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Selection.Types (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component33 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render38,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction29,
        initialize: new Just(Initialize30.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Simulation.Config/index.js
  var bind63 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff21 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_28 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard66 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect30 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize31 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded20 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render39 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Simulation.Config")]), p([classes(["module-page__description"])])([text5("Simulation configuration")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Config (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Config (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction30 = function(v) {
    if (v instanceof Initialize31) {
      return bind63(liftAff21(loadSourceFile("PSD3/Internal/Simulation/Config.purs")))(function(result) {
        return handleAction30(new SourceLoaded20(result));
      });
    }
    ;
    if (v instanceof SourceLoaded20) {
      if (v.value0 instanceof Left) {
        return modify_28(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard66(modify_28(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect30(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Config (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Config (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component34 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render39,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction30,
        initialize: new Just(Initialize31.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Simulation.Forces/index.js
  var bind64 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff22 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_29 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard67 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect31 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize32 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded21 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render40 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Simulation.Forces")]), p([classes(["module-page__description"])])([text5("Force definitions for simulations")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Forces (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Forces (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction31 = function(v) {
    if (v instanceof Initialize32) {
      return bind64(liftAff22(loadSourceFile("PSD3/Internal/Simulation/Forces.purs")))(function(result) {
        return handleAction31(new SourceLoaded21(result));
      });
    }
    ;
    if (v instanceof SourceLoaded21) {
      if (v.value0 instanceof Left) {
        return modify_29(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard67(modify_29(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect31(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Forces (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Forces (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component35 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render40,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction31,
        initialize: new Just(Initialize32.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Simulation.Functions/index.js
  var bind65 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff23 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_30 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard68 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect32 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize33 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded22 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render41 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Simulation.Functions")]), p([classes(["module-page__description"])])([text5("Simulation implementation functions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Functions (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Functions (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction32 = function(v) {
    if (v instanceof Initialize33) {
      return bind65(liftAff23(loadSourceFile("PSD3/Internal/Simulation/Functions.purs")))(function(result) {
        return handleAction32(new SourceLoaded22(result));
      });
    }
    ;
    if (v instanceof SourceLoaded22) {
      if (v.value0 instanceof Left) {
        return modify_30(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard68(modify_30(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect32(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Functions (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Functions (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component36 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render41,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction32,
        initialize: new Just(Initialize33.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Simulation.Types/index.js
  var bind66 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff24 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_31 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard69 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect33 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize34 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded23 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render42 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Simulation.Types")]), p([classes(["module-page__description"])])([text5("Simulation type definitions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Types (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Types (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction33 = function(v) {
    if (v instanceof Initialize34) {
      return bind66(liftAff24(loadSourceFile("PSD3/Internal/Simulation/Types.purs")))(function(result) {
        return handleAction33(new SourceLoaded23(result));
      });
    }
    ;
    if (v instanceof SourceLoaded23) {
      if (v.value0 instanceof Left) {
        return modify_31(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard69(modify_31(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect33(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Types (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Simulation.Types (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component37 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render42,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction33,
        initialize: new Just(Initialize34.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Types/index.js
  var bind67 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff25 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_32 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard70 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect34 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize35 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded24 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render43 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Types")]), p([classes(["module-page__description"])])([text5("Internal type definitions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Types (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Types (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction34 = function(v) {
    if (v instanceof Initialize35) {
      return bind67(liftAff25(loadSourceFile("PSD3/Internal/Types.purs")))(function(result) {
        return handleAction34(new SourceLoaded24(result));
      });
    }
    ;
    if (v instanceof SourceLoaded24) {
      if (v.value0 instanceof Left) {
        return modify_32(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard70(modify_32(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect34(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Types (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Types (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component38 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render43,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction34,
        initialize: new Just(Initialize35.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Utility/index.js
  var bind68 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff26 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_33 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard71 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect35 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize36 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded25 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render44 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Utility")]), p([classes(["module-page__description"])])([text5("Internal utility functions")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Utility (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Utility (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction35 = function(v) {
    if (v instanceof Initialize36) {
      return bind68(liftAff26(loadSourceFile("PSD3/Internal/Utility.purs")))(function(result) {
        return handleAction35(new SourceLoaded25(result));
      });
    }
    ;
    if (v instanceof SourceLoaded25) {
      if (v.value0 instanceof Left) {
        return modify_33(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard71(modify_33(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect35(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Utility (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Utility (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component39 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render44,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction35,
        initialize: new Just(Initialize36.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Internal.Zoom/index.js
  var bind69 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff27 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_34 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard72 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect36 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize37 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded26 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render45 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Internal.Zoom")]), p([classes(["module-page__description"])])([text5("Zoom and pan behavior")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Zoom (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Zoom (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction36 = function(v) {
    if (v instanceof Initialize37) {
      return bind69(liftAff27(loadSourceFile("PSD3/Internal/Zoom.purs")))(function(result) {
        return handleAction36(new SourceLoaded26(result));
      });
    }
    ;
    if (v instanceof SourceLoaded26) {
      if (v.value0 instanceof Left) {
        return modify_34(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard72(modify_34(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect36(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Zoom (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Internal.Zoom (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component40 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render45,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction36,
        initialize: new Just(Initialize37.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Interpreter.D3/index.js
  var bind70 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff28 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_35 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard73 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect37 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize38 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded27 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render46 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Interpreter.D3")]), p([classes(["module-page__description"])])([text5("D3.js interpreter - runs visualizations in the browser")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.D3 (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.D3 (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction37 = function(v) {
    if (v instanceof Initialize38) {
      return bind70(liftAff28(loadSourceFile("PSD3/Interpreter/D3.purs")))(function(result) {
        return handleAction37(new SourceLoaded27(result));
      });
    }
    ;
    if (v instanceof SourceLoaded27) {
      if (v.value0 instanceof Left) {
        return modify_35(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard73(modify_35(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect37(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.D3 (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.D3 (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component41 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render46,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction37,
        initialize: new Just(Initialize38.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Interpreter.MetaTree/index.js
  var bind71 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff29 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_36 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard74 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect38 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize39 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded28 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render47 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Interpreter.MetaTree")]), p([classes(["module-page__description"])])([text5("MetaTree interpreter - produces AST representation")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.MetaTree (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.MetaTree (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction38 = function(v) {
    if (v instanceof Initialize39) {
      return bind71(liftAff29(loadSourceFile("PSD3/Interpreter/MetaTree.purs")))(function(result) {
        return handleAction38(new SourceLoaded28(result));
      });
    }
    ;
    if (v instanceof SourceLoaded28) {
      if (v.value0 instanceof Left) {
        return modify_36(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard74(modify_36(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect38(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.MetaTree (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.MetaTree (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component42 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render47,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction38,
        initialize: new Just(Initialize39.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Interpreter.String/index.js
  var bind72 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff30 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_37 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard75 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect39 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize40 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded29 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render48 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Interpreter.String")]), p([classes(["module-page__description"])])([text5("String interpreter - generates code as text")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.String (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.String (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction39 = function(v) {
    if (v instanceof Initialize40) {
      return bind72(liftAff30(loadSourceFile("PSD3/Interpreter/String.purs")))(function(result) {
        return handleAction39(new SourceLoaded29(result));
      });
    }
    ;
    if (v instanceof SourceLoaded29) {
      if (v.value0 instanceof Left) {
        return modify_37(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard75(modify_37(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect39(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.String (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Interpreter.String (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component43 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render48,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction39,
        initialize: new Just(Initialize40.value)
      })
    });
  })();

  // output/PSD3.Reference.Modules.Types/index.js
  var bind73 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff31 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_38 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var discard76 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var liftEffect40 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var Initialize41 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SourceLoaded30 = /* @__PURE__ */ (function() {
    function SourceLoaded31(value0) {
      this.value0 = value0;
    }
    ;
    SourceLoaded31.create = function(value0) {
      return new SourceLoaded31(value0);
    };
    return SourceLoaded31;
  })();
  var render49 = function(state3) {
    return div2([classes(["module-page"])])([section([classes(["module-page__header"])])([h1([classes(["module-page__title"])])([text5("PSD3.Types")]), p([classes(["module-page__description"])])([text5("Common type definitions used throughout PSD3")])]), section([classes(["module-page__content"])])([]), section([classes(["module-page__source"])])([h2([classes(["module-page__source-title"])])([text5("Source Code")]), (function() {
      if (state3.sourceCode instanceof Nothing) {
        if (state3.loading) {
          return div2([classes(["module-page__loading"])])([text5("Loading source code...")]);
        }
        ;
        if (state3.error instanceof Just) {
          return div2([classes(["module-page__error"])])([text5(state3.error.value0)]);
        }
        ;
        if (state3.error instanceof Nothing) {
          return div2([classes(["module-page__error"])])([text5("Failed to load source code")]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Reference.Modules.Types (line 77, column 22 - line 85, column 63): " + [state3.error.constructor.name]);
      }
      ;
      if (state3.sourceCode instanceof Just) {
        return div2([classes(["module-page__code"])])([pre([classes(["line-numbers"])])([code([classes(["language-haskell"])])([text5(state3.sourceCode.value0)])])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Types (line 71, column 11 - line 95, column 18): " + [state3.sourceCode.constructor.name]);
    })()])]);
  };
  var handleAction40 = function(v) {
    if (v instanceof Initialize41) {
      return bind73(liftAff31(loadSourceFile("PSD3/Types.purs")))(function(result) {
        return handleAction40(new SourceLoaded30(result));
      });
    }
    ;
    if (v instanceof SourceLoaded30) {
      if (v.value0 instanceof Left) {
        return modify_38(function(v1) {
          var $20 = {};
          for (var $21 in v1) {
            if ({}.hasOwnProperty.call(v1, $21)) {
              $20[$21] = v1[$21];
            }
            ;
          }
          ;
          $20.loading = false;
          $20.error = new Just(v.value0.value0);
          return $20;
        });
      }
      ;
      if (v.value0 instanceof Right) {
        return discard76(modify_38(function(v1) {
          var $24 = {};
          for (var $25 in v1) {
            if ({}.hasOwnProperty.call(v1, $25)) {
              $24[$25] = v1[$25];
            }
            ;
          }
          ;
          $24.sourceCode = new Just(v.value0.value0);
          $24.loading = false;
          $24.error = Nothing.value;
          return $24;
        }))(function() {
          return liftEffect40(highlightAll);
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Reference.Modules.Types (line 107, column 5 - line 112, column 32): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Modules.Types (line 100, column 16 - line 112, column 32): " + [v.constructor.name]);
  };
  var component44 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sourceCode: Nothing.value,
          loading: true,
          error: Nothing.value
        };
      },
      render: render49,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction40,
        initialize: new Just(Initialize41.value)
      })
    });
  })();

  // output/PSD3.Shared.SectionNav/index.js
  var eq14 = /* @__PURE__ */ eq(eqSection);
  var eq15 = /* @__PURE__ */ eq(eqRoute);
  var map81 = /* @__PURE__ */ map(functorArray);
  var sectionTitle2 = function(v) {
    if (v instanceof UnderstandingSection) {
      return "Understanding";
    }
    ;
    if (v instanceof TutorialSection) {
      return "Getting Started";
    }
    ;
    if (v instanceof HowToSection) {
      return "How-To Guides";
    }
    ;
    if (v instanceof APISection) {
      return "API Reference";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Shared.SectionNav (line 115, column 16 - line 119, column 32): " + [v.constructor.name]);
  };
  var sectionDefaultRoute2 = function(v) {
    if (v instanceof UnderstandingSection) {
      return UnderstandingConcepts.value;
    }
    ;
    if (v instanceof TutorialSection) {
      return GettingStarted.value;
    }
    ;
    if (v instanceof HowToSection) {
      return HowtoIndex.value;
    }
    ;
    if (v instanceof APISection) {
      return Reference.value;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Shared.SectionNav (line 107, column 23 - line 111, column 26): " + [v.constructor.name]);
  };
  var renderQuadrant2 = function(targetSection) {
    return function(currentSection) {
      return a([href4("#" + routeToPath(sectionDefaultRoute2(targetSection))), classes(["section-nav__quadrant-box", (function() {
        var $11 = eq14(targetSection)(currentSection);
        if ($11) {
          return "section-nav__quadrant-box--active";
        }
        ;
        return "section-nav__quadrant-box--inactive";
      })()]), title2(sectionTitle2(targetSection))])([]);
    };
  };
  var renderPageLink = function(currentRoute) {
    return function(v) {
      var $14 = eq15(v.route)(currentRoute);
      if ($14) {
        return span3([classes(["section-nav__page-link", "section-nav__page-link--active"])])([text5(v.label)]);
      }
      ;
      return a([href4("#" + routeToPath(v.route)), classes(["section-nav__page-link"])])([text5(v.label), text5(" \u2192")]);
    };
  };
  var renderModuleLink = function(currentRoute) {
    return function(moduleInfo) {
      var moduleRoute = new ReferenceModule(moduleInfo.name);
      var isActive = eq15(currentRoute)(moduleRoute);
      return li([classes(["section-nav__module-item"])])([(function() {
        if (isActive) {
          return span3([classes(["section-nav__module-link", "section-nav__module-link--active"]), title2(moduleInfo.description)])([text5(moduleInfo.name)]);
        }
        ;
        return a([href4("#" + routeToPath(moduleRoute)), classes(["section-nav__module-link"]), title2(moduleInfo.description)])([text5(moduleInfo.name)]);
      })()]);
    };
  };
  var renderModuleCategory = function(currentRoute) {
    return function(category) {
      return div2([classes(["section-nav__module-category"])])([h4([classes(["section-nav__category-title"])])([text5(category.title)]), ul([classes(["section-nav__module-list"])])(map81(renderModuleLink(currentRoute))(category.modules))]);
    };
  };
  var render50 = function(v) {
    return div2([classes(["section-nav"])])([div2([classes(["section-nav__quadrant"])])([renderQuadrant2(TutorialSection.value)(v.currentSection), renderQuadrant2(HowToSection.value)(v.currentSection), renderQuadrant2(APISection.value)(v.currentSection), renderQuadrant2(UnderstandingSection.value)(v.currentSection)]), h3([classes(["section-nav__title"])])([text5(sectionTitle2(v.currentSection))]), (function() {
      if (v.moduleCategories instanceof Just) {
        return nav([classes(["section-nav__modules"])])(map81(renderModuleCategory(v.currentRoute))(v.moduleCategories.value0));
      }
      ;
      if (v.moduleCategories instanceof Nothing) {
        return nav([classes(["section-nav__pages"])])(map81(renderPageLink(v.currentRoute))(v.sectionPages));
      }
      ;
      throw new Error("Failed pattern match at PSD3.Shared.SectionNav (line 54, column 7 - line 64, column 61): " + [v.moduleCategories.constructor.name]);
    })()]);
  };
  var component45 = /* @__PURE__ */ mkComponent({
    initialState: /* @__PURE__ */ identity(categoryFn),
    render: render50,
    "eval": /* @__PURE__ */ mkEval(defaultEval)
  });

  // output/PSD3.Reference.Reference/index.js
  var map82 = /* @__PURE__ */ map(functorArray);
  var pure40 = /* @__PURE__ */ pure(applicativeHalogenM);
  var modify_39 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var slot2 = /* @__PURE__ */ slot()({
    reflectSymbol: function() {
      return "moduleComponent";
    }
  })(ordString);
  var slot_5 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "sectionNav";
    }
  })(ordUnit);
  var Initialize42 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var Receive2 = /* @__PURE__ */ (function() {
    function Receive3(value0) {
      this.value0 = value0;
    }
    ;
    Receive3.create = function(value0) {
      return new Receive3(value0);
    };
    return Receive3;
  })();
  var toSectionNavCategory = function(category) {
    return {
      title: category.title,
      modules: map82(function(m) {
        return {
          name: m.name,
          description: m.description
        };
      })(category.modules)
    };
  };
  var handleAction41 = function(v) {
    if (v instanceof Initialize42) {
      return pure40(unit);
    }
    ;
    if (v instanceof Receive2) {
      return modify_39(function(v1) {
        var $17 = {};
        for (var $18 in v1) {
          if ({}.hasOwnProperty.call(v1, $18)) {
            $17[$18] = v1[$18];
          }
          ;
        }
        ;
        $17.currentRoute = v.value0;
        return $17;
      });
    }
    ;
    throw new Error("Failed pattern match at PSD3.Reference.Reference (line 213, column 16 - line 217, column 41): " + [v.constructor.name]);
  };
  var _sectionNav = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _moduleComponent = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderModuleComponent = function(moduleName) {
    if (moduleName === "PSD3.Types") {
      return slot2(_moduleComponent)(moduleName)(component44)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Attributes") {
      return slot2(_moduleComponent)(moduleName)(component15)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Capabilities.Selection") {
      return slot2(_moduleComponent)(moduleName)(component17)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Capabilities.Simulation") {
      return slot2(_moduleComponent)(moduleName)(component18)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Capabilities.Sankey") {
      return slot2(_moduleComponent)(moduleName)(component16)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Interpreter.D3") {
      return slot2(_moduleComponent)(moduleName)(component41)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Interpreter.String") {
      return slot2(_moduleComponent)(moduleName)(component43)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Interpreter.MetaTree") {
      return slot2(_moduleComponent)(moduleName)(component42)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Data.Tree") {
      return slot2(_moduleComponent)(moduleName)(component20)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Data.Node") {
      return slot2(_moduleComponent)(moduleName)(component19)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Data.Utility") {
      return slot2(_moduleComponent)(moduleName)(component21)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Selection.Types") {
      return slot2(_moduleComponent)(moduleName)(component33)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Selection.Functions") {
      return slot2(_moduleComponent)(moduleName)(component32)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Simulation.Types") {
      return slot2(_moduleComponent)(moduleName)(component37)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Simulation.Functions") {
      return slot2(_moduleComponent)(moduleName)(component36)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Simulation.Forces") {
      return slot2(_moduleComponent)(moduleName)(component35)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Simulation.Config") {
      return slot2(_moduleComponent)(moduleName)(component34)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Types") {
      return slot2(_moduleComponent)(moduleName)(component38)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.FFI") {
      return slot2(_moduleComponent)(moduleName)(component25)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Attributes.Instances") {
      return slot2(_moduleComponent)(moduleName)(component22)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Attributes.Sugar") {
      return slot2(_moduleComponent)(moduleName)(component23)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Axes") {
      return slot2(_moduleComponent)(moduleName)(component24)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Hierarchical") {
      return slot2(_moduleComponent)(moduleName)(component27)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Generators.Line") {
      return slot2(_moduleComponent)(moduleName)(component26)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Scales.Scales") {
      return slot2(_moduleComponent)(moduleName)(component31)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Scales.Linear") {
      return slot2(_moduleComponent)(moduleName)(component30)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Sankey.Types") {
      return slot2(_moduleComponent)(moduleName)(component29)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Sankey.Functions") {
      return slot2(_moduleComponent)(moduleName)(component28)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Utility") {
      return slot2(_moduleComponent)(moduleName)(component39)(unit)(absurd);
    }
    ;
    if (moduleName === "PSD3.Internal.Zoom") {
      return slot2(_moduleComponent)(moduleName)(component40)(unit)(absurd);
    }
    ;
    return div2([classes(["reference-not-found"])])([h2_([text5("Module Not Found")]), p_([text5('The module "' + (moduleName + '" was not found.'))])]);
  };
  var render51 = function(state3) {
    return div2([classes(["reference-page"])])([renderTOC({
      title: "Page Contents",
      items: [],
      image: new Just("images/reference-bookmark-deepseavent.jpeg")
    }), slot_5(_sectionNav)(unit)(component45)({
      currentSection: APISection.value,
      currentRoute: state3.currentRoute,
      sectionPages: [],
      moduleCategories: new Just(map82(toSectionNavCategory)(moduleCategories))
    }), main([classes(["reference-main"])])([(function() {
      if (state3.currentRoute instanceof Reference) {
        return renderModuleComponent("PSD3.Capabilities.Selection");
      }
      ;
      if (state3.currentRoute instanceof ReferenceModule) {
        return renderModuleComponent(state3.currentRoute.value0);
      }
      ;
      return renderModuleComponent("PSD3.Capabilities.Selection");
    })()])]);
  };
  var component46 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(route) {
        return {
          currentRoute: route
        };
      },
      render: render51,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        finalize: defaultEval.finalize,
        handleAction: handleAction41,
        initialize: new Just(Initialize42.value),
        receive: function($24) {
          return Just.create(Receive2.create($24));
        }
      })
    });
  })();

  // output/PSD3.Tutorial.GettingStarted/index.js
  var triggerMermaidRendering2 = /* @__PURE__ */ triggerMermaidRendering(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var slot_6 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize43 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var wizardWorkflowDiagram = "\nflowchart TD\n    Start([Start Wizard]) --> Choice{Choose Method}\n\n    Choice -->|Web| WebWizard[Web-based Wizard]\n    Choice -->|CLI| CLIWizard[CLI Wizard]\n\n    WebWizard --> WebOptions{Select Options}\n    WebOptions --> Dataset[Choose Dataset<br/>\u2022 Anscombe's Quartet<br/>\u2022 Scatter Plot<br/>\u2022 Sine Wave]\n    Dataset --> WebPreview[Preview Files]\n    WebPreview --> WebDownload[Download .zip]\n\n    CLIWizard --> CLIRun[Run: node scripts/init-psd3-viz.js]\n    CLIRun --> CLIOptions{Configure}\n    CLIOptions --> VizName[Enter Visualization Name]\n    VizName --> VizType[Select Type<br/>\u2022 Static<br/>\u2022 Interactive]\n    VizType --> DataChoice[Choose Data<br/>\u2022 Example<br/>\u2022 Custom JSON]\n    DataChoice --> CLIGenerate[Generate Files]\n\n    WebDownload --> Extract[Extract Files]\n    CLIGenerate --> Build[Build & Run]\n    Extract --> Build\n    Build --> Success([Visualization Ready!])\n\n    style Start fill:#f5e6d3,stroke:#8b7355,stroke-width:2px\n    style Success fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n    style WebWizard fill:#e8dcc6,stroke:#8b7355,stroke-width:2px\n    style CLIWizard fill:#e8dcc6,stroke:#8b7355,stroke-width:2px\n";
  var handleAction42 = function(v) {
    return triggerMermaidRendering2;
  };
  var _docsHeader2 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render52 = function(v) {
    return div2([classes(["docs-page"])])([slot_6(_docsHeader2)(unit)(component13)({
      currentSection: new Just(TutorialSection.value)
    }), section([classes(["docs-hero"])])([div2([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text5("Getting Started")]), p([classes(["docs-hero-description"])])([text5("To get a feel for writing with this DSL we provide a command-line wizard bundled with the repo, a web-based wizard that you can run right here and you can also find instructions here to write your own visualizations from scratch.")])])]), section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("Getting Started with PS<$>D3")]), p_([text5("Welcome! This guide will help you install PSD3, set up your first project, and create your first data visualization using our scaffold wizard. By the end, you'll have a working visualization that you can view in your browser.")]), div2([classes(["tutorial-callout"])])([h3_([text5("\u{1F680} Try the Interactive Wizard")]), p_([text5("Want to skip the command line? Use our interactive web wizard to generate a complete visualization project right in your browser:")]), p_([a([href4("#/wizard"), classes(["tutorial-button tutorial-button--primary"])])([text5("Launch Interactive Wizard \u2192")])])])]), section([classes(["tutorial-section"]), id2("installation")])([h2([classes(["tutorial-section-title"])])([text5("Installation")]), p_([text5("Before we begin, ensure you have the following installed on your system:")]), h3([id2("prerequisites")])([text5("Prerequisites")]), ul_([li_([text5("Node.js (version 18 or higher)")]), li_([text5("npm or yarn package manager")]), li_([text5("PureScript compiler (purs)")]), li_([text5("Spago (PureScript package manager and build tool)")])]), p_([text5("If you don't have PureScript and Spago installed, you can install them globally:")]), pre_([code_([text5("npm install -g purescript spago")])])]), section([classes(["tutorial-section"]), id2("setup")])([h2([classes(["tutorial-section-title"])])([text5("Project Setup")]), p_([text5("Clone the PSD3 repository which includes the visualization wizard:")]), pre_([code_([text5("# Clone the PSD3 repository\ngit clone https://github.com/afcondon/PureScript-Tagless-D3.git\ncd PureScript-Tagless-D3\n\n# Install dependencies\nnpm install\nspago build")])]), p_([text5("The wizard is located in ")]), code_([text5("scripts/init-psd3-viz.js")]), text5(" and will generate all the files you need to get started.")]), section([classes(["tutorial-section"]), id2("wizard")])([h2([classes(["tutorial-section-title"])])([text5("Using the Wizard")]), p_([text5("PSD3 provides two ways to generate a visualization scaffold:")]), div2([classes(["diagram-container"])])([mermaidDiagram(wizardWorkflowDiagram)(new Just("wizard-workflow-diagram"))]), h3_([text5("Option 1: Interactive Web Wizard (Recommended)")]), p_([text5("The easiest way to get started is with our "), a([href4("#/wizard")])([text5("interactive web wizard")]), text5(". It provides:")]), ul_([li_([text5("Choose from pre-configured example datasets (Anscombe's Quartet, scatter plots, sine waves, etc.)")]), li_([text5("Educational tips and explanations at each step")]), li_([text5("Preview generated files before downloading")]), li_([text5("Download as a .zip file or copy to clipboard")])]), p_([a([href4("#/wizard"), classes(["tutorial-button tutorial-button--primary"])])([text5("Launch Interactive Wizard \u2192")])]), h3_([text5("Option 2: Command-Line Wizard")]), p_([text5("If you prefer working from the command line, use the CLI wizard. Run it from the project root:")]), pre_([code_([text5("node scripts/init-psd3-viz.js")])]), p_([text5("You'll be prompted for:")]), ul_([li_([strong_([text5("Visualization module name")]), text5(" - e.g., "), code_([text5("MyFirstChart")])]), li_([strong_([text5("Data record fields")]), text5(" - e.g., "), code_([text5("x:Number,y:Number,label:String")])]), li_([strong_([text5("Output directory")]), text5(" - default: "), code_([text5("src/viz/YourModuleName")])]), li_([strong_([text5("Generate Main.purs?")]), text5(" - Entry point for standalone viewing (y/n, default: y)")]), li_([strong_([text5("Generate index.html?")]), text5(" - (y/n, default: y)")])]), h3_([text5("Example Session")]), pre_([code_([text5("Visualization module name: ParabolaChart\nData record fields: x:Number,y:Number\nOutput directory: src/viz/ParabolaChart\nGenerate Main.purs? (y/n): y\nGenerate index.html? (y/n): y\n\n\u2713 Created src/viz/ParabolaChart/Unsafe.purs\n\u2713 Created src/viz/ParabolaChart/Model.purs\n\u2713 Created src/viz/ParabolaChart/Draw.purs\n\u2713 Created src/viz/ParabolaChart/Main.purs\n\u2713 Created src/viz/ParabolaChart/index.html\n\u2713 Created src/viz/ParabolaChart/README.md")])]), h3_([text5("Build and View")]), p_([text5("Now build and bundle your visualization:")]), pre_([code_([text5("# Compile the PureScript\nspago build\n\n# Bundle for the browser\nspago bundle --module Main --outfile src/viz/ParabolaChart/bundle.js\n\n# Open in browser\nopen src/viz/ParabolaChart/index.html")])])]), section([classes(["tutorial-section"]), id2("understanding")])([h2([classes(["tutorial-section-title"])])([text5("Understanding the Generated Code")]), p_([text5("The wizard generates several files following PSD3 best practices:")]), ul_([li_([strong_([text5("Unsafe.purs")]), text5(" - Contains type coercion functions that bridge PureScript's type system with D3's untyped JavaScript data")]), li_([strong_([text5("Model.purs")]), text5(" - Defines your data type and provides a placeholder for example data")]), li_([strong_([text5("Draw.purs")]), text5(" - Contains the visualization code with the "), code_([text5("datum_")]), text5(" accessor pattern")]), li_([strong_([text5("index.html")]), text5(" - Pre-configured HTML with D3.js loaded from CDN and the correct "), code_([text5("#chart")]), text5(" div")]), li_([strong_([text5("README.md")]), text5(" - Quick reference specific to your visualization")])]), h3([id2("datum-pattern")])([text5("The Datum_ Pattern")]), p_([text5("D3.js works with untyped JavaScript data, but PureScript is strongly typed. The "), code_([text5("datum_")]), text5(" accessor pattern solves this by isolating type coercion in the "), code_([text5("Unsafe.purs")]), text5(" module while providing typed accessors everywhere else.")]), p_([text5("In your "), code_([text5("Draw.purs")]), text5(", you'll use type-annotated lambdas to work with your data:")]), pre_([code_([text5('-- Use data in attributes\nA.cx (\\\\(d :: Datum_) _ -> datum_.x d)\n\n-- Use both data and index\nA.fill (\\\\(d :: Datum_) (i :: Index_) ->\n  if datum_.index i > 5 then "red" else "blue")\n\n-- Scale by data value\nA.radius (\\\\(d :: Datum_) _ -> datum_.y d * 2.0)')])]), p_([text5("The type annotations "), code_([text5("(d :: Datum_)")]), text5(" and "), code_([text5("(i :: Index_)")]), text5(" are required to help PureScript's type checker find the correct "), code_([text5("ToAttr")]), text5(" instance.")])]), render]);
  };
  var component47 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render52,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction42,
        initialize: new Just(Initialize43.value)
      })
    });
  })();

  // output/PSD3.Understanding.About/index.js
  var bind74 = /* @__PURE__ */ bind(bindHalogenM);
  var monadEffectHalogenM3 = /* @__PURE__ */ monadEffectHalogenM(monadEffectAff);
  var liftEffect41 = /* @__PURE__ */ liftEffect(monadEffectHalogenM3);
  var drawQuartet3 = /* @__PURE__ */ drawQuartet(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var discard77 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var triggerMermaidRendering3 = /* @__PURE__ */ triggerMermaidRendering(monadEffectHalogenM3);
  var pure41 = /* @__PURE__ */ pure(applicativeHalogenM);
  var slot_7 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize44 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var pipelineDiagram = "\ngraph LR\n    A[Data<br/>Raw structures] -->|Transform| B[Data Structure<br/>Relationships]\n    B -->|Encode| C[Data Presentation<br/>Visual marks]\n    C -->|Process| D[Perception<br/>Human insight]\n\n    style A fill:#faf8f5,stroke:#8b7355,stroke-width:2px\n    style B fill:#f5e6d3,stroke:#8b7355,stroke-width:2px\n    style C fill:#e8dcc6,stroke:#8b7355,stroke-width:2px\n    style D fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n\n    classDef psdLibrary fill:#f5e6d3,stroke:#8b7355,stroke-width:3px,color:#2c1810\n    class B,C psdLibrary\n";
  var handleAction43 = function(v) {
    return bind74(liftEffect41(eval_D3M(drawQuartet3(anscombesQuartet)("div.quartet-viz"))))(function() {
      return discard77(triggerMermaidRendering3)(function() {
        return pure41(unit);
      });
    });
  };
  var _docsHeader3 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render53 = function(v) {
    return div2([classes(["explanation-page"])])([slot_7(_docsHeader3)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"]), id2("heading-2")])([text5("What is This Project?")]), p_([text5('This project demonstrates an embedded DSL for building interactive data visualizations with PureScript. The DSL uses a Finally Tagless approach that allows multiple interpreters for the same "language" which allows us to generate working code using an FFI to D3 or documentation and other more complex uses which will be discussed below.            It takes a pragmatic approach to type-safety and side-effects by corralling side-effecting code thru accessor records. This allows it to present to the PureScript programmer as typed, while still leveraging everything possible from the D3 implementation behind the Foreign Function Interface.')])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"]), id2("heading-3")])([text5("Motivation")]), p_([text5('I have built moderately complex, custom interactive data visualisations in the past both in JavaScript and PureScript, using D3.js. I found that JavaScript generally, and D3 in particular, seemed to work best for visualisations that were less "app-like" and more "chart-like". What i mean by this is that when the complexity started to rise to the level of a small application and when multiple programmers were involved, or if one had to return to some code after time had elapsed, the whole thing was very brittle and refactoring of it prohibitively difficult.')]), p_([text5('This could certainly be a "feature, not a bug" for some domains of application such as building a big beautiful rich visualisation for a one-off publication such as a New York Times feature. However, when the visualisation is used to '), em_([text5("control")]), text5(" application behaviour or the visualisation begins to approach the complexity and multi-layered-ness of an app...this all in one single script language is a real problem, at least in my experience.")]), p_([text5("In PureScript it is common, and easy, to use JavaScript libraries via the FFI initially as it is a very quick way to get access to the enormous world of functionality that exists in open source JavaScript libraries. Sometimes this can be sufficient, you wrap a component or a function and its abstractions never leak and all is well. Other times, you wrap something but there's a kind of impedance mismatch with the way the JavaScript abstraction work and the way you'd like to handle, and particularly to compose, things in the purely functional world. D3.js was definitely the latter, for me.")]), p_([text5("D3.js is a big library with thousands of API end-points but, crucially, not all of those end-points are problematic for composing larger scale applications or weaving visualisations into PureScript web applications. Instead, its is primarily two core areas of the API, Selection and Simulation (more details on these later) which tend to actually "), em_([text5("structure")]), text5(" programs in a characteristic D3 / JavaScript vernacular. It is these APIs that are first wrapped (by FFI) and then made available in purely functional idiomatic way by this library.")]), p_([text5("A secondary, but also very important, consideration is the ability to design and work with Algebraic Data Types (ADTs) and the rich container libraries that are available in PureScript while building and implementing visualisations and especially the code that surrounds the visualization. While D3 ultimately is a kind of array programming DSL "), em_([text5("within")]), text5(' JavaScript and our PureScript eDSL is going to bottom out to some sort of "arrays mapped over the DOM" too, we want to be able to create data models that are more sophisticated and have better invariants as these are keys to both composability and maintainable, long-lived programs.')])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"]), id2("heading-4")])([text5("The Data Visualization Process")]), h3([id2("anscombe")])([text5("Why Visualize? Anscombe's Quartet")]), p_([text5("The famous Anscombe's Quartet demonstrates why visualization is essential. These four datasets have nearly identical statistical properties - same mean, variance, correlation, and linear regression line - yet reveal completely different patterns when visualized:")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["quartet-viz"])])([])]), p_([text5("Summary statistics alone would suggest these datasets are interchangeable, but the visualizations tell a very different story: linear relationship, curved relationship, linear with outlier, and vertical with outlier. This perfectly illustrates why we need visualization - numbers hide patterns that become immediately obvious when seen.")]), p_([text5('Data visualization transforms "boring" - but more importantly '), em_([text5("less informative")]), text5(" tables of data into perceivable patterns. We can think of this as a pipeline in which steps 2 and 3 are the purpose of this library.")]), ol_([li_([strong_([text5("Data")]), text5(" - Raw data structures (tables, JSON, etc.)")]), li_([strong_([text5("Data structure")]), text5(" - Relationships between data elements")]), li_([strong_([text5("Data presentation")]), text5(" - Visual encoding (HTML/SVG/Canvas)")]), li_([strong_([text5("Perception")]), text5(" - Human insight and understanding")])]), div2([classes(["diagram-container"])])([mermaidDiagram(pipelineDiagram)(new Just("pipeline-diagram"))]), p_([text5("The goal is to make relationships in data visible through appropriate visual encoding, enabling the human visual system to process patterns that would be difficult or impossible to perceive in tabular form.")]), h3([id2("heading-5")])([text5("Design philosophy of D3*")]), ul_([li_([text5("(as I understand it)")])]), p_([text5("D3's great innovation was to enable an enormous range of visualizations using some simple fundamental concepts and a small core API. It supports dataviz from simple bar charts to complex hierarchical layouts, force-directed graphs, geographic projections, and interactive dashboards. Despite their visual diversity, these visualizations share common structural patterns: data is bound to DOM elements, attributes are computed from data, and layouts determine spatial positioning.")]), p_([text5("Something that people with limited prior knowledge / experience of data visualisation often seem to find surprising is the degree to which D3 is "), em_([text5("fundamentally different")]), text5(' from "a charting library". While the library has some affordances that make it very easy to do common visualisations it is not in any way about "canned visualisations". Rather, it is a language for describing a relationship between arrays of data and arbitrary constructions of DOM (HTML or SVG) element or marks on Canvas, and it could in principle be used to do auditory "visualisation" or, who knows, maybe olfactory "visualisation" or drone displays or whatever.')]), p_([text5("Another revolutionary aspect of D3 was that it was "), em_([text5("screen/web native")]), text5(" - right from the beginning it supported responsive design, transitions, animations, force-layouts all of which are completely distinct from data visualisation on paper.")]), p_([text5("You can get a greater sense of the potential of D3 and the range of things that have thus far been produced using it at "), a([href4("https://observablehq.com/")])([text5("ObservableHQ")]), text5(".")]), h3([id2("heading-6")])([text5("Design philosophy of PS<$>D3")]), p_([text5("This library presents a slighly more formal grammar embedded in a language that is a lot better suited to larger and more long-lived projects. Whereas D3 has patterns of use that you learn, in PS<$>D3 the pattern is formalised into a grammar with an interpreter. Moreover, the same grammar can be interpreted by different interpreters directly "), em_([text5("in")]), text5(" PureScript, which, as we will see creates some powerful new uses.")]), p_([text5(`Where D3 enabled data visualisers to create movement and responsiveness, PS<$>D3 seeks to enable something that's theoretically possible in D3 but not much seen in practice and that is using the data visualisation as the user interface. This is not the same thing as "interactive visualisation" in the sense of "explorable" visualisation, ie one in which you can interact with the elements `), em_([text5("but only to manipulate the visualisation itself")]), text5(". That is a different, and more limited, sense of interaction. What we are talking about when building UI with data visualisation is leveraging the information density of data visualisation to provide direct manipulation of complex or large systems.")]), p_([text5('This is actually not a revolutionary idea - think how much of an improvement over the initial "folders of icons" on the Mac the NeXT column browser was. But it is a direction of travel that has been effectively lost during the web UI revolution of the past 20 years.')]), p_([text5("This repo and website contains one example of how this might work, the Code Explorer.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"]), id2("heading-7")])([text5("Project Goals (and non-Goals)")]), h3([id2("heading-8")])([text5("Priorities and Trade-offs")]), p_([text5("We have two principal priorities in writing this library and since you can't have two number one priorities, some trade-offs are inevitable which we will discuss here.")]), table([classes(["tutorial-table"])])([thead_([tr_([th_([text5("Primary")]), th_([text5("Non-goals")]), th_([text5("Sub-goals")])])]), tbody_([tr_([td_([strong_([text5("Expressivity:")]), text5(" fully equivalent to D3.js")]), td_([strong_([text5("Completeness:")]), text5(" not all D3.js API surface is needed")]), td_([text5("Prefer idiomatic PureScript to exposing D3 APIs directly")])]), tr_([td_([strong_([text5("Readability:")]), text5(" as readable as D3.js equivalent")]), td_([strong_([text5("Modelling")]), text5(" of D3 state complexity thru type-system")]), td_([text5("Design for progressive enhancement")])]), tr_([td_([strong_([text5("Composable:")]), text5(' suitable for "programming in the large"')]), td_([strong_([text5("Performance")]), text5(" equality to D3")]), td_([text5("Showcase PureScript ecosystem and libraries")])])])]), h3([id2("heading-9")])([text5("Goals: details")]), h4([id2("heading-10")])([text5("Expressivity")]), p_([text5("As alluded to above, expressivity is a key to D3's success - it's not limited to some library of canned visualisations and it's far, far more than even the most parameterized control of colours and symbols. It's important not to lose that in making D3 available directly in PureScript.")]), h4([id2("heading-11")])([text5("Readability")]), p_([text5("If we look at D3.js as a kind of embedded DSL in JavaScript it is certainly clear and readable in its core feature: declaratively associating some array(s) of data with some elements in the DOM and attributes of those elements. While it is definitely not a goal to reproduce the structures of D3js own language in PureScript per se, the goal is to have the same readability, leverage the good work that Mike Bostock did in developing it. At the same time the library should be as idiomatically PureScript / Haskell style as possible.")]), h4([id2("heading-12")])([text5("Composability")]), p_([text5("A related concern to readability is composability, the separation of concerns that makes componentisation possible and which makes possible programming in the large.")]), p_([text5("YMMV but for me this is where the D3 / JavaScript approach breaks down.")]), p_([text5("If you are a PureScript or Haskell programmer you probably know what i mean by this and if you are, say, a JavaScript D3 programmer perhaps that will seem odd or even contentious.")]), p_([text5("The benefits we seek from composability include:")]), ul_([li_([text5("better composability of sub-programs")]), li_([text5("better expressiveness in describing the problem domain")]), li_([text5("better correctness in implementations (ie fewer bugs)")]), li_([text5("better ability to evolve programs due to shifting requirements (re-factoring)")])]), p_([text5("Ideally, i would like the person coding the data layer and data model to be somewhat insulated from the concerns of the person using that data model to create a visualisation. And likewise, i would like the person developing the data visualisation to be somewhat insulated from the concerns of a web app developer. Now, these might very well all be the "), em_([text5("same person")]), text5(" but separating the concerns like this makes it easier to evolve the code and, crucially, makes it all a little less brittle.")]), h3([id2("heading-13")])([text5("Non-goals: details")]), h4([id2("heading-14")])([text5("Complete API coverage")]), p_([text5("As alluded to above, there's lots of API in D3 that needs nothing more than an FFI wrapper to be accessible from a PureScript eDSL. D3 is both modular and somewhat functional in style (in the JavaScript sense of functional programming, to be clear). So it was from the start a non-goal to completely expose all of D3 as "), em_([text5("idiomatic")]), text5(" PureScript where a simple wrapper was sufficient.")]), p_([text5("Furthermore, i have only written those wrappers "), em_([text5("as I needed them")]), text5(" to there are still "), em_([text5("many")]), text5(" parts of D3 that are not covered by this eDSL.")]), p_([text5("Addendum 2025 - the advent of LLMs and coding assistance agents means that perhaps complete API coverage might arrive sooner than expected.")]), h4([id2("heading-15")])([text5("Modelling of D3 State")]), p_([text5("This might seem like a surprising choice - D3 is inherently "), em_([text5("very")]), text5(` stateful, there's state in D3, there's state in the DOM, there's statefulness in your (pure) data after you give it to D3. State everywhere. In many cases in functional programming you might try to ameliorate the dangers of this by explicitly modelling the state, using a State Monad or marking everything that changes or depends upon state as "Effect"-full.`)]), p_([text5("Indeed i have tried this approach in the past. In this library i have instead striven to isolate the statefulness to only the code that uses eDSL represented by the "), code_([text5("Selection")]), text5(" and "), code_([text5("Simulation")]), text5(" monads. This "), em_([text5("significantly")]), text5(" removes but cannot fully eliminate the issues associated with state.")]), h4([id2("heading-16")])([text5("Performance equality with D3")]), p_([text5("While this was a non-goal in practice it doesn't seem to have been a problem. Essentially, this is because PS<$>D3 simply leverages D3.js for all the performance critical aspects and because the FFI has been kept simple by the decision described in the previous section.")]), p_([text5("The performance bottlenecks in a web data visualisation are, by their nature, going to be the assignment of potentially millions of attributes to potentially millions of DOM elements. D3.js does this extremely well and the PureScript layer doesn't compromise it much, if at all.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"]), id2("heading-17")])([text5("What's a DSL? and what's an eDSL?")]), h3([id2("heading-18")])([text5("Domain Specific Language")]), p_([text5("Programming language tailored to a particular domain.")]), p_([text5("Might be limited compared to general purpose programming language.")]), p_([text5("But, may also be easier for novices, domain experts, non-programmers to use.")]), h3([id2("heading-19")])([text5("Embedded Domain Specific Language")]), p_([text5("Embedded Domain Specific Language makes domain specific tasks easier "), em_([text5("without")]), text5(" limiting the programmer in any way - they still have access to all parts of the host language.")]), p_([text5("This has Pros & Cons")])])]);
  };
  var component48 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render53,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction43,
        initialize: new Just(Initialize44.value)
      })
    });
  })();

  // output/PSD3.Understanding.UnderstandingTabs/index.js
  var eq16 = /* @__PURE__ */ eq(eqRoute);
  var append31 = /* @__PURE__ */ append(semigroupArray);
  var renderTab = function(route) {
    return function(label5) {
      return function(currentRoute) {
        var isActive = eq16(route)(currentRoute);
        var classes2 = append31(["understanding-tab"])((function() {
          if (isActive) {
            return ["understanding-tab--active"];
          }
          ;
          return [];
        })());
        if (isActive) {
          return span3([classes(classes2)])([text5(label5)]);
        }
        ;
        return a([href4("#" + routeToPath(route)), classes(classes2)])([text5(label5)]);
      };
    };
  };
  var render54 = function(currentRoute) {
    return nav([classes(["understanding-tabs"])])([renderTab(UnderstandingConcepts.value)("Concepts")(currentRoute), renderTab(UnderstandingPatterns.value)("Patterns")(currentRoute), renderTab(UnderstandingPhilosophy.value)("Philosophy")(currentRoute)]);
  };
  var component49 = /* @__PURE__ */ mkComponent({
    initialState: /* @__PURE__ */ identity(categoryFn),
    render: render54,
    "eval": /* @__PURE__ */ mkEval(defaultEval)
  });

  // output/PSD3.Understanding.Concepts/index.js
  var discard78 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var monadEffectHalogenM4 = /* @__PURE__ */ monadEffectHalogenM(monadEffectAff);
  var triggerPrismHighlighting3 = /* @__PURE__ */ triggerPrismHighlighting(monadEffectHalogenM4);
  var triggerMermaidRendering4 = /* @__PURE__ */ triggerMermaidRendering(monadEffectHalogenM4);
  var slot_8 = /* @__PURE__ */ slot_();
  var slot_1 = /* @__PURE__ */ slot_8({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var slot_22 = /* @__PURE__ */ slot_8({
    reflectSymbol: function() {
      return "tabs";
    }
  })(ordUnit);
  var Initialize45 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var typeSafeAttributeDiagram = `
graph TB
    subgraph "Attribute Types"
        Static["Static Value<br/>cx = 50<br/><i>attr 'cx' 50</i>"]
        Datum["Datum Function<br/>cx = \u03BBd \u2192 d.x<br/><i>attr 'cx' (datum_ _.x)</i>"]
        DatumIdx["Datum+Index Function<br/>cx = \u03BBd i \u2192 d.x + i * 10<br/><i>attr 'cx' (\\\\d i -> ...)</i>"]
    end

    subgraph "Type Classes"
        AttrClass[IsAttribute typeclass]
        SetAttr[SetAttribute instance]
    end

    subgraph "Runtime"
        Resolve[Type Resolution]
        Apply[Apply to Elements]
    end

    Static --> AttrClass
    Datum --> AttrClass
    DatumIdx --> AttrClass

    AttrClass --> SetAttr
    SetAttr --> Resolve
    Resolve --> Apply

    style Static fill:#f5e6d3,stroke:#8b7355,stroke-width:2px
    style Datum fill:#e8dcc6,stroke:#8b7355,stroke-width:2px
    style DatumIdx fill:#d4c4b0,stroke:#8b7355,stroke-width:2px

    classDef typesafe fill:#e8dcc6,stroke:#8b7355,stroke-width:3px,color:#2c1810
    class AttrClass,SetAttr typesafe
`;
  var handleAction44 = function(v) {
    return discard78(triggerPrismHighlighting3)(function() {
      return triggerMermaidRendering4;
    });
  };
  var finallyTaglessArchDiagram = '\ngraph TB\n    subgraph "User Code"\n        UC[Visualization Code]\n    end\n\n    subgraph "Finally Tagless DSL"\n        SM[SelectionM Monad]\n        CM[Capabilities]\n    end\n\n    subgraph "Interpreters"\n        D3I[D3 Interpreter]\n        STI[String Interpreter]\n        MTI[MetaTree Interpreter]\n    end\n\n    subgraph "Outputs"\n        D3O[D3.js Visualization]\n        STO[Debug String]\n        MTO[AST Visualization]\n    end\n\n    UC --> SM\n    SM --> CM\n    CM --> D3I\n    CM --> STI\n    CM --> MTI\n    D3I --> D3O\n    STI --> STO\n    MTI --> MTO\n\n    style UC fill:#f5e6d3,stroke:#8b7355,stroke-width:2px\n    style SM fill:#e8dcc6,stroke:#8b7355,stroke-width:2px\n    style CM fill:#e8dcc6,stroke:#8b7355,stroke-width:2px\n    style D3I fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n    style STI fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n    style MTI fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n\n    classDef tagless fill:#e8dcc6,stroke:#8b7355,stroke-width:3px,color:#2c1810\n    class SM,CM tagless\n';
  var _tabs = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _docsHeader4 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render55 = function(v) {
    return div2([classes(["explanation-page"])])([slot_1(_docsHeader4)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), renderTOC({
      title: "Page Contents",
      items: [tocAnchor("heading-finally-tagless")("Finally Tagless")(0), tocAnchor("heading-selectionm")("The SelectionM Monad")(0), tocAnchor("heading-capabilities")("Capabilities & Interpreters")(0), tocAnchor("heading-type-safe")("Type-Safe Attribute System")(0)],
      image: new Just("assets/bookmark-images/understanding.jpeg")
    }), div2([classes(["explanation-content"])])([slot_22(_tabs)(unit)(component49)(UnderstandingConcepts.value), h1([classes(["explanation-title"])])([text5("Technical Architecture")]), section([classes(["concept-section"])])([h2([id2("heading-finally-tagless")])([text5("Finally Tagless")]), p_([text5("We want the library to be extensible and, in fact, D3 while it's the inspiration and a core target, is not the only possible implementation of the SelectionM monad. For this reason we choose the design pattern called Finally Tagless encoding and implement "), em_([text5("interpreters")]), text5(" for the SelectionM.")]), div2([classes(["diagram-container"])])([mermaidDiagram(finallyTaglessArchDiagram)(new Just("finally-tagless-diagram"))]), p_([text5("Furthermore, using this pattern, we can now "), em_([text5("extend")]), text5(" the SelectionM monad as can be seen in the library where we provide a SimulationM2 monad which extends the our static DOM element visualizations by allowing them to move under the control of a Force Layout algorithm.")])]), section([classes(["concept-section"])])([h2([id2("heading-selectionm")])([text5("The SelectionM Monad")]), h3_([text5("Grammar")]), p_([text5("D3.js is, naturally, a JavaScript idiomatic library, making use of function chaining as a readable and easily-learnt API.")]), p_([text5("PS<$>D3 formalizes this slightly while retaining the general shape of the pattern and core concepts such as Selection, Attribute.")]), p_([text5("The basic grammar of PS<$>D3 is just this:")]), ul_([li_([text5("we can "), em_([text5("attach")]), text5(' our visualisation into the DOM, typically hooking into something like <div id="viz">')]), li_([text5("we can build up whatever additional structure we want inside that, using "), em_([text5("appendTo")]), text5(` to for example put an <svg> with some <g>'s inside the <div id="viz">`)]), li_([text5("we can apply "), em_([text5("attributes")]), text5(" to the elements we've created: styles, ids, css classes and such")]), li_([text5("we can apply "), em_([text5("behaviors")]), text5(" to the elements we've created: things like zoom, drag and click event-handlers")]), li_([text5("we can "), em_([text5("join")]), text5(" some array of data at this point, such that when we next "), em_([text5("add")]), text5(" something, say a <circle>, we will put "), em_([text5("n")]), text5(" <circle>s in, not just one.")])]), p_([text5("In D3 the thing that is being acted on in this chain of functions is The Selection...")]), h3_([text5("The SelectionM Monad")]), p_([text5("Where functions would be chained in JavaScript, the natural counterpart in PureScript is a Monad, specifically the SelectionM Monad which embodies the core functions above and a few others.")]), p_([text5("It looks like this:")]), codeSnippet("selectionMClass")("haskell")]), section([classes(["concept-section"])])([h2([id2("heading-capabilities")])([text5("Capabilities & Interpreters")]), p_([text5("The SimulationM2 monad looks like:")]), codeSnippet("simulationM2Class")("haskell")]), section([classes(["concept-section"])])([h2([id2("heading-type-safe")])([text5("Type-Safe Attribute System")]), p_([text5("A key innovation of D3 is the easy, natural way one can go from static to data-driven attributes, for example going from putting "), em_([text5("n")]), text5(" identical circles into the DOM vs putting "), em_([text5("n")]), text5(" circles of differing colours and sizes into the DOM. This is the essence (with join/simulation) of Data Drive Documents, ie D3.")]), p_([text5("In PureScript we need a little bit of typeclass trickery to get the same clean syntax, and we use it to enable interchangeable, type-safe attribute setters. For example, we can use an attribute "), em_([text5("cx")]), text5(" (the center x position of a circle) which can take:")]), ul_([li_([text5("a numeric value OR,")]), li_([text5("a lambda function which takes the datum we are using to a numeric value OR,")]), li_([text5("a lambda function which takes the datum AND the index of that datum in the selection")])]), div2([classes(["diagram-container"])])([mermaidDiagram(typeSafeAttributeDiagram)(new Just("type-safe-attribute-diagram"))]), p_([text5("This type system ensures that attributes are always used correctly at compile time, preventing runtime errors while maintaining the flexibility that makes D3 so powerful.")])])])]);
  };
  var component50 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render55,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction44,
        initialize: new Just(Initialize45.value)
      })
    });
  })();

  // output/PSD3.Understanding.DataFlowViz/index.js
  var bind75 = /* @__PURE__ */ bind(bindHalogenM);
  var monadEffectHalogenM5 = /* @__PURE__ */ monadEffectHalogenM(monadEffectAff);
  var liftEffect42 = /* @__PURE__ */ liftEffect(monadEffectHalogenM5);
  var draw24 = /* @__PURE__ */ draw4(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var liftAff32 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var log5 = /* @__PURE__ */ log3(monadEffectHalogenM5);
  var draw110 = /* @__PURE__ */ draw17(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var pure42 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize46 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var render56 = function(v) {
    return div2([classes(["example-page"])])([renderHeader(DataFlowViz.value), main([classes(["tutorial-content"])])([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("4. Data Flow Visualizations")]), p_([text5("Chord and Sankey diagrams are specialized visualizations for showing relationships and flows between entities. Both use visual metaphors - ribbons and flows - to make complex interconnections immediately comprehensible.")]), p_([text5("These visualization types excel at revealing patterns in network data, resource flows, and dependencies that would be difficult to understand in tabular form.")])]), section([id2("chord"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("1. Chord Diagram: Circular Relationships")]), p_([text5("Chord diagrams show relationships and flows between entities in a circular layout. They're particularly effective for displaying interconnected systems, dependencies, or flows between groups.")]), p_([text5("This example visualizes dependencies between fundamental programming concepts. Each arc represents a concept, and the ribbons show how strongly they depend on each other.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["chord-viz"])])([])]), p_([text5("The circular layout makes it easy to see both direct dependencies (following a single chord) and the overall pattern of interconnections in the system. The thickness of each chord represents the strength of the relationship.")]), p_([a([href4("#/example/chord-diagram"), classes(["tutorial-link"])])([text5("View interactive example with full source code \u2192")])])]), section([id2("sankey"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("2. Sankey Diagram: Flow Visualization")]), p_([text5("Sankey diagrams visualize the flow of resources, energy, costs, or other quantities through a system. The width of each connection is proportional to the flow quantity, making it easy to identify dominant flows and inefficiencies.")]), p_([text5("This diagram shows energy flows in the UK energy system, from primary energy sources through transformation and distribution to final consumption. The Sankey layout algorithm automatically positions nodes and creates smooth flow paths.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["sankey-viz"])])([])]), p_([text5("The width of each flow represents the quantity of energy. Notice how the diagram reveals energy losses in transformation processes and highlights which sources contribute most to final consumption.")]), p_([a([href4("#/example/sankey-diagram"), classes(["tutorial-link"])])([text5("View interactive example with full source code \u2192")])])])])]);
  };
  var handleAction45 = function(v) {
    return bind75(liftEffect42(eval_D3M(draw24(exampleMatrix)(exampleLabels)("div.chord-viz"))))(function() {
      return bind75(liftAff32(get4(string)("./data/energy.csv")))(function(result) {
        if (result instanceof Left) {
          return log5("DataFlowViz: Failed to load Sankey data");
        }
        ;
        if (result instanceof Right) {
          return bind75(liftEffect42(eval_D3M(draw110(result.value0.body)("div.sankey-viz"))))(function() {
            return pure42(unit);
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.Understanding.DataFlowViz (line 131, column 5 - line 135, column 18): " + [result.constructor.name]);
      });
    });
  };
  var component51 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          sankeyLayout: initialSankeyLayoutState_
        };
      },
      render: render56,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction45,
        initialize: new Just(Initialize46.value)
      })
    });
  })();

  // output/D3.Viz.ClusterVizOriented/index.js
  var map83 = /* @__PURE__ */ map(functorArray);
  var compare17 = /* @__PURE__ */ compare(ordInt);
  var compare18 = /* @__PURE__ */ compare(ordNumber);
  var append32 = /* @__PURE__ */ append(semigroupArray);
  var bind76 = /* @__PURE__ */ bind(bindArray);
  var minimum7 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum13 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var max17 = /* @__PURE__ */ max(ordNumber);
  var abs4 = /* @__PURE__ */ abs(ordNumber)(ringNumber);
  var show53 = /* @__PURE__ */ show(showInt);
  var show128 = /* @__PURE__ */ show(showNumber);
  var classed43 = /* @__PURE__ */ classed(toAttrString);
  var x40 = /* @__PURE__ */ x(toAttrNumber);
  var y40 = /* @__PURE__ */ y(toAttrNumber);
  var fill38 = /* @__PURE__ */ fill(toAttrString);
  var fontSize21 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text31 = /* @__PURE__ */ text6(toAttrString);
  var discard79 = /* @__PURE__ */ discard(discardUnit);
  var d20 = /* @__PURE__ */ d(toAttrString);
  var strokeColor36 = /* @__PURE__ */ strokeColor(toAttrString);
  var fillOpacity12 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeWidth32 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx24 = /* @__PURE__ */ cx(toAttrNumber);
  var cy25 = /* @__PURE__ */ cy(toAttrNumber);
  var radius28 = /* @__PURE__ */ radius(toAttrNumber);
  var Vertical2 = /* @__PURE__ */ (function() {
    function Vertical4() {
    }
    ;
    Vertical4.value = new Vertical4();
    return Vertical4;
  })();
  var Horizontal2 = /* @__PURE__ */ (function() {
    function Horizontal4() {
    }
    ;
    Horizontal4.value = new Horizontal4();
    return Horizontal4;
  })();
  var Radial2 = /* @__PURE__ */ (function() {
    function Radial4() {
    }
    ;
    Radial4.value = new Radial4();
    return Radial4;
  })();
  var Isometric = /* @__PURE__ */ (function() {
    function Isometric3() {
    }
    ;
    Isometric3.value = new Isometric3();
    return Isometric3;
  })();
  var valuedToHierarchy3 = function(v) {
    return new HNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      parent: Nothing.value,
      children: map83(valuedToHierarchy3)(v.value0.children)
    });
  };
  var sortValuedByHeightAndValue3 = function(v) {
    var comparator = function(v1) {
      return function(v2) {
        var v3 = compare17(v2.value0.height)(v1.value0.height);
        if (v3 instanceof EQ) {
          return compare18(v2.value0.value)(v1.value0.value);
        }
        ;
        return v3;
      };
    };
    var $74 = length3(v.value0.children) === 0;
    if ($74) {
      return new VNode(v.value0);
    }
    ;
    var sortedGrandchildren = map83(sortValuedByHeightAndValue3)(v.value0.children);
    var sortedChildren = sortBy(comparator)(sortedGrandchildren);
    return new VNode({
      data_: v.value0.data_,
      depth: v.value0.depth,
      height: v.value0.height,
      parent: v.value0.parent,
      value: v.value0.value,
      children: sortedChildren
    });
  };
  var showClusterOrientation = {
    show: function(v) {
      if (v instanceof Vertical2) {
        return "Vertical";
      }
      ;
      if (v instanceof Horizontal2) {
        return "Horizontal";
      }
      ;
      if (v instanceof Radial2) {
        return "Radial";
      }
      ;
      if (v instanceof Isometric) {
        return "Isometric";
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.ClusterVizOriented (line 37, column 1 - line 41, column 31): " + [v.constructor.name]);
    }
  };
  var show213 = /* @__PURE__ */ show(showClusterOrientation);
  var getProjection = function(orientation) {
    if (orientation instanceof Vertical2) {
      return {
        getX: clusterVerticalX,
        getY: clusterVerticalY,
        linkPath: verticalLinkPath2,
        title: "Cluster Layout - Vertical Dendrogram",
        scale: 1
      };
    }
    ;
    if (orientation instanceof Horizontal2) {
      return {
        getX: clusterHorizontalX,
        getY: clusterHorizontalY,
        linkPath: horizontalLinkPath,
        title: "Cluster Layout - Horizontal Dendrogram",
        scale: 1
      };
    }
    ;
    if (orientation instanceof Radial2) {
      return {
        getX: clusterRadialX,
        getY: clusterRadialY,
        linkPath: radialLinkPath,
        title: "Cluster Layout - Radial Dendrogram",
        scale: 1
      };
    }
    ;
    if (orientation instanceof Isometric) {
      return {
        getX: clusterIsometricX,
        getY: clusterIsometricY,
        linkPath: isometricLinkPath,
        title: "Cluster Layout - Isometric 2.5D Dendrogram",
        scale: isometricScale
      };
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.ClusterVizOriented (line 57, column 29 - line 85, column 6): " + [orientation.constructor.name]);
  };
  var getAllNodes5 = function(v) {
    var $79 = length3(v.children) === 0;
    if ($79) {
      return [v];
    }
    ;
    return append32([v])(bind76(v.children)(getAllNodes5));
  };
  var eqClusterOrientation = {
    eq: function(x115) {
      return function(y113) {
        if (x115 instanceof Vertical2 && y113 instanceof Vertical2) {
          return true;
        }
        ;
        if (x115 instanceof Horizontal2 && y113 instanceof Horizontal2) {
          return true;
        }
        ;
        if (x115 instanceof Radial2 && y113 instanceof Radial2) {
          return true;
        }
        ;
        if (x115 instanceof Isometric && y113 instanceof Isometric) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq17 = /* @__PURE__ */ eq(eqClusterOrientation);
  var calculateBounds = function(getX) {
    return function(getY) {
      return function(nodes) {
        var yCoords = map83(getY)(nodes);
        var xCoords = map83(getX)(nodes);
        var minY = fromMaybe(0)(minimum7(yCoords));
        var minX = fromMaybe(0)(minimum7(xCoords));
        var maxY = fromMaybe(0)(maximum13(yCoords));
        var maxX = fromMaybe(0)(maximum13(xCoords));
        return {
          minX,
          maxX,
          minY,
          maxY
        };
      };
    };
  };
  var draw25 = function(dictBind) {
    var bind121 = bind(dictBind);
    var discard115 = discard79(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      var pure56 = pure(Applicative0);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(orientation) {
          return function(flareData) {
            return function(selector) {
              var proj = getProjection(orientation);
              var root3 = hierarchy(flareData)(getChildren);
              var valued = sum4(root3)(getValue);
              var sortedValued = sortValuedByHeightAndValue3(valued);
              var sorted = valuedToHierarchy3(sortedValued);
              var config = {
                nodeSize: defaultClusterConfig2.nodeSize,
                separation: defaultClusterConfig2.separation,
                size: {
                  width: 1600 * proj.scale,
                  height: 1200 * proj.scale
                }
              };
              var layout = cluster2(config)(sorted);
              var nodes = getAllNodes5(layout);
              var bounds = calculateBounds(proj.getX)(proj.getY)(nodes);
              var viewBoxSpec = (function() {
                if (orientation instanceof Isometric) {
                  var width25 = bounds.maxX - bounds.minX + 2 * 50;
                  var height25 = bounds.maxY - bounds.minY + 2 * 50;
                  return {
                    x: bounds.minX - 50,
                    y: bounds.minY - 50,
                    width: width25,
                    height: height25
                  };
                }
                ;
                if (orientation instanceof Radial2) {
                  var maxRadius = max17(abs4(bounds.minX))(max17(abs4(bounds.maxX))(max17(abs4(bounds.minY))(abs4(bounds.maxY))));
                  var side = (maxRadius + 50) * 2;
                  return {
                    x: -(maxRadius + 50),
                    y: -(maxRadius + 50),
                    width: side,
                    height: side
                  };
                }
                ;
                return {
                  x: 0,
                  y: 0,
                  width: 1600,
                  height: 1200
                };
              })();
              return bind121(liftEffect53(log2("\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557")))(function() {
                return bind121(liftEffect53(log2("\u2551   CLUSTER VISUALIZATION: " + (show213(orientation) + " orientation"))))(function() {
                  return bind121(liftEffect53(log2("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D")))(function() {
                    return bind121(liftEffect53(log2("Rendering " + (show53(length3(nodes)) + " nodes"))))(function() {
                      return bind121(liftEffect53(log2("Bounds: minX=" + (show128(bounds.minX) + (", maxX=" + (show128(bounds.maxX) + (", minY=" + (show128(bounds.minY) + (", maxY=" + show128(bounds.maxY))))))))))(function() {
                        return bind121(liftEffect53(log2("ViewBox: x=" + (show128(viewBoxSpec.x) + (", y=" + (show128(viewBoxSpec.y) + (", width=" + (show128(viewBoxSpec.width) + (", height=" + show128(viewBoxSpec.height))))))))))(function() {
                          return bind121(attach6(selector))(function(root$prime) {
                            return bind121(appendTo6(root$prime)(Svg.value)([viewBox(viewBoxSpec.x)(viewBoxSpec.y)(viewBoxSpec.width)(viewBoxSpec.height), classed43("cluster"), classed43("cluster-" + show213(orientation))]))(function(svg2) {
                              return bind121(appendTo6(svg2)(Text2.value)([x40(viewBoxSpec.x + 10), y40(viewBoxSpec.y + 20), fill38("#333"), fontSize21(16), text31(proj.title), classed43("title")]))(function() {
                                return bind121(appendTo6(svg2)(Group.value)([classed43("links")]))(function(linksGroup) {
                                  return bind121(appendTo6(svg2)(Group.value)([classed43("nodes")]))(function(nodesGroup) {
                                    var renderLinks = function(v) {
                                      return discard115(traverse_16(function(v1) {
                                        var pathData = (function() {
                                          if (orientation instanceof Isometric) {
                                            return isometricClusterLinkPath(v)(v1);
                                          }
                                          ;
                                          if (orientation instanceof Radial2) {
                                            return proj.linkPath(v.x)(v.y)(v1.x)(v1.y);
                                          }
                                          ;
                                          return proj.linkPath(proj.getX(v))(proj.getY(v))(proj.getX(v1))(proj.getY(v1));
                                        })();
                                        return bind121(appendTo6(linksGroup)(Path2.value)([d20(pathData), fill38("none"), strokeColor36("#555"), fillOpacity12(0.4), strokeWidth32(1.5), classed43("link")]))(function() {
                                          return pure56(unit);
                                        });
                                      })(v.children))(function() {
                                        return traverse_16(renderLinks)(v.children);
                                      });
                                    };
                                    var renderNode = function(v) {
                                      var nodeName3 = getName(v.data_);
                                      var isLeaf = length3(v.children) === 0;
                                      var nodeRadius2 = (function() {
                                        if (isLeaf) {
                                          return 3;
                                        }
                                        ;
                                        return 4;
                                      })();
                                      return bind121(appendTo6(nodesGroup)(Circle.value)([cx24(proj.getX(v)), cy25(proj.getY(v)), radius28(nodeRadius2), fill38("#999"), strokeColor36("#555"), strokeWidth32(1.5), classed43("node"), classed43("depth-" + show53(v.depth)), classed43((function() {
                                        if (isLeaf) {
                                          return "leaf";
                                        }
                                        ;
                                        return "internal";
                                      })())]))(function() {
                                        return discard115((function() {
                                          var $89 = !isLeaf && (eq17(orientation)(Vertical2.value) || eq17(orientation)(Horizontal2.value));
                                          if ($89) {
                                            return bind121(appendTo6(nodesGroup)(Text2.value)([x40(proj.getX(v) + 8), y40(proj.getY(v)), fill38("#333"), fontSize21(10), text31(nodeName3), classed43("label")]))(function() {
                                              return pure56(unit);
                                            });
                                          }
                                          ;
                                          return pure56(unit);
                                        })())(function() {
                                          return traverse_16(renderNode)(v.children);
                                        });
                                      });
                                    };
                                    return bind121(renderLinks(layout))(function() {
                                      return bind121(renderNode(layout))(function() {
                                        return pure56(unit);
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            };
          };
        };
      };
    };
  };

  // output/D3.Viz.Hierarchies/index.js
  var liftEffect43 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var draw26 = /* @__PURE__ */ draw21(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw111 = /* @__PURE__ */ draw13(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw27 = /* @__PURE__ */ draw12(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawTreemap = function(treeJson) {
    return function(selector) {
      return liftEffect43(function __do5() {
        var v = runD3M(draw26(treeJson)(selector))();
        return unit;
      });
    };
  };
  var drawIcicle = function(treeJson) {
    return function(selector) {
      return liftEffect43(function __do5() {
        var v = runD3M(draw111(treeJson)(selector))();
        return unit;
      });
    };
  };
  var drawCirclePacking = function(treeJson) {
    return function(selector) {
      return liftEffect43(function __do5() {
        var v = runD3M(draw27(treeJson)(selector))();
        return unit;
      });
    };
  };

  // output/D3.Viz.TreeVizOriented/index.js
  var append33 = /* @__PURE__ */ append(semigroupArray);
  var bind77 = /* @__PURE__ */ bind(bindArray);
  var map84 = /* @__PURE__ */ map(functorArray);
  var minimum8 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum14 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var max18 = /* @__PURE__ */ max(ordNumber);
  var abs5 = /* @__PURE__ */ abs(ordNumber)(ringNumber);
  var show54 = /* @__PURE__ */ show(showInt);
  var show129 = /* @__PURE__ */ show(showNumber);
  var classed44 = /* @__PURE__ */ classed(toAttrString);
  var x41 = /* @__PURE__ */ x(toAttrNumber);
  var y41 = /* @__PURE__ */ y(toAttrNumber);
  var fill39 = /* @__PURE__ */ fill(toAttrString);
  var fontSize22 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text32 = /* @__PURE__ */ text6(toAttrString);
  var discard80 = /* @__PURE__ */ discard(discardUnit);
  var d21 = /* @__PURE__ */ d(toAttrString);
  var strokeColor37 = /* @__PURE__ */ strokeColor(toAttrString);
  var fillOpacity13 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeWidth33 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var cx25 = /* @__PURE__ */ cx(toAttrNumber);
  var cy26 = /* @__PURE__ */ cy(toAttrNumber);
  var radius29 = /* @__PURE__ */ radius(toAttrNumber);
  var Vertical3 = /* @__PURE__ */ (function() {
    function Vertical4() {
    }
    ;
    Vertical4.value = new Vertical4();
    return Vertical4;
  })();
  var Horizontal3 = /* @__PURE__ */ (function() {
    function Horizontal4() {
    }
    ;
    Horizontal4.value = new Horizontal4();
    return Horizontal4;
  })();
  var Radial3 = /* @__PURE__ */ (function() {
    function Radial4() {
    }
    ;
    Radial4.value = new Radial4();
    return Radial4;
  })();
  var Isometric2 = /* @__PURE__ */ (function() {
    function Isometric3() {
    }
    ;
    Isometric3.value = new Isometric3();
    return Isometric3;
  })();
  var showTreeOrientation = {
    show: function(v) {
      if (v instanceof Vertical3) {
        return "Vertical";
      }
      ;
      if (v instanceof Horizontal3) {
        return "Horizontal";
      }
      ;
      if (v instanceof Radial3) {
        return "Radial";
      }
      ;
      if (v instanceof Isometric2) {
        return "Isometric";
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.TreeVizOriented (line 31, column 1 - line 35, column 31): " + [v.constructor.name]);
    }
  };
  var show214 = /* @__PURE__ */ show(showTreeOrientation);
  var getProjection2 = function(orientation) {
    if (orientation instanceof Vertical3) {
      return {
        getX: verticalX,
        getY: verticalY,
        linkPath: verticalLinkPath2,
        title: "Tree Layout - Vertical (Reingold-Tilford)",
        scale: 1
      };
    }
    ;
    if (orientation instanceof Horizontal3) {
      return {
        getX: horizontalX,
        getY: horizontalY,
        linkPath: horizontalLinkPath,
        title: "Tree Layout - Horizontal (Reingold-Tilford)",
        scale: 1
      };
    }
    ;
    if (orientation instanceof Radial3) {
      return {
        getX: radialX,
        getY: radialY,
        linkPath: radialLinkPath,
        title: "Tree Layout - Radial (Reingold-Tilford)",
        scale: 1
      };
    }
    ;
    if (orientation instanceof Isometric2) {
      return {
        getX: isometricX,
        getY: isometricY,
        linkPath: isometricLinkPath,
        title: "Tree Layout - Isometric 2.5D (Reingold-Tilford)",
        scale: isometricScale
      };
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.TreeVizOriented (line 51, column 29 - line 79, column 6): " + [orientation.constructor.name]);
  };
  var getAllNodes6 = function(v) {
    var $61 = length3(v.children) === 0;
    if ($61) {
      return [v];
    }
    ;
    return append33([v])(bind77(v.children)(getAllNodes6));
  };
  var eqTreeOrientation = {
    eq: function(x115) {
      return function(y113) {
        if (x115 instanceof Vertical3 && y113 instanceof Vertical3) {
          return true;
        }
        ;
        if (x115 instanceof Horizontal3 && y113 instanceof Horizontal3) {
          return true;
        }
        ;
        if (x115 instanceof Radial3 && y113 instanceof Radial3) {
          return true;
        }
        ;
        if (x115 instanceof Isometric2 && y113 instanceof Isometric2) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq18 = /* @__PURE__ */ eq(eqTreeOrientation);
  var calculateBounds2 = function(getX) {
    return function(getY) {
      return function(nodes) {
        var yCoords = map84(getY)(nodes);
        var xCoords = map84(getX)(nodes);
        var minY = fromMaybe(0)(minimum8(yCoords));
        var minX = fromMaybe(0)(minimum8(xCoords));
        var maxY = fromMaybe(0)(maximum14(yCoords));
        var maxX = fromMaybe(0)(maximum14(xCoords));
        return {
          minX,
          maxX,
          minY,
          maxY
        };
      };
    };
  };
  var draw28 = function(dictBind) {
    var bind121 = bind(dictBind);
    var discard115 = discard80(dictBind);
    return function(dictMonadEffect) {
      var liftEffect53 = liftEffect(dictMonadEffect);
      var Applicative0 = dictMonadEffect.Monad0().Applicative0();
      var traverse_16 = traverse_(Applicative0)(foldableArray);
      var pure56 = pure(Applicative0);
      return function(dictSelectionM) {
        var attach6 = attach(dictSelectionM);
        var appendTo6 = appendTo(dictSelectionM);
        return function(orientation) {
          return function(flareData) {
            return function(selector) {
              var proj = getProjection2(orientation);
              var root3 = hierarchy(flareData)(getChildren);
              var config = {
                nodeSize: defaultTreeConfig2.nodeSize,
                separation: defaultTreeConfig2.separation,
                size: {
                  width: 1600 * proj.scale,
                  height: 1200 * proj.scale
                }
              };
              var layout = tree3(config)(root3);
              var nodes = getAllNodes6(layout);
              var bounds = calculateBounds2(proj.getX)(proj.getY)(nodes);
              var viewBoxSpec = (function() {
                if (orientation instanceof Isometric2) {
                  var width25 = bounds.maxX - bounds.minX + 2 * 50;
                  var height25 = bounds.maxY - bounds.minY + 2 * 50;
                  return {
                    x: bounds.minX - 50,
                    y: bounds.minY - 50,
                    width: width25,
                    height: height25
                  };
                }
                ;
                if (orientation instanceof Radial3) {
                  var maxRadius = max18(abs5(bounds.minX))(max18(abs5(bounds.maxX))(max18(abs5(bounds.minY))(abs5(bounds.maxY))));
                  var side = (maxRadius + 50) * 2;
                  return {
                    x: -(maxRadius + 50),
                    y: -(maxRadius + 50),
                    width: side,
                    height: side
                  };
                }
                ;
                return {
                  x: 0,
                  y: 0,
                  width: 1600,
                  height: 1200
                };
              })();
              return bind121(liftEffect53(log2("\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557")))(function() {
                return bind121(liftEffect53(log2("\u2551   TREE VISUALIZATION: " + (show214(orientation) + " orientation"))))(function() {
                  return bind121(liftEffect53(log2("\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D")))(function() {
                    return bind121(liftEffect53(log2("Rendering " + (show54(length3(nodes)) + " nodes"))))(function() {
                      return bind121(liftEffect53(log2("Bounds: minX=" + (show129(bounds.minX) + (", maxX=" + (show129(bounds.maxX) + (", minY=" + (show129(bounds.minY) + (", maxY=" + show129(bounds.maxY))))))))))(function() {
                        return bind121(liftEffect53(log2("ViewBox: x=" + (show129(viewBoxSpec.x) + (", y=" + (show129(viewBoxSpec.y) + (", width=" + (show129(viewBoxSpec.width) + (", height=" + show129(viewBoxSpec.height))))))))))(function() {
                          return bind121(attach6(selector))(function(root$prime) {
                            return bind121(appendTo6(root$prime)(Svg.value)([viewBox(viewBoxSpec.x)(viewBoxSpec.y)(viewBoxSpec.width)(viewBoxSpec.height), classed44("tree"), classed44("tree-" + show214(orientation))]))(function(svg2) {
                              return bind121(appendTo6(svg2)(Text2.value)([x41(viewBoxSpec.x + 10), y41(viewBoxSpec.y + 20), fill39("#333"), fontSize22(16), text32(proj.title), classed44("title")]))(function() {
                                return bind121(appendTo6(svg2)(Group.value)([classed44("links")]))(function(linksGroup) {
                                  return bind121(appendTo6(svg2)(Group.value)([classed44("nodes")]))(function(nodesGroup) {
                                    var renderLinks = function(v) {
                                      return discard115(traverse_16(function(v1) {
                                        var pathData = (function() {
                                          if (orientation instanceof Isometric2) {
                                            return isometricTreeLinkPath(v)(v1);
                                          }
                                          ;
                                          if (orientation instanceof Radial3) {
                                            return proj.linkPath(v.x)(v.y)(v1.x)(v1.y);
                                          }
                                          ;
                                          return proj.linkPath(proj.getX(v))(proj.getY(v))(proj.getX(v1))(proj.getY(v1));
                                        })();
                                        return bind121(appendTo6(linksGroup)(Path2.value)([d21(pathData), fill39("none"), strokeColor37("#555"), fillOpacity13(0.4), strokeWidth33(1.5), classed44("link")]))(function() {
                                          return pure56(unit);
                                        });
                                      })(v.children))(function() {
                                        return traverse_16(renderLinks)(v.children);
                                      });
                                    };
                                    var renderNode = function(v) {
                                      var nodeName3 = getName(v.data_);
                                      var isLeaf = length3(v.children) === 0;
                                      var nodeRadius2 = (function() {
                                        if (isLeaf) {
                                          return 3;
                                        }
                                        ;
                                        return 4;
                                      })();
                                      return bind121(appendTo6(nodesGroup)(Circle.value)([cx25(proj.getX(v)), cy26(proj.getY(v)), radius29(nodeRadius2), fill39("#999"), strokeColor37("#555"), strokeWidth33(1.5), classed44("node"), classed44("depth-" + show54(v.depth)), classed44((function() {
                                        if (isLeaf) {
                                          return "leaf";
                                        }
                                        ;
                                        return "internal";
                                      })())]))(function() {
                                        return discard115((function() {
                                          var $71 = !isLeaf && (eq18(orientation)(Vertical3.value) || eq18(orientation)(Horizontal3.value));
                                          if ($71) {
                                            return bind121(appendTo6(nodesGroup)(Text2.value)([x41(proj.getX(v) + 8), y41(proj.getY(v)), fill39("#333"), fontSize22(10), text32(nodeName3), classed44("label")]))(function() {
                                              return pure56(unit);
                                            });
                                          }
                                          ;
                                          return pure56(unit);
                                        })())(function() {
                                          return traverse_16(renderNode)(v.children);
                                        });
                                      });
                                    };
                                    return bind121(renderLinks(layout))(function() {
                                      return bind121(renderNode(layout))(function() {
                                        return pure56(unit);
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            };
          };
        };
      };
    };
  };

  // output/PSD3.Internal.Utility/index.js
  var spy6 = /* @__PURE__ */ spy();
  var removeExistingSVG = function(dictSelectionM) {
    var pure56 = pure(dictSelectionM.Monad0().Applicative0());
    return function(rootSelector) {
      var root3 = d3SelectFirstInDOM_(rootSelector);
      var previous = d3SelectionSelect_(rootSelector + " svg")(root3);
      return pure56((function() {
        var v = d3SelectionIsEmpty_(previous);
        if (v) {
          return spy6("no previous SVG to remove")(previous);
        }
        ;
        if (!v) {
          return spy6("removed previous SVG")(d3RemoveSelection_(previous));
        }
        ;
        throw new Error("Failed pattern match at PSD3.Internal.Utility (line 18, column 5 - line 20, column 72): " + [v.constructor.name]);
      })());
    };
  };

  // output/PSD3.Understanding.Hierarchies/index.js
  var append34 = /* @__PURE__ */ append(semigroupArray);
  var type_21 = /* @__PURE__ */ type_17(isPropButtonType);
  var liftEffect44 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var draw29 = /* @__PURE__ */ draw28(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw113 = /* @__PURE__ */ draw25(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var bind113 = /* @__PURE__ */ bind(bindHalogenM);
  var liftEffect110 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var removeExistingSVG2 = /* @__PURE__ */ removeExistingSVG(d3TaglessD3M);
  var liftAff33 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var pure113 = /* @__PURE__ */ pure(applicativeHalogenM);
  var discard81 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var modify_40 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var get11 = /* @__PURE__ */ get(monadStateHalogenM);
  var HorizontalTidy = /* @__PURE__ */ (function() {
    function HorizontalTidy2() {
    }
    ;
    HorizontalTidy2.value = new HorizontalTidy2();
    return HorizontalTidy2;
  })();
  var HorizontalDendrogram = /* @__PURE__ */ (function() {
    function HorizontalDendrogram2() {
    }
    ;
    HorizontalDendrogram2.value = new HorizontalDendrogram2();
    return HorizontalDendrogram2;
  })();
  var VerticalTidy = /* @__PURE__ */ (function() {
    function VerticalTidy2() {
    }
    ;
    VerticalTidy2.value = new VerticalTidy2();
    return VerticalTidy2;
  })();
  var VerticalDendrogram = /* @__PURE__ */ (function() {
    function VerticalDendrogram2() {
    }
    ;
    VerticalDendrogram2.value = new VerticalDendrogram2();
    return VerticalDendrogram2;
  })();
  var RadialTidy = /* @__PURE__ */ (function() {
    function RadialTidy2() {
    }
    ;
    RadialTidy2.value = new RadialTidy2();
    return RadialTidy2;
  })();
  var RadialDendrogram = /* @__PURE__ */ (function() {
    function RadialDendrogram2() {
    }
    ;
    RadialDendrogram2.value = new RadialDendrogram2();
    return RadialDendrogram2;
  })();
  var IsometricTidy = /* @__PURE__ */ (function() {
    function IsometricTidy2() {
    }
    ;
    IsometricTidy2.value = new IsometricTidy2();
    return IsometricTidy2;
  })();
  var Icicle = /* @__PURE__ */ (function() {
    function Icicle2() {
    }
    ;
    Icicle2.value = new Icicle2();
    return Icicle2;
  })();
  var CirclePacking = /* @__PURE__ */ (function() {
    function CirclePacking2() {
    }
    ;
    CirclePacking2.value = new CirclePacking2();
    return CirclePacking2;
  })();
  var Treemap = /* @__PURE__ */ (function() {
    function Treemap2() {
    }
    ;
    Treemap2.value = new Treemap2();
    return Treemap2;
  })();
  var Initialize47 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SelectLayout = /* @__PURE__ */ (function() {
    function SelectLayout2(value0) {
      this.value0 = value0;
    }
    ;
    SelectLayout2.create = function(value0) {
      return new SelectLayout2(value0);
    };
    return SelectLayout2;
  })();
  var showHierarchyLayout = {
    show: function(v) {
      if (v instanceof HorizontalTidy) {
        return "Horizontal Tidy Tree";
      }
      ;
      if (v instanceof HorizontalDendrogram) {
        return "Horizontal Dendrogram";
      }
      ;
      if (v instanceof VerticalTidy) {
        return "Vertical Tidy Tree";
      }
      ;
      if (v instanceof VerticalDendrogram) {
        return "Vertical Dendrogram";
      }
      ;
      if (v instanceof RadialTidy) {
        return "Radial Tidy Tree";
      }
      ;
      if (v instanceof RadialDendrogram) {
        return "Radial Dendrogram";
      }
      ;
      if (v instanceof IsometricTidy) {
        return "Isometric Tidy Tree (2.5D)";
      }
      ;
      if (v instanceof Icicle) {
        return "Icicle";
      }
      ;
      if (v instanceof CirclePacking) {
        return "Circle Packing";
      }
      ;
      if (v instanceof Treemap) {
        return "Treemap";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Understanding.Hierarchies (line 47, column 1 - line 57, column 27): " + [v.constructor.name]);
    }
  };
  var show55 = /* @__PURE__ */ show(showHierarchyLayout);
  var renderLayoutPlaceholder = function(v) {
    return div_([]);
  };
  var layoutDescription = function(v) {
    if (v instanceof HorizontalTidy) {
      return "Node-link diagram: Compact tidy tree with left-to-right orientation. Root on the left, efficiently uses space. Pure PureScript Reingold-Tilford algorithm with horizontal projection.";
    }
    ;
    if (v instanceof HorizontalDendrogram) {
      return "Node-link diagram: Horizontal dendrogram with all leaves aligned at the same level on the right. Pure PureScript cluster algorithm with horizontal projection.";
    }
    ;
    if (v instanceof VerticalTidy) {
      return "Node-link diagram: Compact tidy tree with top-down orientation using pure PureScript Reingold-Tilford algorithm. Common in organizational charts.";
    }
    ;
    if (v instanceof VerticalDendrogram) {
      return "Node-link diagram: Vertical dendrogram with all leaves aligned at the same level at the bottom. Pure PureScript cluster algorithm.";
    }
    ;
    if (v instanceof RadialTidy) {
      return "Node-link diagram: Compact tidy tree in polar coordinates, emanating from center. Space-efficient for large hierarchies. Pure PureScript Reingold-Tilford with radial projection.";
    }
    ;
    if (v instanceof RadialDendrogram) {
      return "Node-link diagram: Radial dendrogram with all leaves at equal distance from center. Pure PureScript cluster algorithm with radial projection.";
    }
    ;
    if (v instanceof IsometricTidy) {
      return "Node-link diagram: Unique 2.5D isometric projection creates technical drawing aesthetic. Pure PureScript Reingold-Tilford with 30\xB0 cabinet projection for depth perception.";
    }
    ;
    if (v instanceof Icicle) {
      return "Adjacency diagram: Rectangular subdivisions showing hierarchy through relative placement. Area encodes quantitative values. Pure PureScript implementation.";
    }
    ;
    if (v instanceof CirclePacking) {
      return "Enclosure diagram: Tightly nested circles showing hierarchy through containment. Area encodes values, readily shows topology. Pure PureScript implementation.";
    }
    ;
    if (v instanceof Treemap) {
      return "Enclosure diagram: Space-efficient rectangular subdivisions. Area is proportional to value, shows hierarchy through nesting. Pure PureScript implementation.";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.Hierarchies (line 60, column 21 - line 70, column 172): " + [v.constructor.name]);
  };
  var eqHierarchyLayout = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof HorizontalTidy && y46 instanceof HorizontalTidy) {
          return true;
        }
        ;
        if (x46 instanceof HorizontalDendrogram && y46 instanceof HorizontalDendrogram) {
          return true;
        }
        ;
        if (x46 instanceof VerticalTidy && y46 instanceof VerticalTidy) {
          return true;
        }
        ;
        if (x46 instanceof VerticalDendrogram && y46 instanceof VerticalDendrogram) {
          return true;
        }
        ;
        if (x46 instanceof RadialTidy && y46 instanceof RadialTidy) {
          return true;
        }
        ;
        if (x46 instanceof RadialDendrogram && y46 instanceof RadialDendrogram) {
          return true;
        }
        ;
        if (x46 instanceof IsometricTidy && y46 instanceof IsometricTidy) {
          return true;
        }
        ;
        if (x46 instanceof Icicle && y46 instanceof Icicle) {
          return true;
        }
        ;
        if (x46 instanceof CirclePacking && y46 instanceof CirclePacking) {
          return true;
        }
        ;
        if (x46 instanceof Treemap && y46 instanceof Treemap) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq19 = /* @__PURE__ */ eq(eqHierarchyLayout);
  var renderLayoutOption = function(layout) {
    return function(label5) {
      return function(currentLayout) {
        return button([classes(append34(["control-panel__option"])((function() {
          var $45 = eq19(layout)(currentLayout);
          if ($45) {
            return ["control-panel__option--active"];
          }
          ;
          return [];
        })())), onClick($$const(new SelectLayout(layout))), type_21(ButtonButton.value)])([text5(label5)]);
      };
    };
  };
  var render57 = function(state3) {
    return div2([classes(["example-page"])])([div2([classes(["toc-panel", "control-panel"])])([div2([classes(["toc-panel__main", "control-panel__main"])])([img([src9("controller.jpeg"), alt5(""), classes(["control-panel__icon"])]), div2([classes(["floating-panel__header"])])([h3([classes(["floating-panel__title"])])([text5("Layout Controls")]), button([classes(["floating-panel__toggle"]), type_21(ButtonButton.value)])([text5("\u2212")])]), div2([classes(["floating-panel__content", "control-panel__content"])])([div2([classes(["control-panel__section"])])([h4([classes(["control-panel__section-title"])])([text5("Node-Link Diagrams")]), div2([classes(["control-panel__options"])])([renderLayoutOption(HorizontalTidy.value)("H-Tidy")(state3.currentLayout), renderLayoutOption(HorizontalDendrogram.value)("H-Dendro")(state3.currentLayout), renderLayoutOption(VerticalTidy.value)("V-Tidy")(state3.currentLayout), renderLayoutOption(VerticalDendrogram.value)("V-Dendro")(state3.currentLayout), renderLayoutOption(RadialTidy.value)("R-Tidy")(state3.currentLayout), renderLayoutOption(RadialDendrogram.value)("R-Dendro")(state3.currentLayout), renderLayoutOption(IsometricTidy.value)("Isometric")(state3.currentLayout)])]), div2([classes(["control-panel__section"])])([h4([classes(["control-panel__section-title"])])([text5("Adjacency Diagrams")]), div2([classes(["control-panel__options"])])([renderLayoutOption(Icicle.value)("Icicle")(state3.currentLayout)])]), div2([classes(["control-panel__section"])])([h4([classes(["control-panel__section-title"])])([text5("Enclosure Diagrams")]), div2([classes(["control-panel__options"])])([renderLayoutOption(CirclePacking.value)("Circle Pack")(state3.currentLayout), renderLayoutOption(Treemap.value)("Treemap")(state3.currentLayout)])]), div2([classes(["control-panel__current"])])([strong_([text5("Current:")]), text5(" "), text5(show55(state3.currentLayout))])])])]), renderHeader(Hierarchies.value), main([classes(["tutorial-content"])])([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("3. Hierarchical Layouts")]), p_([text5("Hierarchical data structures are everywhere in computing: file systems, organizational charts, taxonomies, JSON documents, and abstract syntax trees. Different visualization layouts reveal different aspects of the same hierarchical data.")]), p_([text5("This page demonstrates nine different ways to visualize the same hierarchical dataset. Use the controls on the left to switch between layouts and explore how each representation emphasizes different relationships in the data. Also new in the examples on this page: the data visualization is zoomable and draggable within the white SVG rectangle. ")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5(show55(state3.currentLayout))]), p_([text5(layoutDescription(state3.currentLayout))]), div2([classes(["tutorial-viz-container"])])([div2([classes(["hierarchies-viz"])])([renderLayoutPlaceholder(state3.currentLayout)])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("Interactive Exploration")]), p_([text5("This page itself is the interactive example! Use the controls on the left to switch between different hierarchical layouts and observe how the same data can be visualized in multiple ways. Each layout reveals different aspects of the hierarchical structure.")]), p_([text5("To explore the implementation of each layout, visit the "), a([href4("#/examples"), classes(["tutorial-link"])])([text5("Examples Gallery")]), text5(" where you can view the full source code for each visualization type.")])])])]);
  };
  var drawLayoutViz = function(layout) {
    return function(json2) {
      if (layout instanceof HorizontalTidy) {
        return liftEffect44(function __do5() {
          var v = eval_D3M(draw29(Horizontal3.value)(json2)("div.hierarchies-viz"))();
          return unit;
        });
      }
      ;
      if (layout instanceof HorizontalDendrogram) {
        return liftEffect44(function __do5() {
          var v = eval_D3M(draw113(Horizontal2.value)(json2)("div.hierarchies-viz"))();
          return unit;
        });
      }
      ;
      if (layout instanceof VerticalTidy) {
        return liftEffect44(function __do5() {
          var v = eval_D3M(draw29(Vertical3.value)(json2)("div.hierarchies-viz"))();
          return unit;
        });
      }
      ;
      if (layout instanceof VerticalDendrogram) {
        return liftEffect44(function __do5() {
          var v = eval_D3M(draw113(Vertical2.value)(json2)("div.hierarchies-viz"))();
          return unit;
        });
      }
      ;
      if (layout instanceof RadialTidy) {
        return liftEffect44(function __do5() {
          var v = eval_D3M(draw29(Radial3.value)(json2)("div.hierarchies-viz"))();
          return unit;
        });
      }
      ;
      if (layout instanceof RadialDendrogram) {
        return liftEffect44(function __do5() {
          var v = eval_D3M(draw113(Radial2.value)(json2)("div.hierarchies-viz"))();
          return unit;
        });
      }
      ;
      if (layout instanceof IsometricTidy) {
        return liftEffect44(function __do5() {
          var v = eval_D3M(draw29(Isometric2.value)(json2)("div.hierarchies-viz"))();
          return unit;
        });
      }
      ;
      if (layout instanceof Icicle) {
        return drawIcicle(json2)("div.hierarchies-viz");
      }
      ;
      if (layout instanceof CirclePacking) {
        return drawCirclePacking(json2)("div.hierarchies-viz");
      }
      ;
      if (layout instanceof Treemap) {
        return drawTreemap(json2)("div.hierarchies-viz");
      }
      ;
      throw new Error("Failed pattern match at PSD3.Understanding.Hierarchies (line 272, column 6 - line 298, column 54): " + [layout.constructor.name]);
    };
  };
  var handleAction46 = function(v) {
    if (v instanceof Initialize47) {
      return bind113(liftEffect110(eval_D3M(removeExistingSVG2("div.hierarchies-viz"))))(function() {
        return bind113(liftAff33(getTreeViaAJAX("./data/flare-2.json")))(function(treeJSON) {
          if (treeJSON instanceof Left) {
            return pure113(unit);
          }
          ;
          if (treeJSON instanceof Right) {
            return bind113(liftAff33(drawLayoutViz(VerticalTidy.value)(treeJSON.value0)))(function() {
              return discard81(modify_40(function(st) {
                var $50 = {};
                for (var $51 in st) {
                  if ({}.hasOwnProperty.call(st, $51)) {
                    $50[$51] = st[$51];
                  }
                  ;
                }
                ;
                $50.treeData = new Just(treeJSON.value0);
                return $50;
              }))(function() {
                return pure113(unit);
              });
            });
          }
          ;
          throw new Error("Failed pattern match at PSD3.Understanding.Hierarchies (line 245, column 5 - line 250, column 18): " + [treeJSON.constructor.name]);
        });
      });
    }
    ;
    if (v instanceof SelectLayout) {
      return bind113(liftEffect110(eval_D3M(removeExistingSVG2("div.hierarchies-viz"))))(function() {
        return discard81(modify_40(function(v1) {
          var $54 = {};
          for (var $55 in v1) {
            if ({}.hasOwnProperty.call(v1, $55)) {
              $54[$55] = v1[$55];
            }
            ;
          }
          ;
          $54.currentLayout = v.value0;
          return $54;
        }))(function() {
          return bind113(get11)(function(state3) {
            if (state3.treeData instanceof Nothing) {
              return pure113(unit);
            }
            ;
            if (state3.treeData instanceof Just) {
              return bind113(liftAff33(drawLayoutViz(v.value0)(state3.treeData.value0)))(function() {
                return pure113(unit);
              });
            }
            ;
            throw new Error("Failed pattern match at PSD3.Understanding.Hierarchies (line 261, column 5 - line 265, column 18): " + [state3.treeData.constructor.name]);
          });
        });
      });
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.Hierarchies (line 236, column 16 - line 265, column 18): " + [v.constructor.name]);
  };
  var component52 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          currentLayout: VerticalTidy.value,
          treeData: Nothing.value
        };
      },
      render: render57,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction46,
        initialize: new Just(Initialize47.value)
      })
    });
  })();

  // output/PSD3.Interpreter.MetaTree/foreign.js
  prune = function(node) {
    if (node.children.length == 0) {
      delete node.children;
    } else {
      node.children.forEach(
        (child) => prune(child)
      );
    }
    ;
  };

  // output/PSD3.Interpreter.String/foreign.js
  function formatElement(element3) {
    const el = element3.toString().replace(/"/g, "");
    return `"${el.toLowerCase()}"`;
  }
  function formatSelector(selector) {
    const s = selector.toString();
    return s.startsWith('"') || s.startsWith("'") ? s : `"${s}"`;
  }
  function formatValue(value18) {
    if (typeof value18 === "function" || value18.toString().includes("=>") || value18.toString().includes("function")) {
      return value18.toString();
    }
    if (!isNaN(value18) && value18 !== "") {
      return value18;
    }
    const str2 = value18.toString();
    if (str2.startsWith('"') || str2.startsWith("'")) {
      return str2;
    }
    return `"${str2}"`;
  }
  function showSelectAllInDOM_(selector) {
    return `d3.select(${formatSelector(selector)})`;
  }
  function showSelectAll_(selector) {
    return (selection2) => {
      return `${selection2}.selectAll(${formatSelector(selector)})`;
    };
  }
  function showAddTransition_(selection2) {
    return (transition2) => {
      let result = `${selection2}.transition()`;
      if (transition2.duration && transition2.duration != 0) {
        result += `
  .duration(${transition2.duration})`;
      }
      if (transition2.delay && transition2.delay != 0) {
        result += `
  .delay(${transition2.delay})`;
      }
      if (transition2.name && transition2.name !== "") {
        result = `${selection2}.transition("${transition2.name}")`;
      }
      return result;
    };
  }
  function showRemoveSelection_(selection2) {
    return `${selection2}.remove()`;
  }
  function showAppend_(element3) {
    return (selection2) => {
      return `${selection2}.append(${formatElement(element3)})`;
    };
  }
  function showData_(data) {
    return (selection2) => {
      const dataStr = Array.isArray(data) ? `[/* ${data.length} items */]` : data.toString();
      return `${selection2}.data(${dataStr})`;
    };
  }
  function showSetAttr_(name16) {
    return (value18) => (selection2) => {
      return `${selection2}.attr("${name16}", ${formatValue(value18)})`;
    };
  }
  function showSetText_(value18) {
    return (selection2) => {
      return `${selection2}.text(${formatValue(value18)})`;
    };
  }
  function showSetHTML_(value18) {
    return (selection2) => {
      return `${selection2}.html(${formatValue(value18)})`;
    };
  }
  function showSetProperty_(value18) {
    return (selection2) => {
      return `${selection2}.property(${formatValue(value18)})`;
    };
  }
  function showSetOrdering_(ordering) {
    return (selection2) => {
      return `${selection2}.${ordering}()`;
    };
  }

  // output/Data.String.CodePoints/foreign.js
  var hasArrayFrom = typeof Array.from === "function";
  var hasStringIterator = typeof Symbol !== "undefined" && Symbol != null && typeof Symbol.iterator !== "undefined" && typeof String.prototype[Symbol.iterator] === "function";
  var hasFromCodePoint = typeof String.prototype.fromCodePoint === "function";
  var hasCodePointAt = typeof String.prototype.codePointAt === "function";
  var _unsafeCodePointAt0 = function(fallback) {
    return hasCodePointAt ? function(str2) {
      return str2.codePointAt(0);
    } : fallback;
  };
  var _singleton = function(fallback) {
    return hasFromCodePoint ? String.fromCodePoint : fallback;
  };
  var _take = function(fallback) {
    return function(n) {
      if (hasStringIterator) {
        return function(str2) {
          var accum = "";
          var iter = str2[Symbol.iterator]();
          for (var i2 = 0; i2 < n; ++i2) {
            var o = iter.next();
            if (o.done) return accum;
            accum += o.value;
          }
          return accum;
        };
      }
      return fallback(n);
    };
  };
  var _toCodePointArray = function(fallback) {
    return function(unsafeCodePointAt02) {
      if (hasArrayFrom) {
        return function(str2) {
          return Array.from(str2, unsafeCodePointAt02);
        };
      }
      return fallback;
    };
  };

  // output/Data.String.CodePoints/index.js
  var fromEnum2 = /* @__PURE__ */ fromEnum(boundedEnumChar);
  var map85 = /* @__PURE__ */ map(functorMaybe);
  var unfoldr2 = /* @__PURE__ */ unfoldr(unfoldableArray);
  var div3 = /* @__PURE__ */ div(euclideanRingInt);
  var mod8 = /* @__PURE__ */ mod(euclideanRingInt);
  var unsurrogate = function(lead) {
    return function(trail) {
      return (((lead - 55296 | 0) * 1024 | 0) + (trail - 56320 | 0) | 0) + 65536 | 0;
    };
  };
  var isTrail = function(cu) {
    return 56320 <= cu && cu <= 57343;
  };
  var isLead = function(cu) {
    return 55296 <= cu && cu <= 56319;
  };
  var uncons5 = function(s) {
    var v = length5(s);
    if (v === 0) {
      return Nothing.value;
    }
    ;
    if (v === 1) {
      return new Just({
        head: fromEnum2(charAt(0)(s)),
        tail: ""
      });
    }
    ;
    var cu1 = fromEnum2(charAt(1)(s));
    var cu0 = fromEnum2(charAt(0)(s));
    var $43 = isLead(cu0) && isTrail(cu1);
    if ($43) {
      return new Just({
        head: unsurrogate(cu0)(cu1),
        tail: drop3(2)(s)
      });
    }
    ;
    return new Just({
      head: cu0,
      tail: drop3(1)(s)
    });
  };
  var unconsButWithTuple = function(s) {
    return map85(function(v) {
      return new Tuple(v.head, v.tail);
    })(uncons5(s));
  };
  var toCodePointArrayFallback = function(s) {
    return unfoldr2(unconsButWithTuple)(s);
  };
  var unsafeCodePointAt0Fallback = function(s) {
    var cu0 = fromEnum2(charAt(0)(s));
    var $47 = isLead(cu0) && length5(s) > 1;
    if ($47) {
      var cu1 = fromEnum2(charAt(1)(s));
      var $48 = isTrail(cu1);
      if ($48) {
        return unsurrogate(cu0)(cu1);
      }
      ;
      return cu0;
    }
    ;
    return cu0;
  };
  var unsafeCodePointAt0 = /* @__PURE__ */ _unsafeCodePointAt0(unsafeCodePointAt0Fallback);
  var toCodePointArray = /* @__PURE__ */ _toCodePointArray(toCodePointArrayFallback)(unsafeCodePointAt0);
  var length9 = function($74) {
    return length3(toCodePointArray($74));
  };
  var indexOf2 = function(p2) {
    return function(s) {
      return map85(function(i2) {
        return length9(take3(i2)(s));
      })(indexOf(p2)(s));
    };
  };
  var fromCharCode2 = /* @__PURE__ */ (function() {
    var $75 = toEnumWithDefaults(boundedEnumChar)(bottom(boundedChar))(top(boundedChar));
    return function($76) {
      return singleton7($75($76));
    };
  })();
  var singletonFallback = function(v) {
    if (v <= 65535) {
      return fromCharCode2(v);
    }
    ;
    var lead = div3(v - 65536 | 0)(1024) + 55296 | 0;
    var trail = mod8(v - 65536 | 0)(1024) + 56320 | 0;
    return fromCharCode2(lead) + fromCharCode2(trail);
  };
  var singleton11 = /* @__PURE__ */ _singleton(singletonFallback);
  var takeFallback = function(v) {
    return function(v1) {
      if (v < 1) {
        return "";
      }
      ;
      var v2 = uncons5(v1);
      if (v2 instanceof Just) {
        return singleton11(v2.value0.head) + takeFallback(v - 1 | 0)(v2.value0.tail);
      }
      ;
      return v1;
    };
  };
  var take4 = /* @__PURE__ */ _take(takeFallback);
  var splitAt3 = function(i2) {
    return function(s) {
      var before = take4(i2)(s);
      return {
        before,
        after: drop3(length5(before))(s)
      };
    };
  };
  var drop5 = function(n) {
    return function(s) {
      return drop3(length5(take4(n)(s)))(s);
    };
  };

  // output/PSD3.Interpreter.String/index.js
  var show56 = /* @__PURE__ */ show(showOrderingAttribute);
  var show130 = /* @__PURE__ */ show(showMouseEvent);
  var show215 = /* @__PURE__ */ show(showString);
  var show311 = /* @__PURE__ */ show(showElement);
  var trimSelectionPrefix = function(str2) {
    var v = indexOf2(".")(str2);
    if (v instanceof Just) {
      return drop5(v.value0 + 1 | 0)(str2);
    }
    ;
    if (v instanceof Nothing) {
      return str2;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Interpreter.String (line 129, column 3 - line 131, column 19): " + [v.constructor.name]);
  };
  var runPrinter = function(v) {
    return function(initialString) {
      return runStateT(v)(initialString);
    };
  };
  var monadStateD3PrinterM = /* @__PURE__ */ monadStateStateT(monadEffect);
  var modify_41 = /* @__PURE__ */ modify_(monadStateD3PrinterM);
  var monadD3PrinterM = /* @__PURE__ */ monadStateT(monadEffect);
  var bindD3PrinterM = /* @__PURE__ */ bindStateT(monadEffect);
  var discard82 = /* @__PURE__ */ discard(discardUnit)(bindD3PrinterM);
  var applySelectionAttributeString = function(selection2) {
    return function(v) {
      if (v instanceof AttrT) {
        return trimSelectionPrefix(showSetAttr_(v.value0.value0)(unboxAttr(v.value0.value1))(selection2));
      }
      ;
      if (v instanceof TextT) {
        return trimSelectionPrefix(showSetText_(unboxAttr(v.value0.value1))(selection2));
      }
      ;
      if (v instanceof PropertyT) {
        return trimSelectionPrefix(showSetProperty_(unboxAttr(v.value0.value1))(selection2));
      }
      ;
      if (v instanceof HTMLT) {
        return trimSelectionPrefix(showSetHTML_(unboxAttr(v.value0.value1))(selection2));
      }
      ;
      if (v instanceof RemoveT) {
        return trimSelectionPrefix(showRemoveSelection_(selection2));
      }
      ;
      if (v instanceof OrderingT) {
        return trimSelectionPrefix(showSetOrdering_(show56(v.value0))(selection2));
      }
      ;
      if (v instanceof TransitionT) {
        var tString = showAddTransition_(selection2)(v.value1);
        var trimmed = trimSelectionPrefix(tString);
        return foldl3(function(acc) {
          return function(attr3) {
            return acc + ("\n  ." + trimSelectionPrefix(applySelectionAttributeString(tString)(attr3)));
          };
        })(trimmed)(v.value0);
      }
      ;
      if (v instanceof OnT) {
        return "on(" + (show130(v.value0) + ", function(d) { /* event handler */ })");
      }
      ;
      if (v instanceof OnT$prime) {
        return "on(" + (show130(v.value0) + ", function(d) { /* event handler */ })");
      }
      ;
      throw new Error("Failed pattern match at PSD3.Interpreter.String (line 105, column 3 - line 124, column 70): " + [v.constructor.name]);
    };
  };
  var applicativeD3PrinterM = /* @__PURE__ */ applicativeStateT(monadEffect);
  var pure43 = /* @__PURE__ */ pure(applicativeD3PrinterM);
  var d3Tagless = {
    attach: function(selector) {
      var code2 = showSelectAllInDOM_(selector);
      return discard82(modify_41(function(s) {
        return s + code2;
      }))(function() {
        return pure43(code2);
      });
    },
    selectUnder: function(v) {
      return function(selector) {
        var code2 = showSelectAll_(selector)(v);
        return discard82(modify_41(function(s) {
          return s + ("\n  ." + code2);
        }))(function() {
          return pure43(code2);
        });
      };
    },
    appendTo: function(v) {
      return function(element3) {
        return function(attributes) {
          var appendCode = showAppend_(element3)(v);
          var attributeString = foldl3(applySelectionAttributeString)(appendCode)(attributes);
          return discard82(modify_41(function(s) {
            return s + ("\n\nconst /* TODO: varName */ = " + (appendCode + (attributeString + ";")));
          }))(function() {
            return pure43(appendCode);
          });
        };
      };
    },
    filterSelection: function(v) {
      return function(selector) {
        var code2 = v + (".filter(" + (show215(selector) + ")"));
        return discard82(modify_41(function(s) {
          return s + ("\n  ." + code2);
        }))(function() {
          return pure43(code2);
        });
      };
    },
    mergeSelections: function(v) {
      return function(v1) {
        var code2 = v + (".merge(" + (v1 + ")"));
        return discard82(modify_41(function(s) {
          return s + ("\n  ." + code2);
        }))(function() {
          return pure43(code2);
        });
      };
    },
    setAttributes: function(v) {
      return function(attributes) {
        var attributeString = foldl3(function(acc) {
          return function(attr3) {
            return acc + ("\n  ." + applySelectionAttributeString(v)(attr3));
          };
        })("")(attributes);
        return discard82(modify_41(function(s) {
          return s + attributeString;
        }))(function() {
          return pure43(unit);
        });
      };
    },
    on: function(v) {
      return function(v1) {
        if (v1 instanceof Drag) {
          return discard82(modify_41(function(s) {
            return s + "\n  .call(d3.drag())";
          }))(function() {
            return pure43(unit);
          });
        }
        ;
        if (v1 instanceof Zoom) {
          return discard82(modify_41(function(s) {
            return s + "\n  .call(d3.zoom())";
          }))(function() {
            return pure43(unit);
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.Interpreter.String (line 38, column 1 - line 99, column 112): " + [v.constructor.name, v1.constructor.name]);
      };
    },
    openSelection: function(v) {
      return function(selector) {
        var code2 = showSelectAll_(selector)(v);
        return discard82(modify_41(function(s) {
          return s + ("\n\nconst /* TODO: varName */ = " + (code2 + ";"));
        }))(function() {
          return pure43(code2);
        });
      };
    },
    simpleJoin: function(v) {
      return function(e) {
        return function(ds) {
          return function(k) {
            var dataCode = showData_(ds)(v);
            var joinCode = dataCode + ("\n  .join(" + (show311(e) + ")"));
            return discard82(modify_41(function(s) {
              return s + ("\n\nconst /* TODO: varName */ = " + (joinCode + ";"));
            }))(function() {
              return pure43(joinCode);
            });
          };
        };
      };
    },
    nestedJoin: function(dictFoldable) {
      return function(v) {
        return function(e) {
          return function(extractChildren) {
            return function(k) {
              var dataCode = v + "\n  .data(d => extractChildren(d))";
              var joinCode = dataCode + ("\n  .join(" + (show311(e) + ")"));
              return discard82(modify_41(function(s) {
                return s + ("\n\nconst /* TODO: varName */ = " + (joinCode + ";"));
              }))(function() {
                return pure43(joinCode);
              });
            };
          };
        };
      };
    },
    updateJoin: function(v) {
      return function(e) {
        return function(ds) {
          return function(k) {
            var dataCode = showData_(ds)(v);
            var enterCode = dataCode + ("\n  .enter().append(" + (show311(e) + ")"));
            var exitCode = dataCode + "\n  .exit().remove()";
            return discard82(modify_41(function(s) {
              return s + ("\n\n// Update pattern\nconst update = " + (dataCode + (";\nconst enter = " + (enterCode + (";\nconst exit = " + (exitCode + ";"))))));
            }))(function() {
              return pure43({
                enter: enterCode,
                exit: exitCode,
                update: dataCode
              });
            });
          };
        };
      };
    },
    Monad0: function() {
      return monadD3PrinterM;
    }
  };

  // output/PSD3.Understanding.InterpretersDemo/index.js
  var classed45 = /* @__PURE__ */ classed(toAttrString);
  var width23 = /* @__PURE__ */ width8(toAttrNumber);
  var height23 = /* @__PURE__ */ height8(toAttrNumber);
  var cx26 = /* @__PURE__ */ cx(toAttrNumber);
  var cy27 = /* @__PURE__ */ cy(toAttrNumber);
  var radius30 = /* @__PURE__ */ radius(toAttrNumber);
  var fill40 = /* @__PURE__ */ fill(toAttrString);
  var fillOpacity14 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var bind114 = /* @__PURE__ */ bind(bindD3PrinterM);
  var appendTo1 = /* @__PURE__ */ appendTo(d3Tagless);
  var traverse_14 = /* @__PURE__ */ traverse_(applicativeD3PrinterM)(foldableArray);
  var pure114 = /* @__PURE__ */ pure(applicativeD3PrinterM);
  var sampleData = [{
    x: 50,
    y: 100
  }, {
    x: 120,
    y: 80
  }, {
    x: 200,
    y: 150
  }, {
    x: 280,
    y: 120
  }, {
    x: 350,
    y: 180
  }, {
    x: 50,
    y: 200
  }, {
    x: 150,
    y: 160
  }, {
    x: 250,
    y: 220
  }, {
    x: 320,
    y: 190
  }, {
    x: 380,
    y: 250
  }, {
    x: 90,
    y: 140
  }, {
    x: 170,
    y: 110
  }, {
    x: 230,
    y: 170
  }, {
    x: 310,
    y: 210
  }, {
    x: 360,
    y: 240
  }, {
    x: 110,
    y: 90
  }, {
    x: 190,
    y: 130
  }, {
    x: 270,
    y: 200
  }, {
    x: 330,
    y: 180
  }, {
    x: 370,
    y: 220
  }];
  var scatterPlotString = /* @__PURE__ */ bind114(/* @__PURE__ */ attach(d3Tagless)("div.scatterplot-viz"))(function(v) {
    return bind114(appendTo1(v)(Svg.value)([classed45("simple-scatterplot"), width23(400), height23(300), viewBox(0)(0)(400)(300)]))(function(svg2) {
      return bind114(appendTo1(svg2)(Group.value)([classed45("dots")]))(function(dotsGroup) {
        return bind114(traverse_14(function(pt) {
          return bind114(appendTo1(dotsGroup)(Circle.value)([cx26(pt.x), cy27(pt.y), radius30(4), fill40("steelblue"), fillOpacity14(0.7)]))(function() {
            return pure114(unit);
          });
        })(sampleData))(function() {
          return pure114(dotsGroup);
        });
      });
    });
  });
  var generateD3Code = function __do4() {
    var v = runPrinter(scatterPlotString)("")();
    return v.value1;
  };

  // output/Snippets/index.js
  var bind78 = /* @__PURE__ */ bind(bindAff);
  var spy7 = /* @__PURE__ */ spy();
  var pure44 = /* @__PURE__ */ pure(applicativeAff);
  var readSnippetFiles = function(name16) {
    return bind78(get4(string)("./code-examples/" + name16))(function(response) {
      if (response instanceof Left) {
        return spy7("couldn't read snippet, error: ")(pure44(printError(response.value0)));
      }
      ;
      if (response instanceof Right) {
        return spy7("read snippet: ")(pure44(response.value0.body));
      }
      ;
      throw new Error("Failed pattern match at Snippets (line 60, column 3 - line 62, column 52): " + [response.constructor.name]);
    });
  };

  // output/PSD3.Understanding.Interpreters/index.js
  var bind79 = /* @__PURE__ */ bind(bindHalogenM);
  var liftEffect45 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var liftAff34 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var modify_42 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var EnglishDescription = /* @__PURE__ */ (function() {
    function EnglishDescription2() {
    }
    ;
    EnglishDescription2.value = new EnglishDescription2();
    return EnglishDescription2;
  })();
  var D3Code = /* @__PURE__ */ (function() {
    function D3Code2() {
    }
    ;
    D3Code2.value = new D3Code2();
    return D3Code2;
  })();
  var VegaLite = /* @__PURE__ */ (function() {
    function VegaLite2() {
    }
    ;
    VegaLite2.value = new VegaLite2();
    return VegaLite2;
  })();
  var MermaidJS = /* @__PURE__ */ (function() {
    function MermaidJS2() {
    }
    ;
    MermaidJS2.value = new MermaidJS2();
    return MermaidJS2;
  })();
  var MetaTreeAST = /* @__PURE__ */ (function() {
    function MetaTreeAST2() {
    }
    ;
    MetaTreeAST2.value = new MetaTreeAST2();
    return MetaTreeAST2;
  })();
  var Initialize48 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SelectInterpreter = /* @__PURE__ */ (function() {
    function SelectInterpreter2(value0) {
      this.value0 = value0;
    }
    ;
    SelectInterpreter2.create = function(value0) {
      return new SelectInterpreter2(value0);
    };
    return SelectInterpreter2;
  })();
  var renderInterpreterContent = function(state3) {
    return function(v) {
      if (v instanceof EnglishDescription) {
        return div2([classes(["interpreter-output"])])([div2([classes(["prose"])])([p_([text5("Create a scatter plot visualization:")]), ul_([li_([text5('Attach to a div with class "scatterplot-viz"')]), li_([text5('Create an SVG element with class "simple-scatterplot", width 400px, and height 300px')]), li_([text5("Add a view box from (0, 0) to (400, 300)")]), li_([text5('Create a group element with class "dots"')]), li_([text5("For each of 20 data points:")]), ul_([li_([text5("Create a circle element")]), li_([text5("Position it at coordinates derived from the data")]), li_([text5("Set radius to 4 pixels")]), li_([text5("Fill with steelblue color")]), li_([text5("Set opacity to 0.7")])])])])]);
      }
      ;
      if (v instanceof D3Code) {
        return div2([classes(["interpreter-output"])])([pre([classes(["code-block"])])([code_([text5(fromMaybe("// Generating code...")(state3.generatedD3Code))])])]);
      }
      ;
      if (v instanceof VegaLite) {
        return div2([classes(["interpreter-output"])])([pre([classes(["code-block"])])([code_([text5(fromMaybe("// Snippet not defined: VegaLiteExample.purs")(state3.vegaLiteSnippet))])])]);
      }
      ;
      if (v instanceof MermaidJS) {
        return div2([classes(["interpreter-output"])])([pre([classes(["code-block"])])([code_([text5(fromMaybe("// Snippet not defined: MermaidExample.purs")(state3.mermaidSnippet))])])]);
      }
      ;
      if (v instanceof MetaTreeAST) {
        return div2([classes(["interpreter-output"])])([div2([classes(["metatree-viz"])])([text5("[AST Tree visualization will be rendered here]")])]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Understanding.Interpreters (line 173, column 34 - line 233, column 8): " + [v.constructor.name]);
    };
  };
  var interpreterTitle = function(v) {
    if (v instanceof EnglishDescription) {
      return "1. English Description";
    }
    ;
    if (v instanceof D3Code) {
      return "2. D3 JavaScript Code";
    }
    ;
    if (v instanceof VegaLite) {
      return "3. Vega-Lite JSON Specification";
    }
    ;
    if (v instanceof MermaidJS) {
      return "4. Mermaid Diagram Code";
    }
    ;
    if (v instanceof MetaTreeAST) {
      return "5. Meta Tree - Abstract Syntax Tree";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.Interpreters (line 150, column 20 - line 155, column 55): " + [v.constructor.name]);
  };
  var interpreterDescription = function(v) {
    if (v instanceof EnglishDescription) {
      return "This interpreter translates the DSL code into plain English, describing what the visualization does in natural language. Perfect for documentation and understanding code intent.";
    }
    ;
    if (v instanceof D3Code) {
      return "This interpreter generates equivalent D3.js JavaScript code. It shows how the high-level DSL operations map to lower-level D3 API calls, helping bridge PureScript and JavaScript developers.";
    }
    ;
    if (v instanceof VegaLite) {
      return "This interpreter produces a Vega-Lite JSON specification. Vega-Lite is a declarative visualization grammar, showing how our imperative DSL can be transformed into declarative JSON.";
    }
    ;
    if (v instanceof MermaidJS) {
      return "This interpreter generates Mermaid diagram syntax. It represents the visualization structure as a flowchart or diagram, useful for documentation and architectural overviews.";
    }
    ;
    if (v instanceof MetaTreeAST) {
      return "This interpreter visualizes the abstract syntax tree of the visualization code itself. It creates a tree diagram showing the structure of DSL operations, demonstrating meta-programming capabilities.";
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.Interpreters (line 159, column 26 - line 169, column 205): " + [v.constructor.name]);
  };
  var renderInterpreterOutput = function(state3) {
    return function(interpreter) {
      return section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5(interpreterTitle(interpreter))]), p_([text5(interpreterDescription(interpreter))]), div2([classes(["tutorial-viz-container"])])([renderInterpreterContent(state3)(interpreter)])]);
    };
  };
  var render58 = function(state3) {
    return div2([classes(["example-page"])])([renderHeader(Interpreters.value), main([classes(["tutorial-content"])])([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("7. Alternative Interpreters")]), p_([text5("The Finally Tagless pattern allows us to write visualization code once and interpret it in multiple ways. The same DSL code can produce an actual visualization, generate equivalent code in other languages, create documentation, or even visualize its own structure.")]), p_([text5("This flexibility comes from separating the ")]), em_([text5("structure")]), text5(" of our visualization (what operations we want to perform) from the "), em_([text5("interpretation")]), text5(" (how those operations are executed). Each interpreter below provides a different view of the same underlying code.")]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("The Source Code")]), p_([text5("Here's a simple example using our PureScript D3 DSL - the most basic example imaginable, three circles. The code demonstrates how the Finally Tagless pattern allows the same DSL code to be interpreted in multiple ways.")]), p_([a([href4("#/example/three-little-circles"), classes(["tutorial-link"])])([text5("View the Three Little Circles example with full source code \u2192")])])]), renderInterpreterOutput(state3)(state3.selectedInterpreter)])]);
  };
  var handleAction47 = function(v) {
    if (v instanceof Initialize48) {
      return bind79(liftEffect45(generateD3Code))(function(d3Code) {
        return bind79(liftAff34(readSnippetFiles("VegaLiteExample.purs")))(function(vegaCode) {
          return bind79(liftAff34(readSnippetFiles("MermaidExample.purs")))(function(mermaidCode) {
            return modify_42(function(v1) {
              var $20 = {};
              for (var $21 in v1) {
                if ({}.hasOwnProperty.call(v1, $21)) {
                  $20[$21] = v1[$21];
                }
                ;
              }
              ;
              $20.generatedD3Code = new Just(d3Code);
              $20.vegaLiteSnippet = new Just(vegaCode);
              $20.mermaidSnippet = new Just(mermaidCode);
              return $20;
            });
          });
        });
      });
    }
    ;
    if (v instanceof SelectInterpreter) {
      return modify_42(function(v1) {
        var $23 = {};
        for (var $24 in v1) {
          if ({}.hasOwnProperty.call(v1, $24)) {
            $23[$24] = v1[$24];
          }
          ;
        }
        ;
        $23.selectedInterpreter = v.value0;
        return $23;
      });
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.Interpreters (line 61, column 16 - line 75, column 54): " + [v.constructor.name]);
  };
  var component53 = /* @__PURE__ */ (function() {
    var initialState7 = {
      selectedInterpreter: EnglishDescription.value,
      generatedD3Code: Nothing.value,
      vegaLiteSnippet: Nothing.value,
      mermaidSnippet: Nothing.value
    };
    return mkComponent({
      initialState: $$const(initialState7),
      render: render58,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction47,
        initialize: new Just(Initialize48.value)
      })
    });
  })();

  // output/PSD3.Understanding.IsometricCurveExperiment/index.js
  var type_22 = /* @__PURE__ */ type_17(isPropInputType);
  var append120 = /* @__PURE__ */ append(semigroupArray);
  var bind80 = /* @__PURE__ */ bind(bindArray);
  var show57 = /* @__PURE__ */ show(showNumber);
  var map86 = /* @__PURE__ */ map(functorArray);
  var minimum9 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum15 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var liftEffect46 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var bind115 = /* @__PURE__ */ bind(bindD3M);
  var attach4 = /* @__PURE__ */ attach(d3TaglessD3M);
  var appendTo3 = /* @__PURE__ */ appendTo(d3TaglessD3M);
  var classed46 = /* @__PURE__ */ classed(toAttrString);
  var x42 = /* @__PURE__ */ x(toAttrNumber);
  var y42 = /* @__PURE__ */ y(toAttrNumber);
  var fill41 = /* @__PURE__ */ fill(toAttrString);
  var fontSize23 = /* @__PURE__ */ fontSize(toAttrNumber);
  var text33 = /* @__PURE__ */ text6(toAttrString);
  var discard83 = /* @__PURE__ */ discard(discardUnit);
  var discard112 = /* @__PURE__ */ discard83(bindD3M);
  var traverse_15 = /* @__PURE__ */ traverse_(applicativeD3M)(foldableArray);
  var d22 = /* @__PURE__ */ d(toAttrString);
  var strokeColor38 = /* @__PURE__ */ strokeColor(toAttrString);
  var fillOpacity15 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var strokeWidth34 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var pure45 = /* @__PURE__ */ pure(applicativeD3M);
  var cx27 = /* @__PURE__ */ cx(toAttrNumber);
  var cy28 = /* @__PURE__ */ cy(toAttrNumber);
  var radius31 = /* @__PURE__ */ radius(toAttrNumber);
  var bind211 = /* @__PURE__ */ bind(bindHalogenM);
  var get12 = /* @__PURE__ */ get(monadStateHalogenM);
  var pure115 = /* @__PURE__ */ pure(applicativeHalogenM);
  var liftEffect111 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var removeExistingSVG3 = /* @__PURE__ */ removeExistingSVG(d3TaglessD3M);
  var liftAff35 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var discard213 = /* @__PURE__ */ discard83(bindHalogenM);
  var modify_43 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var Positive = /* @__PURE__ */ (function() {
    function Positive2() {
    }
    ;
    Positive2.value = new Positive2();
    return Positive2;
  })();
  var Zero = /* @__PURE__ */ (function() {
    function Zero2() {
    }
    ;
    Zero2.value = new Zero2();
    return Zero2;
  })();
  var Negative = /* @__PURE__ */ (function() {
    function Negative2() {
    }
    ;
    Negative2.value = new Negative2();
    return Negative2;
  })();
  var Initialize49 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var SetCx1 = /* @__PURE__ */ (function() {
    function SetCx12(value0) {
      this.value0 = value0;
    }
    ;
    SetCx12.create = function(value0) {
      return new SetCx12(value0);
    };
    return SetCx12;
  })();
  var SetCy1 = /* @__PURE__ */ (function() {
    function SetCy12(value0) {
      this.value0 = value0;
    }
    ;
    SetCy12.create = function(value0) {
      return new SetCy12(value0);
    };
    return SetCy12;
  })();
  var SetCx2 = /* @__PURE__ */ (function() {
    function SetCx22(value0) {
      this.value0 = value0;
    }
    ;
    SetCx22.create = function(value0) {
      return new SetCx22(value0);
    };
    return SetCx22;
  })();
  var SetCy2 = /* @__PURE__ */ (function() {
    function SetCy22(value0) {
      this.value0 = value0;
    }
    ;
    SetCy22.create = function(value0) {
      return new SetCy22(value0);
    };
    return SetCy22;
  })();
  var SetParentMultiplier = /* @__PURE__ */ (function() {
    function SetParentMultiplier2(value0) {
      this.value0 = value0;
    }
    ;
    SetParentMultiplier2.create = function(value0) {
      return new SetParentMultiplier2(value0);
    };
    return SetParentMultiplier2;
  })();
  var SetChildMultiplier = /* @__PURE__ */ (function() {
    function SetChildMultiplier2(value0) {
      this.value0 = value0;
    }
    ;
    SetChildMultiplier2.create = function(value0) {
      return new SetChildMultiplier2(value0);
    };
    return SetChildMultiplier2;
  })();
  var showOffsetDir = {
    show: function(v) {
      if (v instanceof Positive) {
        return "+";
      }
      ;
      if (v instanceof Zero) {
        return "0";
      }
      ;
      if (v instanceof Negative) {
        return "-";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Understanding.IsometricCurveExperiment (line 34, column 1 - line 37, column 22): " + [v.constructor.name]);
    }
  };
  var show131 = /* @__PURE__ */ show(showOffsetDir);
  var renderMultiplierRadio = function(value18) {
    return function(currentValue) {
      return function(mkAction) {
        return function(labelText) {
          return label4([classes(["radio-label"])])([input2([type_22(InputRadio.value), checked2(value18 === currentValue), onClick(function(v) {
            return mkAction(value18);
          })]), text5(" " + labelText)]);
        };
      };
    };
  };
  var renderMultiplierControl = function(label5) {
    return function(currentValue) {
      return function(mkAction) {
        return div2([classes(["multiplier-control"])])([label_([text5(label5)]), div2([classes(["radio-group"])])([renderMultiplierRadio(0)(currentValue)(mkAction)("0.0 (none)"), renderMultiplierRadio(0.01)(currentValue)(mkAction)("0.01 (minimal)"), renderMultiplierRadio(0.1)(currentValue)(mkAction)("0.1 (tiny)"), renderMultiplierRadio(0.15)(currentValue)(mkAction)("0.15 (small)"), renderMultiplierRadio(0.2)(currentValue)(mkAction)("0.2 (base)"), renderMultiplierRadio(0.25)(currentValue)(mkAction)("0.25 (medium)"), renderMultiplierRadio(0.3)(currentValue)(mkAction)("0.3 (large)"), renderMultiplierRadio(0.4)(currentValue)(mkAction)("0.4 (huge)")])]);
      };
    };
  };
  var getAllNodes7 = function(v) {
    var $73 = length3(v.children) === 0;
    if ($73) {
      return [v];
    }
    ;
    return append120([v])(bind80(v.children)(getAllNodes7));
  };
  var eqOffsetDir = {
    eq: function(x115) {
      return function(y113) {
        if (x115 instanceof Positive && y113 instanceof Positive) {
          return true;
        }
        ;
        if (x115 instanceof Zero && y113 instanceof Zero) {
          return true;
        }
        ;
        if (x115 instanceof Negative && y113 instanceof Negative) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq23 = /* @__PURE__ */ eq(eqOffsetDir);
  var renderRadio = function(dir2) {
    return function(currentDir) {
      return function(mkAction) {
        return label4([classes(["radio-label"])])([input2([type_22(InputRadio.value), checked2(eq23(dir2)(currentDir)), onClick(function(v) {
          return mkAction(dir2);
        })]), text5(" " + show131(dir2))]);
      };
    };
  };
  var renderOffsetControl = function(label5) {
    return function(currentDir) {
      return function(mkAction) {
        return div2([classes(["offset-control"])])([label_([text5(label5)]), div2([classes(["radio-group"])])([renderRadio(Positive.value)(currentDir)(mkAction), renderRadio(Zero.value)(currentDir)(mkAction), renderRadio(Negative.value)(currentDir)(mkAction)])]);
      };
    };
  };
  var render59 = function(state3) {
    var offsetFormula = function(v) {
      if (v instanceof Positive) {
        return "+ ";
      }
      ;
      if (v instanceof Zero) {
        return "+ 0 * ";
      }
      ;
      if (v instanceof Negative) {
        return "- ";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Understanding.IsometricCurveExperiment (line 122, column 5 - line 122, column 41): " + [v.constructor.name]);
    };
    return div2([classes(["experiment-page"])])([div2([classes(["experiment-header"])])([h1_([text5("Isometric Curve Experiment")]), p_([text5("Adjust control point offsets to find the best curve shape")])]), div2([classes(["experiment-controls"])])([div2([classes(["control-group"])])([h3_([text5("Control Point 1 (Parent)")]), renderOffsetControl("cx1 (X offset)")(state3.cx1Dir)(SetCx1.create), renderOffsetControl("cy1 (Y offset)")(state3.cy1Dir)(SetCy1.create), renderMultiplierControl("Parent offset size")(state3.parentMultiplier)(SetParentMultiplier.create)]), div2([classes(["control-group"])])([h3_([text5("Control Point 2 (Child)")]), renderOffsetControl("cx2 (X offset)")(state3.cx2Dir)(SetCx2.create), renderOffsetControl("cy2 (Y offset)")(state3.cy2Dir)(SetCy2.create), renderMultiplierControl("Child offset size")(state3.childMultiplier)(SetChildMultiplier.create)]), div2([classes(["current-config"])])([h4_([text5("Current Configuration:")]), pre_([text5("parentOffset = distance * " + (show57(state3.parentMultiplier) + ("\n" + ("childOffset = distance * " + (show57(state3.childMultiplier) + ("\n" + ("cx1 = x1 " + (offsetFormula(state3.cx1Dir) + (" parentOffset\n" + ("cy1 = y1 " + (offsetFormula(state3.cy1Dir) + (" parentOffset\n" + ("cx2 = x2 " + (offsetFormula(state3.cx2Dir) + (" childOffset\n" + ("cy2 = y2 " + (offsetFormula(state3.cy2Dir) + " childOffset")))))))))))))))))])])]), div2([classes(["experiment-viz"])])([])]);
  };
  var dirToMultiplier = function(v) {
    if (v instanceof Positive) {
      return 1;
    }
    ;
    if (v instanceof Zero) {
      return 0;
    }
    ;
    if (v instanceof Negative) {
      return -1;
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.IsometricCurveExperiment (line 231, column 1 - line 231, column 39): " + [v.constructor.name]);
  };
  var makeIsometricLinkPath = function(state3) {
    return function(parent2) {
      return function(child) {
        var y211 = isometricY(child);
        var y113 = isometricY(parent2);
        var x211 = isometricX(child);
        var x115 = isometricX(parent2);
        var distance2 = abs2(x211 - x115) + abs2(y211 - y113);
        var parentOffset = distance2 * state3.parentMultiplier;
        var cy110 = y113 + dirToMultiplier(state3.cy1Dir) * parentOffset;
        var cx110 = x115 + dirToMultiplier(state3.cx1Dir) * parentOffset;
        var childOffset = distance2 * state3.childMultiplier;
        var cx210 = x211 + dirToMultiplier(state3.cx2Dir) * childOffset;
        var cy210 = y211 + dirToMultiplier(state3.cy2Dir) * childOffset;
        return "M" + (show57(x115) + ("," + (show57(y113) + (" C" + (show57(cx110) + ("," + (show57(cy110) + (" " + (show57(cx210) + ("," + (show57(cy210) + (" " + (show57(x211) + ("," + show57(y211)))))))))))))));
      };
    };
  };
  var calculateBounds3 = function(nodes) {
    var yCoords = map86(isometricY)(nodes);
    var xCoords = map86(isometricX)(nodes);
    var minY = fromMaybe(0)(minimum9(yCoords));
    var minX = fromMaybe(0)(minimum9(xCoords));
    var maxY = fromMaybe(0)(maximum15(yCoords));
    var maxX = fromMaybe(0)(maximum15(xCoords));
    return {
      minX,
      maxX,
      minY,
      maxY
    };
  };
  var drawIsometricTree = function(state3) {
    return function(flareData) {
      return liftEffect46(eval_D3M((function() {
        var root3 = hierarchy(flareData)(getChildren);
        var config = {
          nodeSize: defaultTreeConfig2.nodeSize,
          separation: defaultTreeConfig2.separation,
          size: {
            width: 1600 * isometricScale,
            height: 1200 * isometricScale
          }
        };
        var layout = tree3(config)(root3);
        var nodes = getAllNodes7(layout);
        var bounds = calculateBounds3(nodes);
        var width25 = bounds.maxX - bounds.minX + 2 * 50;
        var height25 = bounds.maxY - bounds.minY + 2 * 50;
        var viewBoxSpec = {
          x: bounds.minX - 50,
          y: bounds.minY - 50,
          width: width25,
          height: height25
        };
        return bind115(attach4("div.experiment-viz"))(function(root$prime) {
          return bind115(appendTo3(root$prime)(Svg.value)([viewBox(viewBoxSpec.x)(viewBoxSpec.y)(viewBoxSpec.width)(viewBoxSpec.height), classed46("isometric-tree-experiment")]))(function(svg2) {
            return bind115(appendTo3(svg2)(Text2.value)([x42(viewBoxSpec.x + 10), y42(viewBoxSpec.y + 20), fill41("#333"), fontSize23(14), text33("Config: cx1=" + (show131(state3.cx1Dir) + (" cy1=" + (show131(state3.cy1Dir) + (" cx2=" + (show131(state3.cx2Dir) + (" cy2=" + show131(state3.cy2Dir)))))))), classed46("title")]))(function() {
              return bind115(appendTo3(svg2)(Group.value)([classed46("links")]))(function(linksGroup) {
                return bind115(appendTo3(svg2)(Group.value)([classed46("nodes")]))(function(nodesGroup) {
                  var renderLinks = function(v) {
                    return discard112(traverse_15(function(child) {
                      var pathData = makeIsometricLinkPath(state3)(v)(child);
                      return bind115(appendTo3(linksGroup)(Path2.value)([d22(pathData), fill41("none"), strokeColor38("#555"), fillOpacity15(0.4), strokeWidth34(1.5), classed46("link")]))(function() {
                        return pure45(unit);
                      });
                    })(v.children))(function() {
                      return traverse_15(renderLinks)(v.children);
                    });
                  };
                  var renderNode = function(v) {
                    var isLeaf = length3(v.children) === 0;
                    var nodeRadius2 = (function() {
                      if (isLeaf) {
                        return 3;
                      }
                      ;
                      return 4;
                    })();
                    return bind115(appendTo3(nodesGroup)(Circle.value)([cx27(isometricX(v)), cy28(isometricY(v)), radius31(nodeRadius2), fill41("#999"), strokeColor38("#555"), strokeWidth34(1.5), classed46("node")]))(function() {
                      return traverse_15(renderNode)(v.children);
                    });
                  };
                  return bind115(renderLinks(layout))(function() {
                    return bind115(renderNode(layout))(function() {
                      return pure45(unit);
                    });
                  });
                });
              });
            });
          });
        });
      })()));
    };
  };
  var redrawViz = /* @__PURE__ */ bind211(get12)(function(state3) {
    if (state3.treeData instanceof Nothing) {
      return pure115(unit);
    }
    ;
    if (state3.treeData instanceof Just) {
      return bind211(liftEffect111(eval_D3M(removeExistingSVG3("div.experiment-viz"))))(function() {
        return bind211(liftAff35(drawIsometricTree(state3)(state3.treeData.value0)))(function() {
          return pure115(unit);
        });
      });
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.IsometricCurveExperiment (line 223, column 3 - line 228, column 16): " + [state3.treeData.constructor.name]);
  });
  var handleAction48 = function(v) {
    if (v instanceof Initialize49) {
      return bind211(liftAff35(getTreeViaAJAX("./data/flare-2.json")))(function(treeJSON) {
        if (treeJSON instanceof Left) {
          return pure115(unit);
        }
        ;
        if (treeJSON instanceof Right) {
          return discard213(modify_43(function(v1) {
            var $86 = {};
            for (var $87 in v1) {
              if ({}.hasOwnProperty.call(v1, $87)) {
                $86[$87] = v1[$87];
              }
              ;
            }
            ;
            $86.treeData = new Just(treeJSON.value0);
            return $86;
          }))(function() {
            return bind211(get12)(function(state3) {
              return bind211(liftAff35(drawIsometricTree(state3)(treeJSON.value0)))(function() {
                return pure115(unit);
              });
            });
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.Understanding.IsometricCurveExperiment (line 188, column 5 - line 194, column 18): " + [treeJSON.constructor.name]);
      });
    }
    ;
    if (v instanceof SetCx1) {
      return discard213(modify_43(function(v1) {
        var $90 = {};
        for (var $91 in v1) {
          if ({}.hasOwnProperty.call(v1, $91)) {
            $90[$91] = v1[$91];
          }
          ;
        }
        ;
        $90.cx1Dir = v.value0;
        return $90;
      }))(function() {
        return redrawViz;
      });
    }
    ;
    if (v instanceof SetCy1) {
      return discard213(modify_43(function(v1) {
        var $94 = {};
        for (var $95 in v1) {
          if ({}.hasOwnProperty.call(v1, $95)) {
            $94[$95] = v1[$95];
          }
          ;
        }
        ;
        $94.cy1Dir = v.value0;
        return $94;
      }))(function() {
        return redrawViz;
      });
    }
    ;
    if (v instanceof SetCx2) {
      return discard213(modify_43(function(v1) {
        var $98 = {};
        for (var $99 in v1) {
          if ({}.hasOwnProperty.call(v1, $99)) {
            $98[$99] = v1[$99];
          }
          ;
        }
        ;
        $98.cx2Dir = v.value0;
        return $98;
      }))(function() {
        return redrawViz;
      });
    }
    ;
    if (v instanceof SetCy2) {
      return discard213(modify_43(function(v1) {
        var $102 = {};
        for (var $103 in v1) {
          if ({}.hasOwnProperty.call(v1, $103)) {
            $102[$103] = v1[$103];
          }
          ;
        }
        ;
        $102.cy2Dir = v.value0;
        return $102;
      }))(function() {
        return redrawViz;
      });
    }
    ;
    if (v instanceof SetParentMultiplier) {
      return discard213(modify_43(function(v1) {
        var $106 = {};
        for (var $107 in v1) {
          if ({}.hasOwnProperty.call(v1, $107)) {
            $106[$107] = v1[$107];
          }
          ;
        }
        ;
        $106.parentMultiplier = v.value0;
        return $106;
      }))(function() {
        return redrawViz;
      });
    }
    ;
    if (v instanceof SetChildMultiplier) {
      return discard213(modify_43(function(v1) {
        var $110 = {};
        for (var $111 in v1) {
          if ({}.hasOwnProperty.call(v1, $111)) {
            $110[$111] = v1[$111];
          }
          ;
        }
        ;
        $110.childMultiplier = v.value0;
        return $110;
      }))(function() {
        return redrawViz;
      });
    }
    ;
    throw new Error("Failed pattern match at PSD3.Understanding.IsometricCurveExperiment (line 184, column 16 - line 218, column 14): " + [v.constructor.name]);
  };
  var component54 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          treeData: Nothing.value,
          cx1Dir: Positive.value,
          cy1Dir: Positive.value,
          cx2Dir: Negative.value,
          cy2Dir: Negative.value,
          parentMultiplier: 0.2,
          childMultiplier: 0.2
        };
      },
      render: render59,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction48,
        initialize: new Just(Initialize49.value)
      })
    });
  })();

  // output/PSD3.Understanding.Movement/index.js
  var pure46 = /* @__PURE__ */ pure(applicativeEffect);
  var sequence3 = /* @__PURE__ */ sequence(traversableArray)(applicativeEffect);
  var map87 = /* @__PURE__ */ map(functorArray);
  var bind116 = /* @__PURE__ */ bind(bindAff);
  var liftEffect47 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var discard84 = /* @__PURE__ */ discard(discardUnit);
  var discard113 = /* @__PURE__ */ discard84(bindAff);
  var exGeneralUpdatePattern3 = /* @__PURE__ */ exGeneralUpdatePattern(d3TaglessD3M);
  var applySecond3 = /* @__PURE__ */ applySecond(applyEffect);
  var bind212 = /* @__PURE__ */ bind(bindHalogenM);
  var drawThreeCirclesTransition3 = /* @__PURE__ */ drawThreeCirclesTransition(monadEffD3M)(d3TaglessD3M);
  var discard214 = /* @__PURE__ */ discard84(bindHalogenM);
  var modify_44 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var forever2 = /* @__PURE__ */ forever(monadRecAff);
  var fromFoldable46 = /* @__PURE__ */ fromFoldable6(foldableArray)(ordString);
  var runWithD3_Simulation4 = /* @__PURE__ */ runWithD3_Simulation(bindHalogenM)(monadStateHalogenM);
  var drawSimplified4 = /* @__PURE__ */ drawSimplified(bindD3SimM)(monadEffD3SimM)(monadStateD3SimM)(simulationM2D3Selection_D);
  var pure116 = /* @__PURE__ */ pure(applicativeHalogenM);
  var drawAnimatedRadialTree3 = /* @__PURE__ */ drawAnimatedRadialTree(applicativeD3M);
  var gets3 = /* @__PURE__ */ gets(monadStateHalogenM);
  var transitionToColorMixing2 = /* @__PURE__ */ transitionToColorMixing(monadEffD3M)(d3TaglessD3M);
  var get13 = /* @__PURE__ */ get(monadStateHalogenM);
  var updateToLayout2 = /* @__PURE__ */ updateToLayout(applicativeD3M);
  var rotateTree2 = /* @__PURE__ */ rotateTree(applicativeD3M);
  var Initialize50 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var Finalize5 = /* @__PURE__ */ (function() {
    function Finalize6() {
    }
    ;
    Finalize6.value = new Finalize6();
    return Finalize6;
  })();
  var TriggerCirclesTransition = /* @__PURE__ */ (function() {
    function TriggerCirclesTransition2() {
    }
    ;
    TriggerCirclesTransition2.value = new TriggerCirclesTransition2();
    return TriggerCirclesTransition2;
  })();
  var ToggleRadialTreeLayout = /* @__PURE__ */ (function() {
    function ToggleRadialTreeLayout2() {
    }
    ;
    ToggleRadialTreeLayout2.value = new ToggleRadialTreeLayout2();
    return ToggleRadialTreeLayout2;
  })();
  var RotateRadialTree = /* @__PURE__ */ (function() {
    function RotateRadialTree2() {
    }
    ;
    RotateRadialTree2.value = new RotateRadialTree2();
    return RotateRadialTree2;
  })();
  var runUpdate = function(update4) {
    var getLetters = (function() {
      var letters = toCharArray("abcdefghijklmnopqrstuvwxyz");
      var coinToss = function(c) {
        return function __do5() {
          var n = random();
          var $72 = n > 0.6;
          if ($72) {
            return new Just(c);
          }
          ;
          return Nothing.value;
        };
      };
      return function __do5() {
        var choices = sequence3(map87(coinToss)(letters))();
        return catMaybes(choices);
      };
    })();
    return bind116(liftEffect47(getLetters))(function(letters) {
      return discard113(update4(letters))(function() {
        return delay(2300);
      });
    });
  };
  var runGeneralUpdatePattern = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind310 = bind(Bind1);
    var liftEffect112 = liftEffect(dictMonadEffect);
    var pure211 = pure(Monad0.Applicative0());
    return discard84(Bind1)(log3(dictMonadEffect)("General Update Pattern example"))(function() {
      return bind310(liftEffect112(eval_D3M(exGeneralUpdatePattern3("div.gup-viz"))))(function(update4) {
        return pure211(function(letters) {
          return liftEffect47(applySecond3(runD3M(update4(letters)))(pure46(unit)));
        });
      });
    });
  };
  var render60 = function(v) {
    return div2([classes(["example-page"])])([renderHeader(Movement.value), main([classes(["tutorial-content"])])([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("5. Movement & Transition")]), p_([text5("This page explores transitions and movement in D3 visualizations, from simple color and position changes to complex physics simulations with the General Update Pattern.")])]), section([classes(["tutorial-section"]), id2("section-1")])([h2([classes(["tutorial-section-title"])])([text5("1. Basic Transitions: Color Mixing")]), p_([text5("Transitions allow smooth animated changes to visual properties. This simple example shows three circles transitioning from green to RGB primary colors (red, green, blue) with 50% opacity. The circles reposition to overlap, demonstrating additive color mixing where overlapping colors create secondary colors: cyan (green + blue), magenta (red + blue), and yellow (red + green).")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["three-circles-viz"])])([]), button([classes(["transition-button"]), onClick(function(v1) {
      return TriggerCirclesTransition.value;
    })])([text5("Mix Colors")])])]), section([classes(["tutorial-section"]), id2("section-2")])([h2([classes(["tutorial-section-title"])])([text5("2. The General Update Pattern")]), p_([text5("This deceptively simple example shows off an aspect of screen-based data visualization that has no analogue in paper visualizations: the ability to specify how updates to the data should be represented.")]), p_([text5("In this example, some letters of the alphabet are presented and then constantly updated. When a letter enters at first, it falls in from the top and it is green. If it's still present in the next set of letters it stays on the screen, but it turns gray and moves to an alphabetically correct new position. And if it's not present in the new data, it turns red and falls out before disappearing.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["gup-viz"])])([])]), p_([a([href4("#/example/general-update-pattern"), classes(["tutorial-link"])])([text5("View interactive example with full source code \u2192")])])]), section([classes(["tutorial-section"]), id2("section-3")])([h2([classes(["tutorial-section-title"])])([text5("3. Force-Directed Graph: Les Mis\xE9rables")]), p_([text5("Force-directed graphs use physics simulation to position nodes and links. Nodes repel each other like charged particles, while links act as springs pulling connected nodes together. The simulation finds an equilibrium that naturally reveals the structure of the network.")]), p_([text5("This example uses the simplified SimulationM API - a single "), code_([text5("init")]), text5(" call with a configuration record, followed by "), code_([text5("start")]), text5(". The graph shows character co-occurrence in Victor Hugo's Les Mis\xE9rables, where node size represents importance and link thickness shows the strength of connections.")]), div2([classes(["tutorial-viz-container"])])([render7, div2([classes(["lesmis-container"])])([])]), p_([text5("Drag nodes to see the force simulation respond. The simulation applies multiple forces: center (pulls toward middle), charge (nodes repel), collision (prevents overlap), and link (pulls connected nodes together).")]), p_([a([href4("#/example/lesmis-force"), classes(["tutorial-link"])])([text5("View interactive example with full source code \u2192")])])]), section([classes(["tutorial-section"]), id2("section-4")])([h2([classes(["tutorial-section-title"])])([text5("4. Animated Radial Tree")]), p_([text5("This demonstration shows smooth transitions between Tidy Tree and Dendrogram layouts in a radial arrangement. The same nodes smoothly animate to their new positions\u2014no enter/exit, just updates. The rotate button helps with label readability.")]), div2([classes(["tutorial-viz-container"])])([render7, div2([classes(["radial-tree-viz"])])([])]), div2([classes(["tutorial-button-group"])])([button([classes(["tutorial-button"]), onClick(function(v1) {
      return ToggleRadialTreeLayout.value;
    })])([text5("Toggle Tidy/Dendrogram")]), button([classes(["tutorial-button"]), onClick(function(v1) {
      return RotateRadialTree.value;
    })])([text5("Rotate 90\xB0")])])])])]);
  };
  var forces2 = /* @__PURE__ */ (function() {
    return {
      manyBodyNeg: createForce("many body negative")(new RegularForce(ForceManyBody.value))(allNodes)([strengthVal(-40)]),
      collision: createForce("collision")(new RegularForce(ForceCollide.value))(allNodes)([radiusVal(4)]),
      center: createForce("center")(new RegularForce(ForceCenter.value))(allNodes)([xVal(0), yVal(0), strengthVal(1)]),
      links: createLinkForce(Nothing.value)([])
    };
  })();
  var handleAction49 = function(dictMonadAff) {
    var monadEffectHalogenM8 = monadEffectHalogenM(dictMonadAff.MonadEffect0());
    var liftEffect112 = liftEffect(monadEffectHalogenM8);
    var runGeneralUpdatePattern1 = runGeneralUpdatePattern(monadEffectHalogenM8);
    var monadAffHalogenM2 = monadAffHalogenM(dictMonadAff);
    var liftAff37 = liftAff(monadAffHalogenM2);
    var runWithD3_Simulation1 = runWithD3_Simulation4(monadAffHalogenM2);
    return function(v) {
      if (v instanceof Initialize50) {
        return bind212(liftEffect112(eval_D3M(drawThreeCirclesTransition3("div.three-circles-viz"))))(function(v1) {
          return discard214(modify_44(function(state3) {
            var $75 = {};
            for (var $76 in state3) {
              if ({}.hasOwnProperty.call(state3, $76)) {
                $75[$76] = state3[$76];
              }
              ;
            }
            ;
            $75.circlesSelection = new Just(v1.circles);
            return $75;
          }))(function() {
            return bind212(runGeneralUpdatePattern1)(function(updateFn) {
              return bind212(liftAff37(forkAff(forever2(runUpdate(updateFn)))))(function(fiber) {
                return discard214(modify_44(function(state3) {
                  var $78 = {};
                  for (var $79 in state3) {
                    if ({}.hasOwnProperty.call(state3, $79)) {
                      $78[$79] = state3[$79];
                    }
                    ;
                  }
                  ;
                  $78.gupFiber = new Just(fiber);
                  return $78;
                }))(function() {
                  return bind212(liftAff37(get4(string)("./data/miserables.json")))(function(response) {
                    var graph = readGraphFromFileContents(response);
                    var forcesArray = [forces2.manyBodyNeg, forces2.collision, forces2.center, forces2.links];
                    var activeForces = fromFoldable46(["many body negative", "collision", "center", linksForceName_]);
                    return discard214(runWithD3_Simulation1(drawSimplified4(forcesArray)(activeForces)(graph)("div.lesmis-container")))(function() {
                      return bind212(liftAff37(getTreeViaAJAX("./data/flare-2.json")))(function(treeResponse) {
                        if (treeResponse instanceof Left) {
                          return pure116(unit);
                        }
                        ;
                        if (treeResponse instanceof Right) {
                          return bind212(liftEffect112(eval_D3M(drawAnimatedRadialTree3(TidyTree.value)(treeResponse.value0)("div.radial-tree-viz"))))(function(v2) {
                            return modify_44(function(state3) {
                              var $84 = {};
                              for (var $85 in state3) {
                                if ({}.hasOwnProperty.call(state3, $85)) {
                                  $84[$85] = state3[$85];
                                }
                                ;
                              }
                              ;
                              $84.radialTreeData = new Just(treeResponse.value0);
                              $84.radialRotationGroup = new Just(v2.rotationGroup);
                              $84.radialLinksGroup = new Just(v2.linksGroup);
                              $84.radialNodesGroup = new Just(v2.nodesGroup);
                              $84.radialHierarchyRoot = new Just(v2.root);
                              return $84;
                            });
                          });
                        }
                        ;
                        throw new Error("Failed pattern match at PSD3.Understanding.Movement (line 266, column 5 - line 280, column 11): " + [treeResponse.constructor.name]);
                      });
                    });
                  });
                });
              });
            });
          });
        });
      }
      ;
      if (v instanceof Finalize5) {
        return bind212(gets3(function(v1) {
          return v1.gupFiber;
        }))(function(maybeFiber) {
          if (maybeFiber instanceof Nothing) {
            return pure116(unit);
          }
          ;
          if (maybeFiber instanceof Just) {
            return liftAff37(killFiber(error("Cancelling GUP animation"))(maybeFiber.value0));
          }
          ;
          throw new Error("Failed pattern match at PSD3.Understanding.Movement (line 285, column 5 - line 287, column 83): " + [maybeFiber.constructor.name]);
        });
      }
      ;
      if (v instanceof TriggerCirclesTransition) {
        return bind212(gets3(function(v1) {
          return v1.circlesSelection;
        }))(function(maybeCircles) {
          if (maybeCircles instanceof Nothing) {
            return pure116(unit);
          }
          ;
          if (maybeCircles instanceof Just) {
            return liftEffect112(eval_D3M(transitionToColorMixing2(maybeCircles.value0)));
          }
          ;
          throw new Error("Failed pattern match at PSD3.Understanding.Movement (line 292, column 5 - line 294, column 98): " + [maybeCircles.constructor.name]);
        });
      }
      ;
      if (v instanceof ToggleRadialTreeLayout) {
        return bind212(get13)(function(state3) {
          var newType = (function() {
            if (state3.radialTreeType instanceof TidyTree) {
              return Dendrogram.value;
            }
            ;
            if (state3.radialTreeType instanceof Dendrogram) {
              return TidyTree.value;
            }
            ;
            throw new Error("Failed pattern match at PSD3.Understanding.Movement (line 299, column 19 - line 301, column 33): " + [state3.radialTreeType.constructor.name]);
          })();
          return discard214(modify_44(function(v1) {
            var $98 = {};
            for (var $99 in v1) {
              if ({}.hasOwnProperty.call(v1, $99)) {
                $98[$99] = v1[$99];
              }
              ;
            }
            ;
            $98.radialTreeType = newType;
            return $98;
          }))(function() {
            if (state3.radialHierarchyRoot instanceof Just && (state3.radialLinksGroup instanceof Just && state3.radialNodesGroup instanceof Just)) {
              return liftEffect112(eval_D3M(updateToLayout2(newType)(state3.radialHierarchyRoot.value0)(state3.radialLinksGroup.value0)(state3.radialNodesGroup.value0)));
            }
            ;
            return pure116(unit);
          });
        });
      }
      ;
      if (v instanceof RotateRadialTree) {
        return bind212(get13)(function(state3) {
          var newRotation = state3.radialRotation + 90;
          return discard214(modify_44(function(v1) {
            var $107 = {};
            for (var $108 in v1) {
              if ({}.hasOwnProperty.call(v1, $108)) {
                $107[$108] = v1[$108];
              }
              ;
            }
            ;
            $107.radialRotation = newRotation;
            return $107;
          }))(function() {
            if (state3.radialRotationGroup instanceof Nothing) {
              return pure116(unit);
            }
            ;
            if (state3.radialRotationGroup instanceof Just) {
              return liftEffect112(eval_D3M(rotateTree2(state3.radialRotation)(90)(state3.radialRotationGroup.value0)));
            }
            ;
            throw new Error("Failed pattern match at PSD3.Understanding.Movement (line 321, column 5 - line 324, column 104): " + [state3.radialRotationGroup.constructor.name]);
          });
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Understanding.Movement (line 239, column 16 - line 324, column 104): " + [v.constructor.name]);
    };
  };
  var forceLibrary4 = /* @__PURE__ */ (function() {
    return initialize2(foldableArray)(functorArray)([forces2.manyBodyNeg, forces2.collision, forces2.center, forces2.links]);
  })();
  var component55 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          simulation: initialSimulationState(forceLibrary4),
          gupFiber: Nothing.value,
          circlesSelection: Nothing.value,
          radialTreeData: Nothing.value,
          radialTreeType: TidyTree.value,
          radialRotation: 0,
          radialRotationGroup: Nothing.value,
          radialLinksGroup: Nothing.value,
          radialNodesGroup: Nothing.value,
          radialHierarchyRoot: Nothing.value
        };
      },
      render: render60,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        handleAction: handleAction49(monadAffAff),
        initialize: new Just(Initialize50.value),
        finalize: new Just(Finalize5.value)
      })
    });
  })();

  // output/PSD3.Shared.MermaidAST/index.js
  var bind81 = /* @__PURE__ */ bind(bindHalogenM);
  var get14 = /* @__PURE__ */ get(monadStateHalogenM);
  var discard85 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var modify_45 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var Initialize51 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var render61 = function(state3) {
    return mermaidDiagram(state3.mermaidCode)(state3.className);
  };
  var mkInput = function(computation) {
    return {
      computation,
      className: Nothing.value
    };
  };
  var initialState4 = function(input3) {
    return {
      mermaidCode: 'graph TD\n    Loading["Loading..."]',
      className: input3.className,
      computation: input3.computation
    };
  };
  var handleAction50 = function(dictMonadAff) {
    var monadEffectHalogenM8 = monadEffectHalogenM(dictMonadAff.MonadEffect0());
    var liftEffect53 = liftEffect(monadEffectHalogenM8);
    var triggerMermaidRendering9 = triggerMermaidRendering(monadEffectHalogenM8);
    return function(v) {
      return bind81(get14)(function(state3) {
        return bind81(liftEffect53(runMermaidAST(state3.computation)))(function(diagramCode) {
          return discard85(modify_45(function(v1) {
            var $16 = {};
            for (var $17 in v1) {
              if ({}.hasOwnProperty.call(v1, $17)) {
                $16[$17] = v1[$17];
              }
              ;
            }
            ;
            $16.mermaidCode = diagramCode;
            return $16;
          }))(function() {
            return triggerMermaidRendering9;
          });
        });
      });
    };
  };
  var component56 = function(dictMonadAff) {
    return mkComponent({
      initialState: initialState4,
      render: render61,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction50(dictMonadAff),
        initialize: new Just(Initialize51.value)
      })
    });
  };
  var _mermaidAST = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();

  // output/PSD3.Understanding.Patterns/index.js
  var triggerMermaidRendering5 = /* @__PURE__ */ triggerMermaidRendering(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var bind82 = /* @__PURE__ */ bind(bindMermaidASTM);
  var appendTo4 = /* @__PURE__ */ appendTo(mermaidTagless);
  var classed47 = /* @__PURE__ */ classed(toAttrString);
  var openSelection3 = /* @__PURE__ */ openSelection(mermaidTagless);
  var updateJoin3 = /* @__PURE__ */ updateJoin(mermaidTagless);
  var andThen4 = /* @__PURE__ */ andThen(semigroupArray);
  var fill42 = /* @__PURE__ */ fill(toAttrString);
  var y43 = /* @__PURE__ */ y(toAttrNumber);
  var discard86 = /* @__PURE__ */ discard(discardUnit)(bindMermaidASTM);
  var setAttributes3 = /* @__PURE__ */ setAttributes(mermaidTagless);
  var x43 = /* @__PURE__ */ x(toAttrNumber);
  var fontSize24 = /* @__PURE__ */ fontSize(toAttrNumber);
  var pure47 = /* @__PURE__ */ pure(applicativeMermaidASTM);
  var slot_9 = /* @__PURE__ */ slot_();
  var slot_12 = /* @__PURE__ */ slot_9({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var slot_23 = /* @__PURE__ */ slot_9({
    reflectSymbol: function() {
      return "tabs";
    }
  })(ordUnit);
  var slot_32 = /* @__PURE__ */ slot_9({
    reflectSymbol: function() {
      return "mermaidAST";
    }
  })(ordUnit);
  var component1 = /* @__PURE__ */ component56(monadAffAff);
  var Initialize52 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var handleAction51 = function(v) {
    return triggerMermaidRendering5;
  };
  var gupVisualization = /* @__PURE__ */ bind82(/* @__PURE__ */ attach(mermaidTagless)("div"))(function(root3) {
    return bind82(appendTo4(root3)(Svg.value)([viewBox(0)(100)(800)(350), classed47("d3svg gup")]))(function(svg2) {
      return bind82(appendTo4(svg2)(Group.value)([]))(function(letterGroup) {
        return bind82(openSelection3(letterGroup)("text"))(function(enterSelection) {
          return bind82(updateJoin3(enterSelection)(Text2.value)([1, 2, 3])(unsafeCoerce2))(function(v) {
            var transition2 = transitionWithDuration(2e3);
            var exitAttrs = andThen4([classed47("exit"), fill42("brown")])(to(transition2)([y43(400), remove]));
            return discard86(setAttributes3(v.exit)(exitAttrs))(function() {
              var updateAttrs2 = andThen4([classed47("update"), fill42("gray"), y43(200)])(to(transition2)([x43(50)]));
              return discard86(setAttributes3(v.update)(updateAttrs2))(function() {
                return bind82(appendTo4(v.enter)(Text2.value)([]))(function(newlyEntered) {
                  var enterAttrs2 = andThen4([classed47("enter"), fill42("green"), x43(50), y43(0), fontSize24(60)])(to(transition2)([y43(200)]));
                  return discard86(setAttributes3(newlyEntered)(enterAttrs2))(function() {
                    return pure47(newlyEntered);
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var datumPatternDiagram = "\nsequenceDiagram\n    participant PS as PureScript Code\n    participant Datum as datum_ Accessor\n    participant Bridge as FFI Bridge\n    participant D3 as D3.js\n    participant DOM as DOM Element\n\n    PS->>Datum: Define type-safe accessor\n    Note right of Datum: datum_ :: a -> b\n    Datum->>Bridge: Convert to JS function\n    Note right of Bridge: Type erasure\n    Bridge->>D3: Pass accessor function\n    D3->>DOM: Bind data to elements\n    DOM->>D3: Request data value\n    D3->>Bridge: Call accessor(d, i)\n    Bridge->>Datum: Apply to typed data\n    Datum->>PS: Extract typed field\n    PS-->>D3: Return value\n    D3->>DOM: Update attribute/style\n\n    Note over PS,DOM: Bridges Type Safety and Dynamic Binding\n";
  var _tabs2 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _docsHeader5 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render62 = function(v) {
    return div2([classes(["explanation-page"])])([slot_12(_docsHeader5)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), renderTOC({
      title: "Page Contents",
      items: [tocAnchor("heading-datum-pattern")("The datum_ / Datum_ Pattern")(0), tocAnchor("heading-grammar")("The Grammar of D3 in SelectionM")(0), tocAnchor("heading-dom-to-viz")("From DOM to Visualization Elements")(0)],
      image: new Just("assets/bookmark-images/understanding.jpeg")
    }), div2([classes(["explanation-content"])])([slot_23(_tabs2)(unit)(component49)(UnderstandingPatterns.value), h1([classes(["explanation-title"])])([text5("Practical Patterns")]), section([classes(["concept-section"])])([h2([id2("heading-datum-pattern")])([text5("The datum_ / Datum_ Pattern")]), p_([text5("The datum_ pattern is a critical bridge between PureScript's type-safe world and D3's dynamic data binding. It allows us to define type-safe accessor functions that extract values from data records while maintaining compatibility with D3's JavaScript API.")]), div2([classes(["diagram-container"])])([mermaidDiagram(datumPatternDiagram)(new Just("datum-pattern-diagram"))]), p_([text5("This pattern ensures that data transformations remain type-safe on the PureScript side while seamlessly integrating with D3's dynamic attribute and style setters. The accessor functions are pure and composable, making them easy to test and reuse across different visualizations.")])]), section([classes(["concept-section"])])([h2([id2("heading-grammar")])([text5("The Grammar of D3 in SelectionM")]), p_([text5("SelectionM provides a compositional grammar for expressing D3 visualizations. The General Update Pattern (GUP) below demonstrates how SelectionM captures the essential operations: openSelection for nested data joins, updateJoin for synchronizing data with DOM elements, and transitions for smooth animations.")]), div2([classes(["diagram-container"])])([slot_32(_mermaidAST)(unit)(component1)(mkInput(gupVisualization))]), p_([text5("This AST diagram shows how the General Update Pattern expresses the classic D3 workflow: selecting existing elements, binding new data, handling enter/update/exit selections, and applying transitions. The same SelectionM code can be interpreted multiple ways - as live D3 visualizations, as static diagrams, or as English descriptions - demonstrating the power of the finally tagless pattern.")])]), section([classes(["concept-section"])])([h2([id2("heading-dom-to-viz")])([text5("From DOM to Visualization Elements")]), p_([text5("Placeholder: The flow from attachment \u2192 nodes \u2192 data joins \u2192 bulk enter")])])])]);
  };
  var component57 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render62,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction51,
        initialize: new Just(Initialize52.value)
      })
    });
  })();

  // output/PSD3.Understanding.SimpleCharts1/index.js
  var bind83 = /* @__PURE__ */ bind(bindHalogenM);
  var liftEffect48 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var drawThreeCircles5 = /* @__PURE__ */ drawThreeCircles(d3TaglessD3M);
  var drawThreeDimensions3 = /* @__PURE__ */ drawThreeDimensions(d3TaglessD3M);
  var drawThreeDimensionsSets3 = /* @__PURE__ */ drawThreeDimensionsSets(d3TaglessD3M);
  var drawWithData3 = /* @__PURE__ */ drawWithData(d3TaglessD3M);
  var draw30 = /* @__PURE__ */ draw3(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw114 = /* @__PURE__ */ draw10(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawQuartet4 = /* @__PURE__ */ drawQuartet(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var pure48 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize53 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var render63 = function(v) {
    return div2([classes(["example-page"])])([renderHeader(SimpleCharts1.value), main([classes(["tutorial-content"])])([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("1. Building Visualizations with PureScript")]), p_([text5("We'll show just the very simplest examples of putting elements in the DOM, in this case into an SVG, using the PS<$>D3 library. Then in the following pages, we'll look at progressively more complicated data visualizations and techniques that go well beyond simple static representations.")]), p_([text5("Each example has a link beneath it to see the full source code for the example, and if you're already familiar with D3.js the shape of the code should look very familiar.")])]), section([classes(["tutorial-section"]), id2("section-1")])([h2([classes(["tutorial-section-title"])])([text5("1. Three Little Circles")]), p_([text5("Simplest possible example, we have three items of data and we put a green circle into an SVG for each one. We use the index of the datum to offset it so that they form a little line.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["three-circles-viz"])])([])]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("three-little-circles"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])]), section([classes(["tutorial-section"]), id2("section-1b")])([h2([classes(["tutorial-section-title"])])([text5("1b. Nested Data Binding: Three Little Dimensions")]), p_([text5("This example demonstrates nested data binding, where child elements derive their data from the parent element's bound datum. We take a 2D array [[1,2,3],[4,5,6],[7,8,9]] and create a nested structure using a proper HTML table: rows bound to outer arrays, cells bound to inner arrays.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["three-dimensions-viz"])])([])]), h3_([text5("Beyond Arrays: Working with Sets")]), p_([text5("The real power of PS<$>D3's nestedJoin is its Foldable constraint. This means you can use ANY Foldable type for nested data, not just Arrays. Below, we use Sets (unordered, unique collections) to represent product categories or tags. Notice how some products have many tags, some have few, and some have none - the library handles all cases gracefully.")]), p_([text5("This flexibility goes far beyond standard D3.js, where nested selections only work with arrays. With PureScript's type classes, the same visualization code works with Sets, Lists, Maps, or any custom Foldable you define.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["three-dimensions-sets-viz"])])([])])]), section([classes(["tutorial-section"]), id2("section-2")])([h2([classes(["tutorial-section-title"])])([text5("2. Data-Driven Positioning")]), p_([text5("This extends the super-simple model of the three little circles for a slightly more real-world example. Now we're giving more circles and varying the y position with a function to a parabola.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["parabola-viz"])])([])]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("parabola"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])]), section([classes(["tutorial-section"]), id2("section-3")])([h2([classes(["tutorial-section-title"])])([text5("3. Bar Charts with Scales")]), p_([text5("Bar charts are ideal for comparing discrete categories or showing changes across time periods. They're so familiar they there isn't much to say, just some rectangles strung along an axis. And, in fact the creation of the axes is a notable part of this example.")]), p_([text5("This example shows monthly sales data using a vertical bar chart. Each bar represents a month, and the height indicates the sales value. The implementation uses D3 scales to map data values to pixel coordinates.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["barchart-viz"])])([])]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("bar-chart"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])]), section([classes(["tutorial-section"]), id2("section-4")])([h2([classes(["tutorial-section-title"])])([text5("4. Line Charts and Paths")]), p_([text5("Line charts are one of the most fundamental visualizations for showing trends over time or continuous data. They excel at displaying patterns, trends, and changes in data series.")]), p_([text5("This example demonstrates a simple line chart showing a sine wave pattern. The implementation uses D3's scale functions to map data values to pixel coordinates, and a line generator to create the SVG path.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["linechart-viz"])])([])]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("line-chart"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])]), section([classes(["tutorial-section"]), id2("section-5")])([h2([classes(["tutorial-section-title"])])([text5("5. Anscombe's Quartet")]), p_([text5("This example demonstrates Anscombe's Quartet, a famous dataset created by statistician Francis Anscombe in 1973. All four datasets have nearly identical statistical properties (same mean, variance, correlation, and linear regression line), yet when visualized they reveal completely different patterns.")]), p_([text5("The quartet powerfully illustrates why data visualization is essential. Summary statistics alone can be misleading - you need to look at the data to understand its true structure. This implementation uses a 'small multiples' layout, displaying the four related charts side-by-side for easy comparison.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["quartet-viz"])])([])]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("scatter-plot"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])])])]);
  };
  var handleAction52 = function(v) {
    return bind83(liftEffect48(eval_D3M(drawThreeCircles5("div.three-circles-viz"))))(function() {
      return bind83(liftEffect48(eval_D3M(drawThreeDimensions3("div.three-dimensions-viz"))))(function() {
        return bind83(liftEffect48(eval_D3M(drawThreeDimensionsSets3("div.three-dimensions-sets-viz"))))(function() {
          return bind83(liftEffect48(eval_D3M(drawWithData3([310, 474, 613, 726, 814, 877, 914, 926, 914, 877, 814, 726, 613, 474, 310])("div.parabola-viz"))))(function() {
            return bind83(liftEffect48(eval_D3M(draw30(monthlySales)("div.barchart-viz"))))(function() {
              return bind83(liftEffect48(eval_D3M(draw114(sineWaveData)("div.linechart-viz"))))(function() {
                return bind83(liftEffect48(eval_D3M(drawQuartet4(anscombesQuartet)("div.quartet-viz"))))(function() {
                  return pure48(unit);
                });
              });
            });
          });
        });
      });
    });
  };
  var component58 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render63,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction52,
        initialize: new Just(Initialize53.value)
      })
    });
  })();

  // output/PSD3.Data.Loaders/foreign.js
  function loadCSVImpl(url) {
    return function(onError, onSuccess) {
      console.log("[PSD3.Data.Loaders] Loading CSV from:", url);
      const loadPromise = (async () => {
        if (typeof d3 !== "undefined" && d3.csv) {
          console.log("[PSD3.Data.Loaders] Using d3.csv");
          const data = await d3.csv(url);
          console.log("[PSD3.Data.Loaders] Loaded", data.length, "rows via d3.csv");
          return data;
        } else {
          console.log("[PSD3.Data.Loaders] Using fetch fallback");
          const response = await fetch(url);
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const text35 = await response.text();
          const lines = text35.trim().split("\n");
          const headers = lines[0].split(",").map((h) => h.replace(/^"|"$/g, "").trim());
          const data = lines.slice(1).map((line) => {
            const values2 = line.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g) || [];
            const obj = {};
            headers.forEach((header2, i2) => {
              obj[header2] = values2[i2] ? values2[i2].replace(/^"|"$/g, "").trim() : "";
            });
            return obj;
          });
          console.log("[PSD3.Data.Loaders] Loaded", data.length, "rows via fetch");
          return data;
        }
      })();
      loadPromise.then((data) => {
        console.log("[PSD3.Data.Loaders] Calling onSuccess with", data.length, "rows");
        onSuccess(data);
      }).catch((error4) => {
        console.error("[PSD3.Data.Loaders] Error loading CSV:", error4);
        onError(error4);
      });
      return function(cancelError, onCancelerError, onCancelerSuccess) {
        onCancelerSuccess();
      };
    };
  }

  // output/PSD3.Data.Loaders/index.js
  var bind117 = /* @__PURE__ */ bind(bindAff);
  var pure117 = /* @__PURE__ */ pure(applicativeAff);
  var map127 = /* @__PURE__ */ map(functorArray);
  var show132 = /* @__PURE__ */ show(showInt);
  var DecodeError = /* @__PURE__ */ (function() {
    function DecodeError2(value0) {
      this.value0 = value0;
    }
    ;
    DecodeError2.create = function(value0) {
      return new DecodeError2(value0);
    };
    return DecodeError2;
  })();
  var loadCSV = function(url) {
    return function(decoder) {
      var decodeArray = function(typeName) {
        return function(dec) {
          return function(foreigns) {
            var decoded = map127(dec)(foreigns);
            var failures = catMaybes(map127(function(e) {
              if (e instanceof Left) {
                return new Just(e.value0);
              }
              ;
              if (e instanceof Right) {
                return Nothing.value;
              }
              ;
              throw new Error("Failed pattern match at PSD3.Data.Loaders (line 224, column 39 - line 226, column 54): " + [e.constructor.name]);
            })(decoded));
            var successes = catMaybes(map127(hush)(decoded));
            var $47 = length3(failures) === 0;
            if ($47) {
              return new Right(successes);
            }
            ;
            return new Left(new DecodeError("Failed to decode " + (show132(length3(failures)) + (" " + (typeName + "(s)")))));
          };
        };
      };
      return bind117(fromEffectFnAff(loadCSVImpl(url)))(function(rows4) {
        return pure117(decodeArray("CSV row")(decoder)(rows4));
      });
    };
  };

  // output/PSD3.Understanding.SimpleCharts2/index.js
  var discard87 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var monadEffectHalogenM6 = /* @__PURE__ */ monadEffectHalogenM(monadEffectAff);
  var log6 = /* @__PURE__ */ log3(monadEffectHalogenM6);
  var bind84 = /* @__PURE__ */ bind(bindHalogenM);
  var liftAff36 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var show58 = /* @__PURE__ */ show(showInt);
  var liftEffect49 = /* @__PURE__ */ liftEffect(monadEffectHalogenM6);
  var draw31 = /* @__PURE__ */ draw7(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var drawFromCSV2 = /* @__PURE__ */ drawFromCSV(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var draw115 = /* @__PURE__ */ draw15(bindD3M)(monadEffD3M)(d3TaglessD3M);
  var pure49 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize54 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var render64 = function(v) {
    return div2([classes(["example-page"])])([renderHeader(SimpleCharts2.value), main([classes(["tutorial-content"])])([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text5("2. Simple Charts")]), p_([text5(`Real-world examples of common chart types showing state-level US population data and economic indicators. Compared to the previous page these charts are more complex, but we classify them as "simple" because they don't include hierarchies, animations, transitions, or physical simulations.`)]), p_([text5("Each example demonstrates best practices for scales, axes, legends, and color coding to create clear and informative visualizations.")])]), section([id2("grouped-bar"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("1. Grouped Bar Chart")]), p_([text5("US population by state and age group. This grouped bar chart shows population distribution across 6 states (CA, TX, FL, NY, PA, IL) broken down into 9 age groups. Each state has its own cluster of bars, with colors representing different age groups.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["grouped-bar-viz"])])([])]), p_([text5("The chart uses nested band scales: an outer scale positions each state cluster, and an inner scale positions individual bars within each cluster. The population values are scaled linearly to bar heights, with colors from the Spectral color scheme to distinguish age groups.")]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("grouped-bar-chart"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])]), section([id2("multi-line"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("2. Multi-Line Chart")]), p_([text5("Unemployment rates over time for four major US metro areas: San Francisco, New York, Detroit, and Miami. This chart shows how unemployment fluctuated from 2000 to 2013, clearly illustrating the impact of the 2008 financial crisis and subsequent recovery.")]), div2([classes(["tutorial-viz-container"])])([div2([classes(["multi-line-viz"])])([])]), p_([text5("Each city is represented by a colored line, with a legend on the right for identification. The chart uses SVG path elements for smooth lines, linear scales for time (x-axis) and unemployment percentage (y-axis), and includes axis labels for context. Significantly, it uses hover where available to help the reader pick out the details of an individual line, the first thing we've seen that has no print analog.")]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("multi-line-chart"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])]), section([id2("radial-stacked"), classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text5("3. Radial Stacked Bar Chart")]), p_([text5('The same US state population data as the grouped bar chart, but visualized in polar coordinates. Each state gets a wedge around the circle, with age groups stacked radially from the center outward. This "sunburst-like" layout efficiently uses space and creates an aesthetically pleasing circular composition.')]), div2([classes(["tutorial-viz-container"])])([div2([classes(["radial-stacked-viz"])])([])]), p_([text5("Radial charts are good for repeating data, such as time or season, but that's not the case with this example which uses the same data as the first chart above to contrast the approaches. The chart uses polar coordinates with an angular scale (\u03B8) dividing the circle by states and a radial scale (r) for population. Arc paths are generated for each segment, with the same color scheme as the grouped bar chart for consistency. State labels are positioned around the perimeter.")]), p_([text5("View this example "), a([href4("#" + routeToPath(new Example("radial-stacked-bar"))), classes(["tutorial-link"])])([text5("with full source code")]), text5(".")])])])]);
  };
  var handleAction53 = function(v) {
    return discard87(log6("Loading unemployment data..."))(function() {
      return bind84(liftAff36(loadCSV("data/bls-metro-unemployment.csv")(Right.create)))(function(unemploymentDataResult) {
        var unemploymentData = (function() {
          if (unemploymentDataResult instanceof Right) {
            return unemploymentDataResult.value0;
          }
          ;
          if (unemploymentDataResult instanceof Left) {
            return [];
          }
          ;
          throw new Error("Failed pattern match at PSD3.Understanding.SimpleCharts2 (line 46, column 28 - line 48, column 23): " + [unemploymentDataResult.constructor.name]);
        })();
        return discard87(log6("Unemployment CSV loaded"))(function() {
          return discard87(log6("Loading population data..."))(function() {
            return bind84(liftAff36(loadCSV("data/data-2.csv")(Right.create)))(function(populationCSVResult) {
              var populationCSV = (function() {
                if (populationCSVResult instanceof Right) {
                  return populationCSVResult.value0;
                }
                ;
                if (populationCSVResult instanceof Left) {
                  return [];
                }
                ;
                throw new Error("Failed pattern match at PSD3.Understanding.SimpleCharts2 (line 54, column 25 - line 56, column 23): " + [populationCSVResult.constructor.name]);
              })();
              return discard87(log6("Population CSV loaded"))(function() {
                var allPopulationData = parsePopulationCSV(populationCSV);
                return discard87(log6("Parsed " + (show58(length3(allPopulationData)) + " population records")))(function() {
                  var groupedBarData3 = take(54)(allPopulationData);
                  var groupedBarData$prime = take(42)(allPopulationData);
                  return discard87(log6("Drawing grouped bar chart..."))(function() {
                    return bind84(liftEffect49(eval_D3M(draw31(groupedBarData$prime)("div.grouped-bar-viz"))))(function() {
                      return discard87(log6("Grouped bar chart done"))(function() {
                        return discard87(log6("Drawing multi-line chart..."))(function() {
                          return bind84(liftEffect49(eval_D3M(drawFromCSV2(unemploymentData)("div.multi-line-viz"))))(function() {
                            return discard87(log6("Multi-line chart done"))(function() {
                              return discard87(log6("Drawing radial stacked bar..."))(function() {
                                return bind84(liftEffect49(eval_D3M(draw115(allPopulationData)("div.radial-stacked-viz"))))(function() {
                                  return discard87(log6("Radial stacked bar done"))(function() {
                                    return discard87(log6("All charts drawn"))(function() {
                                      return pure49(unit);
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    });
  };
  var component59 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render64,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction53,
        initialize: new Just(Initialize54.value)
      })
    });
  })();

  // output/PSD3.Understanding.UnderstandingCapabilities/index.js
  var triggerPrismHighlighting4 = /* @__PURE__ */ triggerPrismHighlighting(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var slot_10 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize55 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var handleAction54 = function(v) {
    return triggerPrismHighlighting4;
  };
  var _docsHeader6 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render65 = function(v) {
    return div2([classes(["explanation-page"])])([slot_10(_docsHeader6)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), div2([classes(["explanation-content"])])([h1([classes(["explanation-title"])])([text5("Capabilities & Interpreters")]), p_([text5("The SimulationM2 monad looks like:")]), codeSnippet("simulationM2Class")("haskell")])]);
  };
  var component60 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render65,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction54,
        initialize: new Just(Initialize55.value)
      })
    });
  })();

  // output/PSD3.Understanding.UnderstandingDatumPattern/index.js
  var discard88 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var monadEffectHalogenM7 = /* @__PURE__ */ monadEffectHalogenM(monadEffectAff);
  var triggerMermaidRendering6 = /* @__PURE__ */ triggerMermaidRendering(monadEffectHalogenM7);
  var triggerPrismHighlighting5 = /* @__PURE__ */ triggerPrismHighlighting(monadEffectHalogenM7);
  var slot_11 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize56 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var handleAction55 = function(v) {
    return discard88(triggerMermaidRendering6)(function() {
      return triggerPrismHighlighting5;
    });
  };
  var datumPatternDiagram2 = "\nsequenceDiagram\n    participant PS as PureScript Code\n    participant Datum as datum_ Accessor\n    participant Bridge as FFI Bridge\n    participant D3 as D3.js\n    participant DOM as DOM Element\n\n    PS->>Datum: Define type-safe accessor\n    Note right of Datum: datum_ :: a -> b\n    Datum->>Bridge: Convert to JS function\n    Note right of Bridge: Type erasure\n    Bridge->>D3: Pass accessor function\n    D3->>DOM: Bind data to elements\n    DOM->>D3: Request data value\n    D3->>Bridge: Call accessor(d, i)\n    Bridge->>Datum: Apply to typed data\n    Datum->>PS: Extract typed field\n    PS-->>D3: Return value\n    D3->>DOM: Update attribute/style\n\n    Note over PS,DOM: Bridges Type Safety and Dynamic Binding\n";
  var _docsHeader7 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render66 = function(v) {
    return div2([classes(["explanation-page"])])([slot_11(_docsHeader7)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), div2([classes(["explanation-content"])])([h1([classes(["explanation-title"])])([text5("The Datum_ Pattern")]), p_([text5("The datum_ pattern is a practical way to bridge between PureScript's type-safe world and D3's dynamic data binding. It allows us to define type-safe accessor functions that extract values from data records while maintaining compatibility with D3's JavaScript API.")]), p_([text5("When we join some data in PS<$>D3 and evaluate that in the D3 interpreter, then all those elements of whatever the datum is are thrown over the wall to JavaScript where they lose their type information. This wouldn't matter except that we wish to write typesafe attribute functions that operate on this data, using PureScript lambdas. And, of course, we want them to be typed, it's useful, it enables us to turn run-time errors into compile time ones. ")]), p_([text5("The way we solve this is, given that we joined some type X, write a datum_ record which contains functions to unwrap the foreign type Datum_ which we KNOW to be of type X.")]), h2([classes(["explanation-section"])])([text5("The Parabola Example")]), p_([text5("A concrete example might help here so let's look at the code from the Parabola example.")]), p_([text5("Model and datum_ accessor for Parabola example")]), codeSnippet("parabolaDatum")("haskell"), p_([text5("Unsafe.purs for Parabola example")]), codeSnippet("parabolaUnsafe")("haskell"), p_([text5("Model and datum_ accessor for Parabola example")]), codeSnippet("parabolaDraw")("haskell"), div2([classes(["diagram-container"])])([mermaidDiagram(datumPatternDiagram2)(new Just("datum-pattern-diagram"))]), p_([text5("The diagram above describes the type erasure and recovery that we are doing using this technique. ")])])]);
  };
  var component61 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render66,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction55,
        initialize: new Just(Initialize56.value)
      })
    });
  })();

  // output/PSD3.Understanding.UnderstandingFinallyTagless/index.js
  var triggerMermaidRendering7 = /* @__PURE__ */ triggerMermaidRendering(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var slot_13 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize57 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var handleAction56 = function(v) {
    return triggerMermaidRendering7;
  };
  var finallyTaglessArchDiagram2 = '\ngraph TB\n    subgraph "User Code"\n        UC[Visualization Code]\n    end\n\n    subgraph "Finally Tagless DSL"\n        SM[SelectionM Monad]\n        CM[Capabilities]\n    end\n\n    subgraph "Interpreters"\n        D3I[D3 Interpreter]\n        STI[String Interpreter]\n        MTI[MetaTree Interpreter]\n    end\n\n    subgraph "Outputs"\n        D3O[D3.js Visualization]\n        STO[Debug String]\n        MTO[AST Visualization]\n    end\n\n    UC --> SM\n    SM --> CM\n    CM --> D3I\n    CM --> STI\n    CM --> MTI\n    D3I --> D3O\n    STI --> STO\n    MTI --> MTO\n\n    style UC fill:#f5e6d3,stroke:#8b7355,stroke-width:2px\n    style SM fill:#e8dcc6,stroke:#8b7355,stroke-width:2px\n    style CM fill:#e8dcc6,stroke:#8b7355,stroke-width:2px\n    style D3I fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n    style STI fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n    style MTI fill:#d4c4b0,stroke:#8b7355,stroke-width:2px\n\n    classDef tagless fill:#e8dcc6,stroke:#8b7355,stroke-width:3px,color:#2c1810\n    class SM,CM tagless\n';
  var _docsHeader8 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render67 = function(v) {
    return div2([classes(["explanation-page"])])([slot_13(_docsHeader8)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), div2([classes(["explanation-content"])])([h1([classes(["explanation-title"])])([text5("Finally Tagless Pattern")]), p_([text5("We want the library to be extensible and, in fact, D3 while it's the inspiration and a core target, is not the only possible implementation of the SelectionM monad. For this reason we choose the design pattern called Finally Tagless encoding and implement "), em_([text5("interpreters")]), text5(" for the SelectionM.")]), div2([classes(["diagram-container"])])([mermaidDiagram(finallyTaglessArchDiagram2)(new Just("finally-tagless-diagram"))]), p_([text5("Furthermore, using this pattern, we can now "), em_([text5("extend")]), text5(" the SelectionM monad as can be seen in the library where we provide a SimulationM2 monad which extends the our static DOM element visualizations by allowing them to move under the control of a Force Layout algorithm.")])])]);
  };
  var component62 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render67,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction56,
        initialize: new Just(Initialize57.value)
      })
    });
  })();

  // output/PSD3.Understanding.UnderstandingGrammar/index.js
  var bind85 = /* @__PURE__ */ bind(bindMermaidASTM);
  var attach5 = /* @__PURE__ */ attach(mermaidTagless);
  var appendTo5 = /* @__PURE__ */ appendTo(mermaidTagless);
  var simpleJoin3 = /* @__PURE__ */ simpleJoin(mermaidTagless);
  var discard89 = /* @__PURE__ */ discard(discardUnit)(bindMermaidASTM);
  var setAttributes4 = /* @__PURE__ */ setAttributes(mermaidTagless);
  var strokeColor39 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeWidth35 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var fill43 = /* @__PURE__ */ fill(toAttrString);
  var cx28 = /* @__PURE__ */ cx(toAttrNumber);
  var cy29 = /* @__PURE__ */ cy(toAttrNumber);
  var radius32 = /* @__PURE__ */ radius(toAttrNumber);
  var pure50 = /* @__PURE__ */ pure(applicativeMermaidASTM);
  var fillOpacity16 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var x44 = /* @__PURE__ */ x(toAttrNumber);
  var y44 = /* @__PURE__ */ y(toAttrNumber);
  var pure118 = /* @__PURE__ */ pure(applicativeHalogenM);
  var classed48 = /* @__PURE__ */ classed(toAttrString);
  var openSelection4 = /* @__PURE__ */ openSelection(mermaidTagless);
  var updateJoin4 = /* @__PURE__ */ updateJoin(mermaidTagless);
  var andThen5 = /* @__PURE__ */ andThen(semigroupArray);
  var fontSize25 = /* @__PURE__ */ fontSize(toAttrNumber);
  var slot_14 = /* @__PURE__ */ slot_();
  var slot_15 = /* @__PURE__ */ slot_14({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var slot_24 = /* @__PURE__ */ slot_14({
    reflectSymbol: function() {
      return "mermaidAST";
    }
  })(ordUnit);
  var component110 = /* @__PURE__ */ component56(monadAffAff);
  var Initialize58 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var viz_ParabolaAST2 = /* @__PURE__ */ bind85(/* @__PURE__ */ attach5("div"))(function(root3) {
    return bind85(appendTo5(root3)(Svg.value)([]))(function(svg2) {
      return bind85(appendTo5(svg2)(Group.value)([]))(function(circleGroup) {
        return bind85(simpleJoin3(circleGroup)(Circle.value)([32, 57, 112])(unsafeCoerce2))(function(circles) {
          return discard89(setAttributes4(circles)([strokeColor39("steelblue"), strokeWidth35(3), fill43("none"), cx28(100), cy29(50), radius32(10)]))(function() {
            return pure50(circles);
          });
        });
      });
    });
  });
  var viz_BubbleChartAST2 = /* @__PURE__ */ bind85(/* @__PURE__ */ attach5("div"))(function(root3) {
    return bind85(appendTo5(root3)(Svg.value)([]))(function(svg2) {
      return bind85(appendTo5(svg2)(Group.value)([]))(function(chartGroup) {
        return bind85(simpleJoin3(chartGroup)(Circle.value)([1, 2, 3, 4, 5, 6, 7])(unsafeCoerce2))(function(bubbles2) {
          return discard89(setAttributes4(bubbles2)([cx28(100), cy29(100), radius32(30), fill43("#e8dcc6"), fillOpacity16(0.8), strokeColor39("#ffffff"), strokeWidth35(2)]))(function() {
            return bind85(simpleJoin3(chartGroup)(Text2.value)([1, 2, 3, 4, 5, 6, 7])(unsafeCoerce2))(function(labels9) {
              return discard89(setAttributes4(labels9)([x44(100), y44(100), fill43("#ffffff")]))(function() {
                return pure50(labels9);
              });
            });
          });
        });
      });
    });
  });
  var handleAction57 = function(v) {
    return pure118(unit);
  };
  var gupVisualization2 = /* @__PURE__ */ bind85(/* @__PURE__ */ attach5("div"))(function(root3) {
    return bind85(appendTo5(root3)(Svg.value)([viewBox(0)(100)(800)(350), classed48("d3svg gup")]))(function(svg2) {
      return bind85(appendTo5(svg2)(Group.value)([]))(function(letterGroup) {
        return bind85(openSelection4(letterGroup)("text"))(function(enterSelection) {
          return bind85(updateJoin4(enterSelection)(Text2.value)([1, 2, 3])(unsafeCoerce2))(function(v) {
            var transition2 = transitionWithDuration(2e3);
            var exitAttrs = andThen5([classed48("exit"), fill43("brown")])(to(transition2)([y44(400), remove]));
            return discard89(setAttributes4(v.exit)(exitAttrs))(function() {
              var updateAttrs2 = andThen5([classed48("update"), fill43("gray"), y44(200)])(to(transition2)([x44(50)]));
              return discard89(setAttributes4(v.update)(updateAttrs2))(function() {
                return bind85(appendTo5(v.enter)(Text2.value)([]))(function(newlyEntered) {
                  var enterAttrs2 = andThen5([classed48("enter"), fill43("green"), x44(50), y44(0), fontSize25(60)])(to(transition2)([y44(200)]));
                  return discard89(setAttributes4(newlyEntered)(enterAttrs2))(function() {
                    return pure50(newlyEntered);
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var _docsHeader9 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render68 = function(v) {
    return div2([classes(["explanation-page"])])([slot_15(_docsHeader9)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), div2([classes(["explanation-content"])])([h1([classes(["explanation-title"])])([text5("The Grammar of D3")]), section([classes(["tutorial-section"])])([p_([text5("Although D3 is set of APIs called from normal, interpreted JavaScript, you could also be think of it as an embedded Domain Specific Language, and if you did you could model the grammar of that language and you would find that for all the large surface area of the full API, there is quite a small essential language that makes up this DSL. That language consists of at least the following four primitives described in the table below.")]), table([classes(["tutorial-table"])])([thead_([tr_([th_([text5("Name")]), th_([text5("Function")]), th_([text5("Notes")])])]), tbody_([tr_([td_([em_([text5("attach")])]), td_([text5("Select an entry point (or points) in the DOM")]), td_([text5("Simply uses a CSS type selector to acquire a selection, which can then be used for append / join in order to build up a visualisation from HTML, SVG or Canvas elements.")])]), tr_([td_([em_([text5("appendTo")])]), td_([text5("Add some DOM element "), strong_([text5("e")]), text5(" to a selection")]), td_([text5("If data has been bound higher up in the AST then that data is available in this element's attributes")])]), tr_([td_([em_([text5("join")])]), td_([text5("For every "), em_([text5("datum")]), text5(" "), strong_([text5("d")]), text5(" in some array, insert an element "), strong_([text5("e")])]), td_([text5("We'll run the visualisation with some data model which can be arbitrary in structure, but at every point where we want to append "), em_([text5("multiple")]), text5(" elements we need to join some collection of data.")])]), tr_([td_([em_([text5("attr")])]), td_([text5("Apply this attribute "), strong_([text5("a")]), text5(" to the element(s) that you are currently working with")]), td_([text5("If these attributes are specified as a function of the datum from the join, we get Data Driven Documents")])])])]), h3([id2("heading-22")])([text5("Grammar diagrams")]), div2([classes(["diagram-container"])])([slot_24(_mermaidAST)(unit)(component110)(mkInput(viz_ParabolaAST2))]), p_([text5("Here's a grammar diagram for one of our simple example charts, the Parabola (insert link)")]), div2([classes(["diagram-container"])])([slot_24(_mermaidAST)(unit)(component110)(mkInput(viz_BubbleChartAST2))]), p_([text5("...and here's the grammar diagram a much more complicated chart, the circle pack or bubble chart (insert link)")]), p_([text5("All the differences are in details of how the node attributes are calculated from the data.")]), p_([text5("")])]), p_([text5("SelectionM provides a compositional grammar for expressing these visualizations. Even complex, evolving examples are structurally fairly simple. The two previous examples, however, were static. To express the notion of data elements entering and exiting in response to changing data we need to add one more element, the "), strong_([text5("updateJoin")]), text5(" which makes this General Update Pattern possible.")]), p_([text5("The General Update Pattern (GUP) below demonstrates how SelectionM provides all the essential operations: openSelection for nested data joins, updateJoin for synchronizing data with DOM elements, and transitions for smooth animations.")]), div2([classes(["diagram-container"])])([slot_24(_mermaidAST)(unit)(component110)(mkInput(gupVisualization2))])])]);
  };
  var component63 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render68,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction57,
        initialize: new Just(Initialize58.value)
      })
    });
  })();

  // output/PSD3.Understanding.UnderstandingIndex/index.js
  var slot_16 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var _docsHeader10 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render69 = function(v) {
    return div2([classes(["explanation-page"])])([slot_16(_docsHeader10)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), div2([classes(["docs-hero"])])([div2([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text5("Understanding PSD3")]), p([classes(["docs-hero-description"])])([text5("Deep dives into the core concepts and patterns that make PSD3 a type-safe, composable framework for D3 visualizations.")])])]), div2([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text5("Core Concepts")]), p([classes(["docs-section-description"])])([text5("Essential concepts that form the foundation of PSD3's architecture.")]), renderDocsGrid([{
      title: "Finally Tagless Pattern",
      description: "Learn how PSD3 uses the Finally Tagless pattern to provide multiple interpretations of the same visualization code.",
      route: new Just(UnderstandingFinallyTagless.value),
      cardType: Concept.value
    }, {
      title: "SelectionM Monad",
      description: "Understand how SelectionM provides a monadic interface for composing D3 operations with type safety.",
      route: new Just(UnderstandingSelectionM.value),
      cardType: Concept.value
    }, {
      title: "Capabilities & Interpreters",
      description: "Explore how capabilities enable different interpretations (Canvas, SVG, HTML) of the same visualization code.",
      route: new Just(UnderstandingCapabilities.value),
      cardType: Concept.value
    }, {
      title: "Type-Safe Attribute System",
      description: "Discover how PSD3's type system prevents runtime errors and provides excellent IDE support.",
      route: new Just(UnderstandingTypeSystem.value),
      cardType: Concept.value
    }])]), div2([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text5("Patterns & Techniques")]), p([classes(["docs-section-description"])])([text5("Common patterns and techniques for building effective visualizations.")]), renderDocsGrid([{
      title: "datum_/Datum_ Pattern",
      description: "Master the datum_/Datum_ pattern for working with data at different stages of the visualization pipeline.",
      route: new Just(UnderstandingDatumPattern.value),
      cardType: Pattern.value
    }, {
      title: "Grammar of D3 in SelectionM",
      description: "Learn how PSD3 provides a grammar-like approach to building visualizations, similar to ggplot2.",
      route: new Just(UnderstandingGrammar.value),
      cardType: Pattern.value
    }])]), div2([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text5("Design Philosophy")]), p([classes(["docs-section-description"])])([text5("The principles and motivations behind PSD3's design.")]), renderDocsGrid([{
      title: "Why PSD3?",
      description: "Understand the design philosophy, goals, and trade-offs that shape PSD3's approach to data visualization.",
      route: new Just(UnderstandingPhilosophy.value),
      cardType: Concept.value
    }])])]);
  };
  var component64 = /* @__PURE__ */ mkComponent({
    initialState: /* @__PURE__ */ identity(categoryFn),
    render: render69,
    "eval": /* @__PURE__ */ mkEval(defaultEval)
  });

  // output/PSD3.Understanding.UnderstandingSelectionM/index.js
  var triggerPrismHighlighting6 = /* @__PURE__ */ triggerPrismHighlighting(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var slot_17 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize59 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var handleAction58 = function(v) {
    return triggerPrismHighlighting6;
  };
  var _docsHeader11 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render70 = function(v) {
    return div2([classes(["explanation-page"])])([slot_17(_docsHeader11)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), div2([classes(["explanation-content"])])([h1([classes(["explanation-title"])])([text5("The SelectionM Monad")]), h2_([text5("Grammar")]), p_([text5("D3.js is, naturally, a JavaScript idiomatic library, making use of function chaining as a readable and easily-learnt API.")]), p_([text5("PS<$>D3 formalizes this slightly while retaining the general shape of the pattern and core concepts such as Selection, Attribute.")]), p_([text5("The basic grammar of PS<$>D3 is just this:")]), ul_([li_([text5("we can "), em_([text5("attach")]), text5(' our visualisation into the DOM, typically hooking into something like <div id="viz">')]), li_([text5("we can build up whatever additional structure we want inside that, using "), em_([text5("appendTo")]), text5(` to for example put an <svg> with some <g>'s inside the <div id="viz">`)]), li_([text5("we can apply "), em_([text5("attributes")]), text5(" to the elements we've created: styles, ids, css classes and such")]), li_([text5("we can apply "), em_([text5("behaviors")]), text5(" to the elements we've created: things like zoom, drag and click event-handlers")]), li_([text5("we can "), em_([text5("join")]), text5(" some array of data at this point, such that when we next "), em_([text5("add")]), text5(" something, say a <circle>, we will put "), em_([text5("n")]), text5(" <circle>s in, not just one.")])]), p_([text5("In D3 the thing that is being acted on in this chain of functions is The Selection...")]), h2_([text5("The SelectionM Monad")]), p_([text5("Where functions would be chained in JavaScript, the natural counterpart in PureScript is a Monad, specifically the SelectionM Monad which embodies the core functions above and a few others.")]), p_([text5("It looks like this:")]), codeSnippet("selectionMClass")("haskell")])]);
  };
  var component65 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render70,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction58,
        initialize: new Just(Initialize59.value)
      })
    });
  })();

  // output/PSD3.Understanding.UnderstandingTypeSystem/index.js
  var triggerMermaidRendering8 = /* @__PURE__ */ triggerMermaidRendering(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var slot_18 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docsHeader";
    }
  })(ordUnit);
  var Initialize60 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var typeSafeAttributeDiagram2 = `
graph TB
    subgraph "Attribute Types"
        Static["Static Value<br/>cx = 50<br/><i>attr 'cx' 50</i>"]
        Datum["Datum Function<br/>cx = \u03BBd \u2192 d.x<br/><i>attr 'cx' (datum_ _.x)</i>"]
        DatumIdx["Datum+Index Function<br/>cx = \u03BBd i \u2192 d.x + i * 10<br/><i>attr 'cx' (\\\\d i -> ...)</i>"]
    end

    subgraph "Type Classes"
        AttrClass[IsAttribute typeclass]
        SetAttr[SetAttribute instance]
    end

    subgraph "Runtime"
        Resolve[Type Resolution]
        Apply[Apply to Elements]
    end

    Static --> AttrClass
    Datum --> AttrClass
    DatumIdx --> AttrClass

    AttrClass --> SetAttr
    SetAttr --> Resolve
    Resolve --> Apply

    style Static fill:#f5e6d3,stroke:#8b7355,stroke-width:2px
    style Datum fill:#e8dcc6,stroke:#8b7355,stroke-width:2px
    style DatumIdx fill:#d4c4b0,stroke:#8b7355,stroke-width:2px

    classDef typesafe fill:#e8dcc6,stroke:#8b7355,stroke-width:3px,color:#2c1810
    class AttrClass,SetAttr typesafe
`;
  var handleAction59 = function(v) {
    return triggerMermaidRendering8;
  };
  var _docsHeader12 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render71 = function(v) {
    return div2([classes(["explanation-page"])])([slot_18(_docsHeader12)(unit)(component13)({
      currentSection: new Just(UnderstandingSection.value)
    }), div2([classes(["explanation-content"])])([h1([classes(["explanation-title"])])([text5("Type-Safe Attribute System")]), p_([text5("A key innovation of D3 is the easy, natural way one can go from static to data-driven attributes, for example going from putting "), em_([text5("n")]), text5(" identical circles into the DOM vs putting "), em_([text5("n")]), text5(" circles of differing colours and sizes into the DOM. This is the essence (with join/simulation) of Data Drive Documents, ie D3.")]), p_([text5("In PureScript we need a little bit of typeclass trickery to get the same clean syntax, and we use it to enable interchangeable, type-safe attribute setters. For example, we can use an attribute "), em_([text5("cx")]), text5(" (the center x position of a circle) which can take:")]), ul_([li_([text5("a numeric value OR,")]), li_([text5("a lambda function which takes the datum we are using to a numeric value OR,")]), li_([text5("a lambda function which takes the datum AND the index of that datum in the selection")])]), div2([classes(["diagram-container"])])([mermaidDiagram(typeSafeAttributeDiagram2)(new Just("type-safe-attribute-diagram"))]), p_([text5("This type system ensures that attributes are always used correctly at compile time, preventing runtime errors while maintaining the flexibility that makes D3 so powerful.")])])]);
  };
  var component66 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return unit;
      },
      render: render71,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction59,
        initialize: new Just(Initialize60.value)
      })
    });
  })();

  // output/D3.Viz.WealthHealth.Unsafe/index.js
  var nationToKey = function(nation) {
    return nation.name;
  };
  var datum_ = {
    name: function(d23) {
      return d23.name;
    },
    income: function(d23) {
      return d23.income;
    },
    population: function(d23) {
      return d23.population;
    },
    lifeExpectancy: function(d23) {
      return d23.lifeExpectancy;
    },
    regionColor: function(d23) {
      return d23.regionColor;
    },
    region: function(d23) {
      return d23.region;
    },
    indexNum: function(i2) {
      return i2;
    }
  };

  // output/D3.Viz.WealthHealth.Draw/index.js
  var max19 = /* @__PURE__ */ max(ordNumber);
  var show59 = /* @__PURE__ */ show(showInt);
  var width24 = /* @__PURE__ */ width8(toAttrNumber);
  var height24 = /* @__PURE__ */ height8(toAttrNumber);
  var classed49 = /* @__PURE__ */ classed(toAttrString);
  var strokeColor40 = /* @__PURE__ */ strokeColor(toAttrString);
  var strokeOpacity8 = /* @__PURE__ */ strokeOpacity(toAttrNumber);
  var discard90 = /* @__PURE__ */ discard(discardUnit);
  var x114 = /* @__PURE__ */ x1(toAttrNumber);
  var x210 = /* @__PURE__ */ x2(toAttrNumber);
  var y111 = /* @__PURE__ */ y1(toAttrNumber);
  var y210 = /* @__PURE__ */ y2(toAttrNumber);
  var traverse5 = /* @__PURE__ */ traverse(traversableArray);
  var strokeWidth36 = /* @__PURE__ */ strokeWidth(toAttrNumber);
  var x45 = /* @__PURE__ */ x(toAttrNumber);
  var y45 = /* @__PURE__ */ y(toAttrNumber);
  var textAnchor13 = /* @__PURE__ */ textAnchor(toAttrString);
  var fontSize26 = /* @__PURE__ */ fontSize(toAttrNumber);
  var fill44 = /* @__PURE__ */ fill(toAttrString);
  var text34 = /* @__PURE__ */ text6(toAttrString);
  var compare19 = /* @__PURE__ */ compare(ordNumber);
  var cx29 = /* @__PURE__ */ cx(toAttrNumberDatumFnI);
  var cy30 = /* @__PURE__ */ cy(toAttrNumberDatumFnI);
  var radius33 = /* @__PURE__ */ radius(toAttrNumberDatumFnI);
  var fill112 = /* @__PURE__ */ fill(toAttrStringDatumFnI);
  var fillOpacity17 = /* @__PURE__ */ fillOpacity(toAttrNumber);
  var text110 = /* @__PURE__ */ text6(toAttrStringDatumFn);
  var x310 = /* @__PURE__ */ x(toAttrNumberDatumFnI);
  var y310 = /* @__PURE__ */ y(toAttrNumberDatumFnI);
  var yTicks = [20, 30, 40, 50, 60, 70, 80];
  var xTicks = [200, 500, 1e3, 2e3, 5e3, 1e4, 2e4, 5e4, 1e5];
  var scaleY = function(config) {
    return function(lifeExpectancy) {
      var rangeHeight = config.height - config.marginTop - config.marginBottom;
      var normalized = (lifeExpectancy - 14) / (86 - 14);
      return config.height - config.marginBottom - normalized * rangeHeight;
    };
  };
  var scaleX = function(config) {
    return function(income) {
      var rangeWidth = config.width - config.marginLeft - config.marginRight;
      var logIncome = (function() {
        var $72 = income > 0;
        if ($72) {
          return log(income);
        }
        ;
        return 5.298317;
      })();
      var normalized = (logIncome - 5.298317) / (11.512925 - 5.298317);
      return config.marginLeft + normalized * rangeWidth;
    };
  };
  var scaleRadius = function(population) {
    var normalized = population / 5e9;
    var scaled = sqrt(normalized) * 80;
    return max19(3)(scaled);
  };
  var orderingToInt = function(v) {
    if (v instanceof LT) {
      return -1 | 0;
    }
    ;
    if (v instanceof EQ) {
      return 0;
    }
    ;
    if (v instanceof GT) {
      return 1;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.WealthHealth.Draw (line 98, column 1 - line 98, column 33): " + [v.constructor.name]);
  };
  var formatIncome = function(value18) {
    if (value18 >= 1e3) {
      return "$" + (show59(floor2(value18 / 1e3)) + "k");
    }
    ;
    if (otherwise) {
      return "$" + show59(floor2(value18));
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.WealthHealth.Draw (line 82, column 1 - line 82, column 33): " + [value18.constructor.name]);
  };
  var defaultConfig = {
    width: 1e3,
    height: 600,
    marginTop: 20,
    marginRight: 20,
    marginBottom: 35,
    marginLeft: 40
  };
  var draw33 = function(dictSelectionM) {
    var Monad0 = dictSelectionM.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind92 = bind(Bind1);
    var attach6 = attach(dictSelectionM);
    var appendTo6 = appendTo(dictSelectionM);
    var discard115 = discard90(Bind1);
    var setAttributes5 = setAttributes(dictSelectionM);
    var Applicative0 = Monad0.Applicative0();
    var pure56 = pure(Applicative0);
    var traverse13 = traverse5(Applicative0);
    var openSelection5 = openSelection(dictSelectionM);
    var updateJoin5 = updateJoin(dictSelectionM);
    return function(selector) {
      return bind92(attach6(selector))(function(root3) {
        return bind92(appendTo6(root3)(Svg.value)([viewBox(0)(0)(defaultConfig.width)(defaultConfig.height), width24(defaultConfig.width), height24(defaultConfig.height), classed49("wealth-health-viz")]))(function(svg2) {
          return bind92(appendTo6(svg2)(Group.value)([strokeColor40("currentColor"), strokeOpacity8(0.1), classed49("grid")]))(function(gridGroup) {
            var createVerticalLine = function(tickValue) {
              return bind92(appendTo6(gridGroup)(Line.value)([]))(function(line) {
                return discard115(setAttributes5(line)([x114(0.5 + scaleX(defaultConfig)(tickValue)), x210(0.5 + scaleX(defaultConfig)(tickValue)), y111(defaultConfig.marginTop), y210(defaultConfig.height - defaultConfig.marginBottom)]))(function() {
                  return pure56(line);
                });
              });
            };
            return bind92(traverse13(createVerticalLine)(xTicks))(function() {
              var createHorizontalLine = function(tickValue) {
                return bind92(appendTo6(gridGroup)(Line.value)([]))(function(line) {
                  return discard115(setAttributes5(line)([y111(0.5 + scaleY(defaultConfig)(tickValue)), y210(0.5 + scaleY(defaultConfig)(tickValue)), x114(defaultConfig.marginLeft), x210(defaultConfig.width - defaultConfig.marginRight)]))(function() {
                    return pure56(line);
                  });
                });
              };
              return bind92(traverse13(createHorizontalLine)(yTicks))(function() {
                return bind92(appendTo6(svg2)(Line.value)([x114(defaultConfig.marginLeft), y111(defaultConfig.height - defaultConfig.marginBottom), x210(defaultConfig.width - defaultConfig.marginRight), y210(defaultConfig.height - defaultConfig.marginBottom), strokeColor40("#333"), strokeWidth36(1.5), classed49("x-axis")]))(function(xAxisLine) {
                  var createXTick = function(tickValue) {
                    return bind92(appendTo6(svg2)(Line.value)([]))(function(tickMark) {
                      return discard115(setAttributes5(tickMark)([x114(scaleX(defaultConfig)(tickValue)), x210(scaleX(defaultConfig)(tickValue)), y111(defaultConfig.height - defaultConfig.marginBottom), y210(defaultConfig.height - defaultConfig.marginBottom + 6), strokeColor40("#333"), strokeWidth36(1)]))(function() {
                        return bind92(appendTo6(svg2)(Text2.value)([]))(function(tickLabel) {
                          return discard115(setAttributes5(tickLabel)([x45(scaleX(defaultConfig)(tickValue)), y45(defaultConfig.height - defaultConfig.marginBottom + 15), textAnchor13("middle"), fontSize26(10), fill44("#333"), text34(formatIncome(tickValue))]))(function() {
                            return pure56(unit);
                          });
                        });
                      });
                    });
                  };
                  return bind92(traverse13(createXTick)(xTicks))(function() {
                    return bind92(appendTo6(svg2)(Text2.value)([x45(defaultConfig.width / 2), y45(defaultConfig.height - 5), textAnchor13("middle"), fontSize26(14), fill44("#333"), classed49("x-axis-label"), text34("Wealth")]))(function(xAxisLabel) {
                      return bind92(appendTo6(svg2)(Line.value)([x114(defaultConfig.marginLeft), y111(defaultConfig.marginTop), x210(defaultConfig.marginLeft), y210(defaultConfig.height - defaultConfig.marginBottom), strokeColor40("#333"), strokeWidth36(1.5), classed49("y-axis")]))(function(yAxisLine) {
                        var createYTick = function(tickValue) {
                          return bind92(appendTo6(svg2)(Line.value)([]))(function(tickMark) {
                            return discard115(setAttributes5(tickMark)([x114(defaultConfig.marginLeft - 6), x210(defaultConfig.marginLeft), y111(scaleY(defaultConfig)(tickValue)), y210(scaleY(defaultConfig)(tickValue)), strokeColor40("#333"), strokeWidth36(1)]))(function() {
                              return bind92(appendTo6(svg2)(Text2.value)([]))(function(tickLabel) {
                                return discard115(setAttributes5(tickLabel)([x45(defaultConfig.marginLeft - 10), y45(scaleY(defaultConfig)(tickValue) + 3), textAnchor13("end"), fontSize26(10), fill44("#333"), text34(show59(floor2(tickValue)))]))(function() {
                                  return pure56(unit);
                                });
                              });
                            });
                          });
                        };
                        return bind92(traverse13(createYTick)(yTicks))(function() {
                          return bind92(appendTo6(svg2)(Text2.value)([x45(15), y45(defaultConfig.height / 2), textAnchor13("middle"), fontSize26(14), fill44("#333"), classed49("y-axis-label"), text34("Health")]))(function(yAxisLabel) {
                            return bind92(appendTo6(svg2)(Group.value)([classed49("nations")]))(function(chartGroup) {
                              return pure56(function(nations) {
                                var calculateAttrs = function(d23) {
                                  return function(v) {
                                    var pop4 = datum_.population(d23);
                                    var life = datum_.lifeExpectancy(d23);
                                    var income = datum_.income(d23);
                                    var color2 = datum_.regionColor(d23);
                                    return {
                                      x: scaleX(defaultConfig)(income),
                                      y: scaleY(defaultConfig)(life),
                                      r: scaleRadius(pop4),
                                      color: color2
                                    };
                                  };
                                };
                                return bind92(openSelection5(chartGroup)("circle"))(function(circleEnterSelection) {
                                  return bind92(updateJoin5(circleEnterSelection)(Circle.value)(nations)(nationToKey))(function(circleUpdateSelections) {
                                    return discard115(setAttributes5(circleUpdateSelections.exit)([classed49("exit")]))(function() {
                                      return discard115(setAttributes5(circleUpdateSelections.update)([sortSelection(function(a2) {
                                        return function(b2) {
                                          return orderingToInt(compare19(b2.population)(a2.population));
                                        };
                                      }), cx29(function(d23) {
                                        return function(i2) {
                                          return calculateAttrs(d23)(i2).x;
                                        };
                                      }), cy30(function(d23) {
                                        return function(i2) {
                                          return calculateAttrs(d23)(i2).y;
                                        };
                                      }), radius33(function(d23) {
                                        return function(i2) {
                                          return calculateAttrs(d23)(i2).r;
                                        };
                                      }), fill112(function(d23) {
                                        return function(i2) {
                                          return calculateAttrs(d23)(i2).color;
                                        };
                                      }), classed49("nation-circle update")]))(function() {
                                        return bind92(appendTo6(circleUpdateSelections.enter)(Circle.value)([]))(function(newCircles) {
                                          return discard115(setAttributes5(newCircles)([sortSelection(function(a2) {
                                            return function(b2) {
                                              return orderingToInt(compare19(b2.population)(a2.population));
                                            };
                                          }), cx29(function(d23) {
                                            return function(i2) {
                                              return calculateAttrs(d23)(i2).x;
                                            };
                                          }), cy30(function(d23) {
                                            return function(i2) {
                                              return calculateAttrs(d23)(i2).y;
                                            };
                                          }), radius33(function(d23) {
                                            return function(i2) {
                                              return calculateAttrs(d23)(i2).r;
                                            };
                                          }), fill112(function(d23) {
                                            return function(i2) {
                                              return calculateAttrs(d23)(i2).color;
                                            };
                                          }), fillOpacity17(0.7), strokeColor40("#333"), strokeWidth36(0.5), classed49("nation-circle enter")]))(function() {
                                            var tooltipText = function(d23) {
                                              return datum_.name(d23) + ("\n" + datum_.region(d23));
                                            };
                                            return bind92(appendTo6(newCircles)(Title.value)([]))(function(newTitles) {
                                              return discard115(setAttributes5(newTitles)([text110(tooltipText)]))(function() {
                                                return bind92(openSelection5(chartGroup)("text"))(function(labelEnterSelection) {
                                                  return bind92(updateJoin5(labelEnterSelection)(Text2.value)(nations)(nationToKey))(function(labelUpdateSelections) {
                                                    return discard115(setAttributes5(labelUpdateSelections.exit)([classed49("exit")]))(function() {
                                                      return discard115(setAttributes5(labelUpdateSelections.update)([x310(function(d23) {
                                                        return function(i2) {
                                                          return calculateAttrs(d23)(i2).x;
                                                        };
                                                      }), y310(function(d23) {
                                                        return function(i2) {
                                                          return calculateAttrs(d23)(i2).y - calculateAttrs(d23)(i2).r - 5;
                                                        };
                                                      }), classed49("nation-label update")]))(function() {
                                                        return bind92(appendTo6(labelUpdateSelections.enter)(Text2.value)([]))(function(newLabels) {
                                                          return discard115(setAttributes5(newLabels)([x310(function(d23) {
                                                            return function(i2) {
                                                              return calculateAttrs(d23)(i2).x;
                                                            };
                                                          }), y310(function(d23) {
                                                            return function(i2) {
                                                              return calculateAttrs(d23)(i2).y - calculateAttrs(d23)(i2).r - 5;
                                                            };
                                                          }), textAnchor13("middle"), fontSize26(11), fill44("#333"), fillOpacity17(0), text110(datum_.name), classed49("nation-label enter")]))(function() {
                                                            return pure56(newCircles);
                                                          });
                                                        });
                                                      });
                                                    });
                                                  });
                                                });
                                              });
                                            });
                                          });
                                        });
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    };
  };

  // output/PSD3.WealthHealth.Types/index.js
  var EastAsiaAndPacific = /* @__PURE__ */ (function() {
    function EastAsiaAndPacific2() {
    }
    ;
    EastAsiaAndPacific2.value = new EastAsiaAndPacific2();
    return EastAsiaAndPacific2;
  })();
  var Europe = /* @__PURE__ */ (function() {
    function Europe2() {
    }
    ;
    Europe2.value = new Europe2();
    return Europe2;
  })();
  var LatinAmericaAndCaribbean = /* @__PURE__ */ (function() {
    function LatinAmericaAndCaribbean2() {
    }
    ;
    LatinAmericaAndCaribbean2.value = new LatinAmericaAndCaribbean2();
    return LatinAmericaAndCaribbean2;
  })();
  var MiddleEastAndNorthAfrica = /* @__PURE__ */ (function() {
    function MiddleEastAndNorthAfrica2() {
    }
    ;
    MiddleEastAndNorthAfrica2.value = new MiddleEastAndNorthAfrica2();
    return MiddleEastAndNorthAfrica2;
  })();
  var SouthAsia = /* @__PURE__ */ (function() {
    function SouthAsia2() {
    }
    ;
    SouthAsia2.value = new SouthAsia2();
    return SouthAsia2;
  })();
  var SubSaharanAfrica = /* @__PURE__ */ (function() {
    function SubSaharanAfrica2() {
    }
    ;
    SubSaharanAfrica2.value = new SubSaharanAfrica2();
    return SubSaharanAfrica2;
  })();
  var NorthAmerica = /* @__PURE__ */ (function() {
    function NorthAmerica2() {
    }
    ;
    NorthAmerica2.value = new NorthAmerica2();
    return NorthAmerica2;
  })();
  var regionName = function(v) {
    if (v instanceof EastAsiaAndPacific) {
      return "East Asia & Pacific";
    }
    ;
    if (v instanceof Europe) {
      return "Europe & Central Asia";
    }
    ;
    if (v instanceof LatinAmericaAndCaribbean) {
      return "Latin America & Caribbean";
    }
    ;
    if (v instanceof MiddleEastAndNorthAfrica) {
      return "Middle East & North Africa";
    }
    ;
    if (v instanceof SouthAsia) {
      return "South Asia";
    }
    ;
    if (v instanceof SubSaharanAfrica) {
      return "Sub-Saharan Africa";
    }
    ;
    if (v instanceof NorthAmerica) {
      return "North America";
    }
    ;
    throw new Error("Failed pattern match at PSD3.WealthHealth.Types (line 27, column 14 - line 34, column 34): " + [v.constructor.name]);
  };
  var regionColor = function(v) {
    if (v instanceof EastAsiaAndPacific) {
      return "#e41a1c";
    }
    ;
    if (v instanceof Europe) {
      return "#377eb8";
    }
    ;
    if (v instanceof LatinAmericaAndCaribbean) {
      return "#4daf4a";
    }
    ;
    if (v instanceof MiddleEastAndNorthAfrica) {
      return "#984ea3";
    }
    ;
    if (v instanceof SouthAsia) {
      return "#ff7f00";
    }
    ;
    if (v instanceof SubSaharanAfrica) {
      return "#ffff33";
    }
    ;
    if (v instanceof NorthAmerica) {
      return "#a65628";
    }
    ;
    throw new Error("Failed pattern match at PSD3.WealthHealth.Types (line 38, column 15 - line 45, column 28): " + [v.constructor.name]);
  };

  // output/PSD3.WealthHealth.Actions/index.js
  var Initialize61 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var DataLoaded = /* @__PURE__ */ (function() {
    function DataLoaded2(value0) {
      this.value0 = value0;
    }
    ;
    DataLoaded2.create = function(value0) {
      return new DataLoaded2(value0);
    };
    return DataLoaded2;
  })();
  var DataLoadFailed = /* @__PURE__ */ (function() {
    function DataLoadFailed2(value0) {
      this.value0 = value0;
    }
    ;
    DataLoadFailed2.create = function(value0) {
      return new DataLoadFailed2(value0);
    };
    return DataLoadFailed2;
  })();
  var SetYear = /* @__PURE__ */ (function() {
    function SetYear2(value0) {
      this.value0 = value0;
    }
    ;
    SetYear2.create = function(value0) {
      return new SetYear2(value0);
    };
    return SetYear2;
  })();
  var TogglePlay = /* @__PURE__ */ (function() {
    function TogglePlay2() {
    }
    ;
    TogglePlay2.value = new TogglePlay2();
    return TogglePlay2;
  })();
  var Tick = /* @__PURE__ */ (function() {
    function Tick2() {
    }
    ;
    Tick2.value = new Tick2();
    return Tick2;
  })();
  var HoverNation = /* @__PURE__ */ (function() {
    function HoverNation2(value0) {
      this.value0 = value0;
    }
    ;
    HoverNation2.create = function(value0) {
      return new HoverNation2(value0);
    };
    return HoverNation2;
  })();
  var ToggleNationSelection = /* @__PURE__ */ (function() {
    function ToggleNationSelection2(value0) {
      this.value0 = value0;
    }
    ;
    ToggleNationSelection2.create = function(value0) {
      return new ToggleNationSelection2(value0);
    };
    return ToggleNationSelection2;
  })();
  var SetAnimationSpeed = /* @__PURE__ */ (function() {
    function SetAnimationSpeed2(value0) {
      this.value0 = value0;
    }
    ;
    SetAnimationSpeed2.create = function(value0) {
      return new SetAnimationSpeed2(value0);
    };
    return SetAnimationSpeed2;
  })();
  var ToggleLabels = /* @__PURE__ */ (function() {
    function ToggleLabels2() {
    }
    ;
    ToggleLabels2.value = new ToggleLabels2();
    return ToggleLabels2;
  })();
  var Render = /* @__PURE__ */ (function() {
    function Render2() {
    }
    ;
    Render2.value = new Render2();
    return Render2;
  })();

  // output/PSD3.WealthHealth.Data/foreign.js
  function parseRegion(regionName2) {
    switch (regionName2) {
      case "East Asia & Pacific":
        return "EastAsiaAndPacific";
      case "Europe & Central Asia":
        return "Europe";
      case "Latin America & Caribbean":
        return "LatinAmericaAndCaribbean";
      case "Middle East & North Africa":
        return "MiddleEastAndNorthAfrica";
      case "South Asia":
        return "SouthAsia";
      case "Sub-Saharan Africa":
        return "SubSaharanAfrica";
      case "North America":
      case "America":
        return "NorthAmerica";
      default:
        console.warn("Unknown region:", regionName2);
        return "Unknown";
    }
  }
  function parseNationsJSON(jsonString) {
    try {
      const rawData = JSON.parse(jsonString);
      return rawData.map((nation) => ({
        name: nation.name,
        region: parseRegion(nation.region),
        income: nation.income || [],
        population: nation.population || [],
        lifeExpectancy: nation.lifeExpectancy || []
      }));
    } catch (error4) {
      console.error("Failed to parse nations JSON:", error4);
      return [];
    }
  }

  // output/PSD3.WealthHealth.Data/index.js
  var bind86 = /* @__PURE__ */ bind(bindMaybe);
  var pure51 = /* @__PURE__ */ pure(applicativeMaybe);
  var bind118 = /* @__PURE__ */ bind(bindArray);
  var pure119 = /* @__PURE__ */ pure(applicativeArray);
  var min11 = /* @__PURE__ */ min(ordInt);
  var maximum16 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var minimum10 = /* @__PURE__ */ minimum(ordInt)(foldableArray);
  var div4 = /* @__PURE__ */ div(euclideanRingInt);
  var comparing3 = /* @__PURE__ */ comparing(ordNumber);
  var map88 = /* @__PURE__ */ map(functorArray);
  var pure210 = /* @__PURE__ */ pure(applicativeAff);
  var parseRegionString = function(v) {
    if (v === "EastAsiaAndPacific") {
      return new Just(EastAsiaAndPacific.value);
    }
    ;
    if (v === "Europe") {
      return new Just(Europe.value);
    }
    ;
    if (v === "LatinAmericaAndCaribbean") {
      return new Just(LatinAmericaAndCaribbean.value);
    }
    ;
    if (v === "MiddleEastAndNorthAfrica") {
      return new Just(MiddleEastAndNorthAfrica.value);
    }
    ;
    if (v === "SouthAsia") {
      return new Just(SouthAsia.value);
    }
    ;
    if (v === "SubSaharanAfrica") {
      return new Just(SubSaharanAfrica.value);
    }
    ;
    if (v === "NorthAmerica") {
      return new Just(NorthAmerica.value);
    }
    ;
    return Nothing.value;
  };
  var parseNationData = function(raw) {
    return bind86(parseRegionString(raw.region))(function(region) {
      return pure51({
        name: raw.name,
        region,
        income: raw.income,
        population: raw.population,
        lifeExpectancy: raw.lifeExpectancy
      });
    });
  };
  var nationsDataUrl = "data/nations.json";
  var calculateYearRange = function(nations) {
    var allYears = bind118(nations)(function(nation) {
      return bind118(nation.income)(function(yearValue) {
        var v = index2(yearValue)(0);
        if (v instanceof Just) {
          return pure119(floor2(v.value0));
        }
        ;
        if (v instanceof Nothing) {
          return [];
        }
        ;
        throw new Error("Failed pattern match at PSD3.WealthHealth.Data (line 125, column 7 - line 127, column 22): " + [v.constructor.name]);
      });
    });
    var maxYear = min11(2005)(fromMaybe(2009)(maximum16(allYears)));
    var minYear = fromMaybe(1800)(minimum10(allYears));
    return {
      min: minYear,
      max: maxYear
    };
  };
  var bisectLeft2 = function(target7) {
    return function(arr) {
      var go2 = function($copy_low) {
        return function($copy_high) {
          var $tco_var_low = $copy_low;
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(low2, high2) {
            if (low2 >= high2) {
              $tco_done = true;
              return low2;
            }
            ;
            if (otherwise) {
              var mid = div4(low2 + high2 | 0)(2);
              var v = bind86(index2(arr)(mid))(function(v1) {
                return index2(v1)(0);
              });
              if (v instanceof Just && v.value0 < target7) {
                $tco_var_low = mid + 1 | 0;
                $copy_high = high2;
                return;
              }
              ;
              $tco_var_low = low2;
              $copy_high = mid;
              return;
            }
            ;
            throw new Error("Failed pattern match at PSD3.WealthHealth.Data (line 157, column 5 - line 163, column 28): " + [low2.constructor.name, high2.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($tco_var_low, $copy_high);
          }
          ;
          return $tco_result;
        };
      };
      return go2(0)(length3(arr));
    };
  };
  var interpolateValue = function(targetYear) {
    return function(dataPoints) {
      var v = sortBy(comparing3(function(arr) {
        return fromMaybe(0)(index2(arr)(0));
      }))(dataPoints);
      if (v.length === 0) {
        return Nothing.value;
      }
      ;
      var yearNum = toNumber(targetYear);
      var i2 = bisectLeft2(yearNum)(v);
      return bind86(index2(v)(i2))(function(a2) {
        return bind86(index2(a2)(0))(function(aYear) {
          return bind86(index2(a2)(1))(function(aValue) {
            var $39 = i2 > 0;
            if ($39) {
              return bind86(index2(v)(i2 - 1 | 0))(function(b2) {
                return bind86(index2(b2)(0))(function(bYear) {
                  return bind86(index2(b2)(1))(function(bValue) {
                    var t = (yearNum - aYear) / (bYear - aYear);
                    return pure51(aValue * (1 - t) + bValue * t);
                  });
                });
              });
            }
            ;
            return pure51(aValue);
          });
        });
      });
    };
  };
  var fillMissingYears = function(yearRange) {
    return function(dataPoints) {
      var $$null5 = function(arr) {
        var v = head(arr);
        if (v instanceof Nothing) {
          return true;
        }
        ;
        if (v instanceof Just) {
          return false;
        }
        ;
        throw new Error("Failed pattern match at PSD3.WealthHealth.Data (line 81, column 16 - line 83, column 22): " + [v.constructor.name]);
      };
      var $42 = $$null5(dataPoints);
      if ($42) {
        return Nothing.value;
      }
      ;
      var fillYear = function(year) {
        var v = interpolateValue(floor2(year))(dataPoints);
        if (v instanceof Just) {
          return [year, v.value0];
        }
        ;
        if (v instanceof Nothing) {
          return [year, 0];
        }
        ;
        throw new Error("Failed pattern match at PSD3.WealthHealth.Data (line 75, column 23 - line 77, column 31): " + [v.constructor.name]);
      };
      var allYears = map88(toNumber)(range2(yearRange.min)(yearRange.max));
      return new Just(map88(fillYear)(allYears));
    };
  };
  var fillNationData = function(yearRange) {
    return function(nation) {
      return bind86(fillMissingYears(yearRange)(nation.income))(function(filledIncome) {
        return bind86(fillMissingYears(yearRange)(nation.population))(function(filledPopulation) {
          return bind86(fillMissingYears(yearRange)(nation.lifeExpectancy))(function(filledLifeExpectancy) {
            return pure51({
              name: nation.name,
              region: nation.region,
              income: filledIncome,
              population: filledPopulation,
              lifeExpectancy: filledLifeExpectancy
            });
          });
        });
      });
    };
  };
  var loadNationsData = /* @__PURE__ */ bind(bindAff)(/* @__PURE__ */ get4(string)(nationsDataUrl))(function(result) {
    return pure210((function() {
      if (result instanceof Left) {
        return new Left("Failed to load nations data: " + printError(result.value0));
      }
      ;
      if (result instanceof Right) {
        var rawNations = parseNationsJSON(result.value0.body);
        var nations = catMaybes(map88(parseNationData)(rawNations));
        var yearRange = calculateYearRange(nations);
        var filledNations = catMaybes(map88(fillNationData(yearRange))(nations));
        return new Right({
          nations: filledNations,
          yearRange
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.WealthHealth.Data (line 104, column 8 - line 115, column 50): " + [result.constructor.name]);
    })());
  });
  var getNationAtYear = function(year) {
    return function(nation) {
      return bind86(interpolateValue(year)(nation.income))(function(income) {
        return bind86(interpolateValue(year)(nation.population))(function(population) {
          return bind86(interpolateValue(year)(nation.lifeExpectancy))(function(lifeExpectancy) {
            return pure51({
              name: nation.name,
              region: nation.region,
              year,
              income,
              population,
              lifeExpectancy
            });
          });
        });
      });
    };
  };
  var getAllNationsAtYear = function(year) {
    return function(model) {
      return catMaybes(map88(getNationAtYear(year))(model.nations));
    };
  };

  // output/PSD3.WealthHealth.State/index.js
  var AlwaysShow = /* @__PURE__ */ (function() {
    function AlwaysShow2() {
    }
    ;
    AlwaysShow2.value = new AlwaysShow2();
    return AlwaysShow2;
  })();
  var OnHoverOnly = /* @__PURE__ */ (function() {
    function OnHoverOnly2() {
    }
    ;
    OnHoverOnly2.value = new OnHoverOnly2();
    return OnHoverOnly2;
  })();
  var initialState5 = function(v) {
    return {
      model: Nothing.value,
      currentYear: 1800,
      playing: false,
      hoveredNation: Nothing.value,
      selectedNations: empty7,
      animationSpeed: 5,
      animationSubscriptionId: Nothing.value,
      vizUpdateFn: Nothing.value,
      labelMode: OnHoverOnly.value
    };
  };

  // output/PSD3.WealthHealth.HTML/index.js
  var map89 = /* @__PURE__ */ map(functorMaybe);
  var show60 = /* @__PURE__ */ show(showInt);
  var type_23 = /* @__PURE__ */ type_17(isPropInputType);
  var value16 = /* @__PURE__ */ value12(isPropString);
  var show133 = /* @__PURE__ */ show(showNumber);
  var renderLegendItem = function(region) {
    return div2([classes(["wealth-health-legend__item"])])([span3([classes(["wealth-health-legend__color"]), style("background-color: " + regionColor(region))])([]), span3([classes(["wealth-health-legend__label"])])([text5(regionName(region))])]);
  };
  var renderControlPanel = function(state3) {
    var toNum = function(s) {
      return fromString(s);
    };
    var toInt = function(s) {
      return map89(floor2)(toNum(s));
    };
    return div2([classes(["wealth-health-controls"])])([div2([classes(["wealth-health-year-display"])])([text5(show60(state3.currentYear))]), div2([classes(["wealth-health-scrubber"])])([label_([text5("Year")]), input2([type_23(InputRange.value), min5(toNumber(fromMaybe(1800)(map89(function(v) {
      return v.yearRange.min;
    })(state3.model)))), max6(toNumber(fromMaybe(2009)(map89(function(v) {
      return v.yearRange.max;
    })(state3.model)))), value16(show60(state3.currentYear)), step3(new Step(1)), onValueInput(function(val) {
      return new SetYear(fromMaybe(state3.currentYear)(toInt(val)));
    }), classes(["wealth-health-scrubber__slider"])])]), div2([classes(["wealth-health-playback"])])([button([classes(["wealth-health-playback__button"]), onClick(function(v) {
      return TogglePlay.value;
    })])([text5((function() {
      if (state3.playing) {
        return "\u23F8 Pause";
      }
      ;
      return "\u25B6 Play";
    })())])]), div2([classes(["wealth-health-speed"])])([label_([text5("Speed")]), input2([type_23(InputRange.value), min5(1), max6(10), value16(show133(state3.animationSpeed)), step3(new Step(0.5)), onValueInput(function(val) {
      return new SetAnimationSpeed(fromMaybe(5)(toNum(val)));
    }), classes(["wealth-health-speed__slider"])]), span3([classes(["wealth-health-speed__value"])])([text5(show133(state3.animationSpeed) + " years/sec")])]), div2([classes(["wealth-health-labels"])])([label_([text5("Show labels:")]), button([classes(["wealth-health-labels__toggle"]), onClick(function(v) {
      return ToggleLabels.value;
    })])([text5((function() {
      if (state3.labelMode instanceof AlwaysShow) {
        return "Always";
      }
      ;
      if (state3.labelMode instanceof OnHoverOnly) {
        return "Only on hover";
      }
      ;
      throw new Error("Failed pattern match at PSD3.WealthHealth.HTML (line 79, column 25 - line 81, column 47): " + [state3.labelMode.constructor.name]);
    })())])])]);
  };
  var allRegions = /* @__PURE__ */ (function() {
    return [EastAsiaAndPacific.value, Europe.value, LatinAmericaAndCaribbean.value, MiddleEastAndNorthAfrica.value, SouthAsia.value, SubSaharanAfrica.value, NorthAmerica.value];
  })();
  var renderLegend = /* @__PURE__ */ div2([/* @__PURE__ */ classes(["wealth-health-legend"])])([/* @__PURE__ */ h3_([/* @__PURE__ */ text5("Regions")]), /* @__PURE__ */ div2([/* @__PURE__ */ classes(["wealth-health-legend__items"])])(/* @__PURE__ */ map(functorArray)(renderLegendItem)(allRegions))]);

  // output/PSD3.WealthHealth.WealthHealth/index.js
  var bind87 = /* @__PURE__ */ bind(bindHalogenM);
  var discard91 = /* @__PURE__ */ discard(discardUnit);
  var discard114 = /* @__PURE__ */ discard91(bindHalogenM);
  var pure52 = /* @__PURE__ */ pure(applicativeHalogenM);
  var modify_46 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var draw34 = /* @__PURE__ */ draw33(d3TaglessD3M);
  var get15 = /* @__PURE__ */ get(monadStateHalogenM);
  var when5 = /* @__PURE__ */ when(applicativeHalogenM);
  var $$void12 = /* @__PURE__ */ $$void(functorHalogenM);
  var forever3 = /* @__PURE__ */ forever(monadRecAff);
  var discard215 = /* @__PURE__ */ discard91(bindAff);
  var liftEffect50 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var member9 = /* @__PURE__ */ member2(ordString);
  var $$delete10 = /* @__PURE__ */ $$delete3(ordString);
  var insert19 = /* @__PURE__ */ insert5(ordString);
  var map90 = /* @__PURE__ */ map(functorArray);
  var bind119 = /* @__PURE__ */ bind(bindMaybe);
  var show61 = /* @__PURE__ */ show(showInt);
  var nationPointToDrawData = function(np) {
    return {
      name: np.name,
      income: np.income,
      population: np.population,
      lifeExpectancy: np.lifeExpectancy,
      regionColor: regionColor(np.region),
      region: regionName(np.region)
    };
  };
  var handleAction60 = function(dictMonadAff) {
    var liftAff37 = liftAff(monadAffHalogenM(dictMonadAff));
    var MonadEffect0 = dictMonadAff.MonadEffect0();
    var liftEffect112 = liftEffect(monadEffectHalogenM(MonadEffect0));
    return function(dictMonadEffect) {
      return function(v) {
        if (v instanceof Initialize61) {
          return bind87(liftAff37(loadNationsData))(function(result) {
            if (result instanceof Left) {
              return discard114(liftEffect112(log2("Error loading data: " + result.value0)))(function() {
                return pure52(unit);
              });
            }
            ;
            if (result instanceof Right) {
              return handleAction60(dictMonadAff)(MonadEffect0)(new DataLoaded(result.value0));
            }
            ;
            throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 194, column 5 - line 199, column 40): " + [result.constructor.name]);
          });
        }
        ;
        if (v instanceof DataLoaded) {
          return discard114(modify_46(function(v1) {
            var $57 = {};
            for (var $58 in v1) {
              if ({}.hasOwnProperty.call(v1, $58)) {
                $57[$58] = v1[$58];
              }
              ;
            }
            ;
            $57.model = new Just(v.value0);
            return $57;
          }))(function() {
            return discard114(modify_46(function(v1) {
              var $60 = {};
              for (var $61 in v1) {
                if ({}.hasOwnProperty.call(v1, $61)) {
                  $60[$61] = v1[$61];
                }
                ;
              }
              ;
              $60.currentYear = v.value0.yearRange.min;
              return $60;
            }))(function() {
              return discard114(liftAff37(delay(100)))(function() {
                return bind87(liftEffect112(eval_D3M(draw34("#wealth-health-viz"))))(function(updateFn) {
                  return discard114(modify_46(function(v1) {
                    var $63 = {};
                    for (var $64 in v1) {
                      if ({}.hasOwnProperty.call(v1, $64)) {
                        $63[$64] = v1[$64];
                      }
                      ;
                    }
                    ;
                    $63.vizUpdateFn = new Just(updateFn);
                    return $63;
                  }))(function() {
                    return handleAction60(dictMonadAff)(MonadEffect0)(Render.value);
                  });
                });
              });
            });
          });
        }
        ;
        if (v instanceof DataLoadFailed) {
          return discard114(liftEffect112(log2("Data load failed: " + v.value0)))(function() {
            return pure52(unit);
          });
        }
        ;
        if (v instanceof SetYear) {
          return discard114(modify_46(function(v1) {
            var $68 = {};
            for (var $69 in v1) {
              if ({}.hasOwnProperty.call(v1, $69)) {
                $68[$69] = v1[$69];
              }
              ;
            }
            ;
            $68.currentYear = v.value0;
            return $68;
          }))(function() {
            return handleAction60(dictMonadAff)(MonadEffect0)(Render.value);
          });
        }
        ;
        if (v instanceof TogglePlay) {
          return bind87(get15)(function(state3) {
            var newPlaying = !state3.playing;
            return discard114(modify_46(function(v1) {
              var $72 = {};
              for (var $73 in v1) {
                if ({}.hasOwnProperty.call(v1, $73)) {
                  $72[$73] = v1[$73];
                }
                ;
              }
              ;
              $72.playing = newPlaying;
              return $72;
            }))(function() {
              return discard114(when5(newPlaying)((function() {
                var intervalMs = 1e3 / state3.animationSpeed;
                return bind87(liftEffect112(create3))(function(v1) {
                  return bind87(subscribe2(v1.emitter))(function(subscriptionId) {
                    return discard114(modify_46(function(v2) {
                      var $76 = {};
                      for (var $77 in v2) {
                        if ({}.hasOwnProperty.call(v2, $77)) {
                          $76[$77] = v2[$77];
                        }
                        ;
                      }
                      ;
                      $76.animationSubscriptionId = new Just(subscriptionId);
                      return $76;
                    }))(function() {
                      return $$void12(liftAff37(forkAff(forever3(discard215(delay(intervalMs))(function() {
                        return liftEffect50(notify(v1.listener)(Tick.value));
                      })))));
                    });
                  });
                });
              })()))(function() {
                return when5(!newPlaying)(bind87(get15)(function(state$prime) {
                  if (state$prime.animationSubscriptionId instanceof Nothing) {
                    return pure52(unit);
                  }
                  ;
                  if (state$prime.animationSubscriptionId instanceof Just) {
                    return discard114(unsubscribe2(state$prime.animationSubscriptionId.value0))(function() {
                      return modify_46(function(v1) {
                        var $82 = {};
                        for (var $83 in v1) {
                          if ({}.hasOwnProperty.call(v1, $83)) {
                            $82[$83] = v1[$83];
                          }
                          ;
                        }
                        ;
                        $82.animationSubscriptionId = Nothing.value;
                        return $82;
                      });
                    });
                  }
                  ;
                  throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 240, column 7 - line 244, column 60): " + [state$prime.animationSubscriptionId.constructor.name]);
                }));
              });
            });
          });
        }
        ;
        if (v instanceof Tick) {
          return bind87(get15)(function(state3) {
            if (state3.model instanceof Nothing) {
              return pure52(unit);
            }
            ;
            if (state3.model instanceof Just) {
              var nextYear = state3.currentYear + 1 | 0;
              return discard114((function() {
                var $87 = nextYear > state3.model.value0.yearRange.max;
                if ($87) {
                  return modify_46(function(v1) {
                    var $88 = {};
                    for (var $89 in v1) {
                      if ({}.hasOwnProperty.call(v1, $89)) {
                        $88[$89] = v1[$89];
                      }
                      ;
                    }
                    ;
                    $88.currentYear = state3.model.value0.yearRange.min;
                    return $88;
                  });
                }
                ;
                return modify_46(function(v1) {
                  var $91 = {};
                  for (var $92 in v1) {
                    if ({}.hasOwnProperty.call(v1, $92)) {
                      $91[$92] = v1[$92];
                    }
                    ;
                  }
                  ;
                  $91.currentYear = nextYear;
                  return $91;
                });
              })())(function() {
                return handleAction60(dictMonadAff)(MonadEffect0)(Render.value);
              });
            }
            ;
            throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 248, column 5 - line 257, column 28): " + [state3.model.constructor.name]);
          });
        }
        ;
        if (v instanceof HoverNation) {
          return modify_46(function(v1) {
            var $95 = {};
            for (var $96 in v1) {
              if ({}.hasOwnProperty.call(v1, $96)) {
                $95[$96] = v1[$96];
              }
              ;
            }
            ;
            $95.hoveredNation = v.value0;
            return $95;
          });
        }
        ;
        if (v instanceof ToggleNationSelection) {
          return modify_46(function(s) {
            var newSelected = (function() {
              var $99 = member9(v.value0)(s.selectedNations);
              if ($99) {
                return $$delete10(v.value0)(s.selectedNations);
              }
              ;
              return insert19(v.value0)(s.selectedNations);
            })();
            var $100 = {};
            for (var $101 in s) {
              if ({}.hasOwnProperty.call(s, $101)) {
                $100[$101] = s[$101];
              }
              ;
            }
            ;
            $100.selectedNations = newSelected;
            return $100;
          });
        }
        ;
        if (v instanceof SetAnimationSpeed) {
          return modify_46(function(v1) {
            var $104 = {};
            for (var $105 in v1) {
              if ({}.hasOwnProperty.call(v1, $105)) {
                $104[$105] = v1[$105];
              }
              ;
            }
            ;
            $104.animationSpeed = v.value0;
            return $104;
          });
        }
        ;
        if (v instanceof ToggleLabels) {
          return discard114(modify_46(function(s) {
            var $109 = {};
            for (var $110 in s) {
              if ({}.hasOwnProperty.call(s, $110)) {
                $109[$110] = s[$110];
              }
              ;
            }
            ;
            $109.labelMode = (function() {
              if (s.labelMode instanceof AlwaysShow) {
                return OnHoverOnly.value;
              }
              ;
              if (s.labelMode instanceof OnHoverOnly) {
                return AlwaysShow.value;
              }
              ;
              throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 277, column 23 - line 279, column 38): " + [s.labelMode.constructor.name]);
            })();
            return $109;
          }))(function() {
            return handleAction60(dictMonadAff)(MonadEffect0)(Render.value);
          });
        }
        ;
        if (v instanceof Render) {
          return bind87(get15)(function(state3) {
            if (state3.model instanceof Just && state3.vizUpdateFn instanceof Just) {
              var nations = getAllNationsAtYear(state3.currentYear)(state3.model.value0);
              var drawData = map90(nationPointToDrawData)(nations);
              return bind87(liftEffect112(eval_D3M(state3.vizUpdateFn.value0(drawData))))(function() {
                return pure52(unit);
              });
            }
            ;
            return pure52(unit);
          });
        }
        ;
        throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 190, column 16 - line 291, column 24): " + [v.constructor.name]);
      };
    };
  };
  var getNationData = function(nationName) {
    return function(year) {
      return function(model) {
        return bind119(find2(function(n) {
          return n.name === nationName;
        })(model.nations))(function(nationRawData) {
          return getNationAtYear(year)(nationRawData);
        });
      };
    };
  };
  var formatPopulation = function(n) {
    var millions = n / 1e6;
    return show61(floor2(millions)) + "M";
  };
  var formatNumber = function(n) {
    return show61(floor2(n));
  };
  var renderTooltip = function(state3) {
    return function(model) {
      if (state3.hoveredNation instanceof Nothing) {
        return text5("");
      }
      ;
      if (state3.hoveredNation instanceof Just) {
        var v = getNationData(state3.hoveredNation.value0)(state3.currentYear)(model);
        if (v instanceof Nothing) {
          return text5("");
        }
        ;
        if (v instanceof Just) {
          return div2([classes(["wealth-health-tooltip"])])([h4_([text5(v.value0.name)]), div_([text5("Region: " + regionName(v.value0.region))]), div_([text5("Income: $" + formatNumber(v.value0.income))]), div_([text5("Population: " + formatPopulation(v.value0.population))]), div_([text5("Life Expectancy: " + (formatNumber(v.value0.lifeExpectancy) + " years"))])]);
        }
        ;
        throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 136, column 7 - line 146, column 14): " + [v.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 132, column 3 - line 146, column 14): " + [state3.hoveredNation.constructor.name]);
    };
  };
  var render72 = function(state3) {
    return div2([classes(["wealth-health-page"])])([renderHeader(WealthHealth.value), header([classes(["wealth-health-header"])])([h1_([text5("The Wealth & Health of Nations")]), p_([text5("An animated exploration of income, life expectancy, and population across 180 nations from 1800 to 2009")])]), div2([classes(["wealth-health-content"])])([aside([classes(["wealth-health-sidebar"])])([renderControlPanel(state3), renderLegend]), main([classes(["wealth-health-visualization"])])([(function() {
      if (state3.model instanceof Nothing) {
        return div2([classes(["wealth-health-loading"])])([text5("Loading data...")]);
      }
      ;
      if (state3.model instanceof Just) {
        return div2([classes(["wealth-health-viz-wrapper"])])([div2([id2("wealth-health-viz"), classes(["wealth-health-viz-container", (function() {
          if (state3.labelMode instanceof AlwaysShow) {
            return "labels-always-show";
          }
          ;
          if (state3.labelMode instanceof OnHoverOnly) {
            return "";
          }
          ;
          throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 83, column 46 - line 85, column 50): " + [state3.labelMode.constructor.name]);
        })()])])([]), renderTooltip(state3)(state3.model.value0)]);
      }
      ;
      throw new Error("Failed pattern match at PSD3.WealthHealth.WealthHealth (line 71, column 15 - line 90, column 22): " + [state3.model.constructor.name]);
    })()])]), footer([classes(["wealth-health-credits"])])([div2([classes(["wealth-health-credits__tribute"])])([text5("In memory of "), a([href4("https://youtu.be/usdJgEwMinM"), target5("_blank"), classes(["wealth-health-credits__link"])])([text5("Hans Rosling")]), text5(" (1948-2017), whose "), a([href4("https://youtu.be/usdJgEwMinM"), target5("_blank"), classes(["wealth-health-credits__link"])])([text5("famous TED talk")]), text5(" inspired this visualization.")]), div2([classes(["wealth-health-credits__adaptation"])])([text5("D3 adaptation by "), a([href4("https://observablehq.com/@mbostock/the-wealth-health-of-nations"), target5("_blank"), classes(["wealth-health-credits__link"])])([text5("Mike Bostock")]), text5(". PureScript implementation demonstrates the PS<$>D3 library.")])])]);
  };
  var component67 = function(dictMonadAff) {
    var handleAction1 = handleAction60(dictMonadAff)(dictMonadAff.MonadEffect0());
    return function(dictMonadEffect) {
      return mkComponent({
        initialState: initialState5,
        render: render72,
        "eval": mkEval({
          handleQuery: defaultEval.handleQuery,
          receive: defaultEval.receive,
          finalize: defaultEval.finalize,
          handleAction: handleAction1,
          initialize: new Just(Initialize61.value)
        })
      });
    };
  };

  // output/PSD3.WealthHealth.WealthHealthWrapper/index.js
  var slot_19 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "wealthHealth";
    }
  })(ordUnit);
  var _wealthHealth = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render73 = function(dictMonadAff) {
    var component112 = component67(dictMonadAff)(dictMonadAff.MonadEffect0());
    return function(dictMonadEffect) {
      return function(v) {
        return div2([classes(["wealth-health-wrapper"])])([slot_19(_wealthHealth)(unit)(component112)(unit)]);
      };
    };
  };
  var component68 = function(dictMonadAff) {
    var render1 = render73(dictMonadAff)(dictMonadAff.MonadEffect0());
    return function(dictMonadEffect) {
      return mkComponent({
        initialState: function(v) {
          return unit;
        },
        render: render1,
        "eval": mkEval(defaultEval)
      });
    };
  };

  // output/Data.Char/index.js
  var toCharCode2 = /* @__PURE__ */ fromEnum(boundedEnumChar);
  var fromCharCode3 = /* @__PURE__ */ toEnum(boundedEnumChar);

  // output/PSD3.Wizard.Datasets/index.js
  var Beginner = /* @__PURE__ */ (function() {
    function Beginner2() {
    }
    ;
    Beginner2.value = new Beginner2();
    return Beginner2;
  })();
  var Intermediate = /* @__PURE__ */ (function() {
    function Intermediate2() {
    }
    ;
    Intermediate2.value = new Intermediate2();
    return Intermediate2;
  })();
  var Advanced = /* @__PURE__ */ (function() {
    function Advanced2() {
    }
    ;
    Advanced2.value = new Advanced2();
    return Advanced2;
  })();
  var sineWaveDataset = /* @__PURE__ */ (function() {
    return {
      id: "sinewave",
      name: "Sine Wave",
      description: "Smooth wave pattern - great for line charts and transitions",
      difficulty: Beginner.value,
      fields: [{
        name: "x",
        fieldType: "Number"
      }, {
        name: "y",
        fieldType: "Number"
      }],
      dataPreview: ["{ x: 0.0, y: 100.0 }", "{ x: 5.0, y: 125.0 }", "{ x: 10.0, y: 145.0 }", "..."],
      suggestedViz: "Line chart or area chart",
      educationalNote: "Demonstrates smooth continuous data - perfect for learning line generators and paths."
    };
  })();
  var showDifficulty = {
    show: function(v) {
      if (v instanceof Beginner) {
        return "Beginner";
      }
      ;
      if (v instanceof Intermediate) {
        return "Intermediate";
      }
      ;
      if (v instanceof Advanced) {
        return "Advanced";
      }
      ;
      throw new Error("Failed pattern match at PSD3.Wizard.Datasets (line 32, column 1 - line 35, column 29): " + [v.constructor.name]);
    }
  };
  var scatterDataset = /* @__PURE__ */ (function() {
    return {
      id: "scatter",
      name: "Scatter Plot",
      description: "Random points in 2D space - perfect for your first visualization",
      difficulty: Beginner.value,
      fields: [{
        name: "x",
        fieldType: "Number"
      }, {
        name: "y",
        fieldType: "Number"
      }],
      dataPreview: ["{ x: 10.0, y: 20.0 }", "{ x: 25.0, y: 45.0 }", "{ x: 40.0, y: 30.0 }", "..."],
      suggestedViz: "Scatter plot with circles",
      educationalNote: "Start here! Simple 2D data is the easiest way to learn PSD3's data binding patterns."
    };
  })();
  var multiLineDataset = /* @__PURE__ */ (function() {
    return {
      id: "multiline",
      name: "Unemployment Rates",
      description: "Unemployment rates for 4 cities over time - multi-series data",
      difficulty: Intermediate.value,
      fields: [{
        name: "series",
        fieldType: "String"
      }, {
        name: "date",
        fieldType: "String"
      }, {
        name: "value",
        fieldType: "Number"
      }],
      dataPreview: ['{ series: "San Francisco", date: "2000-01", value: 3.5 }', '{ series: "San Francisco", date: "2002-01", value: 5.2 }', '{ series: "New York", date: "2000-01", value: 5.3 }', "..."],
      suggestedViz: "Multi-line chart with legend",
      educationalNote: "Time-series data with multiple series - demonstrates data grouping by series and line generators."
    };
  })();
  var groupedBarDataset = /* @__PURE__ */ (function() {
    return {
      id: "groupedbar",
      name: "State Demographics",
      description: "Population by state and age group - for grouped/stacked visualizations",
      difficulty: Intermediate.value,
      fields: [{
        name: "state",
        fieldType: "String"
      }, {
        name: "age",
        fieldType: "String"
      }, {
        name: "population",
        fieldType: "Number"
      }],
      dataPreview: ['{ state: "CA", age: "<10", population: 5038433.0 }', '{ state: "CA", age: "10-19", population: 5055706.0 }', '{ state: "TX", age: "<10", population: 4131018.0 }', "..."],
      suggestedViz: "Grouped bar chart or stacked bar chart",
      educationalNote: "Multi-dimensional data with categorical and numerical fields - great for learning data nesting and grouping patterns."
    };
  })();
  var eqDifficulty = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof Beginner && y46 instanceof Beginner) {
          return true;
        }
        ;
        if (x46 instanceof Intermediate && y46 instanceof Intermediate) {
          return true;
        }
        ;
        if (x46 instanceof Advanced && y46 instanceof Advanced) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var barChartDataset = /* @__PURE__ */ (function() {
    return {
      id: "barchart",
      name: "Monthly Sales",
      description: "12 months of sales data - classic bar chart material",
      difficulty: Beginner.value,
      fields: [{
        name: "x",
        fieldType: "Number"
      }, {
        name: "y",
        fieldType: "Number"
      }],
      dataPreview: ["{ x: 0.0, y: 30.0 }", "{ x: 1.0, y: 45.0 }", "{ x: 2.0, y: 60.0 }", "..."],
      suggestedViz: "Bar chart or column chart",
      educationalNote: "Perfect for learning data joins - each bar represents one data point."
    };
  })();
  var anscombeDataset = /* @__PURE__ */ (function() {
    return {
      id: "anscombe",
      name: "Anscombe's Quartet",
      description: "Four datasets with identical statistics but very different patterns",
      difficulty: Beginner.value,
      fields: [{
        name: "x",
        fieldType: "Number"
      }, {
        name: "y",
        fieldType: "Number"
      }],
      dataPreview: ["-- Dataset 1:", "{ x: 10.0, y: 8.04 }", "{ x: 8.0, y: 6.95 }", "..."],
      suggestedViz: "Four small multiples scatter plots",
      educationalNote: "Famous dataset showing why visualization matters - all four have identical mean, variance, and correlation, but look completely different when plotted!"
    };
  })();
  var allDatasets = [scatterDataset, sineWaveDataset, barChartDataset, anscombeDataset, groupedBarDataset, multiLineDataset];

  // output/PSD3.Wizard.FileDownload/foreign.js
  var createZip = function() {
    return new JSZip();
  };
  var addFile = function(zip2) {
    return function(filename) {
      return function(content3) {
        return function() {
          zip2.file(filename, content3);
        };
      };
    };
  };
  var downloadZipImpl = function(zip2) {
    return function(zipFilename) {
      return function(onError, onSuccess) {
        zip2.generateAsync({ type: "blob" }).then(function(blob) {
          const url = URL.createObjectURL(blob);
          const link4 = document.createElement("a");
          link4.href = url;
          link4.download = zipFilename;
          document.body.appendChild(link4);
          link4.click();
          document.body.removeChild(link4);
          setTimeout(function() {
            URL.revokeObjectURL(url);
          }, 100);
          onSuccess();
        }).catch(function(error4) {
          onError(error4);
        });
        return function(cancelError, onCancelerError, onCancelerSuccess) {
          onCancelerSuccess();
        };
      };
    };
  };
  var copyToClipboard = function(text35) {
    return function() {
      try {
        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard.writeText(text35);
          return true;
        } else {
          const textArea = document.createElement("textarea");
          textArea.value = text35;
          textArea.style.position = "fixed";
          textArea.style.left = "-999999px";
          textArea.style.top = "-999999px";
          document.body.appendChild(textArea);
          textArea.focus();
          textArea.select();
          const success = document.execCommand("copy");
          document.body.removeChild(textArea);
          return success;
        }
      } catch (error4) {
        console.error("Failed to copy to clipboard:", error4);
        return false;
      }
    };
  };

  // output/PSD3.Wizard.FileDownload/index.js
  var append35 = /* @__PURE__ */ append(semigroupArray);
  var eq20 = /* @__PURE__ */ eq(/* @__PURE__ */ eqArray(eqString));
  var append121 = /* @__PURE__ */ append(semigroupString);
  var map91 = /* @__PURE__ */ map(functorArray);
  var bind88 = /* @__PURE__ */ bind(bindAff);
  var liftEffect51 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var discard92 = /* @__PURE__ */ discard(discardUnit)(bindAff);
  var for_5 = /* @__PURE__ */ for_(applicativeEffect)(foldableArray);
  var formatFilesForClipboard = function(files2) {
    var replicateArray = function(n) {
      return function(x46) {
        var $14 = n <= 0;
        if ($14) {
          return [];
        }
        ;
        return append35([x46])(replicateArray(n - 1 | 0)(x46));
      };
    };
    var intercalateArray = function(sep) {
      return function(arr) {
        return maybe("")(function(v) {
          var $16 = eq20(v.tail)([]);
          if ($16) {
            return v.head;
          }
          ;
          return v.head + (sep + intercalateArray(sep)(v.tail));
        })(uncons(arr));
      };
    };
    var repeatString = function(str2) {
      return function(n) {
        return foldl3(append121)("")(replicateArray(n)(str2));
      };
    };
    var separator = "\n" + (repeatString("=")(80) + "\n");
    var formatFile = function(file) {
      return "File: " + (file.filename + ("\n" + (repeatString("-")(80) + ("\n" + file.content))));
    };
    var fileTexts = map91(formatFile)(files2);
    return intercalateArray(separator)(fileTexts);
  };
  var downloadAsZip = function(projectName) {
    return function(files2) {
      return bind88(liftEffect51(createZip))(function(zip2) {
        return discard92(liftEffect51(for_5(files2)(function(file) {
          return addFile(zip2)(file.filename)(file.content);
        })))(function() {
          return fromEffectFnAff(downloadZipImpl(zip2)(projectName + ".zip"));
        });
      });
    };
  };
  var copyFilesToClipboard = function(files2) {
    var formatted = formatFilesForClipboard(files2);
    return copyToClipboard(formatted);
  };

  // output/PSD3.Wizard.Templates/index.js
  var map92 = /* @__PURE__ */ map(functorArray);
  var map128 = /* @__PURE__ */ map(functorMaybe);
  var intercalate6 = /* @__PURE__ */ intercalate2(monoidString);
  var generateRecordType = function(fields) {
    var fieldLines = map92(function(f) {
      return f.name + (" :: " + f.fieldType);
    })(fields);
    return joinWith("\n  , ")(fieldLines);
  };
  var generateUnsafe = function(vizName) {
    return function(dataTypeName) {
      return function(fields) {
        var recordType = generateRecordType(fields);
        return "module " + (vizName + (".Unsafe where\n\nimport PSD3.Internal.Types (Datum_, Index_)\nimport Unsafe.Coerce (unsafeCoerce)\n\n-- | Data type for this visualization\ntype " + (dataTypeName + (" =\n  { " + (recordType + ("\n  }\n\n-- | Coerce Datum_ to " + (dataTypeName + ("\n-- This is safe because D3's data join ensures Datum_ contains\n-- the data we originally passed to simpleJoin/updateJoin\ncoerceTo" + (dataTypeName + (" :: Datum_ -> " + (dataTypeName + ("\ncoerceTo" + (dataTypeName + " = unsafeCoerce\n\n-- | Coerce Index_ to Int (always provided by D3)\ncoerceIndex :: Index_ -> Int\ncoerceIndex = unsafeCoerce\n")))))))))))));
      };
    };
  };
  var generateModel = function(vizName) {
    return function(dataTypeName) {
      return function(fields) {
        return function(exampleData) {
          var recordType = generateRecordType(fields);
          return "module " + (vizName + (".Model where\n\n-- | Data type for this visualization\n-- Re-exported from Unsafe for use in type signatures\ntype " + (dataTypeName + (" =\n  { " + (recordType + ("\n  }\n\n-- | Example data for testing\nexampleData :: Array " + (dataTypeName + ("\nexampleData =\n  " + (exampleData + "\n")))))))));
        };
      };
    };
  };
  var generateMain = function(vizName) {
    return function(dataTypeName) {
      return "module Main where\n\nimport Prelude\nimport Effect (Effect)\nimport " + (vizName + (".Draw (run)\nimport " + (vizName + ".Model (exampleData)\n\nmain :: Effect Unit\nmain = run exampleData\n")));
    };
  };
  var generateHTML = function(vizName) {
    return '<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>' + (vizName + (' - PSD3 Visualization</title>\n  <style>\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;\n      margin: 0;\n      padding: 20px;\n      background-color: #f5f5f5;\n    }\n    .container {\n      max-width: 1200px;\n      margin: 0 auto;\n      background-color: white;\n      padding: 30px;\n      border-radius: 8px;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    }\n    h1 {\n      color: #333;\n      margin-top: 0;\n    }\n    #chart {\n      margin: 20px 0;\n      border: 1px solid #e0e0e0;\n      border-radius: 4px;\n      background-color: #fafafa;\n    }\n    svg {\n      display: block;\n    }\n  </style>\n</head>\n<body>\n  <div class="container">\n    <h1>' + (vizName + `</h1>
    <div id="chart"></div>
  </div>

  <!-- D3.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"><\/script>

  <!-- Your bundled PureScript code -->
  <!-- After building with 'spago bundle', include your bundle here: -->
  <!-- <script src="./bundle.js"><\/script> -->
</body>
</html>
`)));
  };
  var generateDatumType = function(fields) {
    var typeLines = map92(function(f) {
      return f.name + (" :: Datum_ -> " + f.fieldType);
    })(fields);
    return joinWith("\n  , ")(typeLines);
  };
  var generateREADME = function(vizName) {
    return function(dataTypeName) {
      return function(fields) {
        var firstField = fromMaybe("x")(map128(function(f) {
          return f.name;
        })(head(fields)));
        var fieldList = intercalate6("\n")(map92(function(f) {
          return "- " + (f.name + (": " + f.fieldType));
        })(fields));
        var exampleFields = intercalate6(", ")(map92(function(f) {
          return f.name + ": 0.0";
        })(fields));
        var datumType = generateDatumType(fields);
        return "# " + (vizName + ("\n\nPSD3 visualization scaffold generated by the web wizard.\n\n## Files Generated\n\n- **Unsafe.purs** - Type coercion functions (isolates all unsafeCoerce calls)\n- **Model.purs** - Data type definitions\n- **Draw.purs** - Main visualization code\n- **index.html** - HTML page with D3.js loaded from CDN\n\n## Data Type\n\n```purescript\ntype " + (dataTypeName + (" =\n  { " + (fieldList + ("\n  }\n```\n\n## Quick Start\n\n1. **Add your data** in `Model.purs`:\n   ```purescript\n   exampleData :: Array " + (dataTypeName + ("\n   exampleData =\n     [ { " + (exampleFields + (" }\n     -- Add more data points\n     ]\n   ```\n\n2. **Customize the visualization** in `Draw.purs`\n   - Modify the `draw` function to create your desired chart\n   - Use the `datum_` accessor to work with your data safely\n   - See the commented examples for using data fields in attributes\n\n3. **Build and run**:\n   ```bash\n   # Compile the PureScript\n   spago build\n\n   # Bundle for the browser (if you created Main.purs)\n   spago bundle --module Main --outfile bundle.js\n\n   # Open index.html in your browser\n   open index.html\n   ```\n\n## The datum_ Pattern\n\nThe `datum_` accessor record provides type-safe access to your data:\n\n```purescript\ndatum_ ::\n  { " + (datumType + ("\n  , index :: Index_ -> Int\n  }\n```\n\nUse it in attributes like this:\n```purescript\nA.cx (\\\\(d :: Datum_) _ -> datum_." + (firstField + " d)\n```\n\nThe type annotations `(d :: Datum_)` and `(i :: Index_)` help PureScript's type checker\nfind the correct ToAttr instance.\n\n## Learn More\n\n- [PSD3 Documentation](https://github.com/afcondon/PureScript-Tagless-D3)\n- [Wizard Guide](../../docs/wizard-guide.md)\n")))))))))))));
      };
    };
  };
  var generateAccessors = function(fields) {
    return function(coerceFnName) {
      var accessorLines = map92(function(f) {
        return f.name + (": _." + (f.name + (" <<< " + coerceFnName)));
      })(fields);
      return joinWith("\n  , ")(accessorLines);
    };
  };
  var generateDraw = function(vizName) {
    return function(dataTypeName) {
      return function(fields) {
        return function(coerceFnName) {
          var firstField = fromMaybe("x")(map128(function(f) {
            return f.name;
          })(head(fields)));
          var datumType = generateDatumType(fields);
          var accessors = generateAccessors(fields)(coerceFnName);
          return "module " + (vizName + (".Draw where\n\nimport Prelude\n\nimport PSD3\nimport PSD3.Attributes as A\nimport PSD3.Internal.FFI (keyIsID_)\nimport " + (vizName + (".Unsafe (" + (coerceFnName + (", coerceIndex)\nimport " + (vizName + (".Model (" + (dataTypeName + (")\nimport Data.Int (toNumber)\nimport Effect (Effect)\n\n-- | Accessor record for working with bound data\ndatum_ ::\n  { " + (datumType + ("\n  , index :: Index_ -> Int\n  }\ndatum_ =\n  { " + (accessors + ("\n  , index: coerceIndex\n  }\n\n-- | Main drawing function\ndraw :: forall m. SelectionM D3Selection_ m => Array " + (dataTypeName + (' -> Selector D3Selection_ -> m Unit\ndraw dataPoints selector = do\n  (root :: D3Selection_) <- attach selector\n  svg <- appendTo root Svg\n    [ A.width 800.0\n    , A.height 600.0\n    , A.viewBox 0.0 0.0 800.0 600.0\n    ]\n\n  -- Example: Simple data join\n  -- Replace this with your visualization logic\n  circles <- simpleJoin svg Circle dataPoints keyIsID_\n  setAttributes circles\n    [ A.cx (\\\\(_ :: Datum_) (i :: Index_) -> toNumber (datum_.index i) * 50.0)\n    , A.cy 300.0\n    , A.radius 20.0\n    , A.fill "steelblue"\n    ]\n\n  -- Examples of using your data fields in attributes:\n  -- A.cx (\\\\(d :: Datum_) _ -> datum_.' + (firstField + (' d)  -- Use first data field\n  -- A.fill (\\\\(d :: Datum_) (i :: Index_) -> if datum_.index i > 5 then "red" else "blue")\n  -- A.radius (\\\\(d :: Datum_) _ -> datum_.' + (firstField + (" d * 2.0)  -- Scale by data\n\n  pure unit\n\n-- | Entry point\nrun :: Array " + (dataTypeName + ' -> Effect Unit\nrun dataPoints = eval_D3M $ draw dataPoints "#chart"\n')))))))))))))))))))));
        };
      };
    };
  };

  // output/PSD3.Wizard.Generator/index.js
  var intercalate7 = /* @__PURE__ */ intercalate2(monoidString);
  var map93 = /* @__PURE__ */ map(functorArray);
  var append122 = /* @__PURE__ */ append(semigroupArray);
  var sineWaveData2 = "[ { x: 0.0, y: 100.0 }\n  , { x: 5.0, y: 125.0 }\n  , { x: 10.0, y: 145.0 }\n  , { x: 15.0, y: 159.0 }\n  , { x: 20.0, y: 165.0 }\n  , { x: 25.0, y: 159.0 }\n  , { x: 30.0, y: 145.0 }\n  , { x: 35.0, y: 125.0 }\n  , { x: 40.0, y: 100.0 }\n  , { x: 45.0, y: 75.0 }\n  , { x: 50.0, y: 55.0 }\n  , { x: 55.0, y: 41.0 }\n  , { x: 60.0, y: 35.0 }\n  , { x: 65.0, y: 41.0 }\n  , { x: 70.0, y: 55.0 }\n  , { x: 75.0, y: 75.0 }\n  , { x: 80.0, y: 100.0 }\n  ]";
  var scatterData = "[ { x: 10.0, y: 20.0 }\n  , { x: 25.0, y: 45.0 }\n  , { x: 40.0, y: 30.0 }\n  , { x: 55.0, y: 60.0 }\n  , { x: 70.0, y: 40.0 }\n  , { x: 85.0, y: 70.0 }\n  , { x: 100.0, y: 55.0 }\n  , { x: 115.0, y: 80.0 }\n  , { x: 130.0, y: 65.0 }\n  , { x: 145.0, y: 90.0 }\n  ]";
  var multiLineData2 = '[ { series: "San Francisco", date: "2000-01", value: 3.5 }\n  , { series: "San Francisco", date: "2002-01", value: 5.2 }\n  , { series: "San Francisco", date: "2004-01", value: 4.8 }\n  , { series: "San Francisco", date: "2006-01", value: 3.9 }\n  , { series: "San Francisco", date: "2008-01", value: 4.2 }\n  , { series: "San Francisco", date: "2010-01", value: 8.4 }\n  , { series: "San Francisco", date: "2012-01", value: 6.8 }\n  , { series: "New York", date: "2000-01", value: 5.3 }\n  , { series: "New York", date: "2002-01", value: 7.2 }\n  , { series: "New York", date: "2004-01", value: 6.1 }\n  , { series: "New York", date: "2006-01", value: 4.9 }\n  , { series: "New York", date: "2008-01", value: 5.3 }\n  , { series: "New York", date: "2010-01", value: 9.2 }\n  , { series: "New York", date: "2012-01", value: 7.8 }\n  , { series: "Austin", date: "2000-01", value: 2.9 }\n  , { series: "Austin", date: "2002-01", value: 4.8 }\n  , { series: "Austin", date: "2004-01", value: 4.2 }\n  , { series: "Austin", date: "2006-01", value: 3.5 }\n  , { series: "Austin", date: "2008-01", value: 3.8 }\n  , { series: "Austin", date: "2010-01", value: 6.5 }\n  , { series: "Austin", date: "2012-01", value: 5.1 }\n  , { series: "Seattle", date: "2000-01", value: 4.1 }\n  , { series: "Seattle", date: "2002-01", value: 6.3 }\n  , { series: "Seattle", date: "2004-01", value: 5.5 }\n  , { series: "Seattle", date: "2006-01", value: 4.2 }\n  , { series: "Seattle", date: "2008-01", value: 4.5 }\n  , { series: "Seattle", date: "2010-01", value: 7.8 }\n  , { series: "Seattle", date: "2012-01", value: 6.2 }\n  ]';
  var groupedBarData2 = '[ { state: "CA", age: "<10", population: 5038433.0 }\n  , { state: "CA", age: "10-19", population: 5055706.0 }\n  , { state: "CA", age: "20-29", population: 5310481.0 }\n  , { state: "CA", age: "30-39", population: 5354112.0 }\n  , { state: "TX", age: "<10", population: 4131018.0 }\n  , { state: "TX", age: "10-19", population: 3770007.0 }\n  , { state: "TX", age: "20-29", population: 3863019.0 }\n  , { state: "TX", age: "30-39", population: 3696647.0 }\n  , { state: "NY", age: "<10", population: 2275293.0 }\n  , { state: "NY", age: "10-19", population: 2363801.0 }\n  , { state: "NY", age: "20-29", population: 2885845.0 }\n  , { state: "NY", age: "30-39", population: 2754048.0 }\n  ]';
  var fallbackData = function(fields) {
    var generateFieldValue = function(field) {
      if (field.fieldType === "Number") {
        return field.name + ": 0.0";
      }
      ;
      if (field.fieldType === "String") {
        return field.name + (': "' + (field.name + '"'));
      }
      ;
      if (field.fieldType === "Int") {
        return field.name + ": 0";
      }
      ;
      return field.name + ": 0.0";
    };
    var sampleRow = "{ " + (intercalate7(", ")(map93(generateFieldValue)(fields)) + " }");
    var rows4 = intercalate7("\n  , ")([sampleRow, sampleRow, sampleRow]);
    return "[ " + (rows4 + "\n  ]");
  };
  var barChartData = "[ { x: 0.0, y: 30.0 }\n  , { x: 1.0, y: 45.0 }\n  , { x: 2.0, y: 60.0 }\n  , { x: 3.0, y: 55.0 }\n  , { x: 4.0, y: 70.0 }\n  , { x: 5.0, y: 65.0 }\n  , { x: 6.0, y: 80.0 }\n  , { x: 7.0, y: 75.0 }\n  , { x: 8.0, y: 90.0 }\n  , { x: 9.0, y: 85.0 }\n  , { x: 10.0, y: 95.0 }\n  , { x: 11.0, y: 100.0 }\n  ]";
  var anscombeData = "[ { x: 10.0, y: 8.04 }\n  , { x: 8.0, y: 6.95 }\n  , { x: 13.0, y: 7.58 }\n  , { x: 9.0, y: 8.81 }\n  , { x: 11.0, y: 8.33 }\n  , { x: 14.0, y: 9.96 }\n  , { x: 6.0, y: 7.24 }\n  , { x: 4.0, y: 4.26 }\n  , { x: 12.0, y: 10.84 }\n  , { x: 7.0, y: 4.82 }\n  , { x: 5.0, y: 5.68 }\n  ]";
  var generateExampleData = function(dataset) {
    if (dataset.id === "scatter") {
      return scatterData;
    }
    ;
    if (dataset.id === "sinewave") {
      return sineWaveData2;
    }
    ;
    if (dataset.id === "barchart") {
      return barChartData;
    }
    ;
    if (dataset.id === "anscombe") {
      return anscombeData;
    }
    ;
    if (dataset.id === "groupedbar") {
      return groupedBarData2;
    }
    ;
    if (dataset.id === "multiline") {
      return multiLineData2;
    }
    ;
    return fallbackData(dataset.fields);
  };
  var generateProject = function(config) {
    var exampleData = generateExampleData(config.dataset);
    var dataTypeName = config.vizName + "Data";
    var mainFile = (function() {
      if (config.includeMain) {
        return [{
          filename: "Main.purs",
          content: generateMain(config.vizName)(dataTypeName)
        }];
      }
      ;
      return [];
    })();
    var coerceFnName = "coerceTo" + dataTypeName;
    var baseFiles = [{
      filename: config.vizName + "/Unsafe.purs",
      content: generateUnsafe(config.vizName)(dataTypeName)(config.dataset.fields)
    }, {
      filename: config.vizName + "/Model.purs",
      content: generateModel(config.vizName)(dataTypeName)(config.dataset.fields)(exampleData)
    }, {
      filename: config.vizName + "/Draw.purs",
      content: generateDraw(config.vizName)(dataTypeName)(config.dataset.fields)(coerceFnName)
    }, {
      filename: config.vizName + "/index.html",
      content: generateHTML(config.vizName)
    }, {
      filename: config.vizName + "/README.md",
      content: generateREADME(config.vizName)(dataTypeName)(config.dataset.fields)
    }];
    return append122(baseFiles)(mainFile);
  };

  // output/PSD3.Wizard.Wizard/index.js
  var map94 = /* @__PURE__ */ map(functorArray);
  var eq21 = /* @__PURE__ */ eq(/* @__PURE__ */ eqArray(eqString));
  var show62 = /* @__PURE__ */ show(showDifficulty);
  var eq24 = /* @__PURE__ */ eq(eqDifficulty);
  var eq33 = /* @__PURE__ */ eq(/* @__PURE__ */ eqMaybe(eqDifficulty));
  var bind89 = /* @__PURE__ */ bind(bindMaybe);
  var pure53 = /* @__PURE__ */ pure(applicativeMaybe);
  var type_24 = /* @__PURE__ */ type_17(isPropInputType);
  var value17 = /* @__PURE__ */ value12(isPropString);
  var modify_47 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var bind120 = /* @__PURE__ */ bind(bindHalogenM);
  var get16 = /* @__PURE__ */ get(monadStateHalogenM);
  var discard93 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var pure120 = /* @__PURE__ */ pure(applicativeHalogenM);
  var when6 = /* @__PURE__ */ when(applicativeHalogenM);
  var ChooseDataset = /* @__PURE__ */ (function() {
    function ChooseDataset2() {
    }
    ;
    ChooseDataset2.value = new ChooseDataset2();
    return ChooseDataset2;
  })();
  var NameModule = /* @__PURE__ */ (function() {
    function NameModule2() {
    }
    ;
    NameModule2.value = new NameModule2();
    return NameModule2;
  })();
  var ReviewFiles = /* @__PURE__ */ (function() {
    function ReviewFiles2() {
    }
    ;
    ReviewFiles2.value = new ReviewFiles2();
    return ReviewFiles2;
  })();
  var Download = /* @__PURE__ */ (function() {
    function Download2() {
    }
    ;
    Download2.value = new Download2();
    return Download2;
  })();
  var SelectDataset = /* @__PURE__ */ (function() {
    function SelectDataset2(value0) {
      this.value0 = value0;
    }
    ;
    SelectDataset2.create = function(value0) {
      return new SelectDataset2(value0);
    };
    return SelectDataset2;
  })();
  var SetVizName = /* @__PURE__ */ (function() {
    function SetVizName2(value0) {
      this.value0 = value0;
    }
    ;
    SetVizName2.create = function(value0) {
      return new SetVizName2(value0);
    };
    return SetVizName2;
  })();
  var ToggleIncludeMain = /* @__PURE__ */ (function() {
    function ToggleIncludeMain2() {
    }
    ;
    ToggleIncludeMain2.value = new ToggleIncludeMain2();
    return ToggleIncludeMain2;
  })();
  var NextStep = /* @__PURE__ */ (function() {
    function NextStep2() {
    }
    ;
    NextStep2.value = new NextStep2();
    return NextStep2;
  })();
  var PreviousStep = /* @__PURE__ */ (function() {
    function PreviousStep2() {
    }
    ;
    PreviousStep2.value = new PreviousStep2();
    return PreviousStep2;
  })();
  var GoToStep = /* @__PURE__ */ (function() {
    function GoToStep2(value0) {
      this.value0 = value0;
    }
    ;
    GoToStep2.create = function(value0) {
      return new GoToStep2(value0);
    };
    return GoToStep2;
  })();
  var GenerateFiles = /* @__PURE__ */ (function() {
    function GenerateFiles2() {
    }
    ;
    GenerateFiles2.value = new GenerateFiles2();
    return GenerateFiles2;
  })();
  var DownloadZip = /* @__PURE__ */ (function() {
    function DownloadZip2() {
    }
    ;
    DownloadZip2.value = new DownloadZip2();
    return DownloadZip2;
  })();
  var CopyToClipboard = /* @__PURE__ */ (function() {
    function CopyToClipboard2() {
    }
    ;
    CopyToClipboard2.value = new CopyToClipboard2();
    return CopyToClipboard2;
  })();
  var SetDifficultyFilter = /* @__PURE__ */ (function() {
    function SetDifficultyFilter2(value0) {
      this.value0 = value0;
    }
    ;
    SetDifficultyFilter2.create = function(value0) {
      return new SetDifficultyFilter2(value0);
    };
    return SetDifficultyFilter2;
  })();
  var renderReviewFiles = function(state3) {
    var renderFile = function(file) {
      return details([classes(["wizard__file"])])([summary_([text5(file.filename)]), pre([classes(["wizard__code"])])([code_([text5(file.content)])])]);
    };
    return div2([classes(["wizard__step-content"])])([h2_([text5("Review Generated Files")]), p_([text5("Preview the files that will be generated for your project.")]), div2([classes(["wizard__file-list"])])(map94(renderFile)(state3.generatedFiles))]);
  };
  var renderHeader3 = function(state3) {
    return header([classes(["wizard__header"])])([h1_([text5("PSD3 Visualization Wizard")]), p([classes(["wizard__subtitle"])])([text5("Create a new PSD3 visualization project in 4 easy steps")])]);
  };
  var renderDownload = function(state3) {
    return div2([classes(["wizard__step-content wizard__step-content--centered"])])([h2_([text5("Download Your Project")]), p_([text5("Your visualization project is ready! Download it as a zip file or copy the code to your clipboard.")]), div2([classes(["wizard__download-options"])])([button([classes(["wizard__btn wizard__btn--primary wizard__btn--large"]), onClick(function(v) {
      return DownloadZip.value;
    })])([text5("\u{1F4E6} Download " + (state3.vizName + ".zip"))]), button([classes(["wizard__btn wizard__btn--secondary wizard__btn--large"]), onClick(function(v) {
      return CopyToClipboard.value;
    })])([text5("\u{1F4CB} Copy to Clipboard")])]), div2([classes(["wizard__next-steps"])])([h3_([text5("Next Steps")]), ol_([li_([text5("Extract the zip file to your project directory")]), li_([text5("Add your dependencies to spago.dhall or package.json")]), li_([text5("Customize the visualization in Draw.purs")]), li_([text5("Build with 'spago build'")]), li_([text5("Open index.html in your browser")])])])]);
  };
  var renderChooseDataset = function(state3) {
    var toLowerCase = (function() {
      var toLower2 = function(c) {
        var $73 = c >= "A" && c <= "Z";
        if ($73) {
          return fromMaybe(c)(fromCharCode3(toCharCode2(c) + 32 | 0));
        }
        ;
        return c;
      };
      var $151 = map94(toLower2);
      return function($152) {
        return fromCharArray($151(toCharArray($152)));
      };
    })();
    var intercalate8 = function(sep) {
      return function(arr) {
        return maybe("")(function(v) {
          var $75 = eq21(v.tail)([]);
          if ($75) {
            return v.head;
          }
          ;
          return v.head + (sep + intercalate8(sep)(v.tail));
        })(uncons(arr));
      };
    };
    var renderDatasetCard = function(dataset) {
      var isSelected = (function() {
        if (state3.selectedDataset instanceof Just) {
          return state3.selectedDataset.value0.id === dataset.id;
        }
        ;
        if (state3.selectedDataset instanceof Nothing) {
          return false;
        }
        ;
        throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 180, column 22 - line 182, column 27): " + [state3.selectedDataset.constructor.name]);
      })();
      var cardClass = "dataset-card" + (function() {
        if (isSelected) {
          return " dataset-card--selected";
        }
        ;
        return "";
      })();
      return div2([classes([cardClass]), onClick(function(v) {
        return new SelectDataset(dataset);
      })])([div2([classes(["dataset-card__header"])])([h3_([text5(dataset.name)]), span3([classes(["difficulty-badge difficulty-badge--" + toLowerCase(show62(dataset.difficulty))])])([text5(show62(dataset.difficulty))])]), p([classes(["dataset-card__description"])])([text5(dataset.description)]), div2([classes(["dataset-card__info"])])([strong_([text5("Fields: ")]), text5(intercalate8(", ")(map94(function(f) {
        return f.name + (": " + f.fieldType);
      })(dataset.fields)))]), div2([classes(["dataset-card__viz"])])([strong_([text5("Suggested: ")]), text5(dataset.suggestedViz)]), div2([classes(["dataset-card__note"])])([text5(dataset.educationalNote)])]);
    };
    var filteredDatasets = (function() {
      if (state3.filterDifficulty instanceof Nothing) {
        return allDatasets;
      }
      ;
      if (state3.filterDifficulty instanceof Just) {
        return filter(function(d23) {
          return eq24(d23.difficulty)(state3.filterDifficulty.value0);
        })(allDatasets);
      }
      ;
      throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 173, column 24 - line 175, column 79): " + [state3.filterDifficulty.constructor.name]);
    })();
    return div2([classes(["wizard__step-content"])])([h2_([text5("Choose a Dataset")]), p_([text5("Select an example dataset to get started. Each dataset includes sample data and suggestions for visualizations.")]), div2([classes(["wizard__filters"])])([label_([text5("Filter by difficulty:")]), button([classes(["filter-btn" + (function() {
      var $83 = eq33(state3.filterDifficulty)(Nothing.value);
      if ($83) {
        return " filter-btn--active";
      }
      ;
      return "";
    })()]), onClick(function(v) {
      return new SetDifficultyFilter(Nothing.value);
    })])([text5("All")]), button([classes(["filter-btn" + (function() {
      var $84 = eq33(state3.filterDifficulty)(new Just(Beginner.value));
      if ($84) {
        return " filter-btn--active";
      }
      ;
      return "";
    })()]), onClick(function(v) {
      return new SetDifficultyFilter(new Just(Beginner.value));
    })])([text5("Beginner")]), button([classes(["filter-btn" + (function() {
      var $85 = eq33(state3.filterDifficulty)(new Just(Intermediate.value));
      if ($85) {
        return " filter-btn--active";
      }
      ;
      return "";
    })()]), onClick(function(v) {
      return new SetDifficultyFilter(new Just(Intermediate.value));
    })])([text5("Intermediate")])]), div2([classes(["wizard__dataset-grid"])])(map94(renderDatasetCard)(filteredDatasets))]);
  };
  var isValidModuleName = function(name16) {
    var all4 = function(pred) {
      return function(arr) {
        var v = uncons(arr);
        if (v instanceof Nothing) {
          return true;
        }
        ;
        if (v instanceof Just) {
          return pred(v.value0.head) && all4(pred)(v.value0.tail);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 458, column 20 - line 460, column 58): " + [v.constructor.name]);
      };
    };
    var isUpperCase = function(c) {
      var code2 = toCharCode2(c);
      return code2 >= 65 && code2 <= 90;
    };
    var isLowerCase = function(c) {
      var code2 = toCharCode2(c);
      return code2 >= 97 && code2 <= 122;
    };
    var isDigitChar = function(c) {
      var code2 = toCharCode2(c);
      return code2 >= 48 && code2 <= 57;
    };
    var isAlphaNum = function(c) {
      return isUpperCase(c) || (isLowerCase(c) || isDigitChar(c));
    };
    var chars = toCharArray(name16);
    if (chars.length === 0) {
      return false;
    }
    ;
    return fromMaybe(false)(bind89(head(chars))(function(first2) {
      return pure53(isUpperCase(first2) && all4(isAlphaNum)(chars));
    }));
  };
  var renderNameModule = function(state3) {
    return div2([classes(["wizard__step-content"])])([h2_([text5("Name Your Visualization")]), p_([text5("Choose a name for your visualization module. It should be a valid PureScript module name (CamelCase, starting with uppercase).")]), div2([classes(["wizard__form-group"])])([label4([$$for("viz-name")])([text5("Visualization Name")]), input2([type_24(InputText.value), id2("viz-name"), value17(state3.vizName), placeholder3("e.g., MyScatterPlot"), onValueInput(SetVizName.create), classes(["wizard__input"])]), (function() {
      var $91 = isValidModuleName(state3.vizName) || state3.vizName === "";
      if ($91) {
        return div_([]);
      }
      ;
      return div2([classes(["wizard__error"])])([text5("Module name must start with uppercase and contain only letters and numbers")]);
    })()]), div2([classes(["wizard__form-group"])])([label_([input2([type_24(InputCheckbox.value), checked2(state3.includeMain), onChecked(function(v) {
      return ToggleIncludeMain.value;
    })]), text5(" Include Main.purs (for bundling with spago)")]), p([classes(["wizard__help-text"])])([text5("Main.purs provides an entry point for bundling your visualization. Check this if you plan to use 'spago bundle'.")])]), (function() {
      var $92 = state3.vizName !== "" && isValidModuleName(state3.vizName);
      if ($92) {
        return div2([classes(["wizard__preview"])])([h3_([text5("Files that will be generated:")]), ul_([li_([text5(state3.vizName + "/Unsafe.purs")]), li_([text5(state3.vizName + "/Model.purs")]), li_([text5(state3.vizName + "/Draw.purs")]), li_([text5(state3.vizName + "/index.html")]), li_([text5(state3.vizName + "/README.md")]), (function() {
          if (state3.includeMain) {
            return li_([text5("Main.purs")]);
          }
          ;
          return text5("");
        })()])]);
      }
      ;
      return div_([]);
    })()]);
  };
  var renderStepContent = function(dictMonadAff) {
    return function(state3) {
      return div2([classes(["wizard__content"])])([(function() {
        if (state3.currentStep instanceof ChooseDataset) {
          return renderChooseDataset(state3);
        }
        ;
        if (state3.currentStep instanceof NameModule) {
          return renderNameModule(state3);
        }
        ;
        if (state3.currentStep instanceof ReviewFiles) {
          return renderReviewFiles(state3);
        }
        ;
        if (state3.currentStep instanceof Download) {
          return renderDownload(state3);
        }
        ;
        throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 131, column 7 - line 135, column 41): " + [state3.currentStep.constructor.name]);
      })()]);
    };
  };
  var initialState6 = /* @__PURE__ */ (function() {
    return {
      currentStep: ChooseDataset.value,
      selectedDataset: Nothing.value,
      vizName: "",
      includeMain: true,
      generatedFiles: [],
      filterDifficulty: Nothing.value
    };
  })();
  var eqWizardStep = {
    eq: function(x46) {
      return function(y46) {
        if (x46 instanceof ChooseDataset && y46 instanceof ChooseDataset) {
          return true;
        }
        ;
        if (x46 instanceof NameModule && y46 instanceof NameModule) {
          return true;
        }
        ;
        if (x46 instanceof ReviewFiles && y46 instanceof ReviewFiles) {
          return true;
        }
        ;
        if (x46 instanceof Download && y46 instanceof Download) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq42 = /* @__PURE__ */ eq(eqWizardStep);
  var renderNavigation = function(state3) {
    var canProceed = (function() {
      if (state3.currentStep instanceof ChooseDataset) {
        return isJust(state3.selectedDataset);
      }
      ;
      if (state3.currentStep instanceof NameModule) {
        return state3.vizName !== "" && isValidModuleName(state3.vizName);
      }
      ;
      if (state3.currentStep instanceof ReviewFiles) {
        return true;
      }
      ;
      if (state3.currentStep instanceof Download) {
        return true;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 363, column 18 - line 367, column 23): " + [state3.currentStep.constructor.name]);
    })();
    return div2([classes(["wizard__navigation"])])([button([classes(["wizard__btn wizard__btn--secondary"]), onClick(function(v) {
      return PreviousStep.value;
    }), disabled10(eq42(state3.currentStep)(ChooseDataset.value))])([text5("\u2190 Previous")]), button([classes(["wizard__btn wizard__btn--primary"]), onClick(function(v) {
      return NextStep.value;
    }), disabled10(!canProceed)])([text5((function() {
      var $98 = eq42(state3.currentStep)(Download.value);
      if ($98) {
        return "Restart";
      }
      ;
      return "Next \u2192";
    })())])]);
  };
  var renderProgressBar = function(state3) {
    var stepIndex = function(v) {
      if (v instanceof ChooseDataset) {
        return 0;
      }
      ;
      if (v instanceof NameModule) {
        return 1;
      }
      ;
      if (v instanceof ReviewFiles) {
        return 2;
      }
      ;
      if (v instanceof Download) {
        return 3;
      }
      ;
      throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 120, column 5 - line 120, column 35): " + [v.constructor.name]);
    };
    var renderStep = function(step4) {
      return function(num) {
        return function(label5) {
          var isCompleted = stepIndex(state3.currentStep) > stepIndex(step4);
          var isActive = eq42(state3.currentStep)(step4);
          var classes2 = "wizard__step" + ((function() {
            if (isActive) {
              return " wizard__step--active";
            }
            ;
            return "";
          })() + (function() {
            if (isCompleted) {
              return " wizard__step--completed";
            }
            ;
            return "";
          })());
          return div2([classes([classes2]), onClick(function(v) {
            return new GoToStep(step4);
          })])([div2([classes(["wizard__step-number"])])([text5(num)]), div2([classes(["wizard__step-label"])])([text5(label5)])]);
        };
      };
    };
    return div2([classes(["wizard__progress"])])([renderStep(ChooseDataset.value)("1")("Choose Dataset"), renderStep(NameModule.value)("2")("Name Module"), renderStep(ReviewFiles.value)("3")("Review Files"), renderStep(Download.value)("4")("Download")]);
  };
  var render74 = function(dictMonadAff) {
    var renderStepContent1 = renderStepContent(dictMonadAff);
    return function(state3) {
      return div2([classes(["wizard"])])([renderHeader3(state3), renderProgressBar(state3), renderStepContent1(state3), renderNavigation(state3)]);
    };
  };
  var canGoToStep = function(state3) {
    return function(step4) {
      if (step4 instanceof ChooseDataset) {
        return true;
      }
      ;
      if (step4 instanceof NameModule) {
        return isJust(state3.selectedDataset);
      }
      ;
      if (step4 instanceof ReviewFiles) {
        return isJust(state3.selectedDataset) && (state3.vizName !== "" && isValidModuleName(state3.vizName));
      }
      ;
      if (step4 instanceof Download) {
        return isJust(state3.selectedDataset) && (state3.vizName !== "" && isValidModuleName(state3.vizName));
      }
      ;
      throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 435, column 26 - line 439, column 101): " + [step4.constructor.name]);
    };
  };
  var handleAction61 = function(dictMonadAff) {
    var liftAff37 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect53 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    return function(v) {
      if (v instanceof SelectDataset) {
        return modify_47(function(v1) {
          var $104 = {};
          for (var $105 in v1) {
            if ({}.hasOwnProperty.call(v1, $105)) {
              $104[$105] = v1[$105];
            }
            ;
          }
          ;
          $104.selectedDataset = new Just(v.value0);
          return $104;
        });
      }
      ;
      if (v instanceof SetVizName) {
        return modify_47(function(v1) {
          var $108 = {};
          for (var $109 in v1) {
            if ({}.hasOwnProperty.call(v1, $109)) {
              $108[$109] = v1[$109];
            }
            ;
          }
          ;
          $108.vizName = trim(v.value0);
          return $108;
        });
      }
      ;
      if (v instanceof ToggleIncludeMain) {
        return modify_47(function(s) {
          var $112 = {};
          for (var $113 in s) {
            if ({}.hasOwnProperty.call(s, $113)) {
              $112[$113] = s[$113];
            }
            ;
          }
          ;
          $112.includeMain = !s.includeMain;
          return $112;
        });
      }
      ;
      if (v instanceof NextStep) {
        return bind120(get16)(function(state3) {
          if (state3.currentStep instanceof ChooseDataset) {
            return modify_47(function(v1) {
              var $116 = {};
              for (var $117 in v1) {
                if ({}.hasOwnProperty.call(v1, $117)) {
                  $116[$117] = v1[$117];
                }
                ;
              }
              ;
              $116.currentStep = NameModule.value;
              return $116;
            });
          }
          ;
          if (state3.currentStep instanceof NameModule) {
            return discard93(handleAction61(dictMonadAff)(GenerateFiles.value))(function() {
              return modify_47(function(v1) {
                var $119 = {};
                for (var $120 in v1) {
                  if ({}.hasOwnProperty.call(v1, $120)) {
                    $119[$120] = v1[$120];
                  }
                  ;
                }
                ;
                $119.currentStep = ReviewFiles.value;
                return $119;
              });
            });
          }
          ;
          if (state3.currentStep instanceof ReviewFiles) {
            return modify_47(function(v1) {
              var $122 = {};
              for (var $123 in v1) {
                if ({}.hasOwnProperty.call(v1, $123)) {
                  $122[$123] = v1[$123];
                }
                ;
              }
              ;
              $122.currentStep = Download.value;
              return $122;
            });
          }
          ;
          if (state3.currentStep instanceof Download) {
            return modify_47(function(v1) {
              var $125 = {};
              for (var $126 in v1) {
                if ({}.hasOwnProperty.call(v1, $126)) {
                  $125[$126] = v1[$126];
                }
                ;
              }
              ;
              $125.currentStep = ChooseDataset.value;
              return $125;
            });
          }
          ;
          throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 383, column 5 - line 389, column 62): " + [state3.currentStep.constructor.name]);
        });
      }
      ;
      if (v instanceof PreviousStep) {
        return bind120(get16)(function(state3) {
          if (state3.currentStep instanceof NameModule) {
            return modify_47(function(v1) {
              var $129 = {};
              for (var $130 in v1) {
                if ({}.hasOwnProperty.call(v1, $130)) {
                  $129[$130] = v1[$130];
                }
                ;
              }
              ;
              $129.currentStep = ChooseDataset.value;
              return $129;
            });
          }
          ;
          if (state3.currentStep instanceof ReviewFiles) {
            return modify_47(function(v1) {
              var $132 = {};
              for (var $133 in v1) {
                if ({}.hasOwnProperty.call(v1, $133)) {
                  $132[$133] = v1[$133];
                }
                ;
              }
              ;
              $132.currentStep = NameModule.value;
              return $132;
            });
          }
          ;
          if (state3.currentStep instanceof Download) {
            return modify_47(function(v1) {
              var $135 = {};
              for (var $136 in v1) {
                if ({}.hasOwnProperty.call(v1, $136)) {
                  $135[$136] = v1[$136];
                }
                ;
              }
              ;
              $135.currentStep = ReviewFiles.value;
              return $135;
            });
          }
          ;
          if (state3.currentStep instanceof ChooseDataset) {
            return pure120(unit);
          }
          ;
          throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 393, column 5 - line 397, column 33): " + [state3.currentStep.constructor.name]);
        });
      }
      ;
      if (v instanceof GoToStep) {
        return bind120(get16)(function(state3) {
          return when6(canGoToStep(state3)(v.value0))(modify_47(function(v1) {
            var $138 = {};
            for (var $139 in v1) {
              if ({}.hasOwnProperty.call(v1, $139)) {
                $138[$139] = v1[$139];
              }
              ;
            }
            ;
            $138.currentStep = v.value0;
            return $138;
          }));
        });
      }
      ;
      if (v instanceof GenerateFiles) {
        return bind120(get16)(function(state3) {
          if (state3.selectedDataset instanceof Just) {
            var config = {
              vizName: state3.vizName,
              dataset: state3.selectedDataset.value0,
              includeMain: state3.includeMain
            };
            var files2 = generateProject(config);
            return modify_47(function(v1) {
              var $143 = {};
              for (var $144 in v1) {
                if ({}.hasOwnProperty.call(v1, $144)) {
                  $143[$144] = v1[$144];
                }
                ;
              }
              ;
              $143.generatedFiles = files2;
              return $143;
            });
          }
          ;
          if (state3.selectedDataset instanceof Nothing) {
            return pure120(unit);
          }
          ;
          throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 407, column 5 - line 418, column 27): " + [state3.selectedDataset.constructor.name]);
        });
      }
      ;
      if (v instanceof DownloadZip) {
        return bind120(get16)(function(state3) {
          return liftAff37(downloadAsZip(state3.vizName)(state3.generatedFiles));
        });
      }
      ;
      if (v instanceof CopyToClipboard) {
        return bind120(get16)(function(state3) {
          return bind120(liftEffect53(copyFilesToClipboard(state3.generatedFiles)))(function(success) {
            return pure120(unit);
          });
        });
      }
      ;
      if (v instanceof SetDifficultyFilter) {
        return modify_47(function(v1) {
          var $147 = {};
          for (var $148 in v1) {
            if ({}.hasOwnProperty.call(v1, $148)) {
              $147[$148] = v1[$148];
            }
            ;
          }
          ;
          $147.filterDifficulty = v.value0;
          return $147;
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Wizard.Wizard (line 371, column 16 - line 431, column 50): " + [v.constructor.name]);
    };
  };
  var component69 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: $$const(initialState6),
      render: render74(monadAffAff),
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        initialize: defaultEval.initialize,
        finalize: defaultEval.finalize,
        handleAction: handleAction61(monadAffAff)
      })
    });
  })();

  // output/Routing.Parser/index.js
  var map95 = /* @__PURE__ */ map(functorArray);
  var discard94 = /* @__PURE__ */ discard(discardUnit)(bindMaybe);
  var guard3 = /* @__PURE__ */ guard(alternativeMaybe);
  var apply5 = /* @__PURE__ */ apply(applyMaybe);
  var map129 = /* @__PURE__ */ map(functorMaybe);
  var fromFoldable47 = /* @__PURE__ */ fromFoldable(ordString)(foldableArray);
  var traverse6 = /* @__PURE__ */ traverse(traversableArray)(applicativeMaybe);
  var fromFoldable123 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var append36 = /* @__PURE__ */ append(semigroupList);
  var map210 = /* @__PURE__ */ map(functorList);
  var fromFoldable212 = /* @__PURE__ */ fromFoldable3(foldableMaybe);
  var parseQueryPart = function(decoder) {
    var part2tuple = function(input3) {
      var keyVal = map95(decoder)(split("=")(input3));
      return discard94(guard3(length3(keyVal) <= 2))(function() {
        return apply5(map129(Tuple.create)(head(keyVal)))(index2(keyVal)(1));
      });
    };
    var $27 = map129(fromFoldable47);
    var $28 = traverse6(part2tuple);
    var $29 = split("&");
    return function($30) {
      return $27($28($29($30)));
    };
  };
  var parse8 = function(decoder) {
    return function(hash2) {
      var pathParts = function(str2) {
        var parts = fromFoldable123(map95(function($31) {
          return Path.create(decoder($31));
        })(split("/")(str2)));
        var v2 = unsnoc(parts);
        if (v2 instanceof Just && (v2.value0.last instanceof Path && v2.value0.last.value0 === "")) {
          return v2.value0.init;
        }
        ;
        return parts;
      };
      var v = map129(flip(splitAt3)(hash2))(indexOf2("?")(hash2));
      if (v instanceof Just) {
        return append36(pathParts(v.value0.before))(map210(Query2.create)(fromFoldable212(parseQueryPart(decoder)(drop5(1)(v.value0.after)))));
      }
      ;
      if (v instanceof Nothing) {
        return pathParts(hash2);
      }
      ;
      throw new Error("Failed pattern match at Routing.Parser (line 32, column 3 - line 37, column 21): " + [v.constructor.name]);
    };
  };

  // output/Routing/index.js
  var fromJust6 = /* @__PURE__ */ fromJust();
  var matchWith = function(decoder) {
    return function(matcher) {
      var $2 = runMatch(matcher);
      var $3 = parse8(decoder);
      return function($4) {
        return $2($3($4));
      };
    };
  };
  var match = /* @__PURE__ */ matchWith(function($6) {
    return fromJust6($$decodeURIComponent($6));
  });

  // output/Web.HTML.Event.HashChangeEvent.EventTypes/index.js
  var hashchange = "hashchange";

  // output/Routing.Hash/index.js
  var bind90 = /* @__PURE__ */ bind(bindEffect);
  var map96 = /* @__PURE__ */ map(functorEffect);
  var bindFlipped9 = /* @__PURE__ */ bindFlipped(bindEffect);
  var join4 = /* @__PURE__ */ join(bindEffect);
  var apply6 = /* @__PURE__ */ apply(applyEffect);
  var pure54 = /* @__PURE__ */ pure(applicativeEffect);
  var voidRight3 = /* @__PURE__ */ voidRight(functorEffect);
  var setHash2 = function(h) {
    return bind90(bind90(windowImpl)(location))(setHash(h));
  };
  var getHash = /* @__PURE__ */ bind90(/* @__PURE__ */ bind90(windowImpl)(location))(/* @__PURE__ */ (function() {
    var $16 = map96((function() {
      var $18 = fromMaybe("");
      var $19 = stripPrefix("#");
      return function($20) {
        return $18($19($20));
      };
    })());
    return function($17) {
      return $16(hash($17));
    };
  })());
  var foldHashes = function(cb) {
    return function(init5) {
      return function __do5() {
        var ref2 = bindFlipped9($$new)(bindFlipped9(init5)(getHash))();
        var win = map96(toEventTarget)(windowImpl)();
        var listener = eventListener(function(v) {
          return bindFlipped9(flip(write)(ref2))(join4(apply6(map96(cb)(read(ref2)))(getHash)));
        })();
        addEventListener(hashchange)(listener)(false)(win)();
        return removeEventListener(hashchange)(listener)(false)(win);
      };
    };
  };
  var matchesWith = function(dictFoldable) {
    var indexl2 = indexl(dictFoldable);
    return function(parser) {
      return function(cb) {
        var go2 = function(a2) {
          var $21 = maybe(pure54(a2))(function(b2) {
            return voidRight3(new Just(b2))(cb(a2)(b2));
          });
          var $22 = indexl2(0);
          return function($23) {
            return $21($22(parser($23)));
          };
        };
        return foldHashes(go2)(go2(Nothing.value));
      };
    };
  };
  var matches2 = /* @__PURE__ */ (function() {
    var $24 = matchesWith(foldableEither);
    return function($25) {
      return $24(match($25));
    };
  })();

  // output/PSD3.Main/index.js
  var bind91 = /* @__PURE__ */ bind(bindHalogenM);
  var liftEffect52 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var discard95 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var when7 = /* @__PURE__ */ when(applicativeHalogenM);
  var pure55 = /* @__PURE__ */ pure(applicativeHalogenM);
  var modify_48 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var slot_20 = /* @__PURE__ */ slot_();
  var slot_110 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "example";
    }
  })(ordString);
  var component111 = /* @__PURE__ */ component6(monadAffAff);
  var spy8 = /* @__PURE__ */ spy();
  var slot_25 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "home";
    }
  })(ordUnit);
  var slot_33 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "gettingStarted";
    }
  })(ordUnit);
  var slot_42 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "wizard";
    }
  })(ordUnit);
  var slot_52 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "howtoIndex";
    }
  })(ordUnit);
  var slot_62 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "reference";
    }
  })(ordUnit);
  var slot_72 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "about";
    }
  })(ordUnit);
  var slot_82 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "understandingIndex";
    }
  })(ordUnit);
  var slot_92 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "understandingFinallyTagless";
    }
  })(ordUnit);
  var slot_102 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "understandingSelectionM";
    }
  })(ordUnit);
  var slot_112 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "understandingCapabilities";
    }
  })(ordUnit);
  var slot_122 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "understandingTypeSystem";
    }
  })(ordUnit);
  var slot_132 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "understandingDatumPattern";
    }
  })(ordUnit);
  var slot_142 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "understandingGrammar";
    }
  })(ordUnit);
  var slot_152 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "concepts";
    }
  })(ordUnit);
  var slot_162 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "patterns";
    }
  })(ordUnit);
  var slot_172 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "simpleCharts1";
    }
  })(ordUnit);
  var slot_182 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "simpleCharts2";
    }
  })(ordUnit);
  var slot_192 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "dataFlowViz";
    }
  })(ordUnit);
  var slot_202 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "movement";
    }
  })(ordUnit);
  var slot_21 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "hierarchies";
    }
  })(ordUnit);
  var slot_222 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "isometricCurveExperiment";
    }
  })(ordUnit);
  var slot_232 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "interpreters";
    }
  })(ordUnit);
  var slot_242 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "mermaidDiagrams";
    }
  })(ordUnit);
  var component210 = /* @__PURE__ */ component7(monadAffAff);
  var slot_252 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "forceNavigator";
    }
  })(ordUnit);
  var component310 = /* @__PURE__ */ component10(monadAffAff);
  var slot_26 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "codeExplorer";
    }
  })(ordUnit);
  var component410 = /* @__PURE__ */ component5(monadAffAff);
  var slot_27 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "codeExploration";
    }
  })(ordString);
  var slot_28 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "wealthHealth";
    }
  })(ordUnit);
  var component510 = /* @__PURE__ */ component68(monadAffAff)(monadEffectAff);
  var slot_29 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "fpFtw";
    }
  })(ordUnit);
  var component610 = /* @__PURE__ */ component11(monadAffAff);
  var slot_30 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "examplesGallery";
    }
  })(ordUnit);
  var slot_31 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "psd3v2Examples";
    }
  })(ordUnit);
  var component72 = /* @__PURE__ */ component8(monadEffectAff);
  var slot_322 = /* @__PURE__ */ slot_20({
    reflectSymbol: function() {
      return "acknowledgements";
    }
  })(ordUnit);
  var Initialize62 = /* @__PURE__ */ (function() {
    function Initialize63() {
    }
    ;
    Initialize63.value = new Initialize63();
    return Initialize63;
  })();
  var Navigate = /* @__PURE__ */ (function() {
    function Navigate2(value0) {
      this.value0 = value0;
    }
    ;
    Navigate2.create = function(value0) {
      return new Navigate2(value0);
    };
    return Navigate2;
  })();
  var RouteChanged = /* @__PURE__ */ (function() {
    function RouteChanged2(value0) {
      this.value0 = value0;
    }
    ;
    RouteChanged2.create = function(value0) {
      return new RouteChanged2(value0);
    };
    return RouteChanged2;
  })();
  var handleAction62 = function(v) {
    if (v instanceof Initialize62) {
      return bind91(liftEffect52(function __do5() {
        var w = windowImpl();
        var loc = location(w)();
        return hash(loc)();
      }))(function(currentHash) {
        return discard95(when7(currentHash === "" || (currentHash === "#" || currentHash === "#/"))(liftEffect52(setHash2(routeToPath(Home.value)))))(function() {
          return bind91(subscribe2(makeEmitter(function(push2) {
            return matches2(routing)(function(v1) {
              return function(newRoute) {
                return push2(new RouteChanged(new Just(newRoute)));
              };
            });
          })))(function() {
            return pure55(unit);
          });
        });
      });
    }
    ;
    if (v instanceof Navigate) {
      return liftEffect52(setHash2(routeToPath(v.value0)));
    }
    ;
    if (v instanceof RouteChanged) {
      if (v.value0 instanceof Just) {
        return modify_48(function(v1) {
          var $129 = {};
          for (var $130 in v1) {
            if ({}.hasOwnProperty.call(v1, $130)) {
              $129[$130] = v1[$130];
            }
            ;
          }
          ;
          $129.currentRoute = v.value0.value0;
          return $129;
        });
      }
      ;
      if (v.value0 instanceof Nothing) {
        return modify_48(function(v1) {
          var $133 = {};
          for (var $134 in v1) {
            if ({}.hasOwnProperty.call(v1, $134)) {
              $133[$134] = v1[$134];
            }
            ;
          }
          ;
          $133.currentRoute = NotFound.value;
          return $133;
        });
      }
      ;
      throw new Error("Failed pattern match at PSD3.Main (line 307, column 5 - line 310, column 57): " + [v.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Main (line 283, column 16 - line 310, column 57): " + [v.constructor.name]);
  };
  var _wizard = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _wealthHealth2 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingTypeSystem = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingSelectionM = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingIndex = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingGrammar = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingFinallyTagless = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingDatumPattern = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingCapabilities = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _simpleCharts2 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _simpleCharts1 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _reference = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _psd3v2Examples = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _patterns = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _movement = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _mermaidDiagrams = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _isometricCurveExperiment = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _interpreters = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoIndex = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _home = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _hierarchies = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _gettingStarted = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _fpFtw = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _forceNavigator = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _examplesGallery = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _example = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderExamplePage = function(exampleId) {
    return slot_110(_example)(exampleId)(component111)(exampleId);
  };
  var _dataFlowViz = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _concepts = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _codeExplorer = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _codeExploration = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _acknowledgements = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _about = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderPage = function(route) {
    var v = spy8("Route is")(route);
    if (v instanceof Home) {
      return slot_25(_home)(unit)(component12)(unit);
    }
    ;
    if (v instanceof GettingStarted) {
      return slot_33(_gettingStarted)(unit)(component47)(unit);
    }
    ;
    if (v instanceof Wizard) {
      return slot_42(_wizard)(unit)(component69)(unit);
    }
    ;
    if (v instanceof HowtoIndex) {
      return slot_52(_howtoIndex)(unit)(component14)(unit);
    }
    ;
    if (v instanceof Reference) {
      return slot_62(_reference)(unit)(component46)(Reference.value);
    }
    ;
    if (v instanceof ReferenceModule) {
      return slot_62(_reference)(unit)(component46)(new ReferenceModule(v.value0));
    }
    ;
    if (v instanceof About) {
      return slot_72(_about)(unit)(component48)(unit);
    }
    ;
    if (v instanceof UnderstandingIndex) {
      return slot_82(_understandingIndex)(unit)(component64)(unit);
    }
    ;
    if (v instanceof UnderstandingFinallyTagless) {
      return slot_92(_understandingFinallyTagless)(unit)(component62)(unit);
    }
    ;
    if (v instanceof UnderstandingSelectionM) {
      return slot_102(_understandingSelectionM)(unit)(component65)(unit);
    }
    ;
    if (v instanceof UnderstandingCapabilities) {
      return slot_112(_understandingCapabilities)(unit)(component60)(unit);
    }
    ;
    if (v instanceof UnderstandingTypeSystem) {
      return slot_122(_understandingTypeSystem)(unit)(component66)(unit);
    }
    ;
    if (v instanceof UnderstandingDatumPattern) {
      return slot_132(_understandingDatumPattern)(unit)(component61)(unit);
    }
    ;
    if (v instanceof UnderstandingGrammar) {
      return slot_142(_understandingGrammar)(unit)(component63)(unit);
    }
    ;
    if (v instanceof UnderstandingConcepts) {
      return slot_152(_concepts)(unit)(component50)(unit);
    }
    ;
    if (v instanceof UnderstandingPatterns) {
      return slot_162(_patterns)(unit)(component57)(unit);
    }
    ;
    if (v instanceof UnderstandingPhilosophy) {
      return slot_72(_about)(unit)(component48)(unit);
    }
    ;
    if (v instanceof SimpleCharts1) {
      return slot_172(_simpleCharts1)(unit)(component58)(unit);
    }
    ;
    if (v instanceof SimpleCharts2) {
      return slot_182(_simpleCharts2)(unit)(component59)(unit);
    }
    ;
    if (v instanceof DataFlowViz) {
      return slot_192(_dataFlowViz)(unit)(component51)(unit);
    }
    ;
    if (v instanceof Movement) {
      return slot_202(_movement)(unit)(component55)(unit);
    }
    ;
    if (v instanceof Hierarchies) {
      return slot_21(_hierarchies)(unit)(component52)(unit);
    }
    ;
    if (v instanceof IsometricCurveExperiment) {
      return slot_222(_isometricCurveExperiment)(unit)(component54)(unit);
    }
    ;
    if (v instanceof Interpreters) {
      return slot_232(_interpreters)(unit)(component53)(unit);
    }
    ;
    if (v instanceof MermaidDiagrams) {
      return slot_242(_mermaidDiagrams)(unit)(component210)(unit);
    }
    ;
    if (v instanceof ForceNavigator) {
      return slot_252(_forceNavigator)(unit)(component310)(unit);
    }
    ;
    if (v instanceof CodeExplorer) {
      return slot_26(_codeExplorer)(unit)(component410)(unit);
    }
    ;
    if (v instanceof Explore) {
      return slot_27(_codeExploration)(v.value0)(component3)(v.value0);
    }
    ;
    if (v instanceof WealthHealth) {
      return slot_28(_wealthHealth2)(unit)(component510)(unit);
    }
    ;
    if (v instanceof CodeAtlas) {
      return div_([text5("CodeAtlas archived - under reconstruction")]);
    }
    ;
    if (v instanceof FpFtw) {
      return slot_29(_fpFtw)(unit)(component610)(unit);
    }
    ;
    if (v instanceof ExamplesGallery) {
      return slot_30(_examplesGallery)(unit)(component9)(unit);
    }
    ;
    if (v instanceof PSD3v2Examples) {
      return slot_31(_psd3v2Examples)(unit)(component72)(unit);
    }
    ;
    if (v instanceof Example) {
      return renderExamplePage(v.value0);
    }
    ;
    if (v instanceof Acknowledgements) {
      return slot_322(_acknowledgements)(unit)(component)(unit);
    }
    ;
    if (v instanceof NotFound) {
      return div2([classes(["not-found"])])([h1_([text5("404 - Page Not Found")]), p_([text5("The page you're looking for doesn't exist.")]), a([href4("#" + routeToPath(Home.value))])([text5("Go to Home")])]);
    }
    ;
    throw new Error("Failed pattern match at PSD3.Main (line 161, column 20 - line 275, column 8): " + [v.constructor.name]);
  };
  var render75 = function(state3) {
    return div2([classes(["app"])])([main([classes(["app__main"])])([renderPage(state3.currentRoute)])]);
  };
  var component70 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v) {
        return {
          currentRoute: Home.value
        };
      },
      render: render75,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction62,
        initialize: new Just(Initialize62.value)
      })
    });
  })();
  var main2 = /* @__PURE__ */ runHalogenAff(/* @__PURE__ */ bind(bindAff)(awaitBody)(function(body2) {
    return runUI2(component70)(unit)(body2);
  }));

  // <stdin>
  main2();
})();
